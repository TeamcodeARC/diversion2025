function pW(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var gW={exports:{}},tw={},yW={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg=Symbol.for("react.element"),Tne=Symbol.for("react.portal"),$ne=Symbol.for("react.fragment"),Ene=Symbol.for("react.strict_mode"),Ine=Symbol.for("react.profiler"),Ane=Symbol.for("react.provider"),One=Symbol.for("react.context"),Nne=Symbol.for("react.forward_ref"),Pne=Symbol.for("react.suspense"),Rne=Symbol.for("react.memo"),Dne=Symbol.for("react.lazy"),kM=Symbol.iterator;function Mne(t){return t===null||typeof t!="object"?null:(t=kM&&t[kM]||t["@@iterator"],typeof t=="function"?t:null)}var vW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_W=Object.assign,xW={};function od(t,e,n){this.props=t,this.context=e,this.refs=xW,this.updater=n||vW}od.prototype.isReactComponent={};od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bW(){}bW.prototype=od.prototype;function S2(t,e,n){this.props=t,this.context=e,this.refs=xW,this.updater=n||vW}var k2=S2.prototype=new bW;k2.constructor=S2;_W(k2,od.prototype);k2.isPureReactComponent=!0;var CM=Array.isArray,wW=Object.prototype.hasOwnProperty,C2={current:null},SW={key:!0,ref:!0,__self:!0,__source:!0};function kW(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wW.call(e,r)&&!SW.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qg,type:t,key:s,ref:o,props:i,_owner:C2.current}}function Lne(t,e){return{$$typeof:qg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T2(t){return typeof t=="object"&&t!==null&&t.$$typeof===qg}function Fne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var TM=/\/+/g;function Ok(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fne(""+t.key):e.toString(36)}function l_(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qg:case Tne:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ok(o,0):r,CM(i)?(n="",t!=null&&(n=t.replace(TM,"$&/")+"/"),l_(i,e,n,"",function(u){return u})):i!=null&&(T2(i)&&(i=Lne(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(TM,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",CM(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ok(s,a);o+=l_(s,e,n,l,i)}else if(l=Mne(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ok(s,a++),o+=l_(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qv(t,e,n){if(t==null)return t;var r=[],i=0;return l_(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Bne(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ii={current:null},u_={transition:null},zne={ReactCurrentDispatcher:ii,ReactCurrentBatchConfig:u_,ReactCurrentOwner:C2};function CW(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:Qv,forEach:function(t,e,n){Qv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qv(t,function(){e++}),e},toArray:function(t){return Qv(t,function(e){return e})||[]},only:function(t){if(!T2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=od;ft.Fragment=$ne;ft.Profiler=Ine;ft.PureComponent=S2;ft.StrictMode=Ene;ft.Suspense=Pne;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zne;ft.act=CW;ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_W({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wW.call(e,l)&&!SW.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:qg,type:t.type,key:i,ref:s,props:r,_owner:o}};ft.createContext=function(t){return t={$$typeof:One,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ane,_context:t},t.Consumer=t};ft.createElement=kW;ft.createFactory=function(t){var e=kW.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:Nne,render:t}};ft.isValidElement=T2;ft.lazy=function(t){return{$$typeof:Dne,_payload:{_status:-1,_result:t},_init:Bne}};ft.memo=function(t,e){return{$$typeof:Rne,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=u_.transition;u_.transition={};try{t()}finally{u_.transition=e}};ft.unstable_act=CW;ft.useCallback=function(t,e){return ii.current.useCallback(t,e)};ft.useContext=function(t){return ii.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return ii.current.useDeferredValue(t)};ft.useEffect=function(t,e){return ii.current.useEffect(t,e)};ft.useId=function(){return ii.current.useId()};ft.useImperativeHandle=function(t,e,n){return ii.current.useImperativeHandle(t,e,n)};ft.useInsertionEffect=function(t,e){return ii.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return ii.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return ii.current.useMemo(t,e)};ft.useReducer=function(t,e,n){return ii.current.useReducer(t,e,n)};ft.useRef=function(t){return ii.current.useRef(t)};ft.useState=function(t){return ii.current.useState(t)};ft.useSyncExternalStore=function(t,e,n){return ii.current.useSyncExternalStore(t,e,n)};ft.useTransition=function(){return ii.current.useTransition()};ft.version="18.3.1";yW.exports=ft;var J=yW.exports;const X=Mt(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jne=J,Vne=Symbol.for("react.element"),Une=Symbol.for("react.fragment"),Wne=Object.prototype.hasOwnProperty,Gne=jne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hne={key:!0,ref:!0,__self:!0,__source:!0};function TW(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wne.call(e,r)&&!Hne.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Vne,type:t,key:s,ref:o,props:i,_owner:Gne.current}}tw.Fragment=Une;tw.jsx=TW;tw.jsxs=TW;gW.exports=tw;var V=gW.exports,$W={exports:{}},Qi={},EW={exports:{}},IW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,W){var G=D.length;D.push(W);e:for(;0<G;){var Y=G-1>>>1,ee=D[Y];if(0<i(ee,W))D[Y]=W,D[G]=ee,G=Y;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var W=D[0],G=D.pop();if(G!==W){D[0]=G;e:for(var Y=0,ee=D.length,se=ee>>>1;Y<se;){var fe=2*(Y+1)-1,le=D[fe],de=fe+1,Se=D[de];if(0>i(le,G))de<ee&&0>i(Se,le)?(D[Y]=Se,D[de]=G,Y=de):(D[Y]=le,D[fe]=G,Y=fe);else if(de<ee&&0>i(Se,G))D[Y]=Se,D[de]=G,Y=de;else break e}}return W}function i(D,W){var G=D.sortIndex-W.sortIndex;return G!==0?G:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,p=!1,m=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=D)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function w(D){if(_=!1,b(D),!m)if(n(l)!==null)m=!0,j(k);else{var W=n(u);W!==null&&U(w,W.startTime-D)}}function k(D,W){m=!1,_&&(_=!1,g(E),E=-1),p=!0;var G=f;try{for(b(W),h=n(l);h!==null&&(!(h.expirationTime>W)||D&&!N());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var ee=Y(h.expirationTime<=W);W=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(l)&&r(l),b(W)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var fe=n(u);fe!==null&&U(w,fe.startTime-W),se=!1}return se}finally{h=null,f=G,p=!1}}var C=!1,T=null,E=-1,A=5,$=-1;function N(){return!(t.unstable_now()-$<A)}function P(){if(T!==null){var D=t.unstable_now();$=D;var W=!0;try{W=T(!0,D)}finally{W?M():(C=!1,T=null)}}else C=!1}var M;if(typeof x=="function")M=function(){x(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=P,M=function(){z.postMessage(null)}}else M=function(){v(P,0)};function j(D){T=D,C||(C=!0,M())}function U(D,W){E=v(function(){D(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var G=f;f=W;try{return D()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=f;f=D;try{return W()}finally{f=G}},t.unstable_scheduleCallback=function(D,W,G){var Y=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,D){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,D={id:c++,callback:W,priorityLevel:D,startTime:G,expirationTime:ee,sortIndex:-1},G>Y?(D.sortIndex=G,e(u,D),n(l)===null&&D===n(u)&&(_?(g(E),E=-1):_=!0,U(w,G-Y))):(D.sortIndex=ee,e(l,D),m||p||(m=!0,j(k))),D},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(D){var W=f;return function(){var G=f;f=W;try{return D.apply(this,arguments)}finally{f=G}}}})(IW);EW.exports=IW;var Kne=EW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qne=J,Xi=Kne;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AW=new Set,Sm={};function Mc(t,e){df(t,e),df(t+"Capture",e)}function df(t,e){for(Sm[t]=e,t=0;t<e.length;t++)AW.add(e[t])}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BT=Object.prototype.hasOwnProperty,Xne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$M={},EM={};function Zne(t){return BT.call(EM,t)?!0:BT.call($M,t)?!1:Xne.test(t)?EM[t]=!0:($M[t]=!0,!1)}function Yne(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jne(t,e,n,r){if(e===null||typeof e>"u"||Yne(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function si(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xr[t]=new si(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xr[e]=new si(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xr[t]=new si(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xr[t]=new si(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xr[t]=new si(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xr[t]=new si(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xr[t]=new si(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xr[t]=new si(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xr[t]=new si(t,5,!1,t.toLowerCase(),null,!1,!1)});var $2=/[\-:]([a-z])/g;function E2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($2,E2);xr[e]=new si(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($2,E2);xr[e]=new si(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($2,E2);xr[e]=new si(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xr[t]=new si(t,1,!1,t.toLowerCase(),null,!1,!1)});xr.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xr[t]=new si(t,1,!1,t.toLowerCase(),null,!0,!0)});function I2(t,e,n,r){var i=xr.hasOwnProperty(e)?xr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jne(e,n,i,r)&&(n=null),r||i===null?Zne(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wa=qne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,e0=Symbol.for("react.element"),Ih=Symbol.for("react.portal"),Ah=Symbol.for("react.fragment"),A2=Symbol.for("react.strict_mode"),zT=Symbol.for("react.profiler"),OW=Symbol.for("react.provider"),NW=Symbol.for("react.context"),O2=Symbol.for("react.forward_ref"),jT=Symbol.for("react.suspense"),VT=Symbol.for("react.suspense_list"),N2=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),PW=Symbol.for("react.offscreen"),IM=Symbol.iterator;function sp(t){return t===null||typeof t!="object"?null:(t=IM&&t[IM]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,Nk;function Pp(t){if(Nk===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nk=e&&e[1]||""}return`
`+Nk+t}var Pk=!1;function Rk(t,e){if(!t||Pk)return"";Pk=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pk=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pp(t):""}function Qne(t){switch(t.tag){case 5:return Pp(t.type);case 16:return Pp("Lazy");case 13:return Pp("Suspense");case 19:return Pp("SuspenseList");case 0:case 2:case 15:return t=Rk(t.type,!1),t;case 11:return t=Rk(t.type.render,!1),t;case 1:return t=Rk(t.type,!0),t;default:return""}}function UT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ah:return"Fragment";case Ih:return"Portal";case zT:return"Profiler";case A2:return"StrictMode";case jT:return"Suspense";case VT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NW:return(t.displayName||"Context")+".Consumer";case OW:return(t._context.displayName||"Context")+".Provider";case O2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N2:return e=t.displayName||null,e!==null?e:UT(t.type)||"Memo";case al:e=t._payload,t=t._init;try{return UT(t(e))}catch{}}return null}function ere(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UT(e);case 8:return e===A2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tre(t){var e=RW(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function t0(t){t._valueTracker||(t._valueTracker=tre(t))}function DW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RW(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function M_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function WT(t,e){var n=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function AM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MW(t,e){e=e.checked,e!=null&&I2(t,"checked",e,!1)}function GT(t,e){MW(t,e);var n=Bl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?HT(t,e.type,n):e.hasOwnProperty("defaultValue")&&HT(t,e.type,Bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function HT(t,e,n){(e!=="number"||M_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rp=Array.isArray;function Zh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function KT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(Rp(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bl(n)}}function LW(t,e){var n=Bl(e.value),r=Bl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function PM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var n0,BW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(n0=n0||document.createElement("div"),n0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=n0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function km(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nre=["Webkit","ms","Moz","O"];Object.keys(Jp).forEach(function(t){nre.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jp[e]=Jp[t]})});function zW(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jp.hasOwnProperty(t)&&Jp[t]?(""+e).trim():e+"px"}function jW(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zW(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rre=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XT(t,e){if(e){if(rre[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function ZT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YT=null;function P2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var JT=null,Yh=null,Jh=null;function RM(t){if(t=Yg(t)){if(typeof JT!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=ow(e),JT(t.stateNode,t.type,e))}}function VW(t){Yh?Jh?Jh.push(t):Jh=[t]:Yh=t}function UW(){if(Yh){var t=Yh,e=Jh;if(Jh=Yh=null,RM(t),e)for(t=0;t<e.length;t++)RM(e[t])}}function WW(t,e){return t(e)}function GW(){}var Dk=!1;function HW(t,e,n){if(Dk)return t(e,n);Dk=!0;try{return WW(t,e,n)}finally{Dk=!1,(Yh!==null||Jh!==null)&&(GW(),UW())}}function Cm(t,e){var n=t.stateNode;if(n===null)return null;var r=ow(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var QT=!1;if(Ea)try{var op={};Object.defineProperty(op,"passive",{get:function(){QT=!0}}),window.addEventListener("test",op,op),window.removeEventListener("test",op,op)}catch{QT=!1}function ire(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qp=!1,L_=null,F_=!1,e$=null,sre={onError:function(t){Qp=!0,L_=t}};function ore(t,e,n,r,i,s,o,a,l){Qp=!1,L_=null,ire.apply(sre,arguments)}function are(t,e,n,r,i,s,o,a,l){if(ore.apply(this,arguments),Qp){if(Qp){var u=L_;Qp=!1,L_=null}else throw Error(_e(198));F_||(F_=!0,e$=u)}}function Lc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function DM(t){if(Lc(t)!==t)throw Error(_e(188))}function lre(t){var e=t.alternate;if(!e){if(e=Lc(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return DM(i),t;if(s===r)return DM(i),e;s=s.sibling}throw Error(_e(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function qW(t){return t=lre(t),t!==null?XW(t):null}function XW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XW(t);if(e!==null)return e;t=t.sibling}return null}var ZW=Xi.unstable_scheduleCallback,MM=Xi.unstable_cancelCallback,ure=Xi.unstable_shouldYield,cre=Xi.unstable_requestPaint,In=Xi.unstable_now,hre=Xi.unstable_getCurrentPriorityLevel,R2=Xi.unstable_ImmediatePriority,YW=Xi.unstable_UserBlockingPriority,B_=Xi.unstable_NormalPriority,fre=Xi.unstable_LowPriority,JW=Xi.unstable_IdlePriority,nw=null,Fo=null;function dre(t){if(Fo&&typeof Fo.onCommitFiberRoot=="function")try{Fo.onCommitFiberRoot(nw,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:gre,pre=Math.log,mre=Math.LN2;function gre(t){return t>>>=0,t===0?32:31-(pre(t)/mre|0)|0}var r0=64,i0=4194304;function Dp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function z_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Dp(a):(s&=o,s!==0&&(r=Dp(s)))}else o=n&~i,o!==0?r=Dp(o):s!==0&&(r=Dp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-io(e),i=1<<n,r|=t[n],e&=~i;return r}function yre(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vre(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-io(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=yre(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function t$(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QW(){var t=r0;return r0<<=1,!(r0&4194240)&&(r0=64),t}function Mk(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=n}function _re(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-io(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function D2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-io(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ot=0;function eG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tG,M2,nG,rG,iG,n$=!1,s0=[],Cl=null,Tl=null,$l=null,Tm=new Map,$m=new Map,fl=[],xre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LM(t,e){switch(t){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Tm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$m.delete(e.pointerId)}}function ap(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yg(e),e!==null&&M2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bre(t,e,n,r,i){switch(e){case"focusin":return Cl=ap(Cl,t,e,n,r,i),!0;case"dragenter":return Tl=ap(Tl,t,e,n,r,i),!0;case"mouseover":return $l=ap($l,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tm.set(s,ap(Tm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$m.set(s,ap($m.get(s)||null,t,e,n,r,i)),!0}return!1}function sG(t){var e=Uu(t.target);if(e!==null){var n=Lc(e);if(n!==null){if(e=n.tag,e===13){if(e=KW(n),e!==null){t.blockedOn=e,iG(t.priority,function(){nG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function c_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=r$(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);YT=r,n.target.dispatchEvent(r),YT=null}else return e=Yg(n),e!==null&&M2(e),t.blockedOn=n,!1;e.shift()}return!0}function FM(t,e,n){c_(t)&&n.delete(e)}function wre(){n$=!1,Cl!==null&&c_(Cl)&&(Cl=null),Tl!==null&&c_(Tl)&&(Tl=null),$l!==null&&c_($l)&&($l=null),Tm.forEach(FM),$m.forEach(FM)}function lp(t,e){t.blockedOn===e&&(t.blockedOn=null,n$||(n$=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,wre)))}function Em(t){function e(i){return lp(i,t)}if(0<s0.length){lp(s0[0],t);for(var n=1;n<s0.length;n++){var r=s0[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cl!==null&&lp(Cl,t),Tl!==null&&lp(Tl,t),$l!==null&&lp($l,t),Tm.forEach(e),$m.forEach(e),n=0;n<fl.length;n++)r=fl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fl.length&&(n=fl[0],n.blockedOn===null);)sG(n),n.blockedOn===null&&fl.shift()}var Qh=Wa.ReactCurrentBatchConfig,j_=!0;function Sre(t,e,n,r){var i=Ot,s=Qh.transition;Qh.transition=null;try{Ot=1,L2(t,e,n,r)}finally{Ot=i,Qh.transition=s}}function kre(t,e,n,r){var i=Ot,s=Qh.transition;Qh.transition=null;try{Ot=4,L2(t,e,n,r)}finally{Ot=i,Qh.transition=s}}function L2(t,e,n,r){if(j_){var i=r$(t,e,n,r);if(i===null)Hk(t,e,r,V_,n),LM(t,r);else if(bre(i,t,e,n,r))r.stopPropagation();else if(LM(t,r),e&4&&-1<xre.indexOf(t)){for(;i!==null;){var s=Yg(i);if(s!==null&&tG(s),s=r$(t,e,n,r),s===null&&Hk(t,e,r,V_,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hk(t,e,r,null,n)}}var V_=null;function r$(t,e,n,r){if(V_=null,t=P2(r),t=Uu(t),t!==null)if(e=Lc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KW(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return V_=t,null}function oG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hre()){case R2:return 1;case YW:return 4;case B_:case fre:return 16;case JW:return 536870912;default:return 16}default:return 16}}var gl=null,F2=null,h_=null;function aG(){if(h_)return h_;var t,e=F2,n=e.length,r,i="value"in gl?gl.value:gl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return h_=i.slice(t,1<r?1-r:void 0)}function f_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function o0(){return!0}function BM(){return!1}function es(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?o0:BM,this.isPropagationStopped=BM,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=o0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=o0)},persist:function(){},isPersistent:o0}),e}var ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B2=es(ad),Zg=yn({},ad,{view:0,detail:0}),Cre=es(Zg),Lk,Fk,up,rw=yn({},Zg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==up&&(up&&t.type==="mousemove"?(Lk=t.screenX-up.screenX,Fk=t.screenY-up.screenY):Fk=Lk=0,up=t),Lk)},movementY:function(t){return"movementY"in t?t.movementY:Fk}}),zM=es(rw),Tre=yn({},rw,{dataTransfer:0}),$re=es(Tre),Ere=yn({},Zg,{relatedTarget:0}),Bk=es(Ere),Ire=yn({},ad,{animationName:0,elapsedTime:0,pseudoElement:0}),Are=es(Ire),Ore=yn({},ad,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nre=es(Ore),Pre=yn({},ad,{data:0}),jM=es(Pre),Rre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lre(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mre[t])?!!e[t]:!1}function z2(){return Lre}var Fre=yn({},Zg,{key:function(t){if(t.key){var e=Rre[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=f_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dre[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z2,charCode:function(t){return t.type==="keypress"?f_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?f_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bre=es(Fre),zre=yn({},rw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VM=es(zre),jre=yn({},Zg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z2}),Vre=es(jre),Ure=yn({},ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wre=es(Ure),Gre=yn({},rw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hre=es(Gre),Kre=[9,13,27,32],j2=Ea&&"CompositionEvent"in window,em=null;Ea&&"documentMode"in document&&(em=document.documentMode);var qre=Ea&&"TextEvent"in window&&!em,lG=Ea&&(!j2||em&&8<em&&11>=em),UM=" ",WM=!1;function uG(t,e){switch(t){case"keyup":return Kre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oh=!1;function Xre(t,e){switch(t){case"compositionend":return cG(e);case"keypress":return e.which!==32?null:(WM=!0,UM);case"textInput":return t=e.data,t===UM&&WM?null:t;default:return null}}function Zre(t,e){if(Oh)return t==="compositionend"||!j2&&uG(t,e)?(t=aG(),h_=F2=gl=null,Oh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lG&&e.locale!=="ko"?null:e.data;default:return null}}var Yre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yre[t.type]:e==="textarea"}function hG(t,e,n,r){VW(r),e=U_(e,"onChange"),0<e.length&&(n=new B2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tm=null,Im=null;function Jre(t){wG(t,0)}function iw(t){var e=Rh(t);if(DW(e))return t}function Qre(t,e){if(t==="change")return e}var fG=!1;if(Ea){var zk;if(Ea){var jk="oninput"in document;if(!jk){var HM=document.createElement("div");HM.setAttribute("oninput","return;"),jk=typeof HM.oninput=="function"}zk=jk}else zk=!1;fG=zk&&(!document.documentMode||9<document.documentMode)}function KM(){tm&&(tm.detachEvent("onpropertychange",dG),Im=tm=null)}function dG(t){if(t.propertyName==="value"&&iw(Im)){var e=[];hG(e,Im,t,P2(t)),HW(Jre,e)}}function eie(t,e,n){t==="focusin"?(KM(),tm=e,Im=n,tm.attachEvent("onpropertychange",dG)):t==="focusout"&&KM()}function tie(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iw(Im)}function nie(t,e){if(t==="click")return iw(e)}function rie(t,e){if(t==="input"||t==="change")return iw(e)}function iie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var co=typeof Object.is=="function"?Object.is:iie;function Am(t,e){if(co(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!BT.call(e,i)||!co(t[i],e[i]))return!1}return!0}function qM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XM(t,e){var n=qM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qM(n)}}function pG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mG(){for(var t=window,e=M_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=M_(t.document)}return e}function V2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sie(t){var e=mG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pG(n.ownerDocument.documentElement,n)){if(r!==null&&V2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=XM(n,s);var o=XM(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oie=Ea&&"documentMode"in document&&11>=document.documentMode,Nh=null,i$=null,nm=null,s$=!1;function ZM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;s$||Nh==null||Nh!==M_(r)||(r=Nh,"selectionStart"in r&&V2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nm&&Am(nm,r)||(nm=r,r=U_(i$,"onSelect"),0<r.length&&(e=new B2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Nh)))}function a0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ph={animationend:a0("Animation","AnimationEnd"),animationiteration:a0("Animation","AnimationIteration"),animationstart:a0("Animation","AnimationStart"),transitionend:a0("Transition","TransitionEnd")},Vk={},gG={};Ea&&(gG=document.createElement("div").style,"AnimationEvent"in window||(delete Ph.animationend.animation,delete Ph.animationiteration.animation,delete Ph.animationstart.animation),"TransitionEvent"in window||delete Ph.transitionend.transition);function sw(t){if(Vk[t])return Vk[t];if(!Ph[t])return t;var e=Ph[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gG)return Vk[t]=e[n];return t}var yG=sw("animationend"),vG=sw("animationiteration"),_G=sw("animationstart"),xG=sw("transitionend"),bG=new Map,YM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zl(t,e){bG.set(t,e),Mc(e,[t])}for(var Uk=0;Uk<YM.length;Uk++){var Wk=YM[Uk],aie=Wk.toLowerCase(),lie=Wk[0].toUpperCase()+Wk.slice(1);Zl(aie,"on"+lie)}Zl(yG,"onAnimationEnd");Zl(vG,"onAnimationIteration");Zl(_G,"onAnimationStart");Zl("dblclick","onDoubleClick");Zl("focusin","onFocus");Zl("focusout","onBlur");Zl(xG,"onTransitionEnd");df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);Mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uie=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mp));function JM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,are(r,e,void 0,t),t.currentTarget=null}function wG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;JM(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;JM(i,a,u),s=l}}}if(F_)throw t=e$,F_=!1,e$=null,t}function Yt(t,e){var n=e[c$];n===void 0&&(n=e[c$]=new Set);var r=t+"__bubble";n.has(r)||(SG(e,t,2,!1),n.add(r))}function Gk(t,e,n){var r=0;e&&(r|=4),SG(n,t,r,e)}var l0="_reactListening"+Math.random().toString(36).slice(2);function Om(t){if(!t[l0]){t[l0]=!0,AW.forEach(function(n){n!=="selectionchange"&&(uie.has(n)||Gk(n,!1,t),Gk(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[l0]||(e[l0]=!0,Gk("selectionchange",!1,e))}}function SG(t,e,n,r){switch(oG(e)){case 1:var i=Sre;break;case 4:i=kre;break;default:i=L2}n=i.bind(null,e,n,t),i=void 0,!QT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hk(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Uu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}HW(function(){var u=s,c=P2(n),h=[];e:{var f=bG.get(t);if(f!==void 0){var p=B2,m=t;switch(t){case"keypress":if(f_(n)===0)break e;case"keydown":case"keyup":p=Bre;break;case"focusin":m="focus",p=Bk;break;case"focusout":m="blur",p=Bk;break;case"beforeblur":case"afterblur":p=Bk;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=zM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$re;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Vre;break;case yG:case vG:case _G:p=Are;break;case xG:p=Wre;break;case"scroll":p=Cre;break;case"wheel":p=Hre;break;case"copy":case"cut":case"paste":p=Nre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=VM}var _=(e&4)!==0,v=!_&&t==="scroll",g=_?f!==null?f+"Capture":null:f;_=[];for(var x=u,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,g!==null&&(w=Cm(x,g),w!=null&&_.push(Nm(x,w,b)))),v)break;x=x.return}0<_.length&&(f=new p(f,m,null,n,c),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==YT&&(m=n.relatedTarget||n.fromElement)&&(Uu(m)||m[Ia]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Uu(m):null,m!==null&&(v=Lc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(_=zM,w="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(_=VM,w="onPointerLeave",g="onPointerEnter",x="pointer"),v=p==null?f:Rh(p),b=m==null?f:Rh(m),f=new _(w,x+"leave",p,n,c),f.target=v,f.relatedTarget=b,w=null,Uu(c)===u&&(_=new _(g,x+"enter",m,n,c),_.target=b,_.relatedTarget=v,w=_),v=w,p&&m)t:{for(_=p,g=m,x=0,b=_;b;b=ph(b))x++;for(b=0,w=g;w;w=ph(w))b++;for(;0<x-b;)_=ph(_),x--;for(;0<b-x;)g=ph(g),b--;for(;x--;){if(_===g||g!==null&&_===g.alternate)break t;_=ph(_),g=ph(g)}_=null}else _=null;p!==null&&QM(h,f,p,_,!1),m!==null&&v!==null&&QM(h,v,m,_,!0)}}e:{if(f=u?Rh(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Qre;else if(GM(f))if(fG)k=rie;else{k=tie;var C=eie}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=nie);if(k&&(k=k(t,u))){hG(h,k,n,c);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&HT(f,"number",f.value)}switch(C=u?Rh(u):window,t){case"focusin":(GM(C)||C.contentEditable==="true")&&(Nh=C,i$=u,nm=null);break;case"focusout":nm=i$=Nh=null;break;case"mousedown":s$=!0;break;case"contextmenu":case"mouseup":case"dragend":s$=!1,ZM(h,n,c);break;case"selectionchange":if(oie)break;case"keydown":case"keyup":ZM(h,n,c)}var T;if(j2)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Oh?uG(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(lG&&n.locale!=="ko"&&(Oh||E!=="onCompositionStart"?E==="onCompositionEnd"&&Oh&&(T=aG()):(gl=c,F2="value"in gl?gl.value:gl.textContent,Oh=!0)),C=U_(u,E),0<C.length&&(E=new jM(E,t,null,n,c),h.push({event:E,listeners:C}),T?E.data=T:(T=cG(n),T!==null&&(E.data=T)))),(T=qre?Xre(t,n):Zre(t,n))&&(u=U_(u,"onBeforeInput"),0<u.length&&(c=new jM("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=T))}wG(h,e)})}function Nm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function U_(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cm(t,n),s!=null&&r.unshift(Nm(t,s,i)),s=Cm(t,e),s!=null&&r.push(Nm(t,s,i))),t=t.return}return r}function ph(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function QM(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cm(n,s),l!=null&&o.unshift(Nm(n,l,a))):i||(l=Cm(n,s),l!=null&&o.push(Nm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cie=/\r\n?/g,hie=/\u0000|\uFFFD/g;function eL(t){return(typeof t=="string"?t:""+t).replace(cie,`
`).replace(hie,"")}function u0(t,e,n){if(e=eL(e),eL(t)!==e&&n)throw Error(_e(425))}function W_(){}var o$=null,a$=null;function l$(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u$=typeof setTimeout=="function"?setTimeout:void 0,fie=typeof clearTimeout=="function"?clearTimeout:void 0,tL=typeof Promise=="function"?Promise:void 0,die=typeof queueMicrotask=="function"?queueMicrotask:typeof tL<"u"?function(t){return tL.resolve(null).then(t).catch(pie)}:u$;function pie(t){setTimeout(function(){throw t})}function Kk(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Em(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Em(e)}function El(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ld=Math.random().toString(36).slice(2),Ro="__reactFiber$"+ld,Pm="__reactProps$"+ld,Ia="__reactContainer$"+ld,c$="__reactEvents$"+ld,mie="__reactListeners$"+ld,gie="__reactHandles$"+ld;function Uu(t){var e=t[Ro];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ia]||n[Ro]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nL(t);t!==null;){if(n=t[Ro])return n;t=nL(t)}return e}t=n,n=t.parentNode}return null}function Yg(t){return t=t[Ro]||t[Ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function ow(t){return t[Pm]||null}var h$=[],Dh=-1;function Yl(t){return{current:t}}function tn(t){0>Dh||(t.current=h$[Dh],h$[Dh]=null,Dh--)}function Kt(t,e){Dh++,h$[Dh]=t.current,t.current=e}var zl={},Ur=Yl(zl),Si=Yl(!1),hc=zl;function pf(t,e){var n=t.type.contextTypes;if(!n)return zl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ki(t){return t=t.childContextTypes,t!=null}function G_(){tn(Si),tn(Ur)}function rL(t,e,n){if(Ur.current!==zl)throw Error(_e(168));Kt(Ur,e),Kt(Si,n)}function kG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(_e(108,ere(t)||"Unknown",i));return yn({},n,r)}function H_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zl,hc=Ur.current,Kt(Ur,t),Kt(Si,Si.current),!0}function iL(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=kG(t,e,hc),r.__reactInternalMemoizedMergedChildContext=t,tn(Si),tn(Ur),Kt(Ur,t)):tn(Si),Kt(Si,n)}var ha=null,aw=!1,qk=!1;function CG(t){ha===null?ha=[t]:ha.push(t)}function yie(t){aw=!0,CG(t)}function Jl(){if(!qk&&ha!==null){qk=!0;var t=0,e=Ot;try{var n=ha;for(Ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ha=null,aw=!1}catch(i){throw ha!==null&&(ha=ha.slice(t+1)),ZW(R2,Jl),i}finally{Ot=e,qk=!1}}return null}var Mh=[],Lh=0,K_=null,q_=0,ms=[],gs=0,fc=null,pa=1,ma="";function $u(t,e){Mh[Lh++]=q_,Mh[Lh++]=K_,K_=t,q_=e}function TG(t,e,n){ms[gs++]=pa,ms[gs++]=ma,ms[gs++]=fc,fc=t;var r=pa;t=ma;var i=32-io(r)-1;r&=~(1<<i),n+=1;var s=32-io(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pa=1<<32-io(e)+i|n<<i|r,ma=s+t}else pa=1<<s|n<<i|r,ma=t}function U2(t){t.return!==null&&($u(t,1),TG(t,1,0))}function W2(t){for(;t===K_;)K_=Mh[--Lh],Mh[Lh]=null,q_=Mh[--Lh],Mh[Lh]=null;for(;t===fc;)fc=ms[--gs],ms[gs]=null,ma=ms[--gs],ms[gs]=null,pa=ms[--gs],ms[gs]=null}var Hi=null,Wi=null,an=!1,Js=null;function $G(t,e){var n=_s(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hi=t,Wi=El(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hi=t,Wi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fc!==null?{id:pa,overflow:ma}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_s(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hi=t,Wi=null,!0):!1;default:return!1}}function f$(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d$(t){if(an){var e=Wi;if(e){var n=e;if(!sL(t,e)){if(f$(t))throw Error(_e(418));e=El(n.nextSibling);var r=Hi;e&&sL(t,e)?$G(r,n):(t.flags=t.flags&-4097|2,an=!1,Hi=t)}}else{if(f$(t))throw Error(_e(418));t.flags=t.flags&-4097|2,an=!1,Hi=t}}}function oL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hi=t}function c0(t){if(t!==Hi)return!1;if(!an)return oL(t),an=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!l$(t.type,t.memoizedProps)),e&&(e=Wi)){if(f$(t))throw EG(),Error(_e(418));for(;e;)$G(t,e),e=El(e.nextSibling)}if(oL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wi=El(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wi=null}}else Wi=Hi?El(t.stateNode.nextSibling):null;return!0}function EG(){for(var t=Wi;t;)t=El(t.nextSibling)}function mf(){Wi=Hi=null,an=!1}function G2(t){Js===null?Js=[t]:Js.push(t)}var vie=Wa.ReactCurrentBatchConfig;function cp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function h0(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function aL(t){var e=t._init;return e(t._payload)}function IG(t){function e(g,x){if(t){var b=g.deletions;b===null?(g.deletions=[x],g.flags|=16):b.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Nl(g,x),g.index=0,g.sibling=null,g}function s(g,x,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<x?(g.flags|=2,x):b):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,b,w){return x===null||x.tag!==6?(x=tC(b,g.mode,w),x.return=g,x):(x=i(x,b),x.return=g,x)}function l(g,x,b,w){var k=b.type;return k===Ah?c(g,x,b.props.children,w,b.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===al&&aL(k)===x.type)?(w=i(x,b.props),w.ref=cp(g,x,b),w.return=g,w):(w=__(b.type,b.key,b.props,null,g.mode,w),w.ref=cp(g,x,b),w.return=g,w)}function u(g,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=nC(b,g.mode,w),x.return=g,x):(x=i(x,b.children||[]),x.return=g,x)}function c(g,x,b,w,k){return x===null||x.tag!==7?(x=ic(b,g.mode,w,k),x.return=g,x):(x=i(x,b),x.return=g,x)}function h(g,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=tC(""+x,g.mode,b),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case e0:return b=__(x.type,x.key,x.props,null,g.mode,b),b.ref=cp(g,null,x),b.return=g,b;case Ih:return x=nC(x,g.mode,b),x.return=g,x;case al:var w=x._init;return h(g,w(x._payload),b)}if(Rp(x)||sp(x))return x=ic(x,g.mode,b,null),x.return=g,x;h0(g,x)}return null}function f(g,x,b,w){var k=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(g,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case e0:return b.key===k?l(g,x,b,w):null;case Ih:return b.key===k?u(g,x,b,w):null;case al:return k=b._init,f(g,x,k(b._payload),w)}if(Rp(b)||sp(b))return k!==null?null:c(g,x,b,w,null);h0(g,b)}return null}function p(g,x,b,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(b)||null,a(x,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case e0:return g=g.get(w.key===null?b:w.key)||null,l(x,g,w,k);case Ih:return g=g.get(w.key===null?b:w.key)||null,u(x,g,w,k);case al:var C=w._init;return p(g,x,b,C(w._payload),k)}if(Rp(w)||sp(w))return g=g.get(b)||null,c(x,g,w,k,null);h0(x,w)}return null}function m(g,x,b,w){for(var k=null,C=null,T=x,E=x=0,A=null;T!==null&&E<b.length;E++){T.index>E?(A=T,T=null):A=T.sibling;var $=f(g,T,b[E],w);if($===null){T===null&&(T=A);break}t&&T&&$.alternate===null&&e(g,T),x=s($,x,E),C===null?k=$:C.sibling=$,C=$,T=A}if(E===b.length)return n(g,T),an&&$u(g,E),k;if(T===null){for(;E<b.length;E++)T=h(g,b[E],w),T!==null&&(x=s(T,x,E),C===null?k=T:C.sibling=T,C=T);return an&&$u(g,E),k}for(T=r(g,T);E<b.length;E++)A=p(T,g,E,b[E],w),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?E:A.key),x=s(A,x,E),C===null?k=A:C.sibling=A,C=A);return t&&T.forEach(function(N){return e(g,N)}),an&&$u(g,E),k}function _(g,x,b,w){var k=sp(b);if(typeof k!="function")throw Error(_e(150));if(b=k.call(b),b==null)throw Error(_e(151));for(var C=k=null,T=x,E=x=0,A=null,$=b.next();T!==null&&!$.done;E++,$=b.next()){T.index>E?(A=T,T=null):A=T.sibling;var N=f(g,T,$.value,w);if(N===null){T===null&&(T=A);break}t&&T&&N.alternate===null&&e(g,T),x=s(N,x,E),C===null?k=N:C.sibling=N,C=N,T=A}if($.done)return n(g,T),an&&$u(g,E),k;if(T===null){for(;!$.done;E++,$=b.next())$=h(g,$.value,w),$!==null&&(x=s($,x,E),C===null?k=$:C.sibling=$,C=$);return an&&$u(g,E),k}for(T=r(g,T);!$.done;E++,$=b.next())$=p(T,g,E,$.value,w),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?E:$.key),x=s($,x,E),C===null?k=$:C.sibling=$,C=$);return t&&T.forEach(function(P){return e(g,P)}),an&&$u(g,E),k}function v(g,x,b,w){if(typeof b=="object"&&b!==null&&b.type===Ah&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case e0:e:{for(var k=b.key,C=x;C!==null;){if(C.key===k){if(k=b.type,k===Ah){if(C.tag===7){n(g,C.sibling),x=i(C,b.props.children),x.return=g,g=x;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===al&&aL(k)===C.type){n(g,C.sibling),x=i(C,b.props),x.ref=cp(g,C,b),x.return=g,g=x;break e}n(g,C);break}else e(g,C);C=C.sibling}b.type===Ah?(x=ic(b.props.children,g.mode,w,b.key),x.return=g,g=x):(w=__(b.type,b.key,b.props,null,g.mode,w),w.ref=cp(g,x,b),w.return=g,g=w)}return o(g);case Ih:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(g,x.sibling),x=i(x,b.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=nC(b,g.mode,w),x.return=g,g=x}return o(g);case al:return C=b._init,v(g,x,C(b._payload),w)}if(Rp(b))return m(g,x,b,w);if(sp(b))return _(g,x,b,w);h0(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,b),x.return=g,g=x):(n(g,x),x=tC(b,g.mode,w),x.return=g,g=x),o(g)):n(g,x)}return v}var gf=IG(!0),AG=IG(!1),X_=Yl(null),Z_=null,Fh=null,H2=null;function K2(){H2=Fh=Z_=null}function q2(t){var e=X_.current;tn(X_),t._currentValue=e}function p$(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ef(t,e){Z_=t,H2=Fh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_i=!0),t.firstContext=null)}function Es(t){var e=t._currentValue;if(H2!==t)if(t={context:t,memoizedValue:e,next:null},Fh===null){if(Z_===null)throw Error(_e(308));Fh=t,Z_.dependencies={lanes:0,firstContext:t}}else Fh=Fh.next=t;return e}var Wu=null;function X2(t){Wu===null?Wu=[t]:Wu.push(t)}function OG(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,X2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Aa(t,r)}function Aa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ll=!1;function Z2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Il(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Aa(t,n)}return i=r.interleaved,i===null?(e.next=e,X2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Aa(t,n)}function d_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D2(t,n)}}function lL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Y_(t,e,n,r){var i=t.updateQueue;ll=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,_=a;switch(f=e,p=n,_.tag){case 1:if(m=_.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=_.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=yn({},h,f);break e;case 2:ll=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pc|=o,t.lanes=o,t.memoizedState=h}}function uL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_e(191,i));i.call(r)}}}var Jg={},Bo=Yl(Jg),Rm=Yl(Jg),Dm=Yl(Jg);function Gu(t){if(t===Jg)throw Error(_e(174));return t}function Y2(t,e){switch(Kt(Dm,e),Kt(Rm,t),Kt(Bo,Jg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qT(e,t)}tn(Bo),Kt(Bo,e)}function yf(){tn(Bo),tn(Rm),tn(Dm)}function PG(t){Gu(Dm.current);var e=Gu(Bo.current),n=qT(e,t.type);e!==n&&(Kt(Rm,t),Kt(Bo,n))}function J2(t){Rm.current===t&&(tn(Bo),tn(Rm))}var dn=Yl(0);function J_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xk=[];function Q2(){for(var t=0;t<Xk.length;t++)Xk[t]._workInProgressVersionPrimary=null;Xk.length=0}var p_=Wa.ReactCurrentDispatcher,Zk=Wa.ReactCurrentBatchConfig,dc=0,gn=null,Hn=null,sr=null,Q_=!1,rm=!1,Mm=0,_ie=0;function Ar(){throw Error(_e(321))}function eA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!co(t[n],e[n]))return!1;return!0}function tA(t,e,n,r,i,s){if(dc=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,p_.current=t===null||t.memoizedState===null?Sie:kie,t=n(r,i),rm){s=0;do{if(rm=!1,Mm=0,25<=s)throw Error(_e(301));s+=1,sr=Hn=null,e.updateQueue=null,p_.current=Cie,t=n(r,i)}while(rm)}if(p_.current=ex,e=Hn!==null&&Hn.next!==null,dc=0,sr=Hn=gn=null,Q_=!1,e)throw Error(_e(300));return t}function nA(){var t=Mm!==0;return Mm=0,t}function $o(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?gn.memoizedState=sr=t:sr=sr.next=t,sr}function Is(){if(Hn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Hn.next;var e=sr===null?gn.memoizedState:sr.next;if(e!==null)sr=e,Hn=t;else{if(t===null)throw Error(_e(310));Hn=t,t={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},sr===null?gn.memoizedState=sr=t:sr=sr.next=t}return sr}function Lm(t,e){return typeof e=="function"?e(t):e}function Yk(t){var e=Is(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=Hn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((dc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,gn.lanes|=c,pc|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,co(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gn.lanes|=s,pc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jk(t){var e=Is(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);co(s,e.memoizedState)||(_i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RG(){}function DG(t,e){var n=gn,r=Is(),i=e(),s=!co(r.memoizedState,i);if(s&&(r.memoizedState=i,_i=!0),r=r.queue,rA(FG.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||sr!==null&&sr.memoizedState.tag&1){if(n.flags|=2048,Fm(9,LG.bind(null,n,r,i,e),void 0,null),ar===null)throw Error(_e(349));dc&30||MG(n,e,i)}return i}function MG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LG(t,e,n,r){e.value=n,e.getSnapshot=r,BG(e)&&zG(t)}function FG(t,e,n){return n(function(){BG(e)&&zG(t)})}function BG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!co(t,n)}catch{return!0}}function zG(t){var e=Aa(t,1);e!==null&&so(e,t,1,-1)}function cL(t){var e=$o();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lm,lastRenderedState:t},e.queue=t,t=t.dispatch=wie.bind(null,gn,t),[e.memoizedState,t]}function Fm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jG(){return Is().memoizedState}function m_(t,e,n,r){var i=$o();gn.flags|=t,i.memoizedState=Fm(1|e,n,void 0,r===void 0?null:r)}function lw(t,e,n,r){var i=Is();r=r===void 0?null:r;var s=void 0;if(Hn!==null){var o=Hn.memoizedState;if(s=o.destroy,r!==null&&eA(r,o.deps)){i.memoizedState=Fm(e,n,s,r);return}}gn.flags|=t,i.memoizedState=Fm(1|e,n,s,r)}function hL(t,e){return m_(8390656,8,t,e)}function rA(t,e){return lw(2048,8,t,e)}function VG(t,e){return lw(4,2,t,e)}function UG(t,e){return lw(4,4,t,e)}function WG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GG(t,e,n){return n=n!=null?n.concat([t]):null,lw(4,4,WG.bind(null,e,t),n)}function iA(){}function HG(t,e){var n=Is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KG(t,e){var n=Is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qG(t,e,n){return dc&21?(co(n,e)||(n=QW(),gn.lanes|=n,pc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_i=!0),t.memoizedState=n)}function xie(t,e){var n=Ot;Ot=n!==0&&4>n?n:4,t(!0);var r=Zk.transition;Zk.transition={};try{t(!1),e()}finally{Ot=n,Zk.transition=r}}function XG(){return Is().memoizedState}function bie(t,e,n){var r=Ol(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZG(t))YG(e,n);else if(n=OG(t,e,n,r),n!==null){var i=ei();so(n,t,r,i),JG(n,e,r)}}function wie(t,e,n){var r=Ol(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZG(t))YG(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,co(a,o)){var l=e.interleaved;l===null?(i.next=i,X2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=OG(t,e,i,r),n!==null&&(i=ei(),so(n,t,r,i),JG(n,e,r))}}function ZG(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function YG(t,e){rm=Q_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D2(t,n)}}var ex={readContext:Es,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},Sie={readContext:Es,useCallback:function(t,e){return $o().memoizedState=[t,e===void 0?null:e],t},useContext:Es,useEffect:hL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,m_(4194308,4,WG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return m_(4194308,4,t,e)},useInsertionEffect:function(t,e){return m_(4,2,t,e)},useMemo:function(t,e){var n=$o();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$o();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bie.bind(null,gn,t),[r.memoizedState,t]},useRef:function(t){var e=$o();return t={current:t},e.memoizedState=t},useState:cL,useDebugValue:iA,useDeferredValue:function(t){return $o().memoizedState=t},useTransition:function(){var t=cL(!1),e=t[0];return t=xie.bind(null,t[1]),$o().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gn,i=$o();if(an){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),ar===null)throw Error(_e(349));dc&30||MG(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hL(FG.bind(null,r,s,t),[t]),r.flags|=2048,Fm(9,LG.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$o(),e=ar.identifierPrefix;if(an){var n=ma,r=pa;n=(r&~(1<<32-io(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_ie++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kie={readContext:Es,useCallback:HG,useContext:Es,useEffect:rA,useImperativeHandle:GG,useInsertionEffect:VG,useLayoutEffect:UG,useMemo:KG,useReducer:Yk,useRef:jG,useState:function(){return Yk(Lm)},useDebugValue:iA,useDeferredValue:function(t){var e=Is();return qG(e,Hn.memoizedState,t)},useTransition:function(){var t=Yk(Lm)[0],e=Is().memoizedState;return[t,e]},useMutableSource:RG,useSyncExternalStore:DG,useId:XG,unstable_isNewReconciler:!1},Cie={readContext:Es,useCallback:HG,useContext:Es,useEffect:rA,useImperativeHandle:GG,useInsertionEffect:VG,useLayoutEffect:UG,useMemo:KG,useReducer:Jk,useRef:jG,useState:function(){return Jk(Lm)},useDebugValue:iA,useDeferredValue:function(t){var e=Is();return Hn===null?e.memoizedState=t:qG(e,Hn.memoizedState,t)},useTransition:function(){var t=Jk(Lm)[0],e=Is().memoizedState;return[t,e]},useMutableSource:RG,useSyncExternalStore:DG,useId:XG,unstable_isNewReconciler:!1};function qs(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function m$(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uw={isMounted:function(t){return(t=t._reactInternals)?Lc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ei(),i=Ol(t),s=xa(r,i);s.payload=e,n!=null&&(s.callback=n),e=Il(t,s,i),e!==null&&(so(e,t,i,r),d_(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ei(),i=Ol(t),s=xa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Il(t,s,i),e!==null&&(so(e,t,i,r),d_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ei(),r=Ol(t),i=xa(n,r);i.tag=2,e!=null&&(i.callback=e),e=Il(t,i,r),e!==null&&(so(e,t,r,n),d_(e,t,r))}};function fL(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Am(n,r)||!Am(i,s):!0}function QG(t,e,n){var r=!1,i=zl,s=e.contextType;return typeof s=="object"&&s!==null?s=Es(s):(i=ki(e)?hc:Ur.current,r=e.contextTypes,s=(r=r!=null)?pf(t,i):zl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uw,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uw.enqueueReplaceState(e,e.state,null)}function g$(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Z2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Es(s):(s=ki(e)?hc:Ur.current,i.context=pf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(m$(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uw.enqueueReplaceState(i,i.state,null),Y_(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vf(t,e){try{var n="",r=e;do n+=Qne(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qk(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function y$(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tie=typeof WeakMap=="function"?WeakMap:Map;function e5(t,e,n){n=xa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nx||(nx=!0,$$=r),y$(t,e)},n}function t5(t,e,n){n=xa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){y$(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){y$(t,e),typeof r!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zie.bind(null,t,e,n),e.then(t,t))}function mL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gL(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xa(-1,1),e.tag=2,Il(n,e,1))),n.lanes|=1),t)}var $ie=Wa.ReactCurrentOwner,_i=!1;function qr(t,e,n,r){e.child=t===null?AG(e,null,n,r):gf(e,t.child,n,r)}function yL(t,e,n,r,i){n=n.render;var s=e.ref;return ef(e,i),r=tA(t,e,n,r,s,i),n=nA(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Oa(t,e,i)):(an&&n&&U2(e),e.flags|=1,qr(t,e,r,i),e.child)}function vL(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!fA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,n5(t,e,s,r,i)):(t=__(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Am,n(o,r)&&t.ref===e.ref)return Oa(t,e,i)}return e.flags|=1,t=Nl(s,r),t.ref=e.ref,t.return=e,e.child=t}function n5(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Am(s,r)&&t.ref===e.ref)if(_i=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_i=!0);else return e.lanes=t.lanes,Oa(t,e,i)}return v$(t,e,n,r,i)}function r5(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(zh,Mi),Mi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt(zh,Mi),Mi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Kt(zh,Mi),Mi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Kt(zh,Mi),Mi|=r;return qr(t,e,i,n),e.child}function i5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function v$(t,e,n,r,i){var s=ki(n)?hc:Ur.current;return s=pf(e,s),ef(e,i),n=tA(t,e,n,r,s,i),r=nA(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Oa(t,e,i)):(an&&r&&U2(e),e.flags|=1,qr(t,e,n,i),e.child)}function _L(t,e,n,r,i){if(ki(n)){var s=!0;H_(e)}else s=!1;if(ef(e,i),e.stateNode===null)g_(t,e),QG(e,n,r),g$(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Es(u):(u=ki(n)?hc:Ur.current,u=pf(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&dL(e,o,r,u),ll=!1;var f=e.memoizedState;o.state=f,Y_(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Si.current||ll?(typeof c=="function"&&(m$(e,n,c,r),l=e.memoizedState),(a=ll||fL(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,NG(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:qs(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Es(l):(l=ki(n)?hc:Ur.current,l=pf(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&dL(e,o,r,l),ll=!1,f=e.memoizedState,o.state=f,Y_(e,r,o,i);var m=e.memoizedState;a!==h||f!==m||Si.current||ll?(typeof p=="function"&&(m$(e,n,p,r),m=e.memoizedState),(u=ll||fL(e,n,u,r,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return _$(t,e,n,r,s,i)}function _$(t,e,n,r,i,s){i5(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&iL(e,n,!1),Oa(t,e,s);r=e.stateNode,$ie.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gf(e,t.child,null,s),e.child=gf(e,null,a,s)):qr(t,e,a,s),e.memoizedState=r.state,i&&iL(e,n,!0),e.child}function s5(t){var e=t.stateNode;e.pendingContext?rL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rL(t,e.context,!1),Y2(t,e.containerInfo)}function xL(t,e,n,r,i){return mf(),G2(i),e.flags|=256,qr(t,e,n,r),e.child}var x$={dehydrated:null,treeContext:null,retryLane:0};function b$(t){return{baseLanes:t,cachePool:null,transitions:null}}function o5(t,e,n){var r=e.pendingProps,i=dn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Kt(dn,i&1),t===null)return d$(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fw(o,r,0,null),t=ic(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=b$(n),e.memoizedState=x$,t):sA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Eie(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Nl(a,s):(s=ic(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?b$(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=x$,r}return s=t.child,t=s.sibling,r=Nl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sA(t,e){return e=fw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function f0(t,e,n,r){return r!==null&&G2(r),gf(e,t.child,null,n),t=sA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Eie(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qk(Error(_e(422))),f0(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fw({mode:"visible",children:r.children},i,0,null),s=ic(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gf(e,t.child,null,o),e.child.memoizedState=b$(o),e.memoizedState=x$,s);if(!(e.mode&1))return f0(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(_e(419)),r=Qk(s,r,void 0),f0(t,e,o,r)}if(a=(o&t.childLanes)!==0,_i||a){if(r=ar,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Aa(t,i),so(r,t,i,-1))}return hA(),r=Qk(Error(_e(421))),f0(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jie.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wi=El(i.nextSibling),Hi=e,an=!0,Js=null,t!==null&&(ms[gs++]=pa,ms[gs++]=ma,ms[gs++]=fc,pa=t.id,ma=t.overflow,fc=e),e=sA(e,r.children),e.flags|=4096,e)}function bL(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),p$(t.return,e,n)}function eC(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function a5(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qr(t,e,r.children,n),r=dn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bL(t,n,e);else if(t.tag===19)bL(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kt(dn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&J_(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),eC(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&J_(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}eC(e,!0,n,null,s);break;case"together":eC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function g_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=Nl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Iie(t,e,n){switch(e.tag){case 3:s5(e),mf();break;case 5:PG(e);break;case 1:ki(e.type)&&H_(e);break;case 4:Y2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Kt(X_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kt(dn,dn.current&1),e.flags|=128,null):n&e.child.childLanes?o5(t,e,n):(Kt(dn,dn.current&1),t=Oa(t,e,n),t!==null?t.sibling:null);Kt(dn,dn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a5(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(dn,dn.current),r)break;return null;case 22:case 23:return e.lanes=0,r5(t,e,n)}return Oa(t,e,n)}var l5,w$,u5,c5;l5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w$=function(){};u5=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gu(Bo.current);var s=null;switch(n){case"input":i=WT(t,i),r=WT(t,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=KT(t,i),r=KT(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=W_)}XT(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sm.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sm.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Yt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};c5=function(t,e,n,r){n!==r&&(e.flags|=4)};function hp(t,e){if(!an)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Or(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Aie(t,e,n){var r=e.pendingProps;switch(W2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(e),null;case 1:return ki(e.type)&&G_(),Or(e),null;case 3:return r=e.stateNode,yf(),tn(Si),tn(Ur),Q2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(c0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Js!==null&&(A$(Js),Js=null))),w$(t,e),Or(e),null;case 5:J2(e);var i=Gu(Dm.current);if(n=e.type,t!==null&&e.stateNode!=null)u5(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return Or(e),null}if(t=Gu(Bo.current),c0(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ro]=e,r[Pm]=s,t=(e.mode&1)!==0,n){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(i=0;i<Mp.length;i++)Yt(Mp[i],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":AM(r,s),Yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yt("invalid",r);break;case"textarea":NM(r,s),Yt("invalid",r)}XT(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&u0(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&u0(r.textContent,a,t),i=["children",""+a]):Sm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Yt("scroll",r)}switch(n){case"input":t0(r),OM(r,s,!0);break;case"textarea":t0(r),PM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=W_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FW(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ro]=e,t[Pm]=r,l5(t,e,!1,!1),e.stateNode=t;e:{switch(o=ZT(n,r),n){case"dialog":Yt("cancel",t),Yt("close",t),i=r;break;case"iframe":case"object":case"embed":Yt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Mp.length;i++)Yt(Mp[i],t);i=r;break;case"source":Yt("error",t),i=r;break;case"img":case"image":case"link":Yt("error",t),Yt("load",t),i=r;break;case"details":Yt("toggle",t),i=r;break;case"input":AM(t,r),i=WT(t,r),Yt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),Yt("invalid",t);break;case"textarea":NM(t,r),i=KT(t,r),Yt("invalid",t);break;default:i=r}XT(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jW(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BW(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&km(t,l):typeof l=="number"&&km(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Yt("scroll",t):l!=null&&I2(t,s,l,o))}switch(n){case"input":t0(t),OM(t,r,!1);break;case"textarea":t0(t),PM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zh(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=W_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Or(e),null;case 6:if(t&&e.stateNode!=null)c5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=Gu(Dm.current),Gu(Bo.current),c0(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ro]=e,(s=r.nodeValue!==n)&&(t=Hi,t!==null))switch(t.tag){case 3:u0(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&u0(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ro]=e,e.stateNode=r}return Or(e),null;case 13:if(tn(dn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(an&&Wi!==null&&e.mode&1&&!(e.flags&128))EG(),mf(),e.flags|=98560,s=!1;else if(s=c0(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(_e(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_e(317));s[Ro]=e}else mf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Or(e),s=!1}else Js!==null&&(A$(Js),Js=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dn.current&1?Xn===0&&(Xn=3):hA())),e.updateQueue!==null&&(e.flags|=4),Or(e),null);case 4:return yf(),w$(t,e),t===null&&Om(e.stateNode.containerInfo),Or(e),null;case 10:return q2(e.type._context),Or(e),null;case 17:return ki(e.type)&&G_(),Or(e),null;case 19:if(tn(dn),s=e.memoizedState,s===null)return Or(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hp(s,!1);else{if(Xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=J_(t),o!==null){for(e.flags|=128,hp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kt(dn,dn.current&1|2),e.child}t=t.sibling}s.tail!==null&&In()>_f&&(e.flags|=128,r=!0,hp(s,!1),e.lanes=4194304)}else{if(!r)if(t=J_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!an)return Or(e),null}else 2*In()-s.renderingStartTime>_f&&n!==1073741824&&(e.flags|=128,r=!0,hp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=In(),e.sibling=null,n=dn.current,Kt(dn,r?n&1|2:n&1),e):(Or(e),null);case 22:case 23:return cA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mi&1073741824&&(Or(e),e.subtreeFlags&6&&(e.flags|=8192)):Or(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function Oie(t,e){switch(W2(e),e.tag){case 1:return ki(e.type)&&G_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yf(),tn(Si),tn(Ur),Q2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return J2(e),null;case 13:if(tn(dn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));mf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tn(dn),null;case 4:return yf(),null;case 10:return q2(e.type._context),null;case 22:case 23:return cA(),null;case 24:return null;default:return null}}var d0=!1,Mr=!1,Nie=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Bh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_n(t,e,r)}else n.current=null}function S$(t,e,n){try{n()}catch(r){_n(t,e,r)}}var wL=!1;function Pie(t,e){if(o$=j_,t=mG(),V2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(a$={focusedElem:t,selectionRange:n},j_=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,v=m.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:qs(e.type,_),v);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(w){_n(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return m=wL,wL=!1,m}function im(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&S$(e,n,s)}i=i.next}while(i!==r)}}function cw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function k$(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h5(t){var e=t.alternate;e!==null&&(t.alternate=null,h5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ro],delete e[Pm],delete e[c$],delete e[mie],delete e[gie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function f5(t){return t.tag===5||t.tag===3||t.tag===4}function SL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function C$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=W_));else if(r!==4&&(t=t.child,t!==null))for(C$(t,e,n),t=t.sibling;t!==null;)C$(t,e,n),t=t.sibling}function T$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(T$(t,e,n),t=t.sibling;t!==null;)T$(t,e,n),t=t.sibling}var mr=null,Xs=!1;function el(t,e,n){for(n=n.child;n!==null;)d5(t,e,n),n=n.sibling}function d5(t,e,n){if(Fo&&typeof Fo.onCommitFiberUnmount=="function")try{Fo.onCommitFiberUnmount(nw,n)}catch{}switch(n.tag){case 5:Mr||Bh(n,e);case 6:var r=mr,i=Xs;mr=null,el(t,e,n),mr=r,Xs=i,mr!==null&&(Xs?(t=mr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mr.removeChild(n.stateNode));break;case 18:mr!==null&&(Xs?(t=mr,n=n.stateNode,t.nodeType===8?Kk(t.parentNode,n):t.nodeType===1&&Kk(t,n),Em(t)):Kk(mr,n.stateNode));break;case 4:r=mr,i=Xs,mr=n.stateNode.containerInfo,Xs=!0,el(t,e,n),mr=r,Xs=i;break;case 0:case 11:case 14:case 15:if(!Mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&S$(n,e,o),i=i.next}while(i!==r)}el(t,e,n);break;case 1:if(!Mr&&(Bh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_n(n,e,a)}el(t,e,n);break;case 21:el(t,e,n);break;case 22:n.mode&1?(Mr=(r=Mr)||n.memoizedState!==null,el(t,e,n),Mr=r):el(t,e,n);break;default:el(t,e,n)}}function kL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nie),e.forEach(function(r){var i=Vie.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Us(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mr=a.stateNode,Xs=!1;break e;case 3:mr=a.stateNode.containerInfo,Xs=!0;break e;case 4:mr=a.stateNode.containerInfo,Xs=!0;break e}a=a.return}if(mr===null)throw Error(_e(160));d5(s,o,i),mr=null,Xs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_n(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p5(e,t),e=e.sibling}function p5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Us(e,t),wo(t),r&4){try{im(3,t,t.return),cw(3,t)}catch(_){_n(t,t.return,_)}try{im(5,t,t.return)}catch(_){_n(t,t.return,_)}}break;case 1:Us(e,t),wo(t),r&512&&n!==null&&Bh(n,n.return);break;case 5:if(Us(e,t),wo(t),r&512&&n!==null&&Bh(n,n.return),t.flags&32){var i=t.stateNode;try{km(i,"")}catch(_){_n(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&MW(i,s),ZT(a,o);var u=ZT(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?jW(i,h):c==="dangerouslySetInnerHTML"?BW(i,h):c==="children"?km(i,h):I2(i,c,h,u)}switch(a){case"input":GT(i,s);break;case"textarea":LW(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zh(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Zh(i,!!s.multiple,s.defaultValue,!0):Zh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pm]=s}catch(_){_n(t,t.return,_)}}break;case 6:if(Us(e,t),wo(t),r&4){if(t.stateNode===null)throw Error(_e(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){_n(t,t.return,_)}}break;case 3:if(Us(e,t),wo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Em(e.containerInfo)}catch(_){_n(t,t.return,_)}break;case 4:Us(e,t),wo(t);break;case 13:Us(e,t),wo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lA=In())),r&4&&kL(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Mr=(u=Mr)||c,Us(e,t),Mr=u):Us(e,t),wo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Oe=t,c=t.child;c!==null;){for(h=Oe=c;Oe!==null;){switch(f=Oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:im(4,f,f.return);break;case 1:Bh(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(_){_n(r,n,_)}}break;case 5:Bh(f,f.return);break;case 22:if(f.memoizedState!==null){TL(h);continue}}p!==null?(p.return=f,Oe=p):TL(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zW("display",o))}catch(_){_n(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){_n(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Us(e,t),wo(t),r&4&&kL(t);break;case 21:break;default:Us(e,t),wo(t)}}function wo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(f5(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(km(i,""),r.flags&=-33);var s=SL(t);T$(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=SL(t);C$(t,a,o);break;default:throw Error(_e(161))}}catch(l){_n(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rie(t,e,n){Oe=t,m5(t)}function m5(t,e,n){for(var r=(t.mode&1)!==0;Oe!==null;){var i=Oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||d0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mr;a=d0;var u=Mr;if(d0=o,(Mr=l)&&!u)for(Oe=i;Oe!==null;)o=Oe,l=o.child,o.tag===22&&o.memoizedState!==null?$L(i):l!==null?(l.return=o,Oe=l):$L(i);for(;s!==null;)Oe=s,m5(s),s=s.sibling;Oe=i,d0=a,Mr=u}CL(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Oe=s):CL(t)}}function CL(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||cw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uL(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uL(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Em(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Mr||e.flags&512&&k$(e)}catch(f){_n(e,e.return,f)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function TL(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function $L(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cw(4,e)}catch(l){_n(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_n(e,i,l)}}var s=e.return;try{k$(e)}catch(l){_n(e,s,l)}break;case 5:var o=e.return;try{k$(e)}catch(l){_n(e,o,l)}}}catch(l){_n(e,e.return,l)}if(e===t){Oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Oe=a;break}Oe=e.return}}var Die=Math.ceil,tx=Wa.ReactCurrentDispatcher,oA=Wa.ReactCurrentOwner,Ts=Wa.ReactCurrentBatchConfig,xt=0,ar=null,Ln=null,_r=0,Mi=0,zh=Yl(0),Xn=0,Bm=null,pc=0,hw=0,aA=0,sm=null,gi=null,lA=0,_f=1/0,ua=null,nx=!1,$$=null,Al=null,p0=!1,yl=null,rx=0,om=0,E$=null,y_=-1,v_=0;function ei(){return xt&6?In():y_!==-1?y_:y_=In()}function Ol(t){return t.mode&1?xt&2&&_r!==0?_r&-_r:vie.transition!==null?(v_===0&&(v_=QW()),v_):(t=Ot,t!==0||(t=window.event,t=t===void 0?16:oG(t.type)),t):1}function so(t,e,n,r){if(50<om)throw om=0,E$=null,Error(_e(185));Xg(t,n,r),(!(xt&2)||t!==ar)&&(t===ar&&(!(xt&2)&&(hw|=n),Xn===4&&dl(t,_r)),Ci(t,r),n===1&&xt===0&&!(e.mode&1)&&(_f=In()+500,aw&&Jl()))}function Ci(t,e){var n=t.callbackNode;vre(t,e);var r=z_(t,t===ar?_r:0);if(r===0)n!==null&&MM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&MM(n),e===1)t.tag===0?yie(EL.bind(null,t)):CG(EL.bind(null,t)),die(function(){!(xt&6)&&Jl()}),n=null;else{switch(eG(r)){case 1:n=R2;break;case 4:n=YW;break;case 16:n=B_;break;case 536870912:n=JW;break;default:n=B_}n=S5(n,g5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g5(t,e){if(y_=-1,v_=0,xt&6)throw Error(_e(327));var n=t.callbackNode;if(tf()&&t.callbackNode!==n)return null;var r=z_(t,t===ar?_r:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ix(t,r);else{e=r;var i=xt;xt|=2;var s=v5();(ar!==t||_r!==e)&&(ua=null,_f=In()+500,rc(t,e));do try{Fie();break}catch(a){y5(t,a)}while(!0);K2(),tx.current=s,xt=i,Ln!==null?e=0:(ar=null,_r=0,e=Xn)}if(e!==0){if(e===2&&(i=t$(t),i!==0&&(r=i,e=I$(t,i))),e===1)throw n=Bm,rc(t,0),dl(t,r),Ci(t,In()),n;if(e===6)dl(t,r);else{if(i=t.current.alternate,!(r&30)&&!Mie(i)&&(e=ix(t,r),e===2&&(s=t$(t),s!==0&&(r=s,e=I$(t,s))),e===1))throw n=Bm,rc(t,0),dl(t,r),Ci(t,In()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:Eu(t,gi,ua);break;case 3:if(dl(t,r),(r&130023424)===r&&(e=lA+500-In(),10<e)){if(z_(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ei(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=u$(Eu.bind(null,t,gi,ua),e);break}Eu(t,gi,ua);break;case 4:if(dl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-io(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Die(r/1960))-r,10<r){t.timeoutHandle=u$(Eu.bind(null,t,gi,ua),r);break}Eu(t,gi,ua);break;case 5:Eu(t,gi,ua);break;default:throw Error(_e(329))}}}return Ci(t,In()),t.callbackNode===n?g5.bind(null,t):null}function I$(t,e){var n=sm;return t.current.memoizedState.isDehydrated&&(rc(t,e).flags|=256),t=ix(t,e),t!==2&&(e=gi,gi=n,e!==null&&A$(e)),t}function A$(t){gi===null?gi=t:gi.push.apply(gi,t)}function Mie(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!co(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dl(t,e){for(e&=~aA,e&=~hw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-io(e),r=1<<n;t[n]=-1,e&=~r}}function EL(t){if(xt&6)throw Error(_e(327));tf();var e=z_(t,0);if(!(e&1))return Ci(t,In()),null;var n=ix(t,e);if(t.tag!==0&&n===2){var r=t$(t);r!==0&&(e=r,n=I$(t,r))}if(n===1)throw n=Bm,rc(t,0),dl(t,e),Ci(t,In()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eu(t,gi,ua),Ci(t,In()),null}function uA(t,e){var n=xt;xt|=1;try{return t(e)}finally{xt=n,xt===0&&(_f=In()+500,aw&&Jl())}}function mc(t){yl!==null&&yl.tag===0&&!(xt&6)&&tf();var e=xt;xt|=1;var n=Ts.transition,r=Ot;try{if(Ts.transition=null,Ot=1,t)return t()}finally{Ot=r,Ts.transition=n,xt=e,!(xt&6)&&Jl()}}function cA(){Mi=zh.current,tn(zh)}function rc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fie(n)),Ln!==null)for(n=Ln.return;n!==null;){var r=n;switch(W2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&G_();break;case 3:yf(),tn(Si),tn(Ur),Q2();break;case 5:J2(r);break;case 4:yf();break;case 13:tn(dn);break;case 19:tn(dn);break;case 10:q2(r.type._context);break;case 22:case 23:cA()}n=n.return}if(ar=t,Ln=t=Nl(t.current,null),_r=Mi=e,Xn=0,Bm=null,aA=hw=pc=0,gi=sm=null,Wu!==null){for(e=0;e<Wu.length;e++)if(n=Wu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wu=null}return t}function y5(t,e){do{var n=Ln;try{if(K2(),p_.current=ex,Q_){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Q_=!1}if(dc=0,sr=Hn=gn=null,rm=!1,Mm=0,oA.current=null,n===null||n.return===null){Xn=1,Bm=e,Ln=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=mL(o);if(p!==null){p.flags&=-257,gL(p,o,a,s,e),p.mode&1&&pL(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var _=new Set;_.add(l),e.updateQueue=_}else m.add(l);break e}else{if(!(e&1)){pL(s,u,e),hA();break e}l=Error(_e(426))}}else if(an&&a.mode&1){var v=mL(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),gL(v,o,a,s,e),G2(vf(l,a));break e}}s=l=vf(l,a),Xn!==4&&(Xn=2),sm===null?sm=[s]:sm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=e5(s,l,e);lL(s,g);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Al===null||!Al.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=t5(s,a,e);lL(s,w);break e}}s=s.return}while(s!==null)}x5(n)}catch(k){e=k,Ln===n&&n!==null&&(Ln=n=n.return);continue}break}while(!0)}function v5(){var t=tx.current;return tx.current=ex,t===null?ex:t}function hA(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),ar===null||!(pc&268435455)&&!(hw&268435455)||dl(ar,_r)}function ix(t,e){var n=xt;xt|=2;var r=v5();(ar!==t||_r!==e)&&(ua=null,rc(t,e));do try{Lie();break}catch(i){y5(t,i)}while(!0);if(K2(),xt=n,tx.current=r,Ln!==null)throw Error(_e(261));return ar=null,_r=0,Xn}function Lie(){for(;Ln!==null;)_5(Ln)}function Fie(){for(;Ln!==null&&!ure();)_5(Ln)}function _5(t){var e=w5(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,e===null?x5(t):Ln=e,oA.current=null}function x5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Oie(n,e),n!==null){n.flags&=32767,Ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xn=6,Ln=null;return}}else if(n=Aie(n,e,Mi),n!==null){Ln=n;return}if(e=e.sibling,e!==null){Ln=e;return}Ln=e=t}while(e!==null);Xn===0&&(Xn=5)}function Eu(t,e,n){var r=Ot,i=Ts.transition;try{Ts.transition=null,Ot=1,Bie(t,e,n,r)}finally{Ts.transition=i,Ot=r}return null}function Bie(t,e,n,r){do tf();while(yl!==null);if(xt&6)throw Error(_e(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_re(t,s),t===ar&&(Ln=ar=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||p0||(p0=!0,S5(B_,function(){return tf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ts.transition,Ts.transition=null;var o=Ot;Ot=1;var a=xt;xt|=4,oA.current=null,Pie(t,n),p5(n,t),sie(a$),j_=!!o$,a$=o$=null,t.current=n,Rie(n),cre(),xt=a,Ot=o,Ts.transition=s}else t.current=n;if(p0&&(p0=!1,yl=t,rx=i),s=t.pendingLanes,s===0&&(Al=null),dre(n.stateNode),Ci(t,In()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nx)throw nx=!1,t=$$,$$=null,t;return rx&1&&t.tag!==0&&tf(),s=t.pendingLanes,s&1?t===E$?om++:(om=0,E$=t):om=0,Jl(),null}function tf(){if(yl!==null){var t=eG(rx),e=Ts.transition,n=Ot;try{if(Ts.transition=null,Ot=16>t?16:t,yl===null)var r=!1;else{if(t=yl,yl=null,rx=0,xt&6)throw Error(_e(331));var i=xt;for(xt|=4,Oe=t.current;Oe!==null;){var s=Oe,o=s.child;if(Oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Oe=u;Oe!==null;){var c=Oe;switch(c.tag){case 0:case 11:case 15:im(8,c,s)}var h=c.child;if(h!==null)h.return=c,Oe=h;else for(;Oe!==null;){c=Oe;var f=c.sibling,p=c.return;if(h5(c),c===u){Oe=null;break}if(f!==null){f.return=p,Oe=f;break}Oe=p}}}var m=s.alternate;if(m!==null){var _=m.child;if(_!==null){m.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}Oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Oe=o;else e:for(;Oe!==null;){if(s=Oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:im(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Oe=g;break e}Oe=s.return}}var x=t.current;for(Oe=x;Oe!==null;){o=Oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Oe=b;else e:for(o=x;Oe!==null;){if(a=Oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cw(9,a)}}catch(k){_n(a,a.return,k)}if(a===o){Oe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Oe=w;break e}Oe=a.return}}if(xt=i,Jl(),Fo&&typeof Fo.onPostCommitFiberRoot=="function")try{Fo.onPostCommitFiberRoot(nw,t)}catch{}r=!0}return r}finally{Ot=n,Ts.transition=e}}return!1}function IL(t,e,n){e=vf(n,e),e=e5(t,e,1),t=Il(t,e,1),e=ei(),t!==null&&(Xg(t,1,e),Ci(t,e))}function _n(t,e,n){if(t.tag===3)IL(t,t,n);else for(;e!==null;){if(e.tag===3){IL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Al===null||!Al.has(r))){t=vf(n,t),t=t5(e,t,1),e=Il(e,t,1),t=ei(),e!==null&&(Xg(e,1,t),Ci(e,t));break}}e=e.return}}function zie(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ei(),t.pingedLanes|=t.suspendedLanes&n,ar===t&&(_r&n)===n&&(Xn===4||Xn===3&&(_r&130023424)===_r&&500>In()-lA?rc(t,0):aA|=n),Ci(t,e)}function b5(t,e){e===0&&(t.mode&1?(e=i0,i0<<=1,!(i0&130023424)&&(i0=4194304)):e=1);var n=ei();t=Aa(t,e),t!==null&&(Xg(t,e,n),Ci(t,n))}function jie(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b5(t,n)}function Vie(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),b5(t,n)}var w5;w5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Si.current)_i=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _i=!1,Iie(t,e,n);_i=!!(t.flags&131072)}else _i=!1,an&&e.flags&1048576&&TG(e,q_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;g_(t,e),t=e.pendingProps;var i=pf(e,Ur.current);ef(e,n),i=tA(null,e,r,t,i,n);var s=nA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ki(r)?(s=!0,H_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z2(e),i.updater=uw,e.stateNode=i,i._reactInternals=e,g$(e,r,t,n),e=_$(null,e,r,!0,s,n)):(e.tag=0,an&&s&&U2(e),qr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(g_(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wie(r),t=qs(r,t),i){case 0:e=v$(null,e,r,t,n);break e;case 1:e=_L(null,e,r,t,n);break e;case 11:e=yL(null,e,r,t,n);break e;case 14:e=vL(null,e,r,qs(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qs(r,i),v$(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qs(r,i),_L(t,e,r,i,n);case 3:e:{if(s5(e),t===null)throw Error(_e(387));r=e.pendingProps,s=e.memoizedState,i=s.element,NG(t,e),Y_(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vf(Error(_e(423)),e),e=xL(t,e,r,n,i);break e}else if(r!==i){i=vf(Error(_e(424)),e),e=xL(t,e,r,n,i);break e}else for(Wi=El(e.stateNode.containerInfo.firstChild),Hi=e,an=!0,Js=null,n=AG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mf(),r===i){e=Oa(t,e,n);break e}qr(t,e,r,n)}e=e.child}return e;case 5:return PG(e),t===null&&d$(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,l$(r,i)?o=null:s!==null&&l$(r,s)&&(e.flags|=32),i5(t,e),qr(t,e,o,n),e.child;case 6:return t===null&&d$(e),null;case 13:return o5(t,e,n);case 4:return Y2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gf(e,null,r,n):qr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qs(r,i),yL(t,e,r,i,n);case 7:return qr(t,e,e.pendingProps,n),e.child;case 8:return qr(t,e,e.pendingProps.children,n),e.child;case 12:return qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Kt(X_,r._currentValue),r._currentValue=o,s!==null)if(co(s.value,o)){if(s.children===i.children&&!Si.current){e=Oa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=xa(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),p$(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(_e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),p$(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ef(e,n),i=Es(i),r=r(i),e.flags|=1,qr(t,e,r,n),e.child;case 14:return r=e.type,i=qs(r,e.pendingProps),i=qs(r.type,i),vL(t,e,r,i,n);case 15:return n5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qs(r,i),g_(t,e),e.tag=1,ki(r)?(t=!0,H_(e)):t=!1,ef(e,n),QG(e,r,i),g$(e,r,i,n),_$(null,e,r,!0,t,n);case 19:return a5(t,e,n);case 22:return r5(t,e,n)}throw Error(_e(156,e.tag))};function S5(t,e){return ZW(t,e)}function Uie(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(t,e,n,r){return new Uie(t,e,n,r)}function fA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wie(t){if(typeof t=="function")return fA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O2)return 11;if(t===N2)return 14}return 2}function Nl(t,e){var n=t.alternate;return n===null?(n=_s(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function __(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")fA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ah:return ic(n.children,i,s,e);case A2:o=8,i|=8;break;case zT:return t=_s(12,n,e,i|2),t.elementType=zT,t.lanes=s,t;case jT:return t=_s(13,n,e,i),t.elementType=jT,t.lanes=s,t;case VT:return t=_s(19,n,e,i),t.elementType=VT,t.lanes=s,t;case PW:return fw(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OW:o=10;break e;case NW:o=9;break e;case O2:o=11;break e;case N2:o=14;break e;case al:o=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=_s(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ic(t,e,n,r){return t=_s(7,t,r,e),t.lanes=n,t}function fw(t,e,n,r){return t=_s(22,t,r,e),t.elementType=PW,t.lanes=n,t.stateNode={isHidden:!1},t}function tC(t,e,n){return t=_s(6,t,null,e),t.lanes=n,t}function nC(t,e,n){return e=_s(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gie(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mk(0),this.expirationTimes=Mk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mk(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dA(t,e,n,r,i,s,o,a,l){return t=new Gie(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_s(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z2(s),t}function Hie(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ih,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k5(t){if(!t)return zl;t=t._reactInternals;e:{if(Lc(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ki(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(ki(n))return kG(t,n,e)}return e}function C5(t,e,n,r,i,s,o,a,l){return t=dA(n,r,!0,t,i,s,o,a,l),t.context=k5(null),n=t.current,r=ei(),i=Ol(n),s=xa(r,i),s.callback=e??null,Il(n,s,i),t.current.lanes=i,Xg(t,i,r),Ci(t,r),t}function dw(t,e,n,r){var i=e.current,s=ei(),o=Ol(i);return n=k5(n),e.context===null?e.context=n:e.pendingContext=n,e=xa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Il(i,e,o),t!==null&&(so(t,i,o,s),d_(t,i,o)),o}function sx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pA(t,e){AL(t,e),(t=t.alternate)&&AL(t,e)}function Kie(){return null}var T5=typeof reportError=="function"?reportError:function(t){console.error(t)};function mA(t){this._internalRoot=t}pw.prototype.render=mA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));dw(t,e,null,null)};pw.prototype.unmount=mA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mc(function(){dw(null,t,null,null)}),e[Ia]=null}};function pw(t){this._internalRoot=t}pw.prototype.unstable_scheduleHydration=function(t){if(t){var e=rG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fl.length&&e!==0&&e<fl[n].priority;n++);fl.splice(n,0,t),n===0&&sG(t)}};function gA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OL(){}function qie(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=sx(o);s.call(u)}}var o=C5(e,r,t,0,null,!1,!1,"",OL);return t._reactRootContainer=o,t[Ia]=o.current,Om(t.nodeType===8?t.parentNode:t),mc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=sx(l);a.call(u)}}var l=dA(t,0,!1,null,null,!1,!1,"",OL);return t._reactRootContainer=l,t[Ia]=l.current,Om(t.nodeType===8?t.parentNode:t),mc(function(){dw(e,l,n,r)}),l}function gw(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sx(o);a.call(l)}}dw(e,o,t,i)}else o=qie(n,e,t,i,r);return sx(o)}tG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dp(e.pendingLanes);n!==0&&(D2(e,n|1),Ci(e,In()),!(xt&6)&&(_f=In()+500,Jl()))}break;case 13:mc(function(){var r=Aa(t,1);if(r!==null){var i=ei();so(r,t,1,i)}}),pA(t,1)}};M2=function(t){if(t.tag===13){var e=Aa(t,134217728);if(e!==null){var n=ei();so(e,t,134217728,n)}pA(t,134217728)}};nG=function(t){if(t.tag===13){var e=Ol(t),n=Aa(t,e);if(n!==null){var r=ei();so(n,t,e,r)}pA(t,e)}};rG=function(){return Ot};iG=function(t,e){var n=Ot;try{return Ot=t,e()}finally{Ot=n}};JT=function(t,e,n){switch(e){case"input":if(GT(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ow(r);if(!i)throw Error(_e(90));DW(r),GT(r,i)}}}break;case"textarea":LW(t,n);break;case"select":e=n.value,e!=null&&Zh(t,!!n.multiple,e,!1)}};WW=uA;GW=mc;var Xie={usingClientEntryPoint:!1,Events:[Yg,Rh,ow,VW,UW,uA]},fp={findFiberByHostInstance:Uu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zie={bundleType:fp.bundleType,version:fp.version,rendererPackageName:fp.rendererPackageName,rendererConfig:fp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qW(t),t===null?null:t.stateNode},findFiberByHostInstance:fp.findFiberByHostInstance||Kie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{nw=m0.inject(Zie),Fo=m0}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xie;Qi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gA(e))throw Error(_e(200));return Hie(t,e,null,n)};Qi.createRoot=function(t,e){if(!gA(t))throw Error(_e(299));var n=!1,r="",i=T5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dA(t,1,!1,null,null,n,!1,r,i),t[Ia]=e.current,Om(t.nodeType===8?t.parentNode:t),new mA(e)};Qi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=qW(e),t=t===null?null:t.stateNode,t};Qi.flushSync=function(t){return mc(t)};Qi.hydrate=function(t,e,n){if(!mw(e))throw Error(_e(200));return gw(null,t,e,!0,n)};Qi.hydrateRoot=function(t,e,n){if(!gA(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=T5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=C5(e,null,t,1,n??null,i,!1,s,o),t[Ia]=e.current,Om(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pw(e)};Qi.render=function(t,e,n){if(!mw(e))throw Error(_e(200));return gw(null,t,e,!1,n)};Qi.unmountComponentAtNode=function(t){if(!mw(t))throw Error(_e(40));return t._reactRootContainer?(mc(function(){gw(null,null,t,!1,function(){t._reactRootContainer=null,t[Ia]=null})}),!0):!1};Qi.unstable_batchedUpdates=uA;Qi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mw(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return gw(t,e,n,!1,r)};Qi.version="18.3.1-next-f1338f8080-20240426";function $5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($5)}catch(t){console.error(t)}}$5(),$W.exports=Qi;var E5=$W.exports,I5,NL=E5;I5=NL.createRoot,NL.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jie=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Jn=(t,e)=>{const n=J.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>J.createElement("svg",{ref:c,...Yie,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Jie(t)}`,a].join(" "),...u},[...e.map(([h,f])=>J.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=Jn("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qie=Jn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=Jn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=Jn("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=Jn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=Jn("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=Jn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=Jn("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=Jn("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=Jn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=Jn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=Jn("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=Jn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=Jn("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=Jn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=Jn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=Jn("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Jn("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=Jn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yA=J.createContext({});function vA(t){const e=J.useRef(null);return e.current===null&&(e.current=t()),e.current}const yw=J.createContext(null),_A=J.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class lse extends J.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function use({children:t,isPresent:e}){const n=J.useId(),r=J.useRef(null),i=J.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=J.useContext(_A);return J.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),V.jsx(lse,{isPresent:e,childRef:r,sizeRef:i,children:J.cloneElement(t,{ref:r})})}const cse=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=vA(hse),l=J.useId(),u=J.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),c=J.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),u]:[n,u]);return J.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),J.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=V.jsx(use,{isPresent:n,children:t})),V.jsx(yw.Provider,{value:c,children:t})};function hse(){return new Map}function L5(t=!0){const e=J.useContext(yw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=J.useId();J.useEffect(()=>{t&&i(s)},[t]);const o=J.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const g0=t=>t.key||"";function RL(t){const e=[];return J.Children.forEach(t,n=>{J.isValidElement(n)&&e.push(n)}),e}const xA=typeof window<"u",F5=xA?J.useLayoutEffect:J.useEffect,fse=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=L5(o),u=J.useMemo(()=>RL(t),[t]),c=o&&!a?[]:u.map(g0),h=J.useRef(!0),f=J.useRef(u),p=vA(()=>new Map),[m,_]=J.useState(u),[v,g]=J.useState(u);F5(()=>{h.current=!1,f.current=u;for(let w=0;w<v.length;w++){const k=g0(v[w]);c.includes(k)?p.delete(k):p.get(k)!==!0&&p.set(k,!1)}},[v,c.length,c.join("-")]);const x=[];if(u!==m){let w=[...u];for(let k=0;k<v.length;k++){const C=v[k],T=g0(C);c.includes(T)||(w.splice(k,0,C),x.push(C))}s==="wait"&&x.length&&(w=x),g(RL(w)),_(u);return}const{forceRender:b}=J.useContext(yA);return V.jsx(V.Fragment,{children:v.map(w=>{const k=g0(w),C=o&&!a?!1:u===v||c.includes(k),T=()=>{if(p.has(k))p.set(k,!0);else return;let E=!0;p.forEach(A=>{A||(E=!1)}),E&&(b==null||b(),g(f.current),o&&(l==null||l()),r&&r())};return V.jsx(cse,{isPresent:C,initial:!h.current||n?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:C?void 0:T,children:w},k)})})},Ki=t=>t;let P$=Ki;function bA(t){let e;return()=>(e===void 0&&(e=t()),e)}const xf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ba=t=>t*1e3,wa=t=>t/1e3,dse={skipAnimations:!1,useManualTiming:!1};function pse(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,c=!1,h=!1)=>{const p=h&&r?e:n;return c&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const y0=["read","resolveKeyframes","update","preRender","render","postRender"],mse=40;function B5(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=y0.reduce((g,x)=>(g[x]=pse(s),g),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:h,postRender:f}=o,p=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,mse),1),i.timestamp=g,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},m=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:y0.reduce((g,x)=>{const b=o[x];return g[x]=(w,k=!1,C=!1)=>(n||m(),b.schedule(w,k,C)),g},{}),cancel:g=>{for(let x=0;x<y0.length;x++)o[y0[x]].cancel(g)},state:i,steps:o}}const{schedule:rn,cancel:jl,state:gr,steps:rC}=B5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ki,!0),z5=J.createContext({strict:!1}),DL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bf={};for(const t in DL)bf[t]={isEnabled:e=>DL[t].some(n=>!!e[n])};function gse(t){for(const e in t)bf[e]={...bf[e],...t[e]}}const yse=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ox(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yse.has(t)}let j5=t=>!ox(t);function vse(t){t&&(j5=e=>e.startsWith("on")?!ox(e):t(e))}try{vse(require("@emotion/is-prop-valid").default)}catch{}function _se(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(j5(i)||n===!0&&ox(i)||!e&&!ox(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function xse(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const vw=J.createContext({});function zm(t){return typeof t=="string"||Array.isArray(t)}function _w(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const wA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SA=["initial",...wA];function xw(t){return _w(t.animate)||SA.some(e=>zm(t[e]))}function V5(t){return!!(xw(t)||t.variants)}function bse(t,e){if(xw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zm(n)?n:void 0,animate:zm(r)?r:void 0}}return t.inherit!==!1?e:{}}function wse(t){const{initial:e,animate:n}=bse(t,J.useContext(vw));return J.useMemo(()=>({initial:e,animate:n}),[ML(e),ML(n)])}function ML(t){return Array.isArray(t)?t.join(" "):t}const Sse=Symbol.for("motionComponentSymbol");function jh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kse(t,e,n){return J.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):jh(n)&&(n.current=r))},[e])}const kA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cse="framerAppearId",U5="data-"+kA(Cse),{schedule:CA,cancel:Rlt}=B5(queueMicrotask,!1),W5=J.createContext({});function Tse(t,e,n,r,i){var s,o;const{visualElement:a}=J.useContext(vw),l=J.useContext(z5),u=J.useContext(yw),c=J.useContext(_A).reducedMotion,h=J.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=h.current,p=J.useContext(W5);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&$se(h.current,n,i,p);const m=J.useRef(!1);J.useInsertionEffect(()=>{f&&m.current&&f.update(n,u)});const _=n[U5],v=J.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return F5(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),CA.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),J.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,_)}),v.current=!1))}),f}function $se(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:G5(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&jh(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function G5(t){if(t)return t.options.allowProjection!==!1?t.projection:G5(t.parent)}function Ese({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&gse(t);function a(u,c){let h;const f={...J.useContext(_A),...u,layoutId:Ise(u)},{isStatic:p}=f,m=wse(u),_=r(u,p);if(!p&&xA){Ase();const v=Ose(f);h=v.MeasureLayout,m.visualElement=Tse(i,_,f,e,v.ProjectionNode)}return V.jsxs(vw.Provider,{value:m,children:[h&&m.visualElement?V.jsx(h,{visualElement:m.visualElement,...f}):null,n(i,u,kse(_,m.visualElement,c),_,p,m.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=J.forwardRef(a);return l[Sse]=i,l}function Ise({layoutId:t}){const e=J.useContext(yA).id;return e&&t!==void 0?e+"-"+t:t}function Ase(t,e){J.useContext(z5).strict}function Ose(t){const{drag:e,layout:n}=bf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Nse=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TA(t){return typeof t!="string"||t.includes("-")?!1:!!(Nse.indexOf(t)>-1||/[A-Z]/u.test(t))}function LL(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function $A(t,e,n,r){if(typeof e=="function"){const[i,s]=LL(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=LL(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const R$=t=>Array.isArray(t),Pse=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Rse=t=>R$(t)?t[t.length-1]||0:t,jr=t=>!!(t&&t.getVelocity);function x_(t){const e=jr(t)?t.get():t;return Pse(e)?e.toValue():e}function Dse({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:Mse(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const H5=t=>(e,n)=>{const r=J.useContext(vw),i=J.useContext(yw),s=()=>Dse(t,e,r,i);return n?s():vA(s)};function Mse(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=x_(s[f]);let{initial:o,animate:a}=t;const l=xw(t),u=V5(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!_w(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=$A(t,f[p]);if(m){const{transitionEnd:_,transition:v,...g}=m;for(const x in g){let b=g[x];if(Array.isArray(b)){const w=c?b.length-1:0;b=b[w]}b!==null&&(i[x]=b)}for(const x in _)i[x]=_[x]}}}return i}const ud=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fc=new Set(ud),K5=t=>e=>typeof e=="string"&&e.startsWith(t),q5=K5("--"),Lse=K5("var(--"),EA=t=>Lse(t)?Fse.test(t.split("/*")[0].trim()):!1,Fse=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,X5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Na=(t,e,n)=>n>e?e:n<t?t:n,cd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jm={...cd,transform:t=>Na(0,1,t)},v0={...cd,default:1},Qg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),tl=Qg("deg"),zo=Qg("%"),He=Qg("px"),Bse=Qg("vh"),zse=Qg("vw"),FL={...zo,parse:t=>zo.parse(t)/100,transform:t=>zo.transform(t*100)},jse={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He},Vse={rotate:tl,rotateX:tl,rotateY:tl,rotateZ:tl,scale:v0,scaleX:v0,scaleY:v0,scaleZ:v0,skew:tl,skewX:tl,skewY:tl,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:jm,originX:FL,originY:FL,originZ:He},BL={...cd,transform:Math.round},IA={...jse,...Vse,zIndex:BL,size:He,fillOpacity:jm,strokeOpacity:jm,numOctaves:BL},Use={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Wse=ud.length;function Gse(t,e,n){let r="",i=!0;for(let s=0;s<Wse;s++){const o=ud[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=X5(a,IA[o]);if(!l){i=!1;const c=Use[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function AA(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Fc.has(l)){o=!0;continue}else if(q5(l)){i[l]=u;continue}else{const c=X5(u,IA[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=Gse(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const Hse={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kse={offset:"strokeDashoffset",array:"strokeDasharray"};function qse(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Hse:Kse;t[s.offset]=He.transform(-r);const o=He.transform(e),a=He.transform(n);t[s.array]=`${o} ${a}`}function zL(t,e,n){return typeof t=="string"?t:He.transform(e+n*t)}function Xse(t,e,n){const r=zL(e,t.x,t.width),i=zL(n,t.y,t.height);return`${r} ${i}`}function OA(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h){if(AA(t,u,h),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=Xse(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&qse(f,o,a,l,!1)}const NA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Z5=()=>({...NA(),attrs:{}}),PA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Y5(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const J5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Q5(t,e,n,r){Y5(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(J5.has(i)?i:kA(i),e.attrs[i])}const ax={};function Zse(t){Object.assign(ax,t)}function eH(t,{layout:e,layoutId:n}){return Fc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ax[t]||t==="opacity")}function RA(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(jr(i[o])||e.style&&jr(e.style[o])||eH(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function tH(t,e,n){const r=RA(t,e,n);for(const i in t)if(jr(t[i])||jr(e[i])){const s=ud.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Yse(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const jL=["x","y","width","height","cx","cy","r"],Jse={useVisualState:H5({scrapeMotionValuesFromProps:tH,createRenderState:Z5,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Fc.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<jL.length;a++){const l=jL[a];t[l]!==e[l]&&(o=!0)}o&&rn.read(()=>{Yse(n,r),rn.render(()=>{OA(r,i,PA(n.tagName),t.transformTemplate),Q5(n,r)})})}})},Qse={useVisualState:H5({scrapeMotionValuesFromProps:RA,createRenderState:NA})};function nH(t,e,n){for(const r in e)!jr(e[r])&&!eH(r,n)&&(t[r]=e[r])}function eoe({transformTemplate:t},e){return J.useMemo(()=>{const n=NA();return AA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function toe(t,e){const n=t.style||{},r={};return nH(r,n,t),Object.assign(r,eoe(t,e)),r}function noe(t,e){const n={},r=toe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function roe(t,e,n,r){const i=J.useMemo(()=>{const s=Z5();return OA(s,e,PA(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};nH(s,t.style,t),i.style={...s,...i.style}}return i}function ioe(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(TA(n)?roe:noe)(r,s,o,n),u=_se(r,typeof n=="string",t),c=n!==J.Fragment?{...u,...l,ref:i}:{},{children:h}=r,f=J.useMemo(()=>jr(h)?h.get():h,[h]);return J.createElement(n,{...c,children:f})}}function soe(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...TA(r)?Jse:Qse,preloadedFeatures:t,useRender:ioe(i),createVisualElement:e,Component:r};return Ese(o)}}function rH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function bw(t,e,n){const r=t.getProps();return $A(r,e,n!==void 0?n:r.custom,t)}const ooe=bA(()=>window.ScrollTimeline!==void 0);class aoe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(ooe()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class loe extends aoe{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function DA(t,e){return t?t[e]||t.default||t:void 0}const D$=2e4;function iH(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<D$;)e+=n,r=t.next(e);return e>=D$?1/0:e}function MA(t){return typeof t=="function"}function VL(t,e){t.timeline=e,t.onfinish=null}const LA=t=>Array.isArray(t)&&typeof t[0]=="number",uoe={linearEasing:void 0};function coe(t,e){const n=bA(t);return()=>{var r;return(r=uoe[e])!==null&&r!==void 0?r:n()}}const lx=coe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(xf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function oH(t){return!!(typeof t=="function"&&lx()||!t||typeof t=="string"&&(t in M$||lx())||LA(t)||Array.isArray(t)&&t.every(oH))}const Lp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,M$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lp([0,.65,.55,1]),circOut:Lp([.55,0,1,.45]),backIn:Lp([.31,.01,.66,-.59]),backOut:Lp([.33,1.53,.69,.99])};function aH(t,e){if(t)return typeof t=="function"&&lx()?sH(t,e):LA(t)?Lp(t):Array.isArray(t)?t.map(n=>aH(n,e)||M$.easeOut):M$[t]}const Hs={x:!1,y:!1};function lH(){return Hs.x||Hs.y}function hoe(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function uH(t,e){const n=hoe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function UL(t){return e=>{e.pointerType==="touch"||lH()||t(e)}}function foe(t,e,n={}){const[r,i,s]=uH(t,n),o=UL(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const c=UL(h=>{u(h),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const cH=(t,e)=>e?t===e?!0:cH(t,e.parentElement):!1,FA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,doe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function poe(t){return doe.has(t.tagName)||t.tabIndex!==-1}const Fp=new WeakSet;function WL(t){return e=>{e.key==="Enter"&&t(e)}}function iC(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const moe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=WL(()=>{if(Fp.has(n))return;iC(n,"down");const i=WL(()=>{iC(n,"up")}),s=()=>iC(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function GL(t){return FA(t)&&!lH()}function goe(t,e,n={}){const[r,i,s]=uH(t,n),o=a=>{const l=a.currentTarget;if(!GL(a)||Fp.has(l))return;Fp.add(l);const u=e(a),c=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!GL(p)||!Fp.has(l))&&(Fp.delete(l),typeof u=="function"&&u(p,{success:m}))},h=p=>{c(p,n.useGlobalTarget||cH(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!poe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>moe(u,i),i)}),s}function yoe(t){return t==="x"||t==="y"?Hs[t]?null:(Hs[t]=!0,()=>{Hs[t]=!1}):Hs.x||Hs.y?null:(Hs.x=Hs.y=!0,()=>{Hs.x=Hs.y=!1})}const hH=new Set(["width","height","top","left","right","bottom",...ud]);let b_;function voe(){b_=void 0}const jo={now:()=>(b_===void 0&&jo.set(gr.isProcessing||dse.useManualTiming?gr.timestamp:performance.now()),b_),set:t=>{b_=t,queueMicrotask(voe)}};function BA(t,e){t.indexOf(e)===-1&&t.push(e)}function zA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class jA{constructor(){this.subscriptions=[]}add(e){return BA(this.subscriptions,e),()=>zA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function fH(t,e){return e?t*(1e3/e):0}const HL=30,_oe=t=>!isNaN(parseFloat(t));class xoe{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=jo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=jo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_oe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new jA);const r=this.events[e].add(n);return e==="change"?()=>{r(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=jo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HL);return fH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vm(t,e){return new xoe(t,e)}function boe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vm(n))}function woe(t,e){const n=bw(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Rse(s[o]);boe(t,o,a)}}function Soe(t){return!!(jr(t)&&t.add)}function L$(t,e){const n=t.getValue("willChange");if(Soe(n))return n.add(e)}function dH(t){return t.props[U5]}const pH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,koe=1e-7,Coe=12;function Toe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=pH(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>koe&&++a<Coe);return o}function ey(t,e,n,r){if(t===e&&n===r)return Ki;const i=s=>Toe(s,0,1,t,n);return s=>s===0||s===1?s:pH(i(s),e,r)}const mH=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,gH=t=>e=>1-t(1-e),yH=ey(.33,1.53,.69,.99),VA=gH(yH),vH=mH(VA),_H=t=>(t*=2)<1?.5*VA(t):.5*(2-Math.pow(2,-10*(t-1))),UA=t=>1-Math.sin(Math.acos(t)),xH=gH(UA),bH=mH(UA),wH=t=>/^0[^.\s]+$/u.test(t);function $oe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wH(t):!0}const am=t=>Math.round(t*1e5)/1e5,WA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Eoe(t){return t==null}const Ioe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GA=(t,e)=>n=>!!(typeof n=="string"&&Ioe.test(n)&&n.startsWith(t)||e&&!Eoe(n)&&Object.prototype.hasOwnProperty.call(n,e)),SH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(WA);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Aoe=t=>Na(0,255,t),sC={...cd,transform:t=>Math.round(Aoe(t))},Hu={test:GA("rgb","red"),parse:SH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sC.transform(t)+", "+sC.transform(e)+", "+sC.transform(n)+", "+am(jm.transform(r))+")"};function Ooe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const F$={test:GA("#"),parse:Ooe,transform:Hu.transform},Vh={test:GA("hsl","hue"),parse:SH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+zo.transform(am(e))+", "+zo.transform(am(n))+", "+am(jm.transform(r))+")"},Nr={test:t=>Hu.test(t)||F$.test(t)||Vh.test(t),parse:t=>Hu.test(t)?Hu.parse(t):Vh.test(t)?Vh.parse(t):F$.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hu.transform(t):Vh.transform(t)},Noe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Poe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(WA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Noe))===null||n===void 0?void 0:n.length)||0)>0}const kH="number",CH="color",Roe="var",Doe="var(",KL="${}",Moe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Um(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Moe,l=>(Nr.test(l)?(r.color.push(s),i.push(CH),n.push(Nr.parse(l))):l.startsWith(Doe)?(r.var.push(s),i.push(Roe),n.push(l)):(r.number.push(s),i.push(kH),n.push(parseFloat(l))),++s,KL)).split(KL);return{values:n,split:a,indexes:r,types:i}}function TH(t){return Um(t).values}function $H(t){const{split:e,types:n}=Um(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===kH?s+=am(i[o]):a===CH?s+=Nr.transform(i[o]):s+=i[o]}return s}}const Loe=t=>typeof t=="number"?0:t;function Foe(t){const e=TH(t);return $H(t)(e.map(Loe))}const Vl={test:Poe,parse:TH,createTransformer:$H,getAnimatableNone:Foe},Boe=new Set(["brightness","contrast","saturate","opacity"]);function zoe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(WA)||[];if(!r)return t;const i=n.replace(r,"");let s=Boe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const joe=/\b([a-z-]*)\(.*?\)/gu,B$={...Vl,getAnimatableNone:t=>{const e=t.match(joe);return e?e.map(zoe).join(" "):t}},Voe={...IA,color:Nr,backgroundColor:Nr,outlineColor:Nr,fill:Nr,stroke:Nr,borderColor:Nr,borderTopColor:Nr,borderRightColor:Nr,borderBottomColor:Nr,borderLeftColor:Nr,filter:B$,WebkitFilter:B$},HA=t=>Voe[t];function EH(t,e){let n=HA(t);return n!==B$&&(n=Vl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Uoe=new Set(["auto","none","0"]);function Woe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Uoe.has(s)&&Um(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=EH(n,i)}const qL=t=>t===cd||t===He,XL=(t,e)=>parseFloat(t.split(", ")[e]),ZL=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return XL(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?XL(s[1],t):0}},Goe=new Set(["x","y","z"]),Hoe=ud.filter(t=>!Goe.has(t));function Koe(t){const e=[];return Hoe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ZL(4,13),y:ZL(5,14)};wf.translateX=wf.x;wf.translateY=wf.y;const sc=new Set;let z$=!1,j$=!1;function IH(){if(j$){const t=Array.from(sc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Koe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}j$=!1,z$=!1,sc.forEach(t=>t.complete()),sc.clear()}function AH(){sc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(j$=!0)})}function qoe(){AH(),IH()}class KA{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sc.add(this),z$||(z$=!0,rn.read(AH),rn.resolveKeyframes(IH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const OH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Xoe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zoe(t){const e=Xoe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function NH(t,e,n=1){const[r,i]=Zoe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return OH(o)?parseFloat(o):o}return EA(i)?NH(i,e,n+1):i}const PH=t=>e=>e.test(t),Yoe={test:t=>t==="auto",parse:t=>t},RH=[cd,He,zo,tl,zse,Bse,Yoe],YL=t=>RH.find(PH(t));class DH extends KA{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),EA(u))){const c=NH(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!hH.has(r)||e.length!==2)return;const[i,s]=e,o=YL(i),a=YL(s);if(o!==a)if(qL(o)&&qL(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)$oe(e[i])&&r.push(i);r.length&&Woe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=wf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const JL=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vl.test(t)||t==="0")&&!t.startsWith("url("));function Joe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Qoe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=JL(i,e),a=JL(s,e);return!o||!a?!1:Joe(t)||(n==="spring"||MA(n))&&r}const eae=t=>t!==null;function ww(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(eae),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const tae=40;class MH{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=jo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>tae?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qoe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=jo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Qoe(e,r,i,s))if(o)this.options.duration=0;else{l&&l(ww(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const pn=(t,e,n)=>t+(e-t)*n;function oC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nae({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=oC(l,a,t+1/3),s=oC(l,a,t),o=oC(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function ux(t,e){return n=>n>0?e:t}const aC=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},rae=[F$,Hu,Vh],iae=t=>rae.find(e=>e.test(t));function QL(t){const e=iae(t);if(!e)return!1;let n=e.parse(t);return e===Vh&&(n=nae(n)),n}const eF=(t,e)=>{const n=QL(t),r=QL(e);if(!n||!r)return ux(t,e);const i={...n};return s=>(i.red=aC(n.red,r.red,s),i.green=aC(n.green,r.green,s),i.blue=aC(n.blue,r.blue,s),i.alpha=pn(n.alpha,r.alpha,s),Hu.transform(i))},sae=(t,e)=>n=>e(t(n)),ty=(...t)=>t.reduce(sae),V$=new Set(["none","hidden"]);function oae(t,e){return V$.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function aae(t,e){return n=>pn(t,e,n)}function qA(t){return typeof t=="number"?aae:typeof t=="string"?EA(t)?ux:Nr.test(t)?eF:cae:Array.isArray(t)?LH:typeof t=="object"?Nr.test(t)?eF:lae:ux}function LH(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>qA(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function lae(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=qA(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function uae(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const cae=(t,e)=>{const n=Vl.createTransformer(e),r=Um(t),i=Um(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?V$.has(t)&&!i.values.length||V$.has(e)&&!r.values.length?oae(t,e):ty(LH(uae(r,i),i.values),n):ux(t,e)};function FH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?pn(t,e,n):qA(t)(t,e)}const hae=5;function BH(t,e,n){const r=Math.max(e-hae,0);return fH(n-t(r),e-r)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lC=.001;function fae({duration:t=vn.duration,bounce:e=vn.bounce,velocity:n=vn.velocity,mass:r=vn.mass}){let i,s,o=1-e;o=Na(vn.minDamping,vn.maxDamping,o),t=Na(vn.minDuration,vn.maxDuration,wa(t)),o<1?(i=u=>{const c=u*o,h=c*t,f=c-n,p=U$(u,o),m=Math.exp(-h);return lC-f/p*m},s=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-h),_=U$(Math.pow(u,2),o);return(-i(u)+lC>0?-1:1)*((f-p)*m)/_}):(i=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-lC+c*h},s=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=pae(i,s,a);if(t=ba(t),isNaN(l))return{stiffness:vn.stiffness,damping:vn.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const dae=12;function pae(t,e,n){let r=n;for(let i=1;i<dae;i++)r=r-t(r)/e(r);return r}function U$(t,e){return t*Math.sqrt(1-e*e)}const mae=["duration","bounce"],gae=["stiffness","damping","mass"];function tF(t,e){return e.some(n=>t[n]!==void 0)}function yae(t){let e={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...t};if(!tF(t,gae)&&tF(t,mae))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Na(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:vn.mass,stiffness:i,damping:s}}else{const n=fae(t);e={...e,...n,mass:vn.mass},e.isResolvedFromDuration=!0}return e}function zH(t=vn.visualDuration,e=vn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:p}=yae({...n,velocity:-wa(n.velocity||0)}),m=f||0,_=u/(2*Math.sqrt(l*c)),v=o-s,g=wa(Math.sqrt(l/c)),x=Math.abs(v)<5;r||(r=x?vn.restSpeed.granular:vn.restSpeed.default),i||(i=x?vn.restDelta.granular:vn.restDelta.default);let b;if(_<1){const k=U$(g,_);b=C=>{const T=Math.exp(-_*g*C);return o-T*((m+_*g*v)/k*Math.sin(k*C)+v*Math.cos(k*C))}}else if(_===1)b=k=>o-Math.exp(-g*k)*(v+(m+g*v)*k);else{const k=g*Math.sqrt(_*_-1);b=C=>{const T=Math.exp(-_*g*C),E=Math.min(k*C,300);return o-T*((m+_*g*v)*Math.sinh(E)+k*v*Math.cosh(E))/k}}const w={calculatedDuration:p&&h||null,next:k=>{const C=b(k);if(p)a.done=k>=h;else{let T=0;_<1&&(T=k===0?ba(m):BH(b,k,C));const E=Math.abs(T)<=r,A=Math.abs(o-C)<=i;a.done=E&&A}return a.value=a.done?o:C,a},toString:()=>{const k=Math.min(iH(w),D$),C=sH(T=>w.next(k*T).value,k,30);return k+"ms "+C}};return w}function nF({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,m=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let _=n*e;const v=h+_,g=o===void 0?v:o(v);g!==v&&(_=g-h);const x=E=>-_*Math.exp(-E/r),b=E=>g+x(E),w=E=>{const A=x(E),$=b(E);f.done=Math.abs(A)<=u,f.value=f.done?g:$};let k,C;const T=E=>{p(f.value)&&(k=E,C=zH({keyframes:[f.value,m(f.value)],velocity:BH(b,E,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:E=>{let A=!1;return!C&&k===void 0&&(A=!0,w(E),T(E)),k!==void 0&&E>=k?C.next(E-k):(!A&&w(E),f)}}}const vae=ey(.42,0,1,1),_ae=ey(0,0,.58,1),jH=ey(.42,0,.58,1),xae=t=>Array.isArray(t)&&typeof t[0]!="number",rF={linear:Ki,easeIn:vae,easeInOut:jH,easeOut:_ae,circIn:UA,circInOut:bH,circOut:xH,backIn:VA,backInOut:vH,backOut:yH,anticipate:_H},iF=t=>{if(LA(t)){P$(t.length===4);const[e,n,r,i]=t;return ey(e,n,r,i)}else if(typeof t=="string")return P$(rF[t]!==void 0),rF[t];return t};function bae(t,e,n){const r=[],i=n||FH,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ki:e;a=ty(l,a)}r.push(a)}return r}function wae(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(P$(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=bae(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=xf(t[h],t[h+1],c);return a[h](f)};return n?c=>u(Na(t[0],t[s-1],c)):u}function Sae(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=xf(0,e,r);t.push(pn(n,1,i))}}function kae(t){const e=[0];return Sae(e,t.length-1),e}function Cae(t,e){return t.map(n=>n*e)}function Tae(t,e){return t.map(()=>e||jH).splice(0,t.length-1)}function cx({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=xae(r)?r.map(iF):iF(r),s={done:!1,value:e[0]},o=Cae(n&&n.length===e.length?n:kae(e),t),a=wae(o,e,{ease:Array.isArray(i)?i:Tae(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const $ae=t=>{const e=({timestamp:n})=>t(n);return{start:()=>rn.update(e,!0),stop:()=>jl(e),now:()=>gr.isProcessing?gr.timestamp:jo.now()}},Eae={decay:nF,inertia:nF,tween:cx,keyframes:cx,spring:zH},Iae=t=>t/100;class XA extends MH{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||KA,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=MA(n)?n:Eae[n]||cx;let l,u;a!==cx&&typeof e[0]!="number"&&(l=ty(Iae,FH(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=iH(c));const{calculatedDuration:h}=c,f=h+i,p=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:m,repeatDelay:_,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let b=this.currentTime,w=s;if(p){const E=Math.min(this.currentTime,c)/h;let A=Math.floor(E),$=E%1;!$&&E>=1&&($=1),$===1&&A--,A=Math.min(A,p+1),!!(A%2)&&(m==="reverse"?($=1-$,_&&($-=_/h)):m==="mirror"&&(w=o)),b=Na(0,1,$)*h}const k=x?{done:!1,value:l[0]}:w.next(b);a&&(k.value=a(k.value));let{done:C}=k;!x&&u!==null&&(C=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return T&&i!==void 0&&(k.value=ww(l,this.options,i)),v&&v(k.value),T&&this.finish(),k}get duration(){const{resolved:e}=this;return e?wa(e.calculatedDuration):0}get time(){return wa(this.currentTime)}set time(e){e=ba(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=$ae,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Aae=new Set(["opacity","clipPath","filter","transform"]);function Oae(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=aH(a,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Nae=bA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hx=10,Pae=2e4;function Rae(t){return MA(t.type)||t.type==="spring"||!oH(t.ease)}function Dae(t,e){const n=new XA({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Pae;)r=n.sample(s),i.push(r.value),s+=hx;return{times:void 0,keyframes:i,duration:s-hx,ease:"linear"}}const VH={anticipate:_H,backInOut:vH,circInOut:bH};function Mae(t){return t in VH}class sF extends MH{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new DH(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&lx()&&Mae(s)&&(s=VH[s]),Rae(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:m,..._}=this.options,v=Dae(e,_);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,o="keyframes"}const c=Oae(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(VL(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:h}=this.options;a.set(ww(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return wa(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return wa(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ba(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ki;const{animation:r}=n;VL(r,e)}return Ki}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:h,element:f,...p}=this.options,m=new XA({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=ba(this.time);u.setWithVelocity(m.sample(_-hx).value,m.sample(_).value,hx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return Nae()&&r&&Aae.has(r)&&!l&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Lae={type:"spring",stiffness:500,damping:25,restSpeed:10},Fae=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Bae={type:"keyframes",duration:.8},zae={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jae=(t,{keyframes:e})=>e.length>2?Bae:Fc.has(t)?t.startsWith("scale")?Fae(e[1]):Lae:zae;function Vae({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const ZA=(t,e,n,r={},i,s)=>o=>{const a=DA(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ba(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Vae(a)||(c={...c,...jae(t,c)}),c.duration&&(c.duration=ba(c.duration)),c.repeatDelay&&(c.repeatDelay=ba(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=ww(c.keyframes,a);if(f!==void 0)return rn.update(()=>{c.onUpdate(f),c.onComplete()}),new loe([])}return!s&&sF.supports(c)?new sF(c):new XA(c)};function Uae({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function UH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),p=l[h];if(p===void 0||c&&Uae(c,h))continue;const m={delay:n,...DA(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const g=dH(t);if(g){const x=window.MotionHandoffAnimation(g,h,rn);x!==null&&(m.startTime=x,_=!0)}}L$(t,h),f.start(ZA(h,f,p,t.shouldReduceMotion&&hH.has(h)?{type:!1}:m,t,_));const v=f.animation;v&&u.push(v)}return a&&Promise.all(u).then(()=>{rn.update(()=>{a&&woe(t,a)})}),u}function W$(t,e,n={}){var r;const i=bw(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(UH(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return Wae(t,e,c+u,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function Wae(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(Gae).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(W$(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Gae(t,e){return t.sortNodePosition(e)}function Hae(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>W$(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=W$(t,e,n);else{const i=typeof e=="function"?bw(t,e,n.custom):e;r=Promise.all(UH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Kae=SA.length;function WH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?WH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Kae;n++){const r=SA[n],i=t.props[r];(zm(i)||i===!1)&&(e[r]=i)}return e}const qae=[...wA].reverse(),Xae=wA.length;function Zae(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Hae(t,n,r)))}function Yae(t){let e=Zae(t),n=oF(),r=!0;const i=l=>(u,c)=>{var h;const f=bw(t,c,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:m,..._}=f;u={...u,..._,...m}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=WH(t.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let v=0;v<Xae;v++){const g=qae[v],x=n[g],b=u[g]!==void 0?u[g]:c[g],w=zm(b),k=g===l?x.isActive:null;k===!1&&(m=v);let C=b===c[g]&&b!==u[g]&&w;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...p},!x.isActive&&k===null||!b&&!x.prevProp||_w(b)||typeof b=="boolean")continue;const T=Jae(x.prevProp,b);let E=T||g===l&&x.isActive&&!C&&w||v>m&&w,A=!1;const $=Array.isArray(b)?b:[b];let N=$.reduce(i(g),{});k===!1&&(N={});const{prevResolvedValues:P={}}=x,M={...P,...N},B=U=>{E=!0,f.has(U)&&(A=!0,f.delete(U)),x.needsAnimating[U]=!0;const D=t.getValue(U);D&&(D.liveStyle=!1)};for(const U in M){const D=N[U],W=P[U];if(p.hasOwnProperty(U))continue;let G=!1;R$(D)&&R$(W)?G=!rH(D,W):G=D!==W,G?D!=null?B(U):f.add(U):D!==void 0&&f.has(U)?B(U):x.protectedKeys[U]=!0}x.prevProp=b,x.prevResolvedValues=N,x.isActive&&(p={...p,...N}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(C&&T)||A)&&h.push(...$.map(U=>({animation:U,options:{type:g}})))}if(f.size){const v={};f.forEach(g=>{const x=t.getBaseTarget(g),b=t.getValue(g);b&&(b.liveStyle=!0),v[g]=x??null}),h.push({animation:v})}let _=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=oF(),r=!0}}}function Jae(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!rH(e,t):!1}function wu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oF(){return{animate:wu(!0),whileInView:wu(),whileHover:wu(),whileTap:wu(),whileDrag:wu(),whileFocus:wu(),exit:wu()}}class Ql{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Qae extends Ql{constructor(e){super(e),e.animationState||(e.animationState=Yae(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_w(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ele=0;class tle extends Ql{constructor(){super(...arguments),this.id=ele++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nle={animation:{Feature:Qae},exit:{Feature:tle}};function Wm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ny(t){return{point:{x:t.pageX,y:t.pageY}}}const rle=t=>e=>FA(e)&&t(e,ny(e));function lm(t,e,n,r){return Wm(t,e,rle(n),r)}const aF=(t,e)=>Math.abs(t-e);function ile(t,e){const n=aF(t.x,e.x),r=aF(t.y,e.y);return Math.sqrt(n**2+r**2)}class GH{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=cC(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=ile(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:m}=h,{timestamp:_}=gr;this.history.push({...m,timestamp:_});const{onStart:v,onMove:g}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=uC(f,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=cC(h.type==="pointercancel"?this.lastMoveEventInfo:uC(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,v),m&&m(h,v)},!FA(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=ny(e),a=uC(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=gr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,cC(a,this.history)),this.removeListeners=ty(lm(this.contextWindow,"pointermove",this.handlePointerMove),lm(this.contextWindow,"pointerup",this.handlePointerUp),lm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jl(this.updatePoint)}}function uC(t,e){return e?{point:e(t.point)}:t}function lF(t,e){return{x:t.x-e.x,y:t.y-e.y}}function cC({point:t},e){return{point:t,delta:lF(t,HH(e)),offset:lF(t,sle(e)),velocity:ole(e,.1)}}function sle(t){return t[0]}function HH(t){return t[t.length-1]}function ole(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=HH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ba(e)));)n--;if(!r)return{x:0,y:0};const s=wa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const KH=1e-4,ale=1-KH,lle=1+KH,qH=.01,ule=0-qH,cle=0+qH;function Zi(t){return t.max-t.min}function hle(t,e,n){return Math.abs(t-e)<=n}function uF(t,e,n,r=.5){t.origin=r,t.originPoint=pn(e.min,e.max,t.origin),t.scale=Zi(n)/Zi(e),t.translate=pn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ale&&t.scale<=lle||isNaN(t.scale))&&(t.scale=1),(t.translate>=ule&&t.translate<=cle||isNaN(t.translate))&&(t.translate=0)}function um(t,e,n,r){uF(t.x,e.x,n.x,r?r.originX:void 0),uF(t.y,e.y,n.y,r?r.originY:void 0)}function cF(t,e,n){t.min=n.min+e.min,t.max=t.min+Zi(e)}function fle(t,e,n){cF(t.x,e.x,n.x),cF(t.y,e.y,n.y)}function hF(t,e,n){t.min=e.min-n.min,t.max=t.min+Zi(e)}function cm(t,e,n){hF(t.x,e.x,n.x),hF(t.y,e.y,n.y)}function dle(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?pn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?pn(n,t,r.max):Math.min(t,n)),t}function fF(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ple(t,{top:e,left:n,bottom:r,right:i}){return{x:fF(t.x,n,i),y:fF(t.y,e,r)}}function dF(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function mle(t,e){return{x:dF(t.x,e.x),y:dF(t.y,e.y)}}function gle(t,e){let n=.5;const r=Zi(t),i=Zi(e);return i>r?n=xf(e.min,e.max-r,t.min):r>i&&(n=xf(t.min,t.max-i,e.min)),Na(0,1,n)}function yle(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G$=.35;function vle(t=G$){return t===!1?t=0:t===!0&&(t=G$),{x:pF(t,"left","right"),y:pF(t,"top","bottom")}}function pF(t,e,n){return{min:mF(t,e),max:mF(t,n)}}function mF(t,e){return typeof t=="number"?t:t[e]||0}const gF=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uh=()=>({x:gF(),y:gF()}),yF=()=>({min:0,max:0}),En=()=>({x:yF(),y:yF()});function ds(t){return[t("x"),t("y")]}function XH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _le({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xle(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hC(t){return t===void 0||t===1}function H$({scale:t,scaleX:e,scaleY:n}){return!hC(t)||!hC(e)||!hC(n)}function Iu(t){return H$(t)||ZH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ZH(t){return vF(t.x)||vF(t.y)}function vF(t){return t&&t!=="0%"}function fx(t,e,n){const r=t-n,i=e*r;return n+i}function _F(t,e,n,r,i){return i!==void 0&&(t=fx(t,i,r)),fx(t,n,r)+e}function K$(t,e=0,n=1,r,i){t.min=_F(t.min,e,n,r,i),t.max=_F(t.max,e,n,r,i)}function YH(t,{x:e,y:n}){K$(t.x,e.translate,e.scale,e.originPoint),K$(t.y,n.translate,n.scale,n.originPoint)}const xF=.999999999999,bF=1.0000000000001;function ble(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Gh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YH(t,o)),r&&Iu(s.latestValues)&&Gh(t,s.latestValues))}e.x<bF&&e.x>xF&&(e.x=1),e.y<bF&&e.y>xF&&(e.y=1)}function Wh(t,e){t.min=t.min+e,t.max=t.max+e}function wF(t,e,n,r,i=.5){const s=pn(t.min,t.max,i);K$(t,e,n,s,r)}function Gh(t,e){wF(t.x,e.x,e.scaleX,e.scale,e.originX),wF(t.y,e.y,e.scaleY,e.scale,e.originY)}function JH(t,e){return XH(xle(t.getBoundingClientRect(),e))}function wle(t,e,n){const r=JH(t,n),{scroll:i}=e;return i&&(Wh(r.x,i.offset.x),Wh(r.y,i.offset.y)),r}const QH=({current:t})=>t?t.ownerDocument.defaultView:null,Sle=new WeakMap;class kle{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ny(c).point)},s=(c,h)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yoe(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ds(v=>{let g=this.getAxisMotionValue(v).get()||0;if(zo.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[v];b&&(g=Zi(b)*(parseFloat(g)/100))}}this.originPoint[v]=g}),m&&rn.postRender(()=>m(c,h)),L$(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=h;if(p&&this.currentDirection===null){this.currentDirection=Cle(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),_&&_(c,h)},a=(c,h)=>this.stop(c,h),l=()=>ds(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new GH(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:QH(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&rn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!_0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=dle(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&jh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=ple(i.layoutBox,n):this.constraints=!1,this.elastic=vle(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ds(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=yle(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!jh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=wle(r,i.root,this.visualElement.getTransformPagePoint());let o=mle(i.layout.layoutBox,s);if(n){const a=n(_le(o));this.hasMutatedConstraints=!!a,a&&(o=XH(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ds(c=>{if(!_0(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return L$(this.visualElement,e),r.start(ZA(e,r,0,n,this.visualElement,!1))}stopAnimation(){ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ds(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ds(n=>{const{drag:r}=this.getProps();if(!_0(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-pn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ds(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=gle({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ds(o=>{if(!_0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(pn(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Sle.set(this.visualElement,this);const e=this.visualElement.current,n=lm(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();jh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),rn.read(r);const o=Wm(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ds(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=G$,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function _0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Cle(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Tle extends Ql{constructor(e){super(e),this.removeGroupControls=Ki,this.removeListeners=Ki,this.controls=new kle(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const SF=t=>(e,n)=>{t&&rn.postRender(()=>t(e,n))};class $le extends Ql{constructor(){super(...arguments),this.removePointerDownListener=Ki}onPointerDown(e){this.session=new GH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:SF(e),onStart:SF(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&rn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=lm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const w_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kF(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(He.test(t))t=parseFloat(t);else return t;const n=kF(t,e.target.x),r=kF(t,e.target.y);return`${n}% ${r}%`}},Ele={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Vl.parse(t);if(i.length>5)return r;const s=Vl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=pn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class Ile extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Zse(Ale),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),w_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),CA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function e6(t){const[e,n]=L5(),r=J.useContext(yA);return V.jsx(Ile,{...t,layoutGroup:r,switchLayoutGroup:J.useContext(W5),isPresent:e,safeToRemove:n})}const Ale={borderRadius:{...dp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dp,borderTopRightRadius:dp,borderBottomLeftRadius:dp,borderBottomRightRadius:dp,boxShadow:Ele};function Ole(t,e,n){const r=jr(t)?t:Vm(t);return r.start(ZA("",r,e,n)),r.animation}function Nle(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Ple=(t,e)=>t.depth-e.depth;class Rle{constructor(){this.children=[],this.isDirty=!1}add(e){BA(this.children,e),this.isDirty=!0}remove(e){zA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ple),this.isDirty=!1,this.children.forEach(e)}}function Dle(t,e){const n=jo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(jl(r),t(s-e))};return rn.read(r,!0),()=>jl(r)}const t6=["TopLeft","TopRight","BottomLeft","BottomRight"],Mle=t6.length,CF=t=>typeof t=="string"?parseFloat(t):t,TF=t=>typeof t=="number"||He.test(t);function Lle(t,e,n,r,i,s){i?(t.opacity=pn(0,n.opacity!==void 0?n.opacity:1,Fle(r)),t.opacityExit=pn(e.opacity!==void 0?e.opacity:1,0,Ble(r))):s&&(t.opacity=pn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Mle;o++){const a=`border${t6[o]}Radius`;let l=$F(e,a),u=$F(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||TF(l)===TF(u)?(t[a]=Math.max(pn(CF(l),CF(u),r),0),(zo.test(u)||zo.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=pn(e.rotate||0,n.rotate||0,r))}function $F(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Fle=n6(0,.5,xH),Ble=n6(.5,.95,Ki);function n6(t,e,n){return r=>r<t?0:r>e?1:n(xf(t,e,r))}function EF(t,e){t.min=e.min,t.max=e.max}function as(t,e){EF(t.x,e.x),EF(t.y,e.y)}function IF(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function AF(t,e,n,r,i){return t-=e,t=fx(t,1/n,r),i!==void 0&&(t=fx(t,1/i,r)),t}function zle(t,e=0,n=1,r=.5,i,s=t,o=t){if(zo.test(e)&&(e=parseFloat(e),e=pn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=pn(s.min,s.max,r);t===s&&(a-=e),t.min=AF(t.min,e,n,a,i),t.max=AF(t.max,e,n,a,i)}function OF(t,e,[n,r,i],s,o){zle(t,e[n],e[r],e[i],e.scale,s,o)}const jle=["x","scaleX","originX"],Vle=["y","scaleY","originY"];function NF(t,e,n,r){OF(t.x,e,jle,n?n.x:void 0,r?r.x:void 0),OF(t.y,e,Vle,n?n.y:void 0,r?r.y:void 0)}function PF(t){return t.translate===0&&t.scale===1}function r6(t){return PF(t.x)&&PF(t.y)}function RF(t,e){return t.min===e.min&&t.max===e.max}function Ule(t,e){return RF(t.x,e.x)&&RF(t.y,e.y)}function DF(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function i6(t,e){return DF(t.x,e.x)&&DF(t.y,e.y)}function MF(t){return Zi(t.x)/Zi(t.y)}function LF(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wle{constructor(){this.members=[]}add(e){BA(this.members,e),e.scheduleRender()}remove(e){if(zA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gle(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Au={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bp=typeof window<"u"&&window.MotionDebug!==void 0,fC=["","X","Y","Z"],Hle={visibility:"hidden"},FF=1e3;let Kle=0;function dC(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function s6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=dH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",rn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&s6(r)}function o6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Kle++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bp&&(Au.totalNodes=Au.resolvedTargetDeltas=Au.recalculatedProjection=0),this.nodes.forEach(Zle),this.nodes.forEach(tue),this.nodes.forEach(nue),this.nodes.forEach(Yle),Bp&&window.MotionDebug.record(Au)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rle)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jA),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Nle(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Dle(f,250),w_.hasAnimatedSinceResize&&(w_.hasAnimatedSinceResize=!1,this.nodes.forEach(zF))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||aue,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=c.getProps(),x=!this.targetLayout||!i6(this.targetLayout,m)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const w={...DA(_,"layout"),onPlay:v,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||zF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rue),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&s6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BF);return}this.isUpdating||this.nodes.forEach(Qle),this.isUpdating=!1,this.nodes.forEach(eue),this.nodes.forEach(qle),this.nodes.forEach(Xle),this.clearAllSnapshots();const a=jo.now();gr.delta=Na(0,1e3/60,a-gr.timestamp),gr.timestamp=a,gr.isProcessing=!0,rC.update.process(gr),rC.preRender.process(gr),rC.render.process(gr),gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,CA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Jle),this.sharedNodes.forEach(iue)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!r6(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Iu(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),lue(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return En();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(uue))){const{scroll:c}=this.root;c&&(Wh(l.x,c.offset.x),Wh(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=En();if(as(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&as(l,o),Wh(l.x,h.offset.x),Wh(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=En();as(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Gh(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Iu(c.latestValues)&&Gh(l,c.latestValues)}return Iu(this.latestValues)&&Gh(l,this.latestValues),l}removeTransform(o){const a=En();as(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Iu(u.latestValues))continue;H$(u.latestValues)&&u.updateSnapshot();const c=En(),h=u.measurePageBox();as(c,h),NF(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Iu(this.latestValues)&&NF(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=gr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),cm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),as(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fle(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):as(this.target,this.layout.layoutBox),YH(this.target,this.targetDelta)):as(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),cm(this.relativeTargetOrigin,this.target,p.target),as(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bp&&Au.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||H$(this.parent.latestValues)||ZH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;as(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;ble(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=En());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IF(this.prevProjectionDelta.x,this.projectionDelta.x),IF(this.prevProjectionDelta.y,this.projectionDelta.y)),um(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!LF(this.projectionDelta.x,this.prevProjectionDelta.x)||!LF(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Bp&&Au.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uh(),this.projectionDelta=Uh(),this.projectionDeltaWithTransform=Uh()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Uh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=En(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,_=p!==m,v=this.getStack(),g=!v||v.members.length<=1,x=!!(_&&!g&&this.options.crossfade===!0&&!this.path.some(oue));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const k=w/1e3;jF(h.x,o.x,k),jF(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cm(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sue(this.relativeTarget,this.relativeTargetOrigin,f,k),b&&Ule(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=En()),as(b,this.relativeTarget)),_&&(this.animationValues=c,Lle(c,u,this.latestValues,k,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{w_.hasAnimatedSinceResize=!0,this.currentAnimation=Ole(0,FF,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&a6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||En();const h=Zi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Zi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}as(a,l),Gh(a,c),um(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Wle),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&dC("z",o,u,this.animationValues);for(let c=0;c<fC.length;c++)dC(`rotate${fC[c]}`,o,u,this.animationValues),dC(`skew${fC[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Hle;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=x_(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=x_(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Iu(this.latestValues)&&(_.transform=c?c({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Gle(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in ax){if(f[_]===void 0)continue;const{correct:v,applyTo:g}=ax[_],x=u.transform==="none"?f[_]:v(f[_],h);if(g){const b=g.length;for(let w=0;w<b;w++)u[g[w]]=x}else u[_]=x}return this.options.layoutId&&(u.pointerEvents=h===this?x_(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(BF),this.root.sharedNodes.clear()}}}function qle(t){t.updateLayout()}function Xle(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?ds(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Zi(f);f.min=r[h].min,f.max=f.min+p}):a6(s,n.layoutBox,r)&&ds(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Zi(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Uh();um(a,r,n.layoutBox);const l=Uh();o?um(l,t.applyTransform(i,!0),n.measuredBox):um(l,r,n.layoutBox);const u=!r6(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=En();cm(m,n.layoutBox,f.layoutBox);const _=En();cm(_,r,p.layoutBox),i6(m,_)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Zle(t){Bp&&Au.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Yle(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Jle(t){t.clearSnapshot()}function BF(t){t.clearMeasurements()}function Qle(t){t.isLayoutDirty=!1}function eue(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zF(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tue(t){t.resolveTargetDelta()}function nue(t){t.calcProjection()}function rue(t){t.resetSkewAndRotation()}function iue(t){t.removeLeadSnapshot()}function jF(t,e,n){t.translate=pn(e.translate,0,n),t.scale=pn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function VF(t,e,n,r){t.min=pn(e.min,n.min,r),t.max=pn(e.max,n.max,r)}function sue(t,e,n,r){VF(t.x,e.x,n.x,r),VF(t.y,e.y,n.y,r)}function oue(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aue={duration:.45,ease:[.4,0,.1,1]},UF=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),WF=UF("applewebkit/")&&!UF("chrome/")?Math.round:Ki;function GF(t){t.min=WF(t.min),t.max=WF(t.max)}function lue(t){GF(t.x),GF(t.y)}function a6(t,e,n){return t==="position"||t==="preserve-aspect"&&!hle(MF(e),MF(n),.2)}function uue(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const cue=o6({attachResizeListener:(t,e)=>Wm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pC={current:void 0},l6=o6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!pC.current){const t=new cue({});t.mount(window),t.setOptions({layoutScroll:!0}),pC.current=t}return pC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hue={pan:{Feature:$le},drag:{Feature:Tle,ProjectionNode:l6,MeasureLayout:e6}};function HF(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&rn.postRender(()=>s(e,ny(e)))}class fue extends Ql{mount(){const{current:e}=this.node;e&&(this.unmount=foe(e,n=>(HF(this.node,n,"Start"),r=>HF(this.node,r,"End"))))}unmount(){}}class due extends Ql{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ty(Wm(this.node.current,"focus",()=>this.onFocus()),Wm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function KF(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&rn.postRender(()=>s(e,ny(e)))}class pue extends Ql{mount(){const{current:e}=this.node;e&&(this.unmount=goe(e,n=>(KF(this.node,n,"Start"),(r,{success:i})=>KF(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const q$=new WeakMap,mC=new WeakMap,mue=t=>{const e=q$.get(t.target);e&&e(t)},gue=t=>{t.forEach(mue)};function yue({root:t,...e}){const n=t||document;mC.has(n)||mC.set(n,{});const r=mC.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(gue,{root:t,...e})),r[i]}function vue(t,e,n){const r=yue(e);return q$.set(t,n),r.observe(t),()=>{q$.delete(t),r.unobserve(t)}}const _ue={some:0,all:1};class xue extends Ql{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_ue[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return vue(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(bue(e,n))&&this.startObserver()}unmount(){}}function bue({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const wue={inView:{Feature:xue},tap:{Feature:pue},focus:{Feature:due},hover:{Feature:fue}},Sue={layout:{ProjectionNode:l6,MeasureLayout:e6}},X$={current:null},u6={current:!1};function kue(){if(u6.current=!0,!!xA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>X$.current=t.matches;t.addListener(e),e()}else X$.current=!1}const Cue=[...RH,Nr,Vl],Tue=t=>Cue.find(PH(t)),qF=new WeakMap;function $ue(t,e,n){for(const r in e){const i=e[r],s=n[r];if(jr(i))t.addValue(r,i);else if(jr(s))t.addValue(r,Vm(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Vm(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const XF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Eue{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=jo.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,rn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=xw(n),this.isVariantNode=V5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&jr(m)&&m.set(l[p],!1)}}mount(e){this.current=e,qF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),u6.current||kue(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:X$.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qF.delete(this.current),this.projection&&this.projection.unmount(),jl(this.notifyUpdate),jl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Fc.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&rn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bf){const n=bf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<XF.length;r++){const i=XF[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=$ue(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(OH(i)||wH(i))?i=parseFloat(i):!Tue(i)&&Vl.test(n)&&(i=EH(e,n)),this.setBaseTarget(e,jr(i)?i.get():i)),jr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=$A(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!jr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new jA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class c6 extends Eue{constructor(){super(...arguments),this.KeyframeResolver=DH}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Iue(t){return window.getComputedStyle(t)}class Aue extends c6{constructor(){super(...arguments),this.type="html",this.renderInstance=Y5}readValueFromInstance(e,n){if(Fc.has(n)){const r=HA(n);return r&&r.default||0}else{const r=Iue(e),i=(q5(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return JH(e,n)}build(e,n,r){AA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return RA(e,n,r)}}class Oue extends c6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fc.has(n)){const r=HA(n);return r&&r.default||0}return n=J5.has(n)?n:kA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return tH(e,n,r)}build(e,n,r){OA(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Q5(e,n,r,i)}mount(e){this.isSVGTag=PA(e.tagName),super.mount(e)}}const Nue=(t,e)=>TA(t)?new Oue(e):new Aue(e,{allowProjection:t!==J.Fragment}),Pue=soe({...nle,...wue,...hue,...Sue},Nue),As=xse(Pue);function Rue({alerts:t}){const e=n=>{switch(n){case"danger":return V.jsx(Qie,{className:"w-5 h-5 text-red-500"});case"warning":return V.jsx(O5,{className:"w-5 h-5 text-yellow-500"});default:return V.jsx(tse,{className:"w-5 h-5 text-blue-500"})}};return V.jsx("div",{className:"space-y-4",children:t.map((n,r)=>V.jsxs(As.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.1},className:"flex items-start gap-3 p-4 rounded-lg bg-gray-50 dark:bg-gray-900",children:[e(n.type),V.jsxs("div",{children:[V.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:n.message}),V.jsx("span",{className:"text-xs text-gray-500",children:new Date(n.timestamp).toLocaleTimeString()})]})]},n.id))})}function Due({zones:t}){const e=J.useRef(null);return J.useEffect(()=>{if(!e.current)return;const n=e.current,r=n.getContext("2d");if(!r)return;r.clearRect(0,0,n.width,n.height);const i=o=>`hsla(${((1-o)*120).toString(10)}, 100%, 50%, 0.6)`,s=n.width/3;t.forEach((o,a)=>{const l=Math.floor(a/3),c=a%3*s,h=l*s;r.fillStyle=i(o.load/100),r.fillRect(c,h,s,s),r.fillStyle="#FFFFFF",r.font="14px system-ui",r.textAlign="center",r.fillText(o.name,c+s/2,h+s/2-10),r.fillText(`${o.load}%`,c+s/2,h+s/2+10)})},[t]),V.jsxs(As.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[V.jsx("canvas",{ref:e,width:300,height:200,className:"w-full rounded-lg"}),V.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-2 bg-white/90 dark:bg-gray-800/90 p-2 rounded-lg text-sm",children:[V.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),V.jsx("span",{children:"Low"}),V.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),V.jsx("span",{children:"Medium"}),V.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),V.jsx("span",{children:"High"})]})]})}function Oi({title:t,children:e,className:n="",maxHeight:r}){return V.jsxs(As.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${n}`,children:[V.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:t}),V.jsx("div",{className:r?`overflow-auto ${r}`:void 0,children:e})]})}function Mue(){const[t,e]=J.useState([{id:"1",type:"smartphone",name:"Smartphone",consumption:.005,active:!0},{id:"2",type:"laptop",name:"Laptop",consumption:.05,active:!0},{id:"3",type:"tv",name:"TV",consumption:.1,active:!1},{id:"4",type:"light",name:"Smart Light",consumption:.01,active:!0},{id:"5",type:"battery",name:"Battery Storage",consumption:-.5,active:!0}]),[n,r]=J.useState(0);J.useEffect(()=>{const a=t.filter(l=>l.active).reduce((l,u)=>l+u.consumption,0);r(a)},[t]);const i=o=>{switch(o){case"smartphone":return V.jsx(ose,{className:"w-6 h-6"});case"laptop":return V.jsx(nse,{className:"w-6 h-6"});case"tv":return V.jsx(ase,{className:"w-6 h-6"});case"light":return V.jsx(rse,{className:"w-6 h-6"});case"battery":return V.jsx(N5,{className:"w-6 h-6"})}},s=o=>{e(t.map(a=>a.id===o?{...a,active:!a.active}:a))};return V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"flex justify-between items-center mb-4",children:[V.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Device Simulator"}),V.jsxs("div",{className:"text-sm",children:[V.jsx("span",{className:"text-gray-500",children:"Total Consumption: "}),V.jsxs("span",{className:`font-medium ${n>0?"text-red-500":"text-green-500"}`,children:[Math.abs(n).toFixed(3)," kW"]})]})]}),V.jsx("div",{className:"grid gap-3",children:t.map((o,a)=>V.jsx(As.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:`p-4 rounded-lg cursor-pointer transition-colors ${o.active,"bg-gray-50 dark:bg-gray-800"}`,onClick:()=>s(o.id),children:V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:`p-2 rounded-lg ${o.active,"bg-gray-100 dark:bg-gray-700"}`,children:i(o.type)}),V.jsxs("div",{children:[V.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:o.name}),V.jsxs("p",{className:"text-sm text-gray-500",children:[Math.abs(o.consumption)," kW",o.consumption<0?" (Storage)":""]})]})]}),V.jsx("div",{className:`w-4 h-4 rounded-full ${o.active?"bg-red-500":"bg-green-500"}`})]})},o.id))})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lue=1e-7,Fue=1e-4;class h6{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class YA{refCount(e){return fi("refCount")}incRef(e){return fi("incRef")}timerAvailable(){return!0}time(e){return fi("time")}read(e){return fi("read")}readSync(e){return fi("readSync")}readToGPU(e,n){return fi("readToGPU")}numDataIds(){return fi("numDataIds")}disposeData(e,n){return fi("disposeData")}write(e,n,r){return fi("write")}move(e,n,r,i,s){return fi("move")}createTensorFromGPUData(e,n,r){return fi("createTensorFromGPUData")}memory(){return fi("memory")}floatPrecision(){return fi("floatPrecision")}epsilon(){return this.floatPrecision()===32?Lue:Fue}dispose(){return fi("dispose")}}function fi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bue(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Ch(t,e,n)}function gc(t,e,n){return Math.max(t,Math.min(e,n))}function JA(t){return t%2===0?t:t+1}function Ch(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function zue(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function F(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function QA(t,e,n=""){F(Ct(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function f6(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ce(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ct(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Sf(t){return t%1===0}function Z$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function nf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function ZF(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function d6(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function it(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),F(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),F(t.every(r=>Sf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function eu(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:it(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function br(t,e){return bn(t,e)}function bn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function jue(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Vue(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function p6(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function dx(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Uue(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ry(t){return typeof t=="string"||t instanceof String}function Wue(t){return typeof t=="boolean"}function Y$(t){return typeof t=="number"}function hd(t){return Array.isArray(t)?hd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Y$(t)?"float32":ry(t)?"string":Wue(t)?"bool":"float32"}function J$(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Q$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Le(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function m6(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)i[l]=m6(t+l*a,o,n,r)}return i}function oo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return m6(0,t,e,n)}function Gue(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function eO(t,e){const n=wr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function wr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function g6(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return oo(t,new Float32Array(n));if(e==="int32")return oo(t,new Int32Array(n));if(e==="bool")return oo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ga(t){t.forEach(e=>{F(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Vo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function fd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function tO(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YF="tfjsflags";class Hue{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Kue,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(tO(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);YF in e&&e[YF].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=Xue(i,s)})}}function Kue(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(que(e,r[0],r[1]),r.join("="))),e}function que(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Xue(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function oe(){return y6}let y6=null;function Zue(t){y6=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gC;function v6(){if(gC==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");gC=t}return gC}function Yue(){const t=v6();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function nO(t,e){const n=Yue();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Sw="Abs",iy="Acos",sy="Acosh",dd="Add",rO="AddN",iO="All",sO="Any",kw="ArgMax",Cw="ArgMin",oy="Asin",ay="Asinh",ly="Atan",uy="Atanh",cy="Atan2",Tw="AvgPool",oO="AvgPoolGrad",$w="AvgPool3D",aO="AvgPool3DGrad",Ew="BatchMatMul",Iw="BatchToSpaceND",lO="Bincount",uO="BitwiseAnd",Jue="BroadcastTo",_6="BroadcastArgs",hy="Cast",fy="Ceil",dy="ClipByValue",cO="Complex",Aw="ComplexAbs",Ow="Concat",Nw="Conv2D",hO="Conv2DBackpropFilter",Pw="Conv2DBackpropInput",Rw="Conv3D",fO="Conv3DBackpropFilterV2",dO="Conv3DBackpropInputV2",py="Cos",my="Cosh",pO="Cumprod",Dw="Cumsum",mO="CropAndResize",gO="DenseBincount",yO="DepthToSpace",Mw="DepthwiseConv2dNative",vO="DepthwiseConv2dNativeBackpropFilter",_O="DepthwiseConv2dNativeBackpropInput",x6="Diag",Lw="Dilation2D",eE="Dilation2DBackpropInput",tE="Dilation2DBackpropFilter",Que="Draw",gy="RealDiv",xO="Einsum",yy="Elu",bO="EluGrad",vy="Erf",Fw="Equal",_y="Exp",Bw="ExpandDims",xy="Expm1",wO="FFT",SO="Fill",kO="FlipLeftRight",by="Floor",wy="FloorDiv",zw="FusedBatchNorm",jw="GatherV2",b6="GatherNd",Vw="Greater",Sy="GreaterEqual",ky="Identity",CO="IFFT",TO="Imag",Cy="IsFinite",Ty="IsInf",$y="IsNan",Uw="LeakyRelu",Ww="Less",Gw="LessEqual",w6="LinSpace",Ey="Log",Iy="Log1p",Hw="LogicalAnd",Kw="LogicalNot",qw="LogicalOr",ece="LogSoftmax",Xw="LRN",$O="LRNGrad",Zw="Max",Ay="Maximum",Yw="MaxPool",EO="MaxPoolGrad",Jw="MaxPool3D",IO="MaxPool3DGrad",S6="MaxPoolWithArgmax",Qw="Mean",e1="Min",Oy="Minimum",t1="MirrorPad",Ny="Mod",k6="Multinomial",Py="Multiply",n1="Neg",r1="NotEqual",AO="NonMaxSuppressionV3",OO="NonMaxSuppressionV4",NO="NonMaxSuppressionV5",i1="OnesLike",s1="OneHot",o1="Pack",a1="PadV2",Ry="Pow",l1="Prelu",u1="Prod",C6="RaggedGather",T6="RaggedRange",$6="RaggedTensorToTensor",PO="Range",RO="Real",Dy="Reciprocal",My="Relu",c1="Reshape",h1="ResizeNearestNeighbor",DO="ResizeNearestNeighborGrad",f1="ResizeBilinear",MO="ResizeBilinearGrad",Ly="Relu6",d1="Reverse",Fy="Round",By="Rsqrt",E6="ScatterNd",I6="TensorScatterUpdate",A6="SearchSorted",p1="Select",zy="Selu",m1="Slice",jy="Sin",Vy="Sinh",Uy="Sign",Wy="Sigmoid",Gy="Softplus",Hy="Sqrt",g1="Sum",y1="SpaceToBatchND",v1="SplitV",_1="Softmax",O6="SparseFillEmptyRows",N6="SparseReshape",P6="SparseSegmentMean",R6="SparseSegmentSum",D6="SparseToDense",Ky="SquaredDifference",LO="Square",FO="StaticRegexReplace",BO="StridedSlice",M6="StringNGrams",L6="StringSplit",F6="StringToHashBucketFast",qy="Sub",Xy="Tan",Zy="Tanh",Yy="Tile",zO="TopK",jO="Transform",rf="Transpose",VO="Unique",x1="Unpack",b1="UnsortedSegmentSum",w1="ZerosLike",Jy="Step",tce="FromPixels",UO="RotateWithOffset",px="_FusedMatMul",mx="FusedConv2D",B6="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(...t)}function nce(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gx=nO("kernelRegistry",()=>new Map),nE=nO("gradRegistry",()=>new Map);function JF(t,e){const n=j6(t,e);return gx.get(n)}function QF(t){return nE.get(t)}function e3(t){const e=gx.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function z6(t){const{kernelName:e,backendName:n}=t,r=j6(e,n);gx.has(r)&&Vi(`The kernel '${e}' for backend '${n}' is already registered`),gx.set(r,t)}function rce(t){const{kernelName:e}=t;nE.has(e)&&oe().getBool("DEBUG")&&Vi(`Overriding the gradient for '${e}'`),nE.set(e,t)}function j6(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var U6=Xt,xs=null;try{xs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Xt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Xt.prototype.__isLong__;Object.defineProperty(Xt.prototype,"__isLong__",{value:!0});function Ii(t){return(t&&t.__isLong__)===!0}Xt.isLong=Ii;var t3={},n3={};function Bc(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=n3[t],r)?r:(n=Zt(t,(t|0)<0?-1:0,!0),i&&(n3[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=t3[t],r)?r:(n=Zt(t,t<0?-1:0,!1),i&&(t3[t]=n),n))}Xt.fromInt=Bc;function bs(t,e){if(isNaN(t))return e?Ku:ws;if(e){if(t<0)return Ku;if(t>=W6)return K6}else{if(t<=-i3)return xi;if(t+1>=i3)return H6}return t<0?bs(-t,e).neg():Zt(t%kf|0,t/kf|0,e)}Xt.fromNumber=bs;function Zt(t,e,n){return new Xt(t,e,n)}Xt.fromBits=Zt;var yx=Math.pow;function WO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ws;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return WO(t.substring(1),e,n).neg();for(var i=bs(yx(n,8)),s=ws,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=bs(yx(n,a));s=s.mul(u).add(bs(l))}else s=s.mul(i),s=s.add(bs(l))}return s.unsigned=e,s}Xt.fromString=WO;function mo(t,e){return typeof t=="number"?bs(t,e):typeof t=="string"?WO(t,e):Zt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Xt.fromValue=mo;var r3=65536,ice=1<<24,kf=r3*r3,W6=kf*kf,i3=W6/2,s3=Bc(ice),ws=Bc(0);Xt.ZERO=ws;var Ku=Bc(0,!0);Xt.UZERO=Ku;var Hh=Bc(1);Xt.ONE=Hh;var G6=Bc(1,!0);Xt.UONE=G6;var rE=Bc(-1);Xt.NEG_ONE=rE;var H6=Zt(-1,2147483647,!1);Xt.MAX_VALUE=H6;var K6=Zt(-1,-1,!0);Xt.MAX_UNSIGNED_VALUE=K6;var xi=Zt(0,-2147483648,!1);Xt.MIN_VALUE=xi;var Ce=Xt.prototype;Ce.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ce.toNumber=function(){return this.unsigned?(this.high>>>0)*kf+(this.low>>>0):this.high*kf+(this.low>>>0)};Ce.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(xi)){var n=bs(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=bs(yx(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),u=o.sub(l.mul(s)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Ce.getHighBits=function(){return this.high};Ce.getHighBitsUnsigned=function(){return this.high>>>0};Ce.getLowBits=function(){return this.low};Ce.getLowBitsUnsigned=function(){return this.low>>>0};Ce.getNumBitsAbs=function(){if(this.isNegative())return this.eq(xi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Ce.isZero=function(){return this.high===0&&this.low===0};Ce.eqz=Ce.isZero;Ce.isNegative=function(){return!this.unsigned&&this.high<0};Ce.isPositive=function(){return this.unsigned||this.high>=0};Ce.isOdd=function(){return(this.low&1)===1};Ce.isEven=function(){return(this.low&1)===0};Ce.equals=function(e){return Ii(e)||(e=mo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Ce.eq=Ce.equals;Ce.notEquals=function(e){return!this.eq(e)};Ce.neq=Ce.notEquals;Ce.ne=Ce.notEquals;Ce.lessThan=function(e){return this.comp(e)<0};Ce.lt=Ce.lessThan;Ce.lessThanOrEqual=function(e){return this.comp(e)<=0};Ce.lte=Ce.lessThanOrEqual;Ce.le=Ce.lessThanOrEqual;Ce.greaterThan=function(e){return this.comp(e)>0};Ce.gt=Ce.greaterThan;Ce.greaterThanOrEqual=function(e){return this.comp(e)>=0};Ce.gte=Ce.greaterThanOrEqual;Ce.ge=Ce.greaterThanOrEqual;Ce.compare=function(e){if(Ii(e)||(e=mo(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Ce.comp=Ce.compare;Ce.negate=function(){return!this.unsigned&&this.eq(xi)?xi:this.not().add(Hh)};Ce.neg=Ce.negate;Ce.add=function(e){Ii(e)||(e=mo(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,h=0,f=0,p=0;return p+=s+u,f+=p>>>16,p&=65535,f+=i+l,h+=f>>>16,f&=65535,h+=r+a,c+=h>>>16,h&=65535,c+=n+o,c&=65535,Zt(f<<16|p,c<<16|h,this.unsigned)};Ce.subtract=function(e){return Ii(e)||(e=mo(e)),this.add(e.neg())};Ce.sub=Ce.subtract;Ce.multiply=function(e){if(this.isZero())return ws;if(Ii(e)||(e=mo(e)),xs){var n=xs.mul(this.low,this.high,e.low,e.high);return Zt(n,xs.get_high(),this.unsigned)}if(e.isZero())return ws;if(this.eq(xi))return e.isOdd()?xi:ws;if(e.eq(xi))return this.isOdd()?xi:ws;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(s3)&&e.lt(s3))return bs(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,h=0,f=0,p=0,m=0;return m+=o*c,p+=m>>>16,m&=65535,p+=s*c,f+=p>>>16,p&=65535,p+=o*u,f+=p>>>16,p&=65535,f+=i*c,h+=f>>>16,f&=65535,f+=s*u,h+=f>>>16,f&=65535,f+=o*l,h+=f>>>16,f&=65535,h+=r*c+i*u+s*l+o*a,h&=65535,Zt(p<<16|m,h<<16|f,this.unsigned)};Ce.mul=Ce.multiply;Ce.divide=function(e){if(Ii(e)||(e=mo(e)),e.isZero())throw Error("division by zero");if(xs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?xs.div_u:xs.div_s)(this.low,this.high,e.low,e.high);return Zt(n,xs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ku:ws;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ku;if(e.gt(this.shru(1)))return G6;s=Ku}else{if(this.eq(xi)){if(e.eq(Hh)||e.eq(rE))return xi;if(e.eq(xi))return Hh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(ws)?e.isNegative()?Hh:rE:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(xi))return this.unsigned?Ku:ws;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=ws}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:yx(2,a-48),u=bs(r),c=u.mul(e);c.isNegative()||c.gt(i);)r-=l,u=bs(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Hh),s=s.add(u),i=i.sub(c)}return s};Ce.div=Ce.divide;Ce.modulo=function(e){if(Ii(e)||(e=mo(e)),xs){var n=(this.unsigned?xs.rem_u:xs.rem_s)(this.low,this.high,e.low,e.high);return Zt(n,xs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Ce.mod=Ce.modulo;Ce.rem=Ce.modulo;Ce.not=function(){return Zt(~this.low,~this.high,this.unsigned)};Ce.and=function(e){return Ii(e)||(e=mo(e)),Zt(this.low&e.low,this.high&e.high,this.unsigned)};Ce.or=function(e){return Ii(e)||(e=mo(e)),Zt(this.low|e.low,this.high|e.high,this.unsigned)};Ce.xor=function(e){return Ii(e)||(e=mo(e)),Zt(this.low^e.low,this.high^e.high,this.unsigned)};Ce.shiftLeft=function(e){return Ii(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Zt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Zt(0,this.low<<e-32,this.unsigned)};Ce.shl=Ce.shiftLeft;Ce.shiftRight=function(e){return Ii(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Zt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Zt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Ce.shr=Ce.shiftRight;Ce.shiftRightUnsigned=function(e){if(Ii(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Zt(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Zt(n,0,this.unsigned):Zt(n>>>e-32,0,this.unsigned)};Ce.shru=Ce.shiftRightUnsigned;Ce.shr_u=Ce.shiftRightUnsigned;Ce.toSigned=function(){return this.unsigned?Zt(this.low,this.high,!1):this};Ce.toUnsigned=function(){return this.unsigned?this:Zt(this.low,this.high,!0)};Ce.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Ce.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Ce.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Xt.fromBytes=function(e,n,r){return r?Xt.fromBytesLE(e,n):Xt.fromBytesBE(e,n)};Xt.fromBytesLE=function(e,n){return new Xt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Xt.fromBytesBE=function(e,n){return new Xt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const q6=Mt(U6),sce=pW({__proto__:null,default:q6},[U6]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mu=q6||sce;function S1(t){return Mu.fromString(t,!0,16)}const X6=S1("c3a5c85c97cb3127"),Ou=S1("b492b66fbe98f273"),Lr=S1("9ae16a3b2f90404f");function iE(t){return t.xor(t.shru(47))}function Z6(t,e,n){const r=t.slice(e,e+n);return Mu.fromBytes(Array.from(r),!0,!0)}function Lt(t,e){return Z6(t,e,8)}function o3(t,e){return Z6(t,e,4)}function Kn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Pl(t,e,n=S1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function oce(t,e,n,r,i,s){i=i.add(t),s=Kn(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(Kn(i,44)),[i.add(r),s.add(o)]}function x0(t,e,n,r){return oce(Lt(t,e),Lt(t,e+8),Lt(t,e+16),Lt(t,e+24),n,r)}function ace(t,e=t.length){if(e>=8){const n=Lr.add(e*2),r=Lt(t,0).add(Lr),i=Lt(t,e-8),s=Kn(i,37).mul(n).add(r),o=Kn(r,25).add(i).mul(n);return Pl(s,o,n)}if(e>=4){const n=Lr.add(e*2),r=o3(t,0);return Pl(r.shl(3).add(e),o3(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return iE(Lr.mul(s).xor(X6.mul(o))).mul(Lr)}return Lr}function lce(t,e=t.length){const n=Lr.add(e*2),r=Lt(t,0).mul(Ou),i=Lt(t,8),s=Lt(t,e-8).mul(n),o=Lt(t,e-16).mul(Lr);return Pl(Kn(r.add(i),43).add(Kn(s,30)).add(o),r.add(Kn(i.add(Lr),18)).add(s),n)}function uce(t,e=t.length){const n=Lr.add(e*2),r=Lt(t,0).mul(Lr),i=Lt(t,8),s=Lt(t,e-8).mul(n),o=Lt(t,e-16).mul(Lr),a=Kn(r.add(i),43).add(Kn(s,30)).add(o),l=Pl(a,r.add(Kn(i.add(Lr),18)).add(s),n),u=Lt(t,16).mul(n),c=Lt(t,24),h=a.add(Lt(t,e-32)).mul(n),f=l.add(Lt(t,e-24)).mul(n);return Pl(Kn(u.add(c),43).add(Kn(h,30)).add(f),u.add(Kn(c.add(r),18)).add(h),n)}function cce(t,e=t.length){const n=Mu.fromNumber(81,!0);if(e<=32)return e<=16?ace(t,e):lce(t,e);if(e<=64)return uce(t,e);let r=n,i=n.mul(Ou).add(113),s=iE(i.mul(Lr).add(113)).mul(Lr),o=[Mu.UZERO,Mu.UZERO],a=[Mu.UZERO,Mu.UZERO];r=r.mul(Lr).add(Lt(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Kn(r.add(i).add(o[0]).add(Lt(t,l+8)),37).mul(Ou),i=Kn(i.add(o[1]).add(Lt(t,l+48)),42).mul(Ou),r=r.xor(a[1]),i=i.add(o[0]).add(Lt(t,l+40)),s=Kn(s.add(a[0]),33).mul(Ou),o=x0(t,l,o[1].mul(Ou),r.add(a[0])),a=x0(t,l+32,s.add(a[1]),i.add(Lt(t,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const h=Ou.add(s.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Kn(r.add(i).add(o[0]).add(Lt(t,l+8)),37).mul(h),i=Kn(i.add(o[1]).add(Lt(t,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(Lt(t,l+40))),s=Kn(s.add(a[0]),33).mul(h),o=x0(t,l,o[1].mul(h),r.add(a[0])),a=x0(t,l+32,s.add(a[1]),i.add(Lt(t,l+16))),[s,r]=[r,s],Pl(Pl(o[0],a[0],h).add(iE(i).mul(X6)).add(s),Pl(o[1],a[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tu(t,e){return e==="string"?Rl(t):zc([t],e)}function hce(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function zc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yc(t)),oe().getBool("DEBUG")&&jue(t,e),hce(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Xr(){return oe().platform.now()}function Rl(t,e="utf-8"){return e=e||"utf-8",oe().platform.encode(t,e)}function Ul(t,e="utf-8"){return e=e||"utf-8",oe().platform.decode(t,e)}function Os(t){return oe().platform.isTypedArray!=null?oe().platform.isTypedArray(t):V6(t)}function yc(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||tO(t)||t==null||Os(t)&&n)e.push(t);else if(Array.isArray(t)||Os(t))for(let r=0;r<t.length;++r)yc(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)yc(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fce{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new pce)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=Xr();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const u of i)u.dataSync();o=Promise.resolve({kernelMs:Xr()-a})}if(oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const c=i[u];c.data().then(h=>{dce(h,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function dce(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class pce{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?nf(`${i}ms`,9):i.error,l=nf(e,25),u=n.rank,c=n.size,h=nf(n.shape.toString(),14);let f="";for(const p in s){const m=s[p];if(m!=null){const _=m.shape||n.shape,v=_.length;f+=`${p}: ${v}D ${v>0?_:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${h}	%c${c}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mce(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const h in c){const f=c[h];let p=!1;for(let m=0;m<e.length;m++)if(r[f.id]){u.outputs.forEach(_=>r[_.id]=!0),p=!0,i[u.id]=!0;break}if(p)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let h=0;h<u.outputs.length;h++)if(s[u.outputs[h].id]){for(const f in c)s[c[f].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(i[u.id]&&o[u.id]){const c={};for(const f in u.inputs){const p=u.inputs[f];r[p.id]&&(c[f]=p)}const h=Object.assign({},u);h.inputs=c,h.outputs=u.outputs,a.push(h)}}return a}function gce(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!Ct(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const h=t[c.id];t[c.id]=r(h,u),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3=20,pp=3,yC=7;function yce(t,e,n,r){const i=Le(e),s=vce(t,e,n,i),o=e.length,a=S_(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function vce(t,e,n,r){const i=ce(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?jp(t):t;if(a>1)for(let u=0;u<i/s;u++){const c=u*s;for(let h=0;h<s;h++)o[h]=Math.max(o[h],zp(l[c+h],0,n).length)}return o}function zp(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(yC))} + ${parseFloat(t[1].toFixed(yC))}j`:ry(t)?r=`'${t}'`:n==="bool"?r=Y6(t):r=parseFloat(t.toFixed(yC)).toString(),nf(r,e)}function Y6(t){return t===0?"false":"true"}function S_(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const _=jp(t);return[zp(_[0],0,n)]}return n==="bool"?[Y6(t[0])]:[t[0].toString()]}if(l===1){if(a>a3){const v=pp*o;let g=Array.from(t.slice(0,v)),x=Array.from(t.slice((a-pp)*o,a*o));return n==="complex64"&&(g=jp(g),x=jp(x)),["["+g.map((b,w)=>zp(b,i[w],n)).join(", ")+", ..., "+x.map((b,w)=>zp(b,i[a-pp+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?jp(t):Array.from(t)).map((v,g)=>zp(v,i[g],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),h=r[0]*o,f=[];if(a>a3){for(let _=0;_<pp;_++){const v=_*h,g=v+h;f.push(...S_(t.slice(v,g),u,n,c,i,!1))}f.push("...");for(let _=a-pp;_<a;_++){const v=_*h,g=v+h;f.push(...S_(t.slice(v,g),u,n,c,i,_===a-1))}}else for(let _=0;_<a;_++){const v=_*h,g=v+h;f.push(...S_(t.slice(v,g),u,n,c,i,_===a-1))}const p=l===2?",":"";f[0]="["+(a>0?f[0]+p:"");for(let _=1;_<f.length-1;_++)f[_]=" "+f[_]+p;let m=`,
`;for(let _=2;_<l;_++)m+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":m),f}function jp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ce(e),r!=null){const i=r.length;F(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||bn(n,this.size),this.strides=Le(e)}set(e,...n){n.length===0&&(n=[0]),F(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Qs().makeTensor(this.values,this.shape,this.dtype)}}let Qs=null,Th=null;function _ce(t){Qs=t}function xce(t){Th=t}class Mn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ce(e),this.strides=Le(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Th.buffer(this.shape,this.dtype,e)}bufferSync(){return Th.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return oo(this.shape,e,this.dtype==="complex64")}arraySync(){return oo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Qs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ul(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Qs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Qs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ul(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Qs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Qs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Th.print(this,e)}clone(){return this.throwIfDisposed(),Th.clone(this)}toString(e=!1){const n=this.dataSync();return yce(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Th.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Qs().makeVariable(this,e,n,r)}}Object.defineProperty(Mn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ue(){return nO("Tensor",()=>Mn)}ue();class vx extends Mn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ct(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Qs().disposeTensor(this),this.dataId=e.dataId,Qs().incRef(this,null)}dispose(){Qs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(vx,Symbol.hasInstance,{value:t=>t instanceof Mn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var l3;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(l3||(l3={}));var sE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(sE||(sE={}));var oE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(oE||(oE={}));var aE;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(aE||(aE={}));var lE;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(lE||(lE={}));const bce={float32:aE,int32:sE,bool:oE,complex64:lE};function Ti(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return bce[t][e]}function GO(t){return Ti(t,"int32")}function J6(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Q6(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ti(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function e8(t){const e=[];return t8(t,e,new Set),e}function t8(t,e,n){if(t==null)return;if(t instanceof Mn){e.push(t);return}if(!wce(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),t8(s,e,n))}}function wce(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vC(t){return t.kernelName!=null}class u3{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Cf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new u3}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Vi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new fce(this.backendInstance),!0}setupRegisteredKernels(){e3(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){e3(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof YA)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Vi(`Initialization of backend ${e} failed`),Vi(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Vi(`Initialization of backend ${e} failed`),Vi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Cf.nextTensorId++}nextVariableId(){return Cf.nextVariableId++}clone(e){const n=Q.runKernel(ky,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return Q.runKernel(hy,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(JF(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=vC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(vC(e)){const{kernelName:m,inputs:_,attrs:v}=e;this.backendName==null&&this.backend;const g=JF(m,this.backendName);F(g!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),a=()=>{const x=this.backend.numDataIds();l=g.kernelFunc({inputs:_,attrs:v,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,b);const w=b.map(k=>k.rank!=null?k:this.makeTensorFromTensorInfo(k));if(i){const k=this.getTensorsForGradient(m,_,w);r=this.saveTensorsForBackwardMode(k)}return w}}else{const{forwardFunc:m}=e,_=v=>{i&&(r=v.map(g=>this.keep(this.clone(g))))};a=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,_));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,g),g}}const{inputs:c,attrs:h}=e,f=vC(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),i&&this.addTapeNode(u,c,n,f,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=QF(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(F(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=s.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&ry(e[0])&&(s=e.map(l=>Rl(l)));const o=i.write(s,n,r),a=new Mn(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),u=Uue(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new Mn(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new vx(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*dx(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof vx||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*dx(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=QF(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=u=>(u=u.map((c,h)=>{if(c==null){const f=r[h],p=wr(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return c}),i(u.length>1?u:u[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=e8(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(F(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(s instanceof Mn,()=>"The result y returned by f() must be a tensor.");const o=mce(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??Sce(s.shape),gce(a,o,u=>this.tidy(u),kce);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return F(J$(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{F(n.every(a=>a instanceof Mn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),F(r.value instanceof Mn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(J$(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];F(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(c.every(f=>f instanceof Mn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return c.forEach((f,p)=>{h[p]=()=>f}),h};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Xr(),r=await this.backend.time(e);return r.wallMs=Xr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new u3;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Cf.nextTensorId=0;Cf.nextVariableId=0;function Sce(t){const e=eO(ce(t),"float32");return Q.makeTensor(e,t,"float32")}function n8(){const t=v6();if(t._tfengine==null){const e=new Hue(t);t._tfengine=new Cf(e)}return Zue(t._tfengine.ENV),_ce(()=>t._tfengine),t._tfengine}const Q=n8();function kce(t,e){const n={a:t,b:e};return Q.runKernel(dd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(){return typeof navigator<"u"&&navigator!=null}function r8(t){if(t||Cce()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function i8(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ni=oe();ni.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ni.registerFlag("IS_BROWSER",()=>i8());ni.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ni.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ni.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ni.registerFlag("PROD",()=>!1);ni.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ni.getBool("DEBUG"));ni.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ni.registerFlag("IS_TEST",()=>!1);ni.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ni.getBool("DEBUG"));ni.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ni.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ni.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1(t,e){let n=t;if(Os(t))return e==="string"?[]:[t.length];if(J6(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Q6(t))return[t.buffer.size/(e==null?4:dx(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Os(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s8(t,r,[]),r}function s8(t,e,n){if(n=n||[],!Array.isArray(t)&&!Os(t)){F(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}F(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)s8(t[i],r,n.concat(i))}function c3(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function H(t,e,n,r="numeric"){if(t instanceof ue())return c3(r,t.dtype,e,n),t;let i=hd(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),c3(r,i,e,n),t==null||!Os(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=k1(t,i);!Os(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?zc(t,i):yc(t,[],!0);return Q.makeTensor(a,s,i)}function o8(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>H(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce="__op";function ne(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Tce;const i=(...s)=>{Q.startScope(n);try{const o=r(...s);return tO(o)&&console.error("Cannot return a Promise inside of tidy."),Q.endScope(o),o}catch(o){throw Q.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ce(t,e){const n=H(t,"real","complex"),r=H(e,"imag","complex");QA(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return Q.runKernel(cO,i)}const Tf=ne({complex_:$ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(t,e,n,r){if(r==null)r=hd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Q6(t)||J6(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Q.backend.createTensorFromGPUData(t,e||n,r)}if(!Os(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ga(e);const i=ce(e),s=ce(n);F(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ce(e.slice(o)):!0;F(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Os(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?zc(t,r):yc(t,[],!0),Q.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8(t,e,n){const r=k1(t,n);return C1(t,e,r,n)}class pd{static join(e){return new pd(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Os(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],h=e+a-u.start,f=a,m=Math.min(n,u.end)-u.start,_=new Uint8Array(u.buffer,h,m-h);if(o.set(_,f),a+=_.length,n<u.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Ece(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Ece(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(){return Q}function h3(){return Q.memory()}function ie(t,e){return Q.tidy(t,e)}function lt(t){e8(t).forEach(n=>n.dispose())}function Uo(t){return Q.keep(t)}function l8(t,e,n=1){return Q.registerBackend(t,e,n)}function Ice(){return Q.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3=4;async function d3(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async h=>{const f=await l.bytes(),p=f.reduce((v,g)=>v+g.length,0)+f3*f.length,m=new Uint8Array(p);let _=0;for(let v=0;v<f.length;v++){const g=f[v],x=new Uint8Array(new Uint32Array([g.length]).buffer);m.set(x,_),_+=f3,m.set(g,_),_+=g.length}h(m)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:Ace(s),specs:n}}function Ace(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const HO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function p3(t){return HO?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Oce(t){if(HO)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Nce(t){if(HO){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Pce(t){return pd.join(t)}function u8(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:p3(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:p3(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new pd(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Pr.instance==null&&(Pr.instance=new Pr),Pr.instance}static registerSaveRouter(e){Pr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Pr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Pr.getHandlers(e,"save")}static getLoadHandlers(e,n){return Pr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Pr.getInstance().loadRouters:Pr.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const Rce=t=>Pr.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uE="tensorflowjs",cE=1,qu="models_store",vl="model_info_store";function c8(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function hE(t){const e=t.result;e.createObjectStore(qu,{keyPath:"modelPath"}),e.createObjectStore(vl,{keyPath:"modelPath"})}class vc{constructor(e){if(this.indexedDB=c8(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(uE,cE);s.onupgradeneeded=()=>hE(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(qu,"readonly"),u=a.objectStore(qu).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),i(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=pd.join(n.weightData);const a=u8(n),l=o.transaction(vl,"readwrite");let u=l.objectStore(vl),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return i(f)}let h;c.onsuccess=()=>{h=o.transaction(qu,"readwrite");const f=h.objectStore(qu);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(m){return i(m)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=m=>{u=l.objectStore(vl);const _=u.delete(this.modelPath);_.onsuccess=()=>(o.close(),i(p.error)),_.onerror=v=>(o.close(),i(p.error))}},c.onerror=f=>(o.close(),i(c.error)),l.oncomplete=()=>{h==null?o.close():h.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}vc.URL_SCHEME="indexeddb://";const h8=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vc.URL_SCHEME)?Dce(t.slice(vc.URL_SCHEME.length)):null;Pr.registerSaveRouter(h8);Pr.registerLoadRouter(h8);function Dce(t){return new vc(t)}function Mce(t){return t.startsWith(vc.URL_SCHEME)?t.slice(vc.URL_SCHEME.length):t}class Lce{constructor(){this.indexedDB=c8()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(uE,cE);r.onupgradeneeded=()=>hE(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(vl,"readonly"),a=s.objectStore(vl).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=Mce(e),new Promise((n,r)=>{const i=this.indexedDB.open(uE,cE);i.onupgradeneeded=()=>hE(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(vl,"readwrite"),a=o.objectStore(vl),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),h=()=>{u=s.transaction(qu,"readwrite");const p=u.objectStore(qu).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=m=>r(l.error)};c.onsuccess=h,c.onerror=f=>(h(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),o.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const da="/",$h="tensorflowjs_models",f8="info",Fce="model_topology",Bce="weight_specs",zce="weight_data",jce="model_metadata";function d8(t){return{info:[$h,t,f8].join(da),topology:[$h,t,Fce].join(da),weightSpecs:[$h,t,Bce].join(da),weightData:[$h,t,zce].join(da),modelMetadata:[$h,t,jce].join(da)}}function p8(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Vce(t){const e=t.split(da);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(da)}function Uce(t){return t.startsWith(_c.URL_SCHEME)?t.slice(_c.URL_SCHEME.length):t}class _c{constructor(e){if(!oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=d8(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=u8(e),s=pd.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Oce(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw p8(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Nce(o),n}}_c.URL_SCHEME="localstorage://";const m8=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_c.URL_SCHEME)?Wce(t.slice(_c.URL_SCHEME.length)):null;Pr.registerSaveRouter(m8);Pr.registerLoadRouter(m8);function Wce(t){return new _c(t)}class Gce{constructor(){F(oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=$h+da,r=da+f8;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=Vce(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=Uce(e);const n=d8(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return p8(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3="://";class Io{constructor(){this.managers={}}static getInstance(){return Io.instance==null&&(Io.instance=new Io),Io.instance}static registerManager(e,n){F(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(m3)&&(e=e.slice(0,e.indexOf(m3))),F(e.length>0,()=>"scheme must not be an empty string.");const r=Io.getInstance();F(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Io.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Io.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hce{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return V6(e)}}if(oe().get("IS_BROWSER")){oe().setPlatform("browser",new Hce);try{Io.registerManager(_c.URL_SCHEME,new Gce)}catch{}try{Io.registerManager(vc.URL_SCHEME,new Lce)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kce={importFetch:()=>require("node-fetch")};let _C;class qce{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return oe().global.fetch!=null?oe().global.fetch(e,n):(_C==null&&(_C=Kce.importFetch()),_C(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}oe().get("IS_NODE")&&!oe().get("IS_BROWSER")&&oe().setPlatform("node",new qce);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(t,e="float32",n){return e=e||"float32",Ga(t),new lr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xce(t,e){const n=H(t,"x","cast");if(!Vue(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return Q.runKernel(hy,r,i)}const Ee=ne({cast_:Xce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zce(t){const n={x:H(t,"x","clone","string_or_numeric")};return Q.runKernel(ky,n)}const oc=ne({clone_:Zce});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yce(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */n8();const Jce={buffer:rt,cast:Ee,clone:oc,print:Yce};xce(Jce);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qce(t,e){let n=H(t,"a","add"),r=H(e,"b","add");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(dd,i)}const ve=ne({add_:Qce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ehe(t,e){let n=H(t,"a","floorDiv"),r=H(e,"b","floorDiv");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(wy,i)}const g8=ne({floorDiv_:ehe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function the(t,e){let n=H(t,"a","div"),r=H(e,"b","div");if([n,r]=Sn(n,r),n.dtype==="int32"&&r.dtype==="int32")return g8(n,r);const i={a:n,b:r},s={};return Q.runKernel(gy,i,s)}const ze=ne({div_:the});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nhe(t,e){let n=H(t,"a","mul"),r=H(e,"b","mul");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(Py,i)}const Z=ne({mul_:nhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rhe(t){const e=H(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Q.runKernel(Aw,n)}else{const n={x:e};return Q.runKernel(Sw,n)}}const Dr=ne({abs_:rhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ihe(t){const n={x:H(t,"x","acos")};return Q.runKernel(iy,n)}const she=ne({acos_:ihe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ohe(t){const n={x:H(t,"x","acosh")};return Q.runKernel(sy,n)}const ahe=ne({acosh_:ohe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lhe(t,e=null,n=!1){const i={x:H(t,"x","all","bool")},s={axis:e,keepDims:n};return Q.runKernel(iO,i,s)}const y8=ne({all_:lhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uhe(t,e=null,n=!1){const i={x:H(t,"x","any","bool")},s={axis:e,keepDims:n};return Q.runKernel(sO,i,s)}const fE=ne({any_:uhe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t,e=0){const r={x:H(t,"x","argMax")},i={axis:e};return Q.runKernel(kw,r,i)}const Gm=ne({argMax_:che});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hhe(t,e=0){const r={x:H(t,"x","argMin")},i={axis:e};return Q.runKernel(Cw,r,i)}const fhe=ne({argMin_:hhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dhe(t){const n={x:H(t,"x","asin")};return Q.runKernel(oy,n)}const phe=ne({asin_:dhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t){const n={x:H(t,"x","asinh")};return Q.runKernel(ay,n)}const ghe=ne({asinh_:mhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yhe(t){const n={x:H(t,"x","atan")};return Q.runKernel(ly,n)}const vhe=ne({atan_:yhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _he(t,e){let n=H(t,"a","atan2"),r=H(e,"b","atan2");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(cy,i)}const xhe=ne({atan2_:_he});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t){const n={x:H(t,"x","atanh")};return Q.runKernel(uy,n)}const whe=ne({atanh_:bhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qy(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=Ka(i);return ur(t,a,n,s,r,null,null,l)}function Rs(t,e,n,r,i,s,o="channelsLast"){const[a,l]=Hm(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return ur(t,u,n,r,i,s,!1,o)}function Ha(t,e,n,r,i,s,o="NDHWC"){const[a,l,u]=dE(e);let c,h;if(o==="NDHWC")h="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")h="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return nu(t,c,n,r,i,!1,h,s)}function ur(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,u,c,h]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,h]=t;else if(a==="channelsFirst")[l,h,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,p,,m]=e,[_,v]=Hm(n),[g,x]=Hm(r),b=sf(f,g),w=sf(p,x),{padInfo:k,outHeight:C,outWidth:T}=Che(i,u,c,_,v,b,w,s,a),E=o?m*h:m;let A;return a==="channelsFirst"?A=[l,E,C,T]:a==="channelsLast"&&(A=[l,C,T,E]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:h,outHeight:C,outWidth:T,outChannels:E,padInfo:k,strideHeight:_,strideWidth:v,filterHeight:f,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:g,dilationWidth:x,inShape:t,outShape:A,filterShape:e}}function nu(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,u,c,h,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,h,f]=t;else if(o==="channelsFirst")[l,f,u,c,h]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,m,_,,v]=e,[g,x,b]=dE(n),[w,k,C]=dE(r),T=sf(p,w),E=sf(m,k),A=sf(_,C),{padInfo:$,outDepth:N,outHeight:P,outWidth:M}=The(i,u,c,h,g,x,b,T,E,A,a),B=s?v*f:v;let z;return o==="channelsFirst"?z=[l,B,N,P,M]:o==="channelsLast"&&(z=[l,N,P,M,B]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:h,inChannels:f,outDepth:N,outHeight:P,outWidth:M,outChannels:B,padInfo:$,strideDepth:g,strideHeight:x,strideWidth:b,filterDepth:p,filterHeight:m,filterWidth:_,effectiveFilterDepth:T,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:w,dilationHeight:k,dilationWidth:C,inShape:t,outShape:z,filterShape:e}}function She(t,e,n,r,i){r==null&&(r=KO(t,e,n));const s=t[0],o=t[1],a=Km((s-e+2*r)/n+1,i),l=Km((o-e+2*r)/n+1,i);return[a,l]}function khe(t,e,n,r,i,s){i==null&&(i=KO(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=Km((t[a]-e[a]+2*i)/r[a]+1,s));return o}function KO(t,e,n,r=1){const i=sf(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Hm(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function dE(t){return typeof t=="number"?[t,t,t]:t}function sf(t,e){return e<=1?t:t+(t-1)*(e-1)}function Che(t,e,n,r,i,s,o,a,l){let u,c,h;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=She([e,n],s,r,t,a);c=p[0],h=p[1]}else if(t==="same"){c=Math.ceil(e/r),h=Math.ceil(n/i);const f=Math.max(0,(c-1)*r+s-e),p=Math.max(0,(h-1)*i+o-n),m=Math.floor(f/2),_=f-m,v=Math.floor(p/2),g=p-v;u={top:m,bottom:_,left:v,right:g,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),h=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],_=l==="channelsLast"?t[2][1]:t[3][1];u={top:f,bottom:p,left:m,right:_,type:f===0&&p===0&&m===0&&_===0?"VALID":"EXPLICIT"},c=Km((e-s+f+p)/r+1,a),h=Km((n-o+m+_)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:h}}function The(t,e,n,r,i,s,o,a,l,u,c){let h,f,p,m;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=khe([e,n,r,1],[a,l,u],1,[i,s,o],t,c);f=v[0],p=v[1],m=v[2]}else if(t==="same"){f=Math.ceil(e/i),p=Math.ceil(n/s),m=Math.ceil(r/o);const _=(f-1)*i+a-e,v=(p-1)*s+l-n,g=(m-1)*o+u-r,x=Math.floor(_/2),b=_-x,w=Math.floor(v/2),k=v-w,C=Math.floor(g/2),T=g-C;h={top:w,bottom:k,left:C,right:T,front:x,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:f,outHeight:p,outWidth:m}}function Km(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function xc(t){const[e,n,r]=Hm(t);return e===1&&n===1&&r===1}function Tr(t,e){return xc(t)||xc(e)}function bc(t){return Hm(t).every(e=>e>0)}function Ka(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function oi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")F(Sf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{F(Sf(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(t,e){const r={x:H(t,"x","reshape","string_or_numeric")},i={shape:e};return Q.runKernel(c1,r,i)}const te=ne({reshape_:$he});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ehe(t,e,n,r,i){const s=H(t,"x","avgPool","float32"),o=1;F(Tr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),oi("avgPool",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let h=Q.runKernel(Tw,u,c);return h=Ee(h,s.dtype),l?te(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const qO=ne({avgPool_:Ehe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ihe(t,e,n,r,i,s="NDHWC"){const o=H(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),F(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),F(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),oi("avgPool3d",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let h=Q.runKernel($w,u,c);return h=Ee(h,a.dtype),l?te(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Ahe=ne({avgPool3d_:Ihe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ohe(t,e=0){F(t.length>=1,()=>"Pass at least one tensor to concat");const n=o8(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return oc(n[0]);const r=n,i={axis:e};return Q.runKernel(Ow,r,i)}const ti=ne({concat_:Ohe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t,e,n=!1,r=!1){let i=H(t,"a","matMul"),s=H(e,"b","matMul");[i,s]=Sn(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return Q.runKernel(Ew,o,a)}const wt=ne({matMul_:Nhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Phe(t){const n={x:H(t,"x","sigmoid","float32")};return Q.runKernel(Wy,n)}const md=ne({sigmoid_:Phe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rhe(t,e,n){const r=H(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return Q.runKernel(m1,i,s)}const Ft=ne({slice_:Rhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(t){const n={x:H(t,"x","tanh","float32")};return Q.runKernel(Zy,n)}const T1=ne({tanh_:Dhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mhe(t,e,n){const r=H(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);F(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),F(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),F(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return Q.runKernel(Iw,s,o)}const XO=ne({batchToSpaceND_:Mhe});function Lhe(t){let e;return t.rank===0||t.rank===1?e=te(t,[1,1,1,t.size]):t.rank===2?e=te(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fhe(t,e,n,r,i,s){s==null&&(s=.001);const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let u;i!=null&&(u=H(i,"scale","batchNorm"));let c;r!=null&&(c=H(r,"offset","batchNorm")),F(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:Lhe(o),scale:u,offset:c,mean:a,variance:l},p={varianceEpsilon:s},m=Q.runKernel(zw,f,p);return te(m,o.shape)}const $1=ne({batchNorm_:Fhe});function Bhe(t,e,n,r,i,s){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let u;i!=null&&(u=H(i,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),F(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),F(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),$1(o,a,l,c,u,s)}const zhe=ne({batchNorm2d_:Bhe});function jhe(t,e,n,r,i,s){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let u;i!=null&&(u=H(i,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),F(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),F(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),$1(o,a,l,c,u,s)}const Vhe=ne({batchNorm3d_:jhe});function Uhe(t,e,n,r,i,s){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let u;i!=null&&(u=H(i,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),F(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),F(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),$1(o,a,l,c,u,s)}const Whe=ne({batchNorm4d_:Uhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ghe(t,e,n){const r=H(t,"x","bincount"),i=H(e,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return Q.runKernel(lO,s,o)}const Hhe=ne({bincount_:Ghe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Khe(t,e){let n=H(t,"broadcastTo","x");const r=n.shape;if(Ga(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=te(n,u)}const i=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(i[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return oc(n);const a={x:n},l={reps:s};return Q.runKernel(Yy,a,l)}const hm=ne({broadcastTo_:Khe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qhe(t){const n={x:H(t,"x","ceil","float32")};return Q.runKernel(fy,n)}const Xhe=ne({ceil_:qhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1(t,e,n){Ga(t),n=n||hd(e);const r={shape:t,value:e,dtype:n};return Q.runKernel(SO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zhe(t,e,n){const r=H(t,"x","clipByValue");if(F(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return E1(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return Q.runKernel(dy,i,s)}const Yi=ne({clipByValue_:Zhe});function Yhe(t){return ti(t,0)}const Jhe=ne({concat1d_:Yhe});function Qhe(t,e){return ti(t,e)}const efe=ne({concat2d_:Qhe});function tfe(t,e){return ti(t,e)}const nfe=ne({concat3d_:tfe});function rfe(t,e){return ti(t,e)}const ife=ne({concat4d_:rfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(t,e,n,r,i="NHWC",s=[1,1],o){const a=H(t,"x","conv2d","float32"),l=H(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),oi("conv2d",r,o);const h=i==="NHWC"?u.shape[3]:u.shape[1];F(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),F(Tr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),F(bc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(bc(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},m=Q.runKernel(Nw,f,p);return c?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const wc=ne({conv2d_:sfe});function ofe(t,e,n,r,i="NWC",s=1,o){const a=H(t,"x","conv1d"),l=H(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=te(a,[1,a.shape[0],a.shape[1]])),F(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),oi("conv1d",r,o),F(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(Tr(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),F(bc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(bc(n),()=>"Error in conv1D: Stride should be larger than 0."),F(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=te(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=te(u,[u.shape[0],1,u.shape[1],u.shape[2]]),v=wc(f,h,[1,n],r,"NHWC",[1,s],o);return c?te(v,[v.shape[2],v.shape[3]]):te(v,[v.shape[0],v.shape[2],v.shape[3]])}const v8=ne({conv1d_:ofe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afe(t,e,n,r,i,s="NHWC",o){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),F(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],h=s==="NHWC"?l.shape[3]:l.shape[1];F(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),F(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),oi("conv2dDerInput",i,o);const f={dy:l,filter:n},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},m=Q.runKernel(Pw,f,p);return u?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const ZO=ne({conv2DBackpropInput_:afe});function lfe(t,e,n,r,i,s){const o=H(t,"x","conv2dTranspose"),a=H(e,"filter","conv2dTranspose");return ZO(n,o,a,r,i,"NHWC",s)}const _8=ne({conv2dTranspose_:lfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ufe(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=H(t,"x","conv3d"),a=H(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),F(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),F(Tr(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),F(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),F(bc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(bc(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},h={strides:n,pad:r,dataFormat:i,dilations:s},f=Q.runKernel(Rw,c,h);return u?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const cfe=ne({conv3d_:ufe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfe(t,e,n,r,i){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=o.shape[4];F(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),F(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),F(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),F(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),F(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},h={pad:i,strides:r,inputShape:s},f=Q.runKernel(dO,c,h);return a?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const x8=ne({conv3DBackpropInput_:hfe});function ffe(t,e,n,r,i){const s=H(t,"x","conv3dTranspose"),o=H(e,"filter","conv3dTranspose");return x8(n,s,o,r,i)}const dfe=ne({conv3dTranspose_:ffe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t){const n={x:H(t,"x","cos","float32")};return Q.runKernel(py,n)}const YO=ne({cos_:pfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mfe(t){const n={x:H(t,"x","cosh","float32")};return Q.runKernel(my,n)}const b8=ne({cosh_:mfe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gfe(t,e=0,n=!1,r=!1){const s={x:H(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return Q.runKernel(pO,s,o)}const pE=ne({cumprod_:gfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfe(t,e=0,n=!1,r=!1){const s={x:H(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return Q.runKernel(Dw,s,o)}const w8=ne({cumsum_:yfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vfe(t,e,n,r=!1){const i=H(t,"x","denseBincount"),s=H(e,"weights","denseBincount");F(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),F(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return Q.runKernel(gO,o,a)}const g3=ne({denseBincount_:vfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fe(t,e,n="NHWC"){const r=H(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];F(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),F(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),F(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),F(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return Q.runKernel(yO,a,l)}const xfe=ne({depthToSpace_:_fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bfe(t,e,n,r,i="NHWC",s=[1,1],o){const a=H(t,"x","depthwiseConv2d","float32"),l=H(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=i==="NHWC"?u.shape[3]:u.shape[1];F(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),oi("depthwiseConv2d",r,o);const f={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},m=Q.runKernel(Mw,f,p);return c?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const JO=ne({depthwiseConv2d_:bfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wfe(t,e,n,r,i=[1,1],s="NHWC"){const o=H(t,"x","dilation2d"),a=H(e,"filter","dilation2d");F(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),F(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),F(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,u=!1;o.rank===3&&(l=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),F(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},h={strides:n,pad:r,dilations:i},f=Q.runKernel(Lw,c,h);return u?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Sfe=ne({dilation2d_:wfe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $f(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function Un(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function Xe(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kfe(t,e){let n=H(t,"a","equal","string_or_numeric"),r=H(e,"b","equal","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Fw,i)}const Xo=ne({equal_:kfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cfe(t,e,n){const r=H(e,"a","where"),i=H(n,"b","where"),s=H(t,"condition","where","bool"),o=Xe(Xe(s.shape,r.shape),i.shape),a=hm(s,o),l=hm(r,o),u=hm(i,o),c={condition:a,t:l,e:u};return Q.runKernel(p1,c)}const Vr=ne({where_:Cfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tfe(t){const n={x:H(t,"x","zerosLike")};return Q.runKernel(w1,n)}const gt=ne({zerosLike_:Tfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $fe(t,e){let n=H(t,"a","div"),r=H(e,"b","div");[n,r]=Sn(n,r);const i=ze(n,r),s=gt(i),o=Xo(r,s);return Vr(o,s,i)}const Efe=ne({divNoNan_:$fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(t,e){const n=H(t,"t1","dot"),r=H(e,"t2","dot");F((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(F(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=te(n,[1,-1]),a=te(r,[-1,1]),l=wt(o,a);return te(l,[])}else if(n.rank===1&&r.rank===2){const o=te(n,[1,-1]),a=te(r,[r.shape[0],r.shape[1]]),l=wt(o,a);return te(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=te(r,[-1,1]),a=wt(n,o);return te(a,[a.size])}else{const o=te(r,[r.shape[0],r.shape[1]]);return wt(n,o)}}const Afe=ne({dot_:Ife});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ofe(t,...e){const n=e.map((i,s)=>H(i,`tensors${s}`,"einsum")),r={equation:t};return Q.runKernel(xO,n,r)}const mp=ne({einsum_:Ofe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nfe(t){const n={x:H(t,"x","elu","float32")};return Q.runKernel(yy,n)}const I1=ne({elu_:Nfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pfe(t){let e=H(t,"x","erf");F(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ee(e,"float32"));const n={x:e};return Q.runKernel(vy,n)}const S8=ne({erf_:Pfe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function k8(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function Qn(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function On(t,e){const n=e.map(r=>1);return k8(t,n,e)}function cr(t,e,n){F(QO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function hn(t,e){if(QO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function ru(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function kn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rfe(t,e=null,n=!1){const i={x:H(t,"x","max")},s={reductionIndices:e,keepDims:n};return Q.runKernel(Zw,i,s)}const ao=ne({max_:Rfe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dfe(t,e=null,n=!1){const i={x:H(t,"x","min")},s={axis:e,keepDims:n};return Q.runKernel(e1,i,s)}const _x=ne({min_:Dfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mfe(t,e){let n=H(t,"base","pow"),r=H(e,"exp","pow");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(Ry,i)}const Sc=ne({pow_:Mfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e){if((Os(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Os(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return C1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lfe(t){const n={x:H(t,"x","sqrt","float32")};return Q.runKernel(Hy,n)}const Sr=ne({sqrt_:Lfe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ffe(t){const e=H(t,"x","square"),n={};return Q.runKernel("Square",{x:e},n)}const qt=ne({square_:Ffe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t,e=null,n=!1){let r=H(t,"x","sum");r.dtype==="bool"&&(r=Ee(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Q.runKernel(g1,i,s)}const Be=ne({sum_:Bfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zfe(t,e="euclidean",n=null,r=!1){t=H(t,"x","norm");const i=C8(t,e,n);let s=i.shape;if(r){const o=it(n,t.shape);s=On(i.shape,o)}return te(i,s)}function C8(t,e,n=null){if(t.rank===0)return Dr(t);if(t.rank!==1&&n===null)return C8(te(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Be(Dr(t),n);if(e===1/0)return ao(Dr(t),n);if(e===-1/0)return _x(Dr(t),n);if(e==="euclidean"||e===2)return Sr(Be(Sc(Dr(t),St(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ao(Be(Dr(t),n[0]),n[1]-1);if(e===1/0)return ao(Be(Dr(t),n[1]),n[0]);if(e===-1/0)return _x(Be(Dr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Sr(Be(qt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const A1=ne({norm_:zfe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(t,e=null,n=!1){return A1(t,"euclidean",e,n)}const Vfe=ne({euclideanNorm_:jfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ufe(t){const n={x:H(t,"x","exp")};return Q.runKernel(_y,n)}const Zo=ne({exp_:Ufe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wfe(t,e=0){const n=H(t,"x","expandDims","string_or_numeric");F(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return Q.runKernel(Bw,r,i)}const Zr=ne({expandDims_:Wfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfe(t){const n={x:H(t,"x","expm1")};return Q.runKernel(xy,n)}const Hfe=ne({expm1_:Gfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kfe(t,e){const n=H(t,"x","tile","string_or_numeric");F(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return Q.runKernel(Yy,r,i)}const no=ne({tile_:Kfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qfe(t,e,n,r="float32"){e==null&&(e=t);const i=rt([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=te(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return no(Zr(o,0),[n[0],1,1]);if(n.length===2)return no(Zr(Zr(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return no(Zr(Zr(Zr(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const T8=ne({eye_:qfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xfe(t){const n={x:H(t,"x","floor","float32")};return Q.runKernel(by,n)}const O1=ne({floor_:Xfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zfe(t,e,n=0,r=0){const i=H(t,"x","gather"),s=H(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return Q.runKernel(jw,o,a)}const eN=ne({gather_:Zfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yfe(t,e){let n=H(t,"a","greater","string_or_numeric"),r=H(e,"b","greater","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Vw,i)}const ts=ne({greater_:Yfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jfe(t,e){let n=H(t,"a","greaterEqual","string_or_numeric"),r=H(e,"b","greaterEqual","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Sy,i)}const jc=ne({greaterEqual_:Jfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qfe(t){const n={input:H(t,"input","imag")};return Q.runKernel(TO,n)}const tN=ne({imag_:Qfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ede(t){const n={x:H(t,"x","isFinite")};return Q.runKernel(Cy,n)}const tde=ne({isFinite_:ede});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nde(t){const n={x:H(t,"x","isInf")};return Q.runKernel(Ty,n)}const rde=ne({isInf_:nde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ide(t){const n={x:H(t,"x","isNaN")};return Q.runKernel($y,n)}const sde=ne({isNaN_:ide});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ode(t,e=.2){const r={x:H(t,"x","leakyRelu")},i={alpha:e};return Q.runKernel(Uw,r,i)}const nN=ne({leakyRelu_:ode});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ade(t,e){let n=H(t,"a","less","string_or_numeric"),r=H(e,"b","less","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Ww,i)}const xx=ne({less_:ade});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(t,e){let n=H(t,"a","lessEqual","string_or_numeric"),r=H(e,"b","lessEqual","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Gw,i)}const gd=ne({lessEqual_:lde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ude(t,e=5,n=1,r=1,i=.5){const s=H(t,"x","localResponseNormalization");F(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),F(Sf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=te(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:i},c=Q.runKernel(Xw,l,u);return a?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const cde=ne({localResponseNormalization_:ude});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hde(t){const n={x:H(t,"x","log","float32")};return Q.runKernel(Ey,n)}const Yo=ne({log_:hde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fde(t){const n={x:H(t,"x","log1p")};return Q.runKernel(Iy,n)}const $8=ne({log1p_:fde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t,e){F(J$(t),()=>"The f passed in variableGrads(f) must be a function"),F(e==null||Array.isArray(e)&&e.every(u=>u instanceof vx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in Q.registeredVariables)e.push(Q.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,i=e.length;e=e.filter(u=>u.trainable),F(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=Q.gradients(t,e,null,s);F(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Ef(t){return Q.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pde(t){const n={x:H(t,"x","neg")};return Q.runKernel(n1,n)}const wn=ne({neg_:pde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mde(t){const n={x:H(t,"x","softplus")};return Q.runKernel(Gy,n)}const ev=ne({softplus_:mde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gde(t){const e=H(t,"x","logSigmoid");return Ef(r=>({value:wn(ev(wn(r))),gradFunc:o=>Z(o,md(wn(r)))}))(e)}const yde=ne({logSigmoid_:gde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vde(t,e){let n=H(t,"a","sub"),r=H(e,"b","sub");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(qy,i)}const Ue=ne({sub_:vde});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _de(t,e=-1){const n=H(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ef((i,s)=>{const a=ao(i,e,!0),l=Ue(i,a),u=Ue(Ee(l,"float32"),Yo(Be(Zo(l),e,!0)));return s([u]),{value:u,gradFunc:(h,f)=>{const[p]=f,m=!0,_=Zo(p);return Ue(h,Z(Be(h,e,m),_))}}})(n)}const E8=ne({logSoftmax_:_de});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xde(t,e=null,n=!1){const r=H(t,"x","logSumExp"),i=it(e,r.shape),s=ao(r,i,!0),o=Ue(r,s),a=Zo(o),l=Be(a,i),u=Yo(l),c=ve(te(s,u.shape),u);if(n){const h=On(c.shape,i);return te(c,h)}return c}const I8=ne({logSumExp_:xde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e){const n=H(t,"a","logicalAnd","bool"),r=H(e,"b","logicalAnd","bool");Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Hw,i)}const Pa=ne({logicalAnd_:bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wde(t){const n={x:H(t,"x","logicalNot","bool")};return Q.runKernel(Kw,n)}const rN=ne({logicalNot_:wde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sde(t,e){const n=H(t,"a","logicalOr","bool"),r=H(e,"b","logicalOr","bool");Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(qw,i)}const A8=ne({logicalOr_:Sde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kde(t,e){const n=H(t,"a","logicalXor","bool"),r=H(e,"b","logicalXor","bool");return Xe(n.shape,r.shape),Pa(A8(t,e),rN(Pa(t,e)))}const Cde=ne({logicalXor_:kde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tde(t,e,n,r,i){const s=H(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),F(Tr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),oi("maxPool",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i},h=Q.runKernel(Yw,u,c);return l?te(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const iN=ne({maxPool_:Tde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=H(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),F(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),oi("maxPool3d",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},h=Q.runKernel(Jw,u,c);return l?te(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Ede=ne({maxPool3d_:$de});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ide(t,e){let n=H(t,"a","maximum"),r=H(e,"b","maximum");[n,r]=Sn(n,r),n.dtype==="bool"&&(n=Ee(n,"int32"),r=Ee(r,"int32")),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Ay,i)}const iu=ne({maximum_:Ide});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ade(t,e=null,n=!1){const i={x:H(t,"x","mean")},s={axis:e,keepDims:n};return Q.runKernel(Qw,i,s)}const An=ne({mean_:Ade});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(t,e="float32"){if(Ga(t),e==="complex64"){const r=qn(t,"float32"),i=qn(t,"float32");return Tf(r,i)}const n=wr(ce(t),e);return Q.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function su(t,e="float32"){if(Ga(t),e==="complex64"){const r=su(t,"float32"),i=qn(t,"float32");return Tf(r,i)}const n=eO(ce(t),e);return Q.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ode(t,e){let n=H(t,"a","minimum"),r=H(e,"b","minimum");[n,r]=Sn(n,r),n.dtype==="bool"&&(n=Ee(n,"int32"),r=Ee(r,"int32")),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(Oy,i)}const qm=ne({minimum_:Ode});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nde(t,e,n){F(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=H(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)F(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return Q.runKernel(t1,o,s)}const Pde=ne({mirrorPad_:Nde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rde(t,e){let n=H(t,"a","mod"),r=H(e,"b","mod");[n,r]=Sn(n,r);const i={a:n,b:r};return Q.runKernel(Ny,i)}const Dde=ne({mod_:Rde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mde(t,e=null,n=!1){t=H(t,"x","moments");const r=it(e,t.shape),i=An(t,r,n);let s=i.shape;n||(s=On(i.shape,r));const o=qt(Ue(Ee(t,"float32"),te(i,s))),a=An(o,r,n);return{mean:i,variance:a}}const sN=ne({moments_:Mde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lde(t,e){let n=H(t,"a","notEqual","string_or_numeric"),r=H(e,"b","notEqual","string_or_numeric");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r};return Q.runKernel(r1,i)}const bx=ne({notEqual_:Lde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fde(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:H(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return Q.runKernel(s1,o,a)}const O8=ne({oneHot_:Fde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bde(t){const n={x:H(t,"x","onesLike")};return Q.runKernel(i1,n)}const Ns=ne({onesLike_:Bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zde(t,e,n=0){const r=H(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return Q.runKernel(a1,s,i)}const oN=ne({pad_:zde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t,e,n){const r=H(t,"x","spaceToBatchND");F(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),F(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),F(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return Q.runKernel(y1,i,s)}const aN=ne({spaceToBatchND_:jde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vde(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=H(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(Tr(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const c=Rs(l.shape,e,s,i,r),h=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=Wde([c.filterHeight,c.filterWidth],h):f=[[0,0],[0,0]];const p=h[0]===1&&h[1]===1,[m,_]=Ude([c.inHeight,c.inWidth],h,f),v=p?r:"valid",g=p?l:aN(l,h,m),b=(n==="avg"?()=>qO(g,e,s,v,o):()=>iN(g,e,s,v,o))(),w=p?b:XO(b,h,_);return u?te(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function Ude(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=t.concat(r,i),o=e.map((c,h)=>(c-s[h]%c)%c),a=i.map((c,h)=>c+o[h]),l=e.map((c,h)=>[r[h],a[h]]),u=e.map((c,h)=>[0,o[h]]);return[l,u]}function Wde(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const Gde=ne({pool_:Vde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hde(t,e){const n=H(t,"x","prelu"),r=H(e,"alpha","prelu"),i={x:n,alpha:r};return Q.runKernel(l1,i)}const lN=ne({prelu_:Hde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kde(t,e=null,n=!1){let r=H(t,"x","prod");r.dtype==="bool"&&(r=Ee(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Q.runKernel(u1,i,s)}const qde=ne({prod_:Kde});var uN={exports:{}};uN.exports;(function(t){(function(e,n,r){function i(l){var u=this,c=a();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),h=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&s(h,c),f.state=function(){return s(c,{})}),f}function a(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:this.alea=o})(ln,t)})(uN);var Xde=uN.exports,cN={exports:{}};cN.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}n&&n.exports?n.exports=o:this.xor128=o})(ln,t)})(cN);var Zde=cN.exports,hN={exports:{}};hN.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}n&&n.exports?n.exports=o:this.xorwow=o})(ln,t)})(hN);var Yde=hN.exports,fN={exports:{}};fN.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var c=l.x,h=l.i,f,p;return f=c[h],f^=f>>>7,p=f^f<<24,f=c[h+1&7],p^=f^f>>>10,f=c[h+3&7],p^=f^f>>>3,f=c[h+4&7],p^=f^f<<7,f=c[h+7&7],f=f^f<<13,p^=f^f<<9,c[h]=p,l.i=h+1&7,p};function u(c,h){var f,p=[];if(h===(h|0))p[0]=h;else for(h=""+h,f=0;f<h.length;++f)p[f&7]=p[f&7]<<15^h.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],c.x=p,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(c.x&&s(c,u),h.state=function(){return s(u,{})}),h}n&&n.exports?n.exports=o:this.xorshift7=o})(ln,t)})(fN);var Jde=fN.exports,dN={exports:{}};dN.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var c=l.w,h=l.X,f=l.i,p,m;return l.w=c=c+1640531527|0,m=h[f+34&127],p=h[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=h[f]=m^p,l.i=f,m+(c^c>>>16)|0};function u(c,h){var f,p,m,_,v,g=[],x=128;for(h===(h|0)?(p=h,h=null):(h=h+"\0",p=0,x=Math.max(x,h.length)),m=0,_=-32;_<x;++_)h&&(p^=h.charCodeAt((_+32)%h.length)),_===0&&(v=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,_>=0&&(v=v+1640531527|0,f=g[_&127]^=p+v,m=f==0?m+1:0);for(m>=128&&(g[(h&&h.length||0)&127]=-1),m=127,_=4*128;_>0;--_)p=g[m+34&127],f=g[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,g[m]=p^f;c.w=v,c.X=g,c.i=m}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(c.X&&s(c,u),h.state=function(){return s(u,{})}),h}n&&n.exports?n.exports=o:this.xor4096=o})(ln,t)})(dN);var Qde=dN.exports,pN={exports:{}};pN.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var h=l.b,f=l.c,p=l.d,m=l.a;return h=h<<25^h>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^m,l.a=m-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}n&&n.exports?n.exports=o:this.tychei=o})(ln,t)})(pN);var epe=pN.exports,N8={exports:{}};const tpe={},npe=Object.freeze(Object.defineProperty({__proto__:null,default:tpe},Symbol.toStringTag,{value:"Module"})),rpe=mW(npe);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),u=r.pow(2,o),c=u*2,h=i-1,f;function p(w,k,C){var T=[];k=k==!0?{entropy:!0}:k||{};var E=g(v(k.entropy?[w,b(n)]:w??x(),3),T),A=new m(T),$=function(){for(var N=A.g(s),P=l,M=0;N<u;)N=(N+M)*i,P*=i,M=A.g(1);for(;N>=c;)N/=2,P/=2,M>>>=1;return(N+M)/P};return $.int32=function(){return A.g(4)|0},$.quick=function(){return A.g(4)/4294967296},$.double=$,g(b(A.S),n),(k.pass||C||function(N,P,M,B){return B&&(B.S&&_(B,A),N.state=function(){return _(A,{})}),M?(r[a]=N,P):N})($,E,"global"in k?k.global:this==r,k.state)}function m(w){var k,C=w.length,T=this,E=0,A=T.i=T.j=0,$=T.S=[];for(C||(w=[C++]);E<i;)$[E]=E++;for(E=0;E<i;E++)$[E]=$[A=h&A+w[E%C]+(k=$[E])],$[A]=k;(T.g=function(N){for(var P,M=0,B=T.i,z=T.j,j=T.S;N--;)P=j[B=h&B+1],M=M*i+j[h&(j[B]=j[z=h&z+P])+(j[z]=P)];return T.i=B,T.j=z,M})(i)}function _(w,k){return k.i=w.i,k.j=w.j,k.S=w.S.slice(),k}function v(w,k){var C=[],T=typeof w,E;if(k&&T=="object")for(E in w)try{C.push(v(w[E],k-1))}catch{}return C.length?C:T=="string"?w:w+"\0"}function g(w,k){for(var C=w+"",T,E=0;E<C.length;)k[h&E]=h&(T^=k[h&E]*19)+C.charCodeAt(E++);return b(k)}function x(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),b(w)}catch{var k=e.navigator,C=k&&k.plugins;return[+new Date,e,C,e.screen,b(n)]}}function b(w){return String.fromCharCode.apply(0,w)}if(g(r.random(),n),t.exports){t.exports=p;try{f=rpe}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:ln,[],Math)})(N8);var ipe=N8.exports,spe=Xde,ope=Zde,ape=Yde,lpe=Jde,upe=Qde,cpe=epe,Vc=ipe;Vc.alea=spe;Vc.xor128=ope;Vc.xorwow=ape;Vc.xorshift7=lpe;Vc.xor4096=upe;Vc.tychei=cpe;var mN=Vc;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P8{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=mN.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class hpe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=mN.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fpe(t,e=0,n=1,r,i){if(Ga(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new P8(e,n,r,!1,i),o=rt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const dpe=ne({randomNormal_:fpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppe(t,e=0,n=1,r="float32",i){Ga(t);const s=rt(t,r),o=new hpe(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const tv=ne({randomUniform_:ppe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xm(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return Q.runKernel(PO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpe(t){const n={input:H(t,"input","real")};return Q.runKernel(RO,n)}const wx=ne({real_:mpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpe(t){const n={x:H(t,"x","reciprocal")};return Q.runKernel(Dy,n)}const ype=ne({reciprocal_:gpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpe(t){const n={x:H(t,"x","relu")};return Q.runKernel(My,n)}const Uc=ne({relu_:vpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pe(t){const n={x:H(t,"x","relu6")};return Q.runKernel(Ly,n)}const R8=ne({relu6_:_pe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xpe(t,e){const r={x:H(t,"x","reverse")},i={dims:e};return Q.runKernel(d1,r,i)}const kc=ne({reverse_:xpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bpe(t){const n={x:H(t,"x","round")};return Q.runKernel(Fy,n)}const D8=ne({round_:bpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpe(t){const n={x:H(t,"x","rsqrt","float32")};return Q.runKernel(By,n)}const M8=ne({rsqrt_:wpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Spe(t){const n={x:H(t,"x","selu")};return Q.runKernel(zy,n)}const L8=ne({selu_:Spe});function kpe(t,e,n,r,i,s=[1,1],o="NHWC"){const a=H(t,"x","separableConv2d"),l=H(e,"depthwiseFilter","separableConv2d"),u=H(n,"pointwiseFilter","separableConv2d");let c=a,h=!1;if(a.rank===3&&(h=!0,c=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),F(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],p=l.shape[3];F(u.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${u.shape[2]}.`);const m=JO(c,l,r,i,o,s),v=wc(m,u,1,"valid",o);return h?te(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const F8=ne({separableConv2d_:kpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpe(t){const n={x:H(t,"x","sign")};return Q.runKernel(Uy,n)}const Tpe=ne({sign_:Cpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pe(t){const n={x:H(t,"x","sin","float32")};return Q.runKernel(jy,n)}const B8=ne({sin_:$pe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Epe(t){const n={x:H(t,"x","sinh")};return Q.runKernel(Vy,n)}const z8=ne({sinh_:Epe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipe(t,e,n){const r=H(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ft(r,[e],[n])}const gN=ne({slice1d_:Ipe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ape(t,e,n){const r=H(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ft(r,e,n)}const j8=ne({slice2d_:Ape});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ope(t,e,n){const r=H(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ft(r,e,n)}const yN=ne({slice3d_:Ope});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Npe(t,e,n){const r=H(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ft(r,e,n)}const Sx=ne({slice4d_:Npe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppe(t,e=-1){const n=H(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return Q.runKernel(_1,r,i)}const vN=ne({softmax_:Ppe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rpe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Q.runKernel(wO,e)}const V8=ne({fft_:Rpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dpe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Q.runKernel(CO,e)}const mE=ne({ifft_:Dpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=te(t,[n,e]);r=mE(i)}else{const i=[n,2*(e-1)],s=te(wx(t),[n,e]),o=te(tN(t),[n,e]),a=kc(Ft(s,[0,1],[n,e-2]),1),l=Z(kc(Ft(o,[0,1],[n,e-2]),1),St(-1)),u=ti([s,a],1),c=ti([o,l],1),h=te(Tf(u,c),[i[0],i[1]]);r=mE(h)}if(r=wx(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=te(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const Lpe=ne({irfft_:Mpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t,e,n=0){const i={x:H(t,"x","split")},s={numOrSizeSplits:e,axis:n};return Q.runKernel(v1,i,s)}const qi=ne({split_:Fpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bpe(t,e){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const m=t.shape.map(v=>0),_=t.shape.map(v=>v);_[t.shape.length-1]=e,i=Ft(t,m,_),n=e}else if(e!=null&&e>n){const m=t.shape.map(_=>_);m[t.shape.length-1]=e-n,i=ti([t,qn(m)],t.shape.length-1),n=e}else i=t;const s=gt(i),o=te(Tf(i,s),[r,n]),a=V8(o),l=Math.floor(n/2)+1,u=wx(a),c=tN(a),h=qi(u,[l,n-l],u.shape.length-1),f=qi(c,[l,n-l],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,te(Tf(h[0],f[0]),p)}const zpe=ne({rfft_:Bpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpe(t,e){let n=H(t,"a","squaredDifference"),r=H(e,"b","squaredDifference");[n,r]=Sn(n,r),Xe(n.shape,r.shape);const i={a:n,b:r},s={};return Q.runKernel(Ky,i,s)}const Vpe=ne({squaredDifference_:jpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upe(t,e){const n=H(t,"x","squeeze","string_or_numeric");return te(n,eu(n.shape,e).newShape)}const nv=ne({squeeze_:Upe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(t,e=0){const n=o8(t,"tensors","stack","string_or_numeric");F(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&F(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return Q.runKernel(o1,r,i)}const Ra=ne({stack_:Wpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gpe(t,e=0){const r={x:H(t,"x","step")},i={alpha:e};return Q.runKernel(Jy,r,i)}const rv=ne({step_:Gpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const c={x:H(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return Q.runKernel(BO,c,h)}const Kpe=ne({stridedSlice_:Hpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpe(t){const n={x:H(t,"x","tan","float32")};return Q.runKernel(Xy,n)}const Xpe=ne({tan_:qpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bi(t,e){f6(t);const n=k1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return C1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xC(t,e,n){if(f6(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=k1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return C1(t,e,r,n)}function U8(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function Zpe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}U8(n,e,t)}function Wc(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let h=i;h<s;++h)o*=n[h];const a=i<1?1:i,l=ce(e.shape)/a,u=[...Le(n.slice(0,i)),1],c=ce(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ype(t,e=1,n=!0){const r=H(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=Q.runKernel(zO,s,o);return{values:a,indices:l}}const Jpe=ne({topk_:Ype});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpe(t,e=0,n=1,r,i){if(Ga(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new P8(e,n,r,!0,i),o=rt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const W8=ne({truncatedNormal_:Qpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eme(t,e=0){const n=H(t,"x","unique","string_or_numeric");F(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=Q.runKernel(VO,r,i);return{values:s,indices:o}}const tme=ne({unique_:eme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nme(t,e,n){const r=H(t,"x","unsortedSegmentSum"),i=H(e,"segmentIds","unsortedSegmentSum","int32");F(Sf(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return Q.runKernel(b1,s,o)}const G8=ne({unsortedSegmentSum_:nme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t,e=0){const n=H(t,"x","unstack","string_or_numeric");F(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return Q.runKernel(x1,r,i)}const Cc=ne({unstack_:rme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ime(t,e=!0,n,r){return Q.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=rt(t,"int32"),i=rt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sme(t,e,n){const r=H(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),F(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{F(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?ie(()=>{let o=wx(r),a=tN(r);return o=Q.runKernel(rf,{x:o},s),a=Q.runKernel(rf,{x:a},s),n&&(a=wn(a)),Tf(o,a)}):Q.runKernel(rf,i,s)}const pt=ne({transpose_:sme});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ome(t,e){if(e==null)return t.shape.slice();if(Ct(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ame(t,e,n,r){const i=H(t,"x","dropout");if(F(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),F(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Mn?i.clone():i;const s=ome(i,n),o=1-e,a=ze(O1(ve(tv(s,0,1,"float32",r),o)),o);return Z(i,a)}const lme=ne({dropout_:ame});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ume(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]])),F(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];F(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),F(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),oi("conv2dDerFilter",i,o);const h={x:a,dy:l},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return Q.runKernel(hO,h,f)}const _N=ne({conv2DBackpropFilter_:ume});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xN(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Z(t,rv(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function bN(t,e){let n=e;const r=Un(t.shape,e.shape);return r.length>0&&(n=Be(n,r)),te(n,t.shape)}function wN(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Uc(t);if(e==="elu")return I1(t);if(e==="relu6")return R8(t);if(e==="prelu")return lN(t,n);if(e==="leakyrelu")return nN(t,r);if(e==="sigmoid")return md(t);throw new Error(`Unknown fused activation ${e}.`)}const SN=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cme({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",SN(Q.state.gradientDepth,l)===!1){F(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=wc(t,e,n,r,i,s,o);return a!=null&&(C=ve(C,a)),wN(C,l,u,c)}const h=H(t,"x","conv2d","float32"),f=H(e,"filter","conv2d","float32");let p=h,m=!1;h.rank===3&&(m=!0,p=te(h,[1,h.shape[0],h.shape[1],h.shape[2]])),F(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),F(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),oi("fused conv2d",r,o);const _=i==="NHWC"?p.shape[3]:p.shape[1];F(f.shape[2]===_,()=>`Error in conv2d: depth of input (${_}) must match input depth for filter ${f.shape[2]}.`),F(Tr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const v=ur(p.shape,f.shape,n,s,r,o);let g;a!=null&&(g=H(a,"bias","fused conv2d"),[g]=Sn(g,h),i==="NHWC"?Xe(v.outShape,g.shape):(F(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),F(g.shape.length===0||g.shape[0]===v.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const C=u.shape;if(F(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)F(C[0]===1||C[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${v.outChannels}).`);else if(C.length===3)try{Xe(C,v.outShape)}catch{const E=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(E)}x=H(u,"prelu weights","fused conv2d")}const b=(C,T)=>{F(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[E,A,$,N]=T,P=xN(C,$,l);F(xc(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const M=ZO(A.shape,P,E,n,r),B=_N(A,P,E.shape,n,r),z=[M,B];if(N!=null){const j=bN(N,P);z.push(j)}return z},w={x:p,filter:f,bias:g,preluActivationWeights:x},k={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Ef((T,E,A)=>{let $=Q.runKernel(mx,w,k);return A([E,T,$]),m&&($=te($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(p,f):Ef((T,E,A,$)=>{let N=Q.runKernel(mx,w,k);return $([E,T,N,A]),m&&(N=te(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:b}})(p,f,g)}const hme=ne({fusedConv2d_:cme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fme(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return Q.runKernel(vO,u,c)}const dme=ne({depthwiseConv2dNativeBackpropFilter_:fme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},h=Q.runKernel(_O,u,c);return l?te(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const mme=ne({depthwiseConv2dNativeBackpropInput_:pme});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gme({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(SN(Q.state.gradientDepth,s)===!1){let N=wt(t,e,n,r);return i!=null&&(N=ve(N,i)),wN(N,s,o,a)}let l=H(t,"a","fused matMul"),u=H(e,"b","fused matMul");[l,u]=Sn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),_=u.shape.slice(0,-2),v=ce(m),g=ce(_);F(c===h,()=>`Error in fused matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=Xe(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,p]),w=n?te(l,[v,c,f]):te(l,[v,f,c]),k=r?te(u,[g,p,h]):te(u,[g,h,p]);let C;i!=null&&(C=H(i,"bias","fused matMul"),[C]=Sn(C,l),Xe(b,C.shape));let T;o!=null&&(T=H(o,"prelu weights","fused matMul"));const E=(N,P)=>{const[M,B,z,j]=P,U=xN(te(N,z.shape),z,s);let D,W;if(!n&&!r?(D=wt(U,B,!1,!0),W=wt(M,U,!0,!1)):!n&&r?(D=wt(U,B,!1,!1),W=wt(U,M,!0,!1)):n&&!r?(D=wt(B,U,!1,!0),W=wt(M,U,!1,!1)):(D=wt(B,U,!0,!0),W=wt(U,M,!0,!0)),i!=null){const G=bN(j,U);return[D,W,G]}else return[D,W]},A={a:w,b:k,bias:C,preluActivationWeights:T},$={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Ef((P,M,B)=>{const z=Q.runKernel(px,A,$);return B([P,M,z]),{value:te(z,b),gradFunc:E}})(w,k):Ef((P,M,B,z)=>{const j=Q.runKernel(px,A,$);return z([P,M,j,B]),{value:te(j,b),gradFunc:E}})(w,k,C)}const y3=ne({fusedMatMul_:gme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yme(t,e,n,r,i="bilinear",s=0){const o=H(t,"image","cropAndResize"),a=H(e,"boxes","cropAndResize","float32"),l=H(n,"boxInd","cropAndResize","int32"),u=a.shape[0];F(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),F(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),F(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:a,boxInd:l},h={method:i,extrapolationValue:s,cropSize:r};return Q.runKernel(mO,c,h)}const vme=ne({cropAndResize_:yme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t){const e=H(t,"image","flipLeftRight","float32");F(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Q.runKernel(kO,n,{})}const xme=ne({flipLeftRight_:_me});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bme(t){const e=H(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];F(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,no(e,i)}const wme=ne({grayscaleToRGB_:bme});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sme(t){const e=H(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];F(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),F(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Ee(e,"float32"),o=bi([.2989,.587,.114]);let a;switch(e.rank){case 2:a=mp("ij,j->i",s,o);break;case 3:a=mp("ijk,k->ij",s,o);break;case 4:a=mp("ijkl,l->ijk",s,o);break;case 5:a=mp("ijklm,m->ijkl",s,o);break;case 6:a=mp("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Zr(a,-1),Ee(a,i)}const kme=ne({rgbToGrayscale_:Sme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cme(t,e,n=0,r=.5){const i=H(t,"image","rotateWithOffset","float32");F(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return Q.runKernel(UO,s,o)}const Tme=ne({rotateWithOffset_:Cme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yd(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(e.rank===1,()=>"scores must be a 1D tensor"),F(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),F(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=H(t,"boxes","nonMaxSuppression","float32"),o=H(e,"scores","nonMaxSuppression","float32"),a=yd(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return Q.runKernel(AO,{boxes:s,scores:o},l)}const Eme=ne({nonMaxSuppression_:$me});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t,e,n){const r=Ame(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function Ame(t,e,n){return Nme(t,e,n||Ome)}function Ome(t,e){return t>e?1:t<e?-1:0}function Nme(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kN(t,e,n,r,i){return $N(t,e,n,r,i,0)}function CN(t,e,n,r,i,s){return $N(t,e,n,r,i,0,!1,s,!0)}function TN(t,e,n,r,i,s){return $N(t,e,n,r,i,s,!0)}function $N(t,e,n,r,i,s,o=!1,a=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>i&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(v3);const c=s>0?-.5/s:0,h=[],f=[];for(;h.length<n&&u.length>0;){const v=u.pop(),{score:g,boxIndex:x,suppressBeginIndex:b}=v;if(g<i)break;let w=!1;for(let k=h.length-1;k>=b;--k){const C=Pme(t,x,h[k]);if(C>=r){w=!0;break}if(v.score=v.score*Rme(r,c,C),v.score<=i)break}v.suppressBeginIndex=h.length,w||(v.score===g?(h.push(x),f.push(v.score)):v.score>i&&Ime(u,v,v3))}const p=h.length,m=n-p;a&&m>0&&(h.push(...new Array(m).fill(0)),f.push(...new Array(m).fill(0)));const _={selectedIndices:h};return o&&(_.selectedScores=f),l&&(_.validOutputs=p),_}function Pme(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),p=(a-s)*(l-o),m=(h-u)*(f-c);if(p<=0||m<=0)return 0;const _=Math.max(s,u),v=Math.max(o,c),g=Math.min(a,h),x=Math.min(l,f),b=Math.max(g-_,0)*Math.max(x-v,0);return b/(p+m-b)}function Rme(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function v3(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Dme(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=H(t,"boxes","nonMaxSuppressionAsync"),o=H(e,"scores","nonMaxSuppressionAsync"),a=yd(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:h}=kN(u,c,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),bi(h,"int32")}const Mme=Dme;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lme(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),l=yd(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},h=Q.runKernel(NO,u,c);return{selectedIndices:h[0],selectedScores:h[1]}}const Fme=ne({nonMaxSuppressionWithScore_:Lme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Bme(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),l=yd(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=u[0],h=u[1],{selectedIndices:f,selectedScores:p}=TN(c,h,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:bi(f,"int32"),selectedScores:bi(p)}}const zme=Bme;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),l=yd(o,a,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,f={boxes:o,scores:a},p={maxOutputSize:u,iouThreshold:c,scoreThreshold:h,padToMaxOutputSize:s},m=Q.runKernel(OO,f,p);return{selectedIndices:m[0],validOutputs:m[1]}}const Vme=ne({nonMaxSuppressionPadded_:jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ume(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),l=yd(o,a,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[f,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:m,validOutputs:_}=CN(f,p,u,c,h,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:bi(m,"int32"),validOutputs:St(_,"int32")}}const Wme=Ume;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(t,e,n=!1,r=!1){const i=H(t,"images","resizeBilinear");F(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),F(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),F(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=Q.runKernel(f1,a,l);return o?te(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const K8=ne({resizeBilinear_:Gme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hme(t,e,n=!1,r=!1){const i=H(t,"images","resizeNearestNeighbor");F(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),F(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),F(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=Q.runKernel(h1,a,l);return o?te(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const q8=ne({resizeNearestNeighbor_:Hme});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kme(t,e="binary",n=!1,r=.5){const i=H(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let u=Z(bi([r]),255),c,h,f,p;if(F(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),F(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),F(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),F(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[c,h,f]=qi(i,[1,1,1],-1);const v=Z(c,s),g=Z(h,o),x=Z(f,a);p=ve(ve(v,g),x)}else p=t;if(e==="otsu"){const v=Hhe(Ee(D8(p),"int32"),a8([]),256);u=qme(v,l)}const m=n?gd(p,u):ts(p,u);return Ee(Z(m,255),"int32")}function qme(t,e){let n=bi([-1]),r=bi([0]),i=bi([0]),s,o,a,l,u,c;for(let h=0;h<t.size-1;h++){s=Ft(t,0,h+1),o=Ft(t,h+1),u=ze(Be(s),e),c=ze(Be(o),e);const f=Be(Z(s,Xm(0,s.size)));a=ze(f,Be(s));const p=E1(o.shape,s.size),m=ve(Xm(0,o.size),p),_=Z(o,m);l=ze(Be(_),Be(o));const v=Ue(a,l),g=Ue(a,l),x=Z(u,c);i=Z(Z(x,v),g);const b=ts(i,r);r=Vr(b,i,r),n=Vr(b,bi([h]),n)}return n}const Xme=ne({threshold_:Kme});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zme(t,e,n="nearest",r="constant",i=0,s){const o=H(t,"image","transform","float32"),a=H(e,"transforms","transform","float32");F(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),F(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return Q.runKernel(jO,l,u)}const Yme=ne({transform_:Zme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t,e,n){const r=H(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(F(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),F(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=H(e<0?s:e,"numLower","bandPart")):(F(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Vr(xx(e,0),s,qm(e,s))),typeof n=="number"?(F(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),F(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=H(n<0?o:n,"numUpper","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Vr(xx(n,0),o,qm(n,o)));const u=te(Xm(0,s,1,"int32"),[-1,1]),c=Xm(0,o,1,"int32"),h=Ue(u,c),f=Pa(gd(h,a),jc(h,wn(l))),p=qn([s,o],r.dtype);return te(Ra(Cc(te(r,[-1,s,o])).map(m=>Vr(f,m,p))),i)}const Qme=ne({bandPart_:Jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t){let e;if(Array.isArray(t)){e=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)F(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=qi(t,t.shape[0],0).map(i=>nv(i,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(Q.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=Z(Be(Z(n[o],s)),n[o]);s=Ue(s,a)}return ze(s,A1(s,"euclidean"))}));return e?Ra(n,0):n}const tge=ne({gramSchmidt_:ege});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nge(t,e=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return _3(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Cc(te(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[u,c]=_3(l,e);i.push(u),s.push(c)});const o=te(Ra(i,0),t.shape),a=te(Ra(s,0),t.shape);return[o,a]}}function _3(t,e=!1){return Q.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=T8(n),s=oc(t);const o=xC([[1]],[1,1]);let a=oc(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,h=a,f=i;[a,s,i]=Q.tidy(()=>{const p=Ft(s,[u,u],[n-u,1]),m=A1(p),_=Ft(s,[u,u],[1,1]),v=Vr(ts(_,0),xC([[-1]]),xC([[1]])),g=Ue(_,Z(v,m)),x=ze(p,g);x.shape[0]===1?a=oc(o):a=ti([o,Ft(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const b=wn(ze(wt(v,g),m)),w=Ft(s,[u,0],[n-u,r]),k=Z(b,a),C=pt(a);if(u===0)s=Ue(w,wt(k,wt(C,w)));else{const A=Ue(w,wt(k,wt(C,w)));s=ti([Ft(s,[0,0],[u,r]),A],0)}const T=pt(k),E=Ft(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=Ue(E,wt(wt(E,a),T));else{const A=Ue(E,wt(wt(E,a),T));i=ti([Ft(i,[0,0],[n,u]),A],1)}return[a,s,i]}),lt([c,h,f])}return!e&&n>r&&(i=Ft(i,[0,0],[n,r]),s=Ft(s,[0,0],[r,r])),[i,s]})}const rge=ne({qr_:nge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ga={flipLeftRight:xme,grayscaleToRGB:wme,resizeNearestNeighbor:q8,resizeBilinear:K8,rgbToGrayscale:kme,rotateWithOffset:Tme,cropAndResize:vme,nonMaxSuppression:Eme,nonMaxSuppressionAsync:Mme,nonMaxSuppressionWithScore:Fme,nonMaxSuppressionWithScoreAsync:zme,nonMaxSuppressionPadded:Vme,nonMaxSuppressionPaddedAsync:Wme,threshold:Xme,transform:Yme},ige={bandPart:Qme,gramSchmidt:tge,qr:rge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sge=new Map,oge=new Map;class vd{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class vs{constructor(){this.classNameMap={}}static getMap(){return vs.instance==null&&(vs.instance=new vs),vs.instance}static register(e){vs.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ge(t,e,n){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return vs.register(t),sge.set(i,t),oge.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ou extends vd{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return lt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return dde(e,n)}dispose(){this.iterations_!=null&&lt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:St(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(ou,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X8 extends ou{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Q.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:ie(()=>gt(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:ie(()=>gt(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;ie(()=>{const c=ve(Z(l,this.rho),Z(qt(a),1-this.rho)),h=Z(ze(Sr(ve(u,this.epsilon)),Sr(ve(l,this.epsilon))),a),f=ve(Z(u,this.rho),Z(qt(h),1-this.rho));l.assign(c),u.assign(f);const p=ve(Z(h,-this.learningRate),s);s.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(lt(this.accumulatedGrads.map(e=>e.variable)),lt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z8 extends ou{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Q.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:ie(()=>E1(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;ie(()=>{const l=ve(a,qt(o));a.assign(l);const u=ve(Z(ze(o,Sr(ve(l,Q.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&lt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y8 extends ou{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ie(()=>{this.accBeta1=St(n).variable(),this.accBeta2=St(r).variable()}),i==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ie(()=>{const r=Ue(1,this.accBeta1),i=Ue(1,this.accBeta2);n.forEach((s,o)=>{const a=Q.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:ie(()=>gt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:ie(()=>gt(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,h=this.accumulatedSecondMoment[o].variable,f=ve(Z(c,this.beta1),Z(u,1-this.beta1)),p=ve(Z(h,this.beta2),Z(qt(u),1-this.beta2)),m=ze(f,r),_=ze(p,i);c.assign(f),h.assign(p);const v=ve(Z(ze(m,ve(Sr(_),this.epsilon)),-this.learningRate),a);a.assign(v)}),this.accBeta1.assign(Z(this.accBeta1,this.beta1)),this.accBeta2.assign(Z(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&lt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ie(()=>{this.accBeta1.assign(Sc(this.beta1,this.iterations_+1)),this.accBeta2.assign(Sc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J8 extends ou{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ie(()=>{this.iteration=St(0).variable(),this.accBeta1=St(n).variable()}),i==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ie(()=>{const r=Ue(1,this.accBeta1),i=ze(-this.learningRate,ve(Z(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=Q.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:gt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:gt(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,h=this.accumulatedWeightedInfNorm[o].variable,f=ve(Z(c,this.beta1),Z(u,1-this.beta1)),p=Z(h,this.beta2),m=Dr(u),_=iu(p,m);c.assign(f),h.assign(_);const v=ve(Z(ze(i,r),ze(f,ve(_,this.epsilon))),a);a.assign(v)}),this.iteration.assign(ve(this.iteration,1)),this.accBeta1.assign(Z(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&lt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EN extends ou{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=Q.registeredVariables[r];ie(()=>{const a=ve(Z(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Uo(St(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q8 extends EN{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=St(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Q.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:ie(()=>gt(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&ie(()=>{let l;const u=ve(Z(this.m,o),a);this.useNesterov?l=ve(Z(this.c,ve(a,Z(u,this.m))),s):l=ve(Z(this.c,u),s),o.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&lt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eK extends ou{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=Q.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Q.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:ie(()=>gt(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:ie(()=>gt(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:ie(()=>gt(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;ie(()=>{const c=ve(Z(l,this.decay),Z(qt(a),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[i].variable,f=ve(Z(h,this.decay),Z(a,1-this.decay)),p=ze(Z(a,this.learningRate),Sr(Ue(c,ve(qt(f),this.epsilon)))),m=ve(Z(u,this.momentum),p);l.assign(c),h.assign(f),u.assign(m);const _=Ue(s,m);s.assign(_)}else{const h=ve(Z(l,this.decay),Z(qt(a),1-this.decay)),f=ve(Z(u,this.momentum),ze(Z(a,this.learningRate),Sr(ve(h,this.epsilon))));l.assign(h),u.assign(f);const p=Ue(s,f);s.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&lt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&lt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&lt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const age=[X8,Z8,Y8,J8,Q8,eK,EN];function lge(){for(const t of age)ge(t)}function IN(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ce(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let h=0;h<i.length-1;++h)o*=i[h];const a=t.shape,l=i.slice();l.pop();let u=1;for(let h=s;h<n;++h)u*=a[h],l.push(a[h]);const c=[...Le(t.shape).map(h=>h/u),1].slice(0,s);return[l,o,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gE=-2,uge=-1;function AN(t,e,n){const r=t.shape.length;F(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),F(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)F(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function cge(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function ON(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function tK(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function nK(t,e,n){return n<=t?n:n-(e-1)}function rK(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function hge(t,e,n,r,i,s,o,a,l){const u=t.length;let c=new Array(u),h=new Array(u),f=new Array(u);if(e.length&&n>0){const p=e[0],m=n+1;c=iK(o,p,m,r,t),h=sK(a,p,m,i,t),f=tK(s,p,m,t)}else for(let p=0;p<u;p++)c[p]=aK(o,r,s,t,p,l),h[p]=lK(a,i,s,t,p,l),f[p]=oK(s,p,l);return{begin:c,end:h,strides:f}}function iK(t,e,n,r,i){const s=[...i],o=rK(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=nK(e,n,a);let u=r[l];t&1<<l&&(u=0),s[a]=u}return s}function sK(t,e,n,r,i){const s=[...i],o=rK(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=nK(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[a]=u}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=gc(0,s[a],i[a])}return s}function oK(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function aK(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=gc(0,o,l-1),o}function lK(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=gc(0,o,l):o=gc(-1,o,l-1),o}function NN(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function PN(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function N1(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{F(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(F(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function RN(t,e,n,r,i,s,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<h.dims;b++)c&&1<<b&a&&h.numAddAxisAfterEllipsis++,1<<b&o&&(c=!0);c||(h.ellipsisMask|=1<<h.dims,h.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};fge(h,f);let p=!0,m=!0,_=!0;const v=[],g=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const w=!!(f.shrinkAxisMask&1<<b),k=t[b];if(k===-1){v.push(w?1:-1);continue}const C=[f.beginMask&1<<b,f.endMask&1<<b],T=[f.strides[b]>0?0:-1,f.strides[b]>0?k:k-1];if(w&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");_=_&&f.strides[b]===1;const E=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(w){const P=f.begin[b]<0?k+f.begin[b]:f.begin[b];if(f.begin[b]=P,f.end[b]=f.begin[b]+1,P<0||P>=k)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=x3(f.begin[b],0,f.strides[b],k,C,T),f.end[b]=x3(f.end[b],1,f.strides[b],k,C,T);const N=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===k;p=p&&N,m=m&&(b===0&&f.strides[b]===1||N)}else p=p&&f.strides[b]===1&&E,m=m&&(b===0&&f.strides[b]===1||E);let A,$=!1;if(f.beginValid&&f.endValid?(A=f.end[b]-f.begin[b],$=!0):w?(A=1,$=!0):E&&k>=0&&(f.strides[b]<0?A=-k:A=k,$=!0),$){let N;A===0||A<0!=f.strides[b]<0?N=0:N=Math.trunc(A/f.strides[b])+(A%f.strides[b]!==0?1:0),v.push(N)}else v.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const w=f.finalShapeGatherIndices[b];w>=0?g.push(v[w]):w===gE&&g.push(1)}return{finalShapeSparse:g.filter((b,w)=>f.finalShapeGatherIndices[w]!==gE),finalShape:g,isIdentity:p,sliceDim0:m,isSimpleSlice:_,begin:f.begin,end:f.end,strides:f.strides}}function fge(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(gE),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(uge),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function x3(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const dge=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:AN,computeFlatOffset:PN,computeOutShape:ON,getNormalizedAxes:hge,isSliceContinous:NN,maskToAxes:cge,parseSliceParams:N1,sliceInfo:RN,startForAxis:aK,startIndicesWithElidedDims:iK,stopForAxis:lK,stopIndicesWithElidedDims:sK,stridesForAxis:oK,stridesWithElidedDims:tK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pge{static sgd(e){return new EN(e)}static momentum(e,n,r=!1){return new Q8(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new eK(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new Y8(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new X8(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new J8(e,n,r,i,s)}static adagrad(e,n=.1){return new Z8(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mh=pge;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mge=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function uK(){return new Promise(t=>mge(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DN(t,e){const n=t[0].length;t.forEach((i,s)=>{F(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),F(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)F(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Wo(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var eo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(eo||(eo={}));function cK(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function hK(t){const e={FIRST_DIM_SIZE:eo.FIRST_DIM_SIZE,VALUE_ROWIDS:eo.VALUE_ROWIDS,ROW_LENGTHS:eo.ROW_LENGTHS,ROW_SPLITS:eo.ROW_SPLITS,ROW_LIMITS:eo.ROW_LIMITS,ROW_STARTS:eo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function fK(t){return t.length===0?0:t[0]===eo.FIRST_DIM_SIZE?t.length-1:t.length}function dK(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MN=30;function P1(t){return t<=MN?t:Q$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LN(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iv(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function sv(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function ov(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function FN(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function BN(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1=1.7580993408473768,D1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zN=.3275911,jN=.254829592,VN=-.284496736,UN=1.421413741,WN=-1.453152027,GN=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Da(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function pK(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function mK(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function gK(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function HN(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function yK(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function vK(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function _K(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bC="->",gge=/->/g,b3=",",w3="...";function KN(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(gge,"").length)/bC.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${bC}").`);const[r,i]=t.split(bC);F(r.indexOf(w3)===-1,()=>`The ellipsis notation ("${w3}") is not supported yet.`);const s=r.split(b3),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<i.length;++f){const p=i[f];if(!s.some(m=>m.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let f=0;f<r.length;++f){const p=r[f];a.indexOf(p)===-1&&p!==b3&&a.push(p)}const l=new Array(s.length);for(let f=0;f<o;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let p=0;p<s[f].length;++p)l[f].push(a.indexOf(s[f][p]))}const u=a.length,c=i.length,h=[];for(let f=c;f<u;++f)h.push(f);return{allDims:a,summedDims:h,idDims:l}}function qN(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function XN(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:F(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function ZN(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=yge(e,a);for(const u of l)s.indexOf(u)===-1&&(r[o].push(u),s.push(u))}return{path:n,steps:r}}function YN(t){return t.every((e,n)=>e===n)}function yge(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function JN(t,e,n=0){let r=[];if(typeof e=="number")F(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);F(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}F(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function bK(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function wK(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SK(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function kK(t,e){return`size ${t} must be non-negative, not ${e}`}function CK(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function TK(t,e){const n=ce(t),r=ce(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function $K(t,e){const n=ce(t),r=ce(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yE(){return"segment ids must be >= 0"}function EK(){return"segment ids are not increasing"}function IK(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function AK(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OK(t,e){let n=!1,r;for(t<=MN?(r=t,n=!0):r=Q$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Q$(t,r+1);return r}function NK(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function QN(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)a.push(t.shape[h]),u*=t.shape[h];for(let h=r;h<i;h++)a.push(e.shape[h]);for(let h=n+1;h<s;h++)a.push(t.shape[h]),c*=t.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const vge=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:QN,computeOutShape:NK,segOpComputeOptimalWindowSize:OK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(t){try{return t.map(e=>Ul(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function PK(t){return t.map(e=>Rl(e))}const _ge=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:jN,ERF_A2:VN,ERF_A3:UN,ERF_A4:WN,ERF_A5:GN,ERF_P:zN,PARALLELIZE_THRESHOLD:MN,get RowPartitionType(){return eo},SELU_SCALE:D1,SELU_SCALEALPHA:R1,applyActivation:wN,assertAndGetBroadcastShape:Xe,assertAxesAreInnerMostDims:cr,assertParamsConsistent:DN,assignToTypedArray:yK,axesAreInnerMostDims:QO,calculateShapes:Wc,checkEinsumDimSizes:XN,checkPadOnDimRoundingMode:oi,combineLocations:k8,combineRaggedTensorToTensorShapes:cK,complexWithEvenIndex:mK,complexWithOddIndex:gK,computeConv2DInfo:ur,computeConv3DInfo:nu,computeDefaultPad:KO,computeDilation2DInfo:Qy,computeOptimalWindowSize:P1,computeOutAndReduceShapes:Qn,computeOutShape:Wo,computePool2DInfo:Rs,computePool3DInfo:Ha,convertConv2DDataFormat:Ka,decodeEinsumEquation:KN,eitherStridesOrDilationsAreOne:Tr,expandShapeToKeepDim:On,exponent:_K,exponents:vK,fromStringArrayToUint8:PK,fromUint8ToStringArray:Ma,getAxesPermutation:hn,getBroadcastDims:$f,getComplexWithIndex:HN,getEinsumComputePath:ZN,getEinsumPermutation:qN,getFusedBiasGradient:bN,getFusedDyActivation:xN,getImageCenter:LN,getInnerMostAxes:kn,getPermuted:sv,getRaggedRank:fK,getReductionAxes:Un,getReshaped:iv,getReshapedPermuted:ov,getRowPartitionTypesHelper:hK,getSliceBeginCoords:FN,getSliceSize:BN,getSparseFillEmptyRowsIndicesDenseShapeMismatch:xK,getSparseFillEmptyRowsNegativeIndexErrorMessage:bK,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:wK,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:CK,getSparseReshapeInputOutputMismatchErrorMessage:$K,getSparseReshapeInputOutputMultipleErrorMessage:TK,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:SK,getSparseReshapeNegativeOutputDimErrorMessage:kK,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:AK,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:yE,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:EK,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:IK,getUndoAxesPermutation:ru,isIdentityPermutation:YN,log:nce,mergeRealAndImagArrays:Da,prepareAndValidate:IN,prepareSplitSize:JN,segment_util:vge,shouldFuse:SN,slice_util:dge,splitRealAndImagArrays:pK,stridesOrDilationsArePositive:bc,tupleValuesAreOne:xc,upcastType:Ti,validateDefaultValueShape:dK,validateInput:Zpe,validateUpdateShape:U8,warn:Vi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lge();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RK={kernelName:Sw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,rv(Ee(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xge={kernelName:iy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=qt(Ee(n,"float32")),i=Sr(Ue(St(1),r));return wn(ze(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bge={kernelName:sy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Sr(Ue(qt(Ee(n,"float32")),1));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wge={kernelName:dd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{let a=t;const l=Un(n.shape,i);return l.length>0&&(a=Be(a,l)),te(a,n.shape)},b:()=>{let a=t;const l=Un(r.shape,i);return l.length>0&&(a=Be(a,l)),te(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sge={kernelName:rO,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kge={kernelName:kw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cge={kernelName:Cw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tge={kernelName:oy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Sr(Ue(St(1),qt(Ee(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ge={kernelName:ay,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Sr(ve(St(1),qt(Ee(n,"float32"))));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ege={kernelName:cy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{const a=ve(qt(n),qt(r));let l=Z(t,ze(r,a));const u=Un(n.shape,i);return u.length>0&&(l=Be(l,u)),te(l,n.shape)},b:()=>{const a=ve(qt(n),qt(r));let l=wn(Z(t,ze(n,a)));const u=Un(r.shape,i);return u.length>0&&(l=Be(l,u)),te(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ige={kernelName:ly,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,ve(qt(Ee(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Age={kernelName:uy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ue(St(1),qt(Ee(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oge(t,e,n,r,i,s){const o=H(t,"dy","avgPool3dGrad"),a=H(e,"input","avgPool3dGrad");let l=o,u=a,c=!1;a.rank===4&&(c=!0,l=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=te(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),F(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),oi("avgPool3dGrad",i,s);const h={dy:l,input:u},f={filterSize:n,strides:r,pad:i,dimRoundingMode:s},p=Q.runKernel(aO,h,f);return c?te(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Nge=ne({avgPool3dGrad_:Oge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pge={kernelName:$w,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>Nge(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rge(t,e,n,r,i){const s=H(t,"dy","avgPoolGrad"),o=H(e,"input","avgPoolGrad");F(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,u=!1;o.rank===3&&(u=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),F(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},h={filterSize:n,strides:r,pad:i},f=Q.runKernel(oO,c,h);return u?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Dge=ne({avgPoolGrad_:Rge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mge={kernelName:Tw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Dge(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lge={kernelName:Ew,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>wt(t,i,!1,!0),b:()=>wt(r,t,!0,!1)}:!s&&o?{a:()=>wt(t,i,!1,!1),b:()=>wt(t,r,!0,!1)}:s&&!o?{a:()=>wt(i,t,!1,!0),b:()=>wt(r,t,!1,!1)}:{a:()=>wt(i,t,!0,!0),b:()=>wt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fge={kernelName:Iw,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>aN(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge={kernelName:Jue,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Be(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge={kernelName:hy,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jge={kernelName:fy,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vge={kernelName:dy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Vr(Pa(jc(r,i),gd(r,s)),t,gt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uge={kernelName:Aw,inputsToSave:["x"],gradFunc:RK.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wge={kernelName:Ow,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=it(i,e[0].shape)[0],o=r.map(l=>l[s]);return qi(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gge={kernelName:Nw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return F(xc(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>ZO(r.shape,t,i,o,a,l),filter:()=>_N(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hge={kernelName:Pw,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>wc(t,i,s,o,a,1,l),filter:()=>_N(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(t,e,n,r,i){let s=t;t.rank===4&&(s=te(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),F(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),F(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),F(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),F(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),F(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return Q.runKernel(fO,a,l)}const qge=ne({conv3DBackpropFilter_:Kge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xge={kernelName:Rw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;F(xc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>x8(o.shape,t,a,i,s),filter:()=>qge(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zge={kernelName:py,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(wn(B8(Ee(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yge={kernelName:my,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(z8(Ee(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jge={kernelName:Dw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=hn([i],r.rank);let l=w8(t,i,s,!o);return a!=null&&(l=pt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qge={kernelName:Mw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];F(xc(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return F(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),F(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),F(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),F(Tr(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),oi("depthwiseConv2d",s,o),{x:()=>mme(l.shape,t,u,i,s,a,o),filter:()=>dme(l,t,u.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eye={kernelName:Lw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>Q.runKernel(eE,s,n),filter:()=>Q.runKernel(tE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tye={kernelName:yy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Q.runKernel(bO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nye={kernelName:vy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Z(Zo(wn(qt(n))),2/Math.sqrt(Math.PI));return{x:()=>Z(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rye={kernelName:_y,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iye={kernelName:Bw,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>te(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sye={kernelName:xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Zo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oye={kernelName:by,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aye={kernelName:wy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{const a=ze(t,Ee(r,"float32")),l=Un(n.shape,i);return l.length>0?te(Be(a,l),n.shape):a},b:()=>{let a=Z(t,Ee(n,"float32"));const l=Un(r.shape,i);l.length>0&&(a=te(Be(a,l),r.shape));const u=qt(r);return wn(ze(a,Ee(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lye={kernelName:zw,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??St(1),u=Un(s.shape,i.shape),c=[];if(s.rank===1){for(let w=0;w<i.shape.length-1;++w)c.push(i.shape[w]);c.push(1)}const h=Ue(i,s),f=Z(t,l),p=M8(ve(o,St(r))),m=Z(Z(Z(p,p),p),St(-.5));return{x:()=>s.rank===1?te(Z(Z(t,no(te(p,[1,1,1,s.shape[0]]),c)),l),i.shape):te(Z(Z(t,p),l),i.shape),mean:()=>{let w=Z(Z(p,St(-1)),f);return s.rank===1&&(w=Be(w,u)),te(w,s.shape)},variance:()=>{let w=Z(Z(m,h),f);return s.rank===1&&(w=Be(w,u)),te(w,s.shape)},scale:()=>{const w=Z(h,p);let k=Z(t,w);return s.rank===1&&(k=Be(k,u)),te(k,s.shape)},offset:()=>{let w=t;return s.rank===1&&(w=Be(w,u)),te(w,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uye={kernelName:jw,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=it(s,r.shape)[0],l=(u,c,h)=>()=>{const f=u.shape,p=c.size,m=f.slice(0,a),_=m.length,v=f.slice(s,f.length).slice(1),g=v.length,x=S3(0,_),b=S3(_+1,_+1+g),w=k3([m,[p],v]),k=te(h,w),C=te(c,[p]),T=k3([[_],x,b]),E=pt(k,T);let A=G8(E,C,u.shape[a]);const $=ru(T);return A=pt(A,$),A};if(o===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Ra(c.map((p,m)=>l(p,i.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function S3(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function k3(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cye={kernelName:Sy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>gt(n),b:()=>gt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hye={kernelName:ky,gradFunc:t=>({x:()=>Ee(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fye={kernelName:Cy,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dye={kernelName:Ty,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pye={kernelName:$y,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mye={kernelName:Uw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=ts(r,0);return{x:()=>Vr(s,t,Z(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gye={kernelName:Iy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,ve(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yye={kernelName:Ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ee(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vye={kernelName:ece,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=Zo(r);return Ue(t,Z(Be(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return Q.runKernel($O,a,l)}const xye=ne({localResponseNormalizationBackprop_:_ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bye={kernelName:Xw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>xye(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(t,e,n,r){return e.rank<n.rank&&(e=te(e,On(e.shape,r))),t.rank<n.rank&&(t=te(t,On(t.shape,r))),{x:()=>Z(t,Ee(Xo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3={kernelName:Zw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=it(i,s.shape),l=DK(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wye={kernelName:Ay,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Z(t,Ee(jc(n,r),"float32")),b:()=>Z(t,Ee(xx(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e,n,r,i,s,o){const a=H(t,"dy","maxPool3dGrad"),l=H(e,"input","maxPool3dGrad"),u=H(n,"output","maxPool3dGrad");let c=a,h=l,f=u,p=!1;l.rank===4&&(p=!0,c=te(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=te(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=te(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),F(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),F(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),F(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),oi("maxPool3dGrad",s,o);const m={dy:c,input:h,output:f},_={filterSize:r,strides:i,pad:s,dimRoundingMode:o},v=Q.runKernel(IO,m,_);return p?te(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const kye=ne({maxPool3dGrad_:Sye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cye={kernelName:Jw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>kye(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e,n,r,i,s,o){const a=H(t,"dy","maxPoolGrad"),l=H(e,"input","maxPoolGrad"),u=H(n,"output","maxPoolGrad");F(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),F(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),F(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),oi("maxPoolGrad",s,o);const c={dy:a,input:l,output:u},h={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return Q.runKernel(EO,c,h)}const $ye=ne({maxPoolGrad_:Tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eye={kernelName:Yw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>$ye(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iye={kernelName:Qw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=it(i,r.shape),a=Qn(r.shape,s)[1],l=ce(a);return{x:()=>{const c=r.shape.slice();s.forEach(p=>{c[p]=1});const h=te(t,c);return ze(Z(h,su(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aye={kernelName:e1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=it(i,s.shape),l=DK(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oye={kernelName:Oy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Z(t,Ee(gd(n,r),"float32")),b:()=>Z(t,Ee(ts(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nye={kernelName:t1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pye={kernelName:Ny,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{const a=Un(n.shape,i);return a.length>0?te(Be(t,a),n.shape):t},b:()=>{const a=Z(t,wn(O1(ze(n,r)))),l=Un(r.shape,i);return l.length>0?te(Be(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rye={kernelName:Py,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{const a=Z(t,Ee(r,"float32")),l=Un(n.shape,i);return l.length>0?te(Be(a,l),n.shape):a},b:()=>{const a=Z(t,Ee(n,"float32")),l=Un(r.shape,i);return l.length>0?te(Be(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dye={kernelName:n1,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mye={kernelName:s1,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>qn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lye={kernelName:i1,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fye={kernelName:o1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Cc(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T3={kernelName:a1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bye={kernelName:Ry,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=Xe(s.shape,o.shape);return{a:()=>{const c=Ee(o,"float32");let h=Z(t,Z(c,Sc(s,Ue(c,St(1)))));const f=Un(s.shape,a);return f.length>0&&(h=Be(h,f)),te(h,s.shape)},b:()=>{const c=ts(s,0),h=Vr(c,Yo(s),gt(s));let f=Z(t,Z(i,h));const p=Un(o.shape,a);return p.length>0&&(f=Be(f,p)),te(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zye={kernelName:l1,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=ts(n,0);return{x:()=>Vr(i,t,Z(t,r)),alpha:()=>{let s=Vr(i,gt(t),Z(t,n));const o=Un(r.shape,t.shape);return o.length>0&&(s=Be(s,o)),te(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t,e,n){const r=t.shape.slice();r[n]=1;const i=te(e,r),s=pE(t,n,!0,!1),o=pE(t,n,!0,!0),a=Z(s,o);return Z(i,a)}function Vye(t,e,n){const r=t.shape.length,i=r-n.length,s=hn(n,r);let o=t;s!=null&&(o=pt(t,s));const a=o.shape.slice(),u=a.splice(r-n.length,n.length).reduce((f,p)=>f*p,1);a.push(u);const c=o.reshape(a);let h=jye(c,e,i);if(h=h.reshape(o.shape),s!=null){const f=ru(s);h=pt(h,f)}return h}const Uye={kernelName:u1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>Vye(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wye={kernelName:gy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{const a=ze(t,Ee(r,"float32")),l=Un(n.shape,i);return l.length>0?te(Be(a,l),n.shape):a},b:()=>{let a=Z(t,Ee(n,"float32"));const l=Un(r.shape,i);l.length>0&&(a=te(Be(a,l),r.shape));const u=qt(r);return wn(ze(a,Ee(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gye={kernelName:Dy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,wn(qt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hye={kernelName:Ly,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Z(gd(n,6),rv(n));return{x:()=>Z(t,Ee(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kye={kernelName:My,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Ee(rv(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qye={kernelName:c1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xye={kernelName:f1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Q.runKernel(MO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zye={kernelName:h1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Q.runKernel(DO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yye={kernelName:d1,gradFunc:(t,e,n)=>{const{dims:r}=n,i=it(r,t.shape);return{x:()=>kc(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jye={kernelName:Fy,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qye={kernelName:By,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>wn(ze(t,Z(Sc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eve={kernelName:p1,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ee(gt(n),"float32"),t:()=>Z(t,Ee(n,t.dtype)),e:()=>Z(t,Ee(rN(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tve={kernelName:zy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ts(n,St(0)),i=St(R1),s=St(D1),o=Z(t,s),a=Z(Z(t,i),Zo(Ee(n,"float32")));return Vr(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nve={kernelName:Wy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Z(n,Ue(St(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rve={kernelName:Uy,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ive={kernelName:jy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(YO(Ee(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sve={kernelName:Vy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(b8(Ee(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ove={kernelName:m1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=N1(r,i,s),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>oN(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ave={kernelName:_1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=Z(t,r);return{logits:()=>Ue(o,Z(Be(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lve={kernelName:Gy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,md(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $3={kernelName:y1,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>XO(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3={kernelName:v1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>ti(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uve={kernelName:Hy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Z(Sr(Ee(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cve={kernelName:LO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Z(Ee(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hve={kernelName:Ky,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=St(2);return{a:()=>Z(t,Z(i,Ue(n,r))),b:()=>Z(t,Z(i,Ue(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fve={kernelName:Jy,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dve={kernelName:qy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Xe(n.shape,r.shape);return{a:()=>{let a=t;const l=Un(n.shape,i);return l.length>0&&(a=Be(a,l)),te(a,n.shape)},b:()=>{let a=t;const l=Un(r.shape,i);return l.length>0&&(a=Be(a,l)),te(wn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pve={kernelName:g1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;it(s,r.shape).forEach(u=>{i[u]=1});const a=te(t,i),l=Z(a,su(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mve={kernelName:Xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,qt(YO(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gve={kernelName:Zy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(Ue(St(1),qt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yve={kernelName:Yy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=gt(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=ve(o,Ft(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=ve(o,Ft(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)o=ve(o,Ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let c=0;c<i[3];++c)o=ve(o,Ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve={kernelName:rf,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=ru(i);return{x:()=>pt(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ve={kernelName:x1,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Ra(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xve={kernelName:b1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bve(t,n)}}};function bve(t,e){const n=iu(e,gt(e)),r=eN(t,n);let i=jc(e,St(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=Zr(i,a+1);i=Pa(i,su(r.shape,"bool"));const o=gt(r);return Vr(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wve={kernelName:w1,gradFunc:t=>({x:()=>gt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve=[RK,xge,bge,wge,Sge,kge,Cge,Tge,$ge,Ege,Ige,Age,Pge,Mge,Lge,Fge,Bge,zge,jge,Vge,Uge,Wge,Hge,Gge,Xge,Zge,Yge,Jge,Qge,eye,Wye,tye,nye,rye,iye,sye,aye,oye,lye,uye,cye,hye,fye,dye,pye,mye,gye,yye,vye,bye,C3,C3,wye,Cye,Eye,Iye,Aye,Oye,Nye,Pye,Rye,Dye,Mye,Lye,Fye,T3,T3,Bye,zye,Uye,Gye,Hye,Kye,qye,Xye,Zye,Yye,Jye,Qye,eve,tve,nve,rve,ive,sve,ove,ave,lve,$3,$3,E3,E3,uve,hve,cve,fve,dve,pve,mve,gve,yve,vve,_ve,xve,wve];for(const t of Sve)rce(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.abs=function(){return this.throwIfDisposed(),Dr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.acos=function(){return this.throwIfDisposed(),she(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.acosh=function(){return this.throwIfDisposed(),ahe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.add=function(t){return this.throwIfDisposed(),ve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.all=function(t,e){return this.throwIfDisposed(),y8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.any=function(t,e){return this.throwIfDisposed(),fE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.argMax=function(t){return this.throwIfDisposed(),Gm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.argMin=function(t){return this.throwIfDisposed(),fhe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),te(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.asType=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.as1D=function(){return this.throwIfDisposed(),te(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.as2D=function(t,e){return this.throwIfDisposed(),te(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),te(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),te(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),te(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.asin=function(){return this.throwIfDisposed(),phe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.asinh=function(){return this.throwIfDisposed(),ghe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.atan=function(){return this.throwIfDisposed(),vhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.atan2=function(t){return this.throwIfDisposed(),xhe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.atanh=function(){return this.throwIfDisposed(),whe(this)};ue().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),qO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),XO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),$1(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.broadcastTo=function(t){return this.throwIfDisposed(),hm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.cast=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.ceil=function(){return this.throwIfDisposed(),Xhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Yi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Mn&&(t=[t]),ti([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),v8(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),_8(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),wc(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.cos=function(){return this.throwIfDisposed(),YO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.cosh=function(){return this.throwIfDisposed(),b8(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),pE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),w8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),xfe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),JO(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Sfe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.divNoNan=function(t){return this.throwIfDisposed(),Efe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.div=function(t){return this.throwIfDisposed(),ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.dot=function(t){return this.throwIfDisposed(),Afe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.elu=function(){return this.throwIfDisposed(),I1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.equal=function(t){return this.throwIfDisposed(),Xo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.erf=function(){return this.throwIfDisposed(),S8(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),Vfe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.exp=function(){return this.throwIfDisposed(),Zo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.expandDims=function(t){return this.throwIfDisposed(),Zr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.expm1=function(){return this.throwIfDisposed(),Hfe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.fft=function(){return this.throwIfDisposed(),V8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.flatten=function(){return this.throwIfDisposed(),te(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.floor=function(){return this.throwIfDisposed(),O1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.floorDiv=function(t){return this.throwIfDisposed(),g8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.gather=function(t,e,n){return this.throwIfDisposed(),eN(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.greaterEqual=function(t){return this.throwIfDisposed(),jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.greater=function(t){return this.throwIfDisposed(),ts(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.ifft=function(){return this.throwIfDisposed(),mE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.irfft=function(){return this.throwIfDisposed(),Lpe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.isFinite=function(){return this.throwIfDisposed(),tde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.isInf=function(){return this.throwIfDisposed(),rde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.isNaN=function(){return this.throwIfDisposed(),sde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.leakyRelu=function(t){return this.throwIfDisposed(),nN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.lessEqual=function(t){return this.throwIfDisposed(),gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.less=function(t){return this.throwIfDisposed(),xx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),cde(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logSigmoid=function(){return this.throwIfDisposed(),yde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logSoftmax=function(t){return this.throwIfDisposed(),E8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),I8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.log=function(){return this.throwIfDisposed(),Yo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.log1p=function(){return this.throwIfDisposed(),$8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Pa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logicalNot=function(){return this.throwIfDisposed(),rN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logicalOr=function(t){return this.throwIfDisposed(),A8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.logicalXor=function(t){return this.throwIfDisposed(),Cde(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),wt(this,t,e,n)};ue().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),iN(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.max=function(t,e){return this.throwIfDisposed(),ao(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.maximum=function(t){return this.throwIfDisposed(),iu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.mean=function(t,e){return this.throwIfDisposed(),An(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.min=function(t,e){return this.throwIfDisposed(),_x(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.minimum=function(t){return this.throwIfDisposed(),qm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Pde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.mod=function(t){return this.throwIfDisposed(),Dde(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.mul=function(t){return this.throwIfDisposed(),Z(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.neg=function(){return this.throwIfDisposed(),wn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.norm=function(t,e,n){return this.throwIfDisposed(),A1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.notEqual=function(t){return this.throwIfDisposed(),bx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),O8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.onesLike=function(){return this.throwIfDisposed(),Ns(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.pad=function(t,e){return this.throwIfDisposed(),oN(this,t,e)};ue().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),Gde(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.pow=function(t){return this.throwIfDisposed(),Sc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.prelu=function(t){return this.throwIfDisposed(),lN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.prod=function(t,e){return this.throwIfDisposed(),qde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.reciprocal=function(){return this.throwIfDisposed(),ype(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.relu=function(){return this.throwIfDisposed(),Uc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.relu6=function(){return this.throwIfDisposed(),R8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.reshapeAs=function(t){return this.throwIfDisposed(),te(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.reshape=function(t){return this.throwIfDisposed(),te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),K8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),q8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.reverse=function(t){return this.throwIfDisposed(),kc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.rfft=function(){return this.throwIfDisposed(),zpe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.round=function(){return this.throwIfDisposed(),D8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.rsqrt=function(){return this.throwIfDisposed(),M8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.selu=function(){return this.throwIfDisposed(),L8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),F8(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sigmoid=function(){return this.throwIfDisposed(),md(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sign=function(){return this.throwIfDisposed(),Tpe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sin=function(){return this.throwIfDisposed(),B8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sinh=function(){return this.throwIfDisposed(),z8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.slice=function(t,e){return this.throwIfDisposed(),Ft(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.softmax=function(t){return this.throwIfDisposed(),vN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.softplus=function(){return this.throwIfDisposed(),ev(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),aN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.split=function(t,e){return this.throwIfDisposed(),qi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sqrt=function(){return this.throwIfDisposed(),Sr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.square=function(){return this.throwIfDisposed(),qt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Vpe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.squeeze=function(t){return this.throwIfDisposed(),nv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Mn?[this,t]:[this,...t];return Ra(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.step=function(t){return this.throwIfDisposed(),rv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),Kpe(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sub=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.sum=function(t,e){return this.throwIfDisposed(),Be(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.tan=function(){return this.throwIfDisposed(),Xpe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.tanh=function(){return this.throwIfDisposed(),T1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.tile=function(t){return this.throwIfDisposed(),no(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.toBool=function(){return this.throwIfDisposed(),Ee(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.toFloat=function(){return this.throwIfDisposed(),Ee(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.toInt=function(){return this.throwIfDisposed(),Ee(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.topk=function(t,e){return this.throwIfDisposed(),Jpe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.transpose=function(t){return this.throwIfDisposed(),pt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.unique=function(t){return this.throwIfDisposed(),tme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),G8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.unstack=function(t){return this.throwIfDisposed(),Cc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.where=function(t,e){return this.throwIfDisposed(),Vr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ue().prototype.zerosLike=function(){return this.throwIfDisposed(),gt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Oo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Oo.prototype)}}class Ss extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ss.prototype)}}class q extends Error{constructor(e){super(e),Object.setPrototypeOf(this,q.prototype)}}class Qe extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Qe.prototype)}}class eP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,eP.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class MK{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function No(t,e){if(!t)throw new eP(e)}function I3(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Yr(t){return t.length===1?t[0]:t}function Et(t){return Array.isArray(t)?t:[t]}function fa(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Lu(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ls={};function tP(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function vE(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>vE(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:vE(r))}}}function av(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in ls)o=ls[s];else if(o=e[s],o==null)throw new q(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new q(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in ls?[a,l]=ls.className:o in e&&([a,l]=e[o]),a==null)throw new q(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const p of Object.keys(ls))u[p]=ls[p];for(const p of Object.keys(n))u[p]=n[p];const c=s.config;c.customObjects=u;const h=Object.assign({},ls);for(const p of Object.keys(n))ls[p]=n[p];vE(s.config);const f=l(a,s.config,n,i);return ls=Object.assign({},h),f}else{const u=Object.assign({},ls);for(const h of Object.keys(n))ls[h]=n[h];const c=new a(s.config);return ls=Object.assign({},u),c}}}function kve(t,e){return t<e?-1:t>e?1:0}function b0(t,e){return-1*kve(t,e)}function Dl(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function Cve(t){if(t==null)throw new q(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Gc(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new q(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function nP(t,e,n=0,r=1/0){return No(n>=0),No(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Zn(t,e){Array.isArray(t)?(F(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Zn(n,`element ${r+1} of ${e}`))):F(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${LK(t)}.`)}function LK(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>LK(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Tve(t,e,n){let r=n!=null?n():Xr(),i;return(...o)=>{const a=n!=null?n():Xr();return a-r<e||(r=a,i=t(...o)),i}}function FK(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $ve=0;function BK(){return $ve++}const w0={};function M1(t=""){return t in w0||(w0[t]=0),w0[t]+=1,t+w0[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Eve=["channelsFirst","channelsLast"],Ive=["nearest","bilinear"],Ave=["valid","same","causal"],Ove=["max","avg"],Nve=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gh=new Map;function Cn(t){Gc(Eve,"DataFormat",t)}function Pve(t){Gc(Ive,"InterpolationFormat",t)}function ns(t){Gc(Ave,"PaddingMode",t)}function zK(t){Gc(Ove,"PoolMode",t)}const fm=[],A3="/";function ac(t,e){fm.push(t);try{const n=e();return fm.pop(),n}catch(n){throw fm.pop(),n}}function Rve(){return fm.length===0?"":fm.join(A3)+A3}function jK(t){if(!UK(t))throw new Error("Not a valid tensor name: '"+t+"'");return Rve()+t}function VK(t){if(!UK(t))throw new Error("Not a valid tensor name: '"+t+"'");gh.has(t)||gh.set(t,0);const e=gh.get(t);if(gh.set(t,gh.get(t)+1),e>0){const n=`${t}_${e}`;return gh.set(n,1),n}else return t}const Dve=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function UK(t){return!!t.match(Dve)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mve(t){return t===parseInt(t.toString(),10)}function Ml(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function If(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Wl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ho(t,e){if(e<t)throw new q(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let wC;function Fn(){return wC==null&&(wC=Ice().epsilon()),wC}function fo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Go(t,e){return Ee(t,e)}function lv(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),te(t,n)}function Lve(t,e){return ie(()=>{if(t.shape.length!==2)throw new q(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=lv(t,1);return _E(n,[1,e,1])})}function Fve(t){const e=[Ml(t.shape)];return te(t,e)}function Bve(t){if(t.rank<=1)throw new q(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ml(t.shape,1)];return te(t,e)}function lc(t,e,n){return ie(()=>{switch(t.rank){case 1:return gN(t,e,n);case 2:return j8(t,[e,0],[n,t.shape[1]]);case 3:return yN(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Sx(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ft(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ft(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new q(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function SC(t,e,n){return ie(()=>{switch(t.rank){case 1:return gN(t,e,n);case 2:return j8(t,[0,e],[t.shape[0],n]);case 3:return yN(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Sx(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function S0(t,e,n,r){return ie(()=>{switch(t.rank){case 1:return gN(t,e,n);case 2:switch(r){case 1:return lc(t,e,n);case 2:return SC(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return lc(t,e,n);case 2:return yN(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return SC(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return lc(t,e,n);case 2:return Sx(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Sx(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return SC(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}default:throw new q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function rP(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),ti(t,e)}function O3(t,e){switch(t.rank){case 1:return Jhe([t,e]);case 2:return efe([t,e],0);case 3:return nfe([t,e],0);case 4:return ife([t,e],0);default:throw new q(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function _E(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new q(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return no(t,e)}function L1(t,e=0,n=1,r,i){return dpe(t,e,n,r,i)}function Ho(t,e,n,r){if(t.rank<2||e.rank<2)throw new Qe(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new Qe(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return y3({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?xE(t.rank,r,fo()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=te(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],c=Array.from({length:e.rank},(m,_)=>_===0?e.rank-2:_<=e.rank-2?_-1:_);e=te(pt(e,c),[l,-1]);const h=[...i,...u];return te(y3({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?xE(t.rank,r,fo()):null,activation:n}),h)}}function WK(t,e,n){return ie(()=>(Array.isArray(e)?e=bi(e,"int32"):e=Ee(e,"int32"),eN(t,e,n)))}function uv(t){return Z(t,t)}function xE(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new q(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1,1,1]):te(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,1,1,r[0]]):te(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1,1]):te(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,1,r[0]]):te(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1]):te(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,r[0]]):te(e,[1].concat(r))}else if(t<3)return e;throw new q(`Unsupported input rank by biasAdd: ${e.rank}`)}function go(t,e,n){return ie(()=>(n==null&&(n=fo()),Cn(n),ve(t,xE(t.rank,e,n))))}function zve(t,e=1){if(e!==1)throw new Qe(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return I1(t)}function jve(t){return ie(()=>ze(t,ve(Dr(t),1)))}function GK(t,e,n,r){return ie(()=>lme(t,e,n,r))}function Vve(t){return ie(()=>{const e=ve(.5,Z(.2,t));return Yi(e,0,1)})}function cv(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Uve=["fanIn","fanOut","fanAvg"],Wve=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gve(t){Gc(Uve,"FanMode",t)}function Hve(t){Gc(Wve,"Distribution",t)}class Ds extends vd{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class HK extends Ds{apply(e,n){return qn(e,n)}}HK.className="Zeros";ge(HK);class iP extends Ds{apply(e,n){return su(e,n)}}iP.className="Ones";ge(iP);class KK extends Ds{constructor(e){if(super(),typeof e!="object")throw new q(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new q(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ie(()=>Z(St(this.value),su(e,n)))}getConfig(){return{value:this.value}}}KK.className="Constant";ge(KK);class qK extends Ds{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return tv(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}qK.className="RandomUniform";ge(qK);class XK extends Ds{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qe(`randomNormal does not support dType ${n}.`);return L1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}XK.className="RandomNormal";ge(XK);class ZK extends Ds{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qe(`truncatedNormal does not support dType ${n}.`);return W8(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}ZK.className="TruncatedNormal";ge(ZK);class YK extends Ds{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ie(()=>{if(e.length!==2||e[0]!==e[1])throw new q("Identity matrix initializer can only be used for 2D square matrices.");return Z(this.gain,T8(e[0]))})}getConfig(){return{gain:this.gain}}}YK.className="Identity";ge(YK);function Kve(t,e="channelsLast"){let n,r;if(Cn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=Ml(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=Ml(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=Ml(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class $i extends Ds{constructor(e){if(super(),e.scale<0)throw new q(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Gve(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Hve(this.distribution),this.seed=e.seed}apply(e,n){const r=Kve(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qe(`${this.getClassName()} does not support dType ${n}.`);return W8(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return tv(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}$i.className="VarianceScaling";ge($i);class sP extends $i{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return $i.className}}sP.className="GlorotUniform";ge(sP);class oP extends $i{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return $i.className}}oP.className="GlorotNormal";ge(oP);class aP extends $i{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return $i.className}}aP.className="HeNormal";ge(aP);class lP extends $i{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return $i.className}}lP.className="HeUniform";ge(lP);class uP extends $i{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return $i.className}}uP.className="LeCunNormal";ge(uP);class cP extends $i{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return $i.className}}cP.className="LeCunUniform";ge(cP);class JK extends Ds{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ie(()=>{if(e.length<2)throw new Qe("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ce(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=L1(o,0,1,n,this.seed),l=ige.qr(a,!1);let u=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return u=Z(u,h.sign()),r<i&&(u=u.transpose()),Z(St(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}JK.className="Orthogonal";ge(JK);const N3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function P3(t,e={}){return av(t,vs.getMap().classNameMap,e,"initializer")}function un(t){return tP(t)}function nn(t){if(typeof t=="string"){const e=t in N3?N3[t]:t;if(e==="GlorotNormal")return new oP;if(e==="GlorotUniform")return new sP;if(e==="HeNormal")return new aP;if(e==="HeUniform")return new lP;if(e==="LeCunNormal")return new uP;if(e==="LeCunUniform")return new cP;{const n={};return n.className=e,n.config={},P3(n)}}else return t instanceof Ds?t:P3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bE(t){return Array.isArray(t)&&Array.isArray(t[0])}function kx(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ke(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new q(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function _t(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new q(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cx(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const R3="Variable";class qve{constructor(e,n="float32",r=R3,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=BK(),r=r??R3,this.originalName=jK(r),this.name=VK(this.originalName),this.trainable_=i,this.constraint=s,this.val=ime(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Xve(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Xve(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function wE(t){return t.map(e=>e.read())}function hP(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Jo{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=BK(),o!=null&&(this.originalName=jK(o),this.name=VK(this.originalName)),this.rank=n.length}}let Zve=0;class F1{constructor(e,n){this.callArgs=n,this.id=Zve++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Yve=0,st=class extends vd{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Yve++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=fa(r)+"_"+M1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ss(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new q(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Yr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Yr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Oo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Oo(`Layer ${this.name} is not connected, no input to return.`);return Yr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Oo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Oo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Yr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Et(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Et(this.inputSpec);if(n.length!==r.length)throw new q(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new q(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new q(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new q(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new q(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const u in o.axes){const c=Number(u),h=o.axes[u],f=c>=0?l[c]:l[l.length+c];if(h!=null&&[h,null].indexOf(f)===-1)throw new q(`Input ${i} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${h} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const u=o.shape[l],c=s.shape[l];if(u!=null&&c!=null&&u!==c)throw new q(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Et(e),i=e0e(e),s=t0e(e);if(i===s)throw new q("Arguments to apply() must be all SymbolicTensors or all Tensors");return ac(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Et(e))o.push(a.shape);this.build(Yr(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Et(o),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=Yr(l),this.activityRegularizer!=null)throw new Qe("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=Jve(e),a=this.computeOutputShape(o);let l;const u=Qve(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,h)=>new Jo(u,c,this,Et(e),n,this.name,h)):l=new Jo(u,a,this,Et(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Qe("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Oo(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Oo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ss(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Cx(this.weights)}build(e){this.built=!0}getWeights(e=!1){return wE(e?this.trainableWeights:this.weights)}setWeights(e){ie(()=>{const n=this.weights;if(n.length!==e.length)throw new q(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=wE(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!Ct(o.shape,l.shape))throw new q(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}hP(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new q(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():nn("zeros"));const u=i.apply(n,r),c=new qve(u,r,e,o,a);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Et(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Et(n),o=Et(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=Et(e);n=Et(n),r=Et(r),i=Et(i),s=kx(s),o=kx(o);const u=[],c=[],h=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),h.push(f.tensorIndex);new F1({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function Jve(t){t=Et(t);const e=[];for(const n of t)e.push(n.shape);return Yr(e)}function Qve(t){return"float32"}function QK(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],u=QK(o,a,l);for(const c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}function e0e(t){let e=!0;for(const n of Et(t))if(!(n instanceof Jo)){e=!1;break}return e}function t0e(t){let e=!0;for(const n of Et(t))if(n instanceof Jo){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hv extends st{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:M1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Jo(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new F1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new q(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}hv.className="InputLayer";ge(hv);function n0e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new hv({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r0e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ee(e,t.dtype)}catch{throw new q(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class _l{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof _l)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=r0e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new q(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Jo){if(this.id2Value[e.id]==null)throw new q(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Jo){if(this.id2Value[e.id]==null)throw new q(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&lt(this.id2Mask)}}const Tx=new MK,$x=new MK;function i0e(t){Tx!=null&&Tx.setMaxEntries(t),$x!=null&&$x.setMaxEntries(t)}function Vp(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(m=>m.name),l=[],u=e.names();for(const m of a)u.indexOf(m)!==-1?l.push(e.getValue(m)):l.push(null);const c=a.join(",")+"|"+e.names().sort().join(",");let h=Tx.get(c),f;if(h==null){const m=s0e(o,e);h=m.sorted,f=m.recipientCounts,Tx.put(c,h),$x.put(c,f)}f={},i||Object.assign(f,$x.get(c));const p=new _l(e);for(let m=0;m<h.length;++m){const _=h[m],v=_.sourceLayer;if(v instanceof hv)continue;const g=[],x=[],b=[];let w=!1;for(const A of _.inputs){const $=p.getValue(A),N=p.getMask(A);g.push($),x.push(N),N!=null&&(w=!0),i||(f[A.name]--,f[A.name]===0&&!e.hasKey(A)&&a.indexOf(A.name)===-1&&!$.isDisposed&&A.sourceLayer.stateful!==!0&&b.push($))}w&&(n=n||{},n.mask=x[0]);const k=Et(v.apply(g,n));let C=null;v.supportsMasking&&(C=v.computeMask(g,x));const T=a0e(_),E=Array.isArray(T)?T:[T];for(let A=0;A<E.length;++A){p.hasKey(E[A])||p.add(E[A],k[A],Array.isArray(C)?C[0]:C);const $=a.indexOf(E[A].name);$!==-1&&(l[$]=k[A])}i||lt(b)}return p.disposeMasks(),s?l:l[0]}function s0e(t,e){F(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=D3(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=D3(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:o0e(r)}}function o0e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function D3(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const u of a.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(a.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:i}}function a0e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0e=oe();l0e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,i0e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fP(t,e){return ie(()=>Sr(Be(Z(t,t),e,!0)))}class fv extends vd{getConfig(){return{}}}class eq extends fv{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>{const n=fP(e,this.axis),r=Yi(n,0,this.maxValue);return Z(e,ze(r,ve(Fn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}eq.className="MaxNorm";ge(eq);class tq extends fv{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>ze(e,ve(Fn(),fP(e,this.axis))))}getConfig(){return{axis:this.axis}}}tq.className="UnitNorm";ge(tq);class nq extends fv{apply(e){return Uc(e)}}nq.className="NonNeg";ge(nq);class rq extends fv{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>{const n=fP(e,this.axis),r=ve(Z(this.rate,Yi(n,this.minValue,this.maxValue)),Z(1-this.rate,n));return Z(e,ze(r,ve(Fn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}rq.className="MinMaxNorm";ge(rq);const M3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function zn(t){return tP(t)}function L3(t,e={}){return av(t,vs.getMap().classNameMap,e,"constraint")}function jn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in M3?M3[t]:t,config:{}};return L3(n)}else return t instanceof fv?t:L3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Su(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];lt(r)}}function iq(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var F3;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(F3||(F3={}));const u0e=125;class Zm{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class c0e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class h0e extends Zm{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=ie(()=>ve(this.totals[i],Z(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ie(()=>{const i=Z(ze(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Uo(n[r])}))}}class f0e extends Zm{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class d0e extends Zm{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||uK,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=u0e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Y$(this.yieldEvery)&&(this.maybeWait=Tve(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Su(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Su(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Su(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Su(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Su(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):Y$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Su(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Su(e),await this.trainEnd(e))}}function sq(t,e){return t==null&&(t={}),t instanceof Zm?[t]:Array.isArray(t)&&t[0]instanceof Zm?t:Et(t).map(r=>new d0e(r,e))}class ps{constructor(){}static registerCallbackConstructor(e,n){F(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ps.checkForDuplicate(n),ps.constructors[e]==null&&(ps.constructors[e]=[]),ps.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ps.constructors)ps.constructors[+n].forEach(i=>{if(i===e)throw new q("Duplicate callback constructor.")})}static clear(){ps.constructors={}}static createCallbacks(e){const n=[];for(const r in ps.constructors){const i=+r;e>=i&&n.push(...ps.constructors[i])}return n.map(r=>new r)}}ps.constructors={};function oq(t,e,n,r,i,s,o,a,l){const u=new f0e,c=[new h0e,...ps.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const h=new c0e(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sa(t,e={},n=!1){return av(t,vs.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ex(t,e){return ie(()=>{t.dtype!=="float32"&&(t=Ee(t,"float32"));const n=Be(uv(t),e,!0),r=E1(n.shape,Fn()),i=Sr(iu(n,r));return ze(t,i)})}function B1(t,e){return ie(()=>An(uv(Ue(e,t)),-1))}function dP(t,e){return ie(()=>An(Dr(Ue(e,t)),-1))}function pP(t,e){return ie(()=>{const n=Ue(t,e),r=Yi(Dr(t),Fn(),Number.MAX_VALUE),i=Dr(ze(n,r));return Z(100,An(i,-1))})}function p0e(t,e){return ie(()=>{const n=Yi(e,Fn(),Number.MAX_VALUE),r=Yo(ve(1,n)),i=Yi(t,Fn(),Number.MAX_VALUE),s=Yo(ve(1,i));return An(uv(Ue(r,s)),-1)})}function m0e(t,e){return ie(()=>{const n=iu(0,Ue(1,Z(t,e)));return An(uv(n),-1)})}function g0e(t,e){return ie(()=>{const n=iu(0,Ue(1,Z(t,e)));return An(n,-1)})}function y0e(t,e){return ie(()=>{const n=Be(Z(t,e),-1),r=ao(Z(Ue(1,t),e),-1);return iu(0,ve(1,Ue(r,n)))})}function v0e(t,e){return ie(()=>{const n=Math.log(2),r=Ue(e,t),i=Ue(ve(r,ev(Z(-2,r))),n);return An(i,-1)})}function Ym(t,e,n=!1){return ie(()=>{if(n)e=vN(e);else{const r=Be(e,e.shape.length-1,!0);e=ze(e,r)}return e=Yi(e,Fn(),1-Fn()),wn(Be(Z(Ee(t,"float32"),Yo(e)),e.shape.length-1))})}function Ix(t,e,n=!1){return ie(()=>{const r=Ee(O1(Fve(t)),"int32");e=Yi(e,Fn(),1-Fn());const i=e.shape,s=te(O8(r,i[i.length-1]),i);return Ym(s,e,n)})}function _0e(t,e){if(!Ct(t.shape,e.shape))throw new q(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ie(()=>{const n=Uc(e),r=wn(Dr(e));return ve(Ue(n,Z(e,t)),$8(Zo(r)))})}function z1(t,e){return ie(()=>{let n;return n=Yi(e,Fn(),1-Fn()),n=Yo(ze(n,Ue(1,n))),An(_0e(t,n),-1)})}function x0e(t,e){return ie(()=>{const n=Yi(t,Fn(),1),r=Yi(e,Fn(),1);return Be(Z(t,Yo(ze(n,r))),-1)})}function b0e(t,e){return ie(()=>{const n=Yo(ve(Fn(),e));return An(Ue(e,Z(t,n)),-1)})}function aq(t,e){return ie(()=>{const n=Ex(t,-1),r=Ex(e,-1),i=Z(n,r);return wn(Be(i,-1))})}const Ax={meanSquaredError:B1,meanAbsoluteError:dP,meanAbsolutePercentageError:pP,meanSquaredLogarithmicError:p0e,squaredHinge:m0e,hinge:g0e,categoricalHinge:y0e,logcosh:v0e,categoricalCrossentropy:Ym,sparseCategoricalCrossentropy:Ix,binaryCrossentropy:z1,kullbackLeiblerDivergence:x0e,poisson:b0e,cosineProximity:aq};function kC(t){if(typeof t=="string"){if(t in Ax)return Ax[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new q(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lq(t,e){return ie(()=>{const n=Z(.5,Ns(e)),r=Go(ts(e,n),t.dtype);return An(Xo(t,r),-1)})}function uq(t,e){return ie(()=>Go(Xo(Gm(t,-1),Gm(e,-1)),"float32"))}function w0e(t,e){return ie(()=>Ee(Be(Pa(Xo(t,1),Xo(e,1))),"float32"))}function S0e(t,e){return ie(()=>Ee(Be(Pa(Xo(t,0),Xo(e,1))),"float32"))}function k0e(t,e){return ie(()=>{const n=w0e(t,e),r=S0e(t,e),i=ve(n,r);return Ee(Vr(ts(i,0),ze(n,i),0),"float32")})}function C0e(t,e){return z1(t,e)}function T0e(t,e){return t.rank===e.rank&&(t=nv(t,[t.rank-1])),e=Gm(e,-1),e.dtype!==t.dtype&&(e=Ee(e,t.dtype)),Ee(Xo(t,e),"float32")}const $0e=B1,E0e=B1,I0e=dP,A0e=dP,O0e=pP,N0e=pP,cq=Ym,P0e=aq,hq=Ix,Ox={binaryAccuracy:lq,categoricalAccuracy:uq,precision:k0e,categoricalCrossentropy:cq,sparseCategoricalCrossentropy:hq,mse:$0e,MSE:E0e,mae:I0e,MAE:A0e,mape:O0e,MAPE:N0e,cosine:P0e};function R0e(t){if(typeof t=="string"&&t in Ox)return Ox[t];if(typeof t!="string"&&t!=null)return t;throw new q(`Unknown metric ${t}`)}function k0(t){if(No(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Ax))if(Ax[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Ox))if(Ox[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function D0e(t){const e={Adagrad:()=>mh.adagrad(.01),Adadelta:()=>mh.adadelta(1,.95,Fn()),Adam:()=>mh.adam(.001,.9,.999,Fn()),Adamax:()=>mh.adamax(.002,.9,.999,Fn(),0),RMSProp:()=>mh.rmsprop(.001,.9,0,Fn()),SGD:()=>mh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new q(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const B3=1*1024*1024;function z3(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!SE(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>B3&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${B3}.`)}}function SE(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!SE(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!SE(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M0e(t,e,n,r=console.log){const i=F0e(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!i){s.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),Nx(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)i?B0e(a[c],n,r):z0e(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=L0e(t),u=Cx(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function L0e(t){let e;return t.collectedTrainableWeights!=null?e=Cx(t.collectedTrainableWeights):e=Cx(t.trainableWeights),e}function F0e(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function Nx(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function B0e(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];Nx(a,e,n)}function z0e(t,e,n,r){let i,s;try{s=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let f=0;f<h.inboundLayers.length;++f){const p=h.inboundLayers[f].name,m=h.nodeIndices[f],_=h.tensorIndices[f];o.push(`${p}[${m}][${_}]`)}const a=t.name,l=t.getClassName(),u=o.length===0?"":o[0],c=[`${a} (${l})`,s,i,t.countParams().toString(),u];Nx(c,e,r);for(let h=1;h<o.length;++h)Nx(["","","","",o[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fq(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function kE(t,e){if(t===null)return null;if(typeof t=="string")return Lu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];fq(e,i,s)?n.push(s):n.push(kE(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=Lu(r);n[s]=kE(i,s)}}return n}}function CE(t,e){if(t==null)return null;if(typeof t=="string")return fa(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];fq(e,i,s)?n.push(s):n.push(CE(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=fa(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=CE(i,r)}return n}}/** @license See the LICENSE file. */const dq="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const j0e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ks extends st{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=M1(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Dl(this.inputs).length!==this.inputs.length)throw new q(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);Dl(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const b=x.sourceLayer,w=x.nodeIndex,k=x.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(k)}for(const x of this.inputs){const b=x.sourceLayer,w=x.nodeIndex,k=x.tensorIndex;No(w===0,"input layer has >1 nodes"),No(k===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const b=this.inputLayers[x];if(!(b instanceof hv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},i={},s={},o={},a=[],l=(x,b,w,k,C,T)=>{(k==null||C==null||T==null)&&(k=x.sourceLayer,C=x.nodeIndex,T=x.tensorIndex);const E=k.inboundNodes[C];if(w.indexOf(E)!==-1)throw new Ss(`The tensor ${x.name} at layer "${k.name}" is part of a cycle.`);if(b.indexOf(E)!==-1)return;this.containerNodes.add(Ks.nodeKey(k,C)),k.id in o||(o[k.id]=Object.keys(o).length),w.indexOf(E)===-1&&w.push(E);const A=E.inboundLayers.length;for(let $=0;$<A;$++){const N=E.inputTensors[$],P=E.inboundLayers[$],M=E.nodeIndices[$],B=E.tensorIndices[$];l(N,b,w,P,M,B)}for(b.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);a.push(E)},u=[],c=[];for(const x of this.outputs)l(x,u,c);const h=a.slice().reverse();for(const x of h){r[x.id]=x,x.id in n||(n[x.id]=0);let b=n[x.id];const w=i[x.outboundLayer.id]==null?0:i[x.outboundLayer.id];b=Math.max(b,w),i[x.outboundLayer.id]=b,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=b;for(let k=0;k<x.inboundLayers.length;k++){const C=x.inboundLayers[k],T=x.nodeIndices[k],E=C.inboundNodes[T],A=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(b+1,A),r[E.id]=E}}const f={};for(const x in n){const b=n[x];b in f||(f[b]=[]),f[b].push(r[x])}const p={};for(const x in i){const b=i[x];b in p||(p[b]=[]),p[b].push(s[x])}let m=Object.keys(p).map(x=>parseInt(x,10)).sort(b0);this.layers=[];for(const x of m){const b=p[x];b.sort((w,k)=>{const C=o[w.id],T=o[k.id];return C<T?-1:C>T?1:0});for(const w of b)w instanceof Ks&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=p,m=Object.keys(f).map(x=>parseInt(x,10)).sort(b0);const _=this.inputs.slice(),v=[];for(const x of m)for(const b of f[x]){const w=b.outboundLayer;if(w!=null){for(const k of b.inputTensors)if(_.indexOf(k)===-1)throw new Ss(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${w.name}". The following previous layers were accessed without issue: ${v}`);for(const k of b.outputTensors)_.push(k);v.push(w.name)}}this.nodesByDepth=f;const g=this.layers.map(x=>x.name);for(const x of g){const b=g.filter(w=>w===x).length;if(b!==1)throw new Ss(`The name "${x}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new F1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=j0e(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new q(`Duplicate weight name: ${c}`);r[c]=u,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new q(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new q(`${a.length} of ${i} weights are not set: ${a}`)}hP(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${dq}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=CE(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ie(()=>{e=Et(e);const r=new _l;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return Vp(this.outputs,r,n)})}computeMask(e,n){return ie(()=>{e=Et(e);let r;return n==null?r=Tc(null,e.length):r=Et(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=kx(e);if(n.length!==this.inputLayers.length)throw new q(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(b0);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(_=>_.id).indexOf(c.id)!==-1)continue;const h=[];for(let _=0;_<u.inboundLayers.length;_++){const v=u.inboundLayers[_],g=u.nodeIndices[_],x=u.tensorIndices[_],b=`${v.name}_${g}_${x}`,w=r[b];h.push(w)}const f=c.computeOutputShape(Yr(h)),p=kx(f),m=c.inboundNodes.indexOf(u);for(let _=0;_<p.length;_++){const v=`${c.name}_${m}_${_}`;r[v]=p[_]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],h=`${l.name}_${u}_${c}`;o.push(h)}for(let a=0;a<o.length;a++){const l=o[a];No(l in r),s.push(r[l])}return Yr(s)}runInternalGraph(e,n){n==null&&(n=Tc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],h=n[l];r[u.id]=[c,h]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(b0);for(const l of i){const u=this.nodesByDepth[l];for(const c of u){const h=c.outboundLayer,f=c.inputTensors,p=c.outputTensors,m=new Array;for(const _ of f)_.id in r&&m.push(r[_.id]);if(m.length===f.length){let _={},v,g,x,b;if(c.callArgs!=null&&(_=c.callArgs),m.length===1){const[w,k]=m[0];_.mask==null&&(_.mask=k),x=Et(h.call(w,_)),b=Et(h.computeMask(w,k)),v=[w],g=[k]}else v=m.map(w=>w[0]),g=m.map(w=>w[1]),_.mask==null&&(_.mask=g),x=Et(h.call(v,_)),b=Et(h.computeMask(v,g));if(h.activityRegularizer)throw new Qe("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<p.length;++w){const k=p[w],C=x[w],T=b[w];r[k.id]=[C,T]}}}}const s=[],o=[],a=[];for(const l of this.outputs){No(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),s.push(u),o.push(c)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Ks?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=Ks.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new q("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new q(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new q(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ie(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Ks.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let h=0;h<o.inboundNodes.length;h++){const f=o.inboundNodes[h],p=Ks.nodeKey(o,h);let m={};if(this.containerNodes.has(p)){if(f.callArgs)try{JSON.stringify(f.callArgs),m=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(f.inboundLayers.length>0){const _=[];for(let v=0;v<f.inboundLayers.length;v++){const g=f.inboundLayers[v],x=f.nodeIndices[v],b=f.tensorIndices[v],w=Ks.nodeKey(g,x);let k=n[w];k==null&&(k=0),_.push([g.name,k,b,m])}u.push(_)}}}const c={};c.name=o.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=Ks.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const h=this.inputLayersTensorIndices[o];i.push([a.name,c,h])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=Ks.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const h=this.outputLayersTensorIndices[o];s.push([a.name,c,h])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(v,g){v.name in o?o[v.name].push(g):o[v.name]=[g]}function l(v,g){const x=[];let b;for(const w of g){const k=w[0],C=w[1],T=w[2];if(b=w[3]==null?{}:w[3],!(k in s)){a(v,g);return}const E=s[k];if(E.inboundNodes.length<=C){a(v,g);return}const A=E.inboundNodes[C];x.push(A.outputTensors[T])}x.length>0&&v.apply(Yr(x),b)}function u(v){const g=v.name,x=Sa(v,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(i),s[g]=x,v.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new q(`Corrupted configuration, expected array for nodeData: ${w}`);a(x,w)})}const c=n.name,h=n.layers;for(const v of h)u(v);for(;!Cve(o);)for(const v of h){const g=s[v.name];if(g.name in o){const x=o[g.name];delete o[g.name];for(const b of x)l(g,b)}}const f=[],p=[],m=n.inputLayers;for(const v of m){const g=v[0],x=v[1],b=v[2];No(g in s);const k=s[g].inboundNodes[x].outputTensors;f.push(k[b])}const _=n.outputLayers;for(const v of _){const g=v[0],x=v[1],b=v[2];No(g in s);const k=s[g].inboundNodes[x].outputTensors;p.push(k[b])}return new e({inputs:f,outputs:p,name:c})}get stateful(){if(this._stateful)throw new q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ie(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V0e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function pq(t,e){return V0e(t,e,"classWeight")}async function mq(t,e,n,r){if(n!=null){const i=ie(()=>{if(t.shape.length===1)return oc(t);if(t.shape.length===2){if(t.shape[1]>1)return Gm(t,1);if(t.shape[1]===1)return te(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());lt(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),bi(o,"float32")}else return null}function U0e(t,e){return Z(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W0e=32;function gq(t,e){let n,r;const i=e;n=i.xs,r=i.ys,F(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=j3("input",t.inputNames,n),o=j3("output",t.outputNames,r),a=s[0].shape[0];F(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),F(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)F(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)F(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function j3(t,e,n){if(n instanceof Mn)return[n];if(Array.isArray(n))return F(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new q(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function G0e(t){if(t.length===3)throw new Qe("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function H0e(t,e,n){const r=n.batchesPerEpoch!=null;if(F(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),F(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),F(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),F(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),F(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(V3(n.validationData))F(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=G0e(n.validationData);s=v.xs,o=v.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(v=>"val_"+v)):u=l.slice();const c=sq(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:f,history:p}=oq(c,h,n.epochs,null,null,K0e(e,n),null,i,u);f.setModel(t),t.history=p,await f.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,_=await e.iterator();for(;m<n.epochs;){const v={};await f.onEpochBegin(m);let g=0,x=0;for(r||(_=await e.iterator());!r||g<n.batchesPerEpoch;){const b=await _.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:w,ys:k}=gq(t,b.value),C={};C.batch=x,C.size=w[0].shape[0],await f.onBatchBegin(x,C);const T=[];if(n.classWeight!=null){const $=pq(n.classWeight,t.outputNames);for(let N=0;N<$.length;++N)T.push(await mq(k[N],null,$[N]))}const E=w.concat(k).concat(T),A=a(E);lt(E);for(let $=0;$<l.length;++$){const N=l[$],P=A[$];C[N]=P,Uo(P)}await f.onBatchEnd(x,C),iq(C),x++,g++}if(r?g>=n.batchesPerEpoch:b.done){if(i){let w;V3(n.validationData)?w=Et(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Et(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?W0e:n.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)v[`val_${t.metricsNames[k]}`]=w[k]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(m,v),m++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function K0e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function V3(t){return typeof t.iterator=="function"}function q0e(t){return typeof t.next=="function"}async function X0e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new Qe("Verbose mode is not implemented yet.");F(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=q0e(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(s=ie(()=>{if(u.value){const{xs:c,ys:h}=gq(t,u.value),f=c.concat(h),p=ie(()=>i(f));if(lt(f),l===0)for(let _=0;_<p.length;++_)s.push(St(0));const m=f[0].shape[0];for(let _=0;_<p.length;++_){const v=p[_],g=s[_];s[_]=ie(()=>ve(s[_],Z(m,v))),l>0&&lt(g)}lt(p),a+=m,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=ze(s[u],a),lt(c)}return Yr(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CC(t){F(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function gp(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>lc(r,e,n-e)):lc(t,e,n-e)}function TE(t,e){return ie(()=>t==null?null:Array.isArray(t)?t.map(n=>TE(n,e)):WK(t,e.dtype==="int32"?e:Ee(e,"int32")))}function TC(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function yq(t){const e=[];t instanceof Mn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(lv(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ws(t,e){if(t==null)return;const n=[];if(e instanceof Mn)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof Mn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z0e(t){return t instanceof Mn}function $E(t){return Array.isArray(t)}function U3(t){return!Z0e(t)&&!$E(t)}function W3(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if($E(t)&&t.length>0)o=!0;else if(U3(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new q(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(U3(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new q(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if($E(t)){if(t=t,t.length!==e.length)throw new q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new q(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=yq(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new q(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c>=0&&u!==c)throw new q(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function Y0e(t,e,n){const r=Dl(t.map(s=>s.shape[0]));r.sort();const i=Dl(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new q(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new q(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Ct(r,i))throw new q(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function J0e(t,e,n){const r=[B1,z1,Ym];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===Ym&&s.shape[s.shape.length-1]===1)throw new q(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const h=l[c],f=u[c];if(f!=null&&h!==f)throw new q(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function G3(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new q(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new q(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c!==u)throw new q(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Q0e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const e_e="layers-model";class of extends Ks{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");M0e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=D0e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ou))throw new q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new q(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(kC(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new q(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>kC(a))}else{const o=kC(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ac("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=Q0e(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};ac("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(u=>{const c="";let h,f,p;for(const m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const v=this.internalOutputShapes[o];v[v.length-1]===1||this.lossFunctions[o]===z1?["accuracy","acc"].indexOf(m)!==-1?f=lq:["crossentropy","ce"].indexOf(m)!==-1&&(f=C0e):this.lossFunctions[o]===Ix?["accuracy","acc"].indexOf(m)!==-1?f=T0e:["crossentropy","ce"].indexOf(m)!==-1&&(f=hq):["accuracy","acc"].indexOf(m)!==-1?f=uq:["crossentropy","ce"].indexOf(m)!==-1&&(f=cq);let g;["accuracy","acc"].indexOf(m)!==-1?g="acc":["crossentropy","ce"].indexOf(m)!==-1&&(g="ce"),p=f,h=c+g}else p=R0e(m),h=c+k0(m);let _;ac(h,()=>{_=p}),s(o,h,_)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;CC(i);const o=this.standardizeUserDataXY(e,n,!0,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,i,r.verbose,r.steps);return Yr(u)}finally{Ws(o[0],e),Ws(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),X0e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new q(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new q(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new q("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new _l;if(e instanceof Mn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new q(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new q(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=Vp(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Tc(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new q(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return ie(()=>{const i=this.checkNumSamples(e);if(r)throw new Qe("Verbose predictLoop() is not implemented yet.");const s=TC(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)ie(()=>{const u=s[a][0],c=s[a][1],h=gp(e,u,c),f=[];if(Array.isArray(h))for(let m=0;m<h.length;++m)f.push({key:this.inputs[m],value:h[m]});else f.push({key:this.inputs[0],value:h});const p=new _l(f);return Vp(this.outputs,p)}).forEach((u,c)=>o[c].push(u));return Yr(o.map(a=>ti(a,0)))})}predict(e,n={}){const r=yq(e);G3(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return CC(i),this.predictLoop(r,i)}finally{Ws(r,e)}}predictOnBatch(e){G3(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Ss("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===Ix?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=W3(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=W3(n,this.feedOutputNames,s,!1,"target"),Y0e(e,n),J0e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new q(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const c=pq(i,this.outputNames);u=[];for(let h=0;h<c.length;++h)u.push(await mq(l[h],null,c[h]))}return[a,l,u]}testLoop(e,n,r,i=0,s){return ie(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new Qe("Verbose mode is not implemented yet.");if(s!=null)throw new Qe("steps mode in testLoop() is not implemented yet");{const l=TC(o,r),u=bi(ho(0,o));for(let c=0;c<l.length;++c){const h=l[c][0],f=l[c][1],p=lc(u,h,f-h),m=TE(n,p),_=e(m);if(c===0)for(let v=0;v<_.length;++v)a.push(St(0));for(let v=0;v<_.length;++v){const g=_[v];a[v]=ve(a[v],Z(f-h,g))}}for(let c=0;c<a.length;++c)a[c]=ze(a[c],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(I3(e,i)>1){const o=I3(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const h=[];for(let _=0;_<this.inputs.length;++_)h.push({key:this.inputs[_],value:r[_]});const f=new _l(h),p=Vp(this.outputs,f,{training:!0});let m;for(let _=0;_<this.lossFunctions.length;++_){const v=this.lossFunctions[_];let g=v(i[_],p[_]);s[_]!=null&&(g=U0e(g,s[_]));const x=An(g);n.push(x),_===0?m=g:m=ve(m,g)}for(let _=0;_<this.metricsTensors.length;++_){let v;if(this.outputs.length>1&&_<this.outputs.length)v=n[_];else{const g=this.metricsTensors[_][0],x=this.metricsTensors[_][1];v=An(g(i[x],p[x]))}Uo(v),o.push(v)}return m=An(m),this.calculateLosses().forEach(_=>{m=ve(m,_)}),m},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>ie(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:i[u]});const a=new _l(o),l=Vp(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],h=An(c(s[u],l[u]));u===0?r=h:r=ve(r,h),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],h=this.metricsTensors[u][1],f=An(c(s[h],l[h]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,u,c,h,f;try{const p=r.batchSize==null?32:r.batchSize;CC(p);const _=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,p);i=_[0],s=_[1],f=_[2];let v=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(v=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new Qe("validationData including sample weights is not supported yet."):new q(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const $=await this.standardizeUserData(l,u,null,null,!0,p);c=$[0],h=$[1],g=c.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){v=!0;const A=Math.floor(i[0].shape[0]*(1-r.validationSplit)),$=i[0].shape[0];c=gp(i,A,$),o=i,i=gp(i,0,A),h=gp(s,A,$),a=s,s=gp(s,0,A),g=c.concat(h)}else r.validationSteps!=null&&(v=!0);const x=i.concat(s).concat(f);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let k,C;v?(this.makeTestFunction(),k=this.testFunction,C=w.slice().concat(w.map(A=>"val_"+A))):(k=null,g=[],C=w.slice());const T=sq(r.callbacks,r.yieldEvery);return await this.fitLoop(b,x,w,p,r.epochs,r.verbose,T,k,g,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ws(i,e),Ws(s,n),Ws(o,e),Ws(a,n),Ws(c,l),Ws(h,u),f!=null&&lt(f)}}async fitLoop(e,n,r,i,s,o,a,l,u,c,h,f,p,m){i==null&&(i=32),s==null&&(s=1),c==null&&(c=!0),f==null&&(f=0);let _=!1;if(l!=null&&u!=null&&(_=!0),m!=null&&(_=!0,p==null))throw new q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,i,p,"steps_per_epoch");let g;v!=null&&(g=ho(0,v)),o==null&&(o=1);const{callbackList:x,history:b}=oq(a,o,s,f,v,p,i,_,h);x.setModel(this),this.history=b,await x.onTrainBegin(),this.stopTraining_=!1;for(let w=f;w<s;++w){await x.onEpochBegin(w);const k={};if(p!=null)throw new Qe("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Qe("batch shuffling is not implemneted yet");c&&Bue(g);const C=bi(g),T=TC(v,i);for(let E=0;E<T.length;++E){const A={};if(await x.onBatchBegin(E,A),ie(()=>{const $=T[E][0],N=T[E][1],P=lc(C,$,N-$);A.batch=E,A.size=N-$;const M=TE(n,P),B=e(M);for(let z=0;z<r.length;++z){const j=r[z],U=B[z];A[j]=U,Uo(U)}if(E===T.length-1&&_){const z=this.testLoop(l,u,i);for(let j=0;j<r.length;++j){const U=r[j],D=z[j];Uo(D),k["val_"+U]=D}}}),await x.onBatchEnd(E,A),iq(A),this.stopTraining_)break}C.dispose()}if(await x.onEpochEnd(w,k),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return H0e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return lt(a),Ws(r[0],e),Ws(r[1],n),Yr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=h3().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-h3().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=fa(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>fa(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=fa(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[fa(k0(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>fa(k0(e)));{const e={};for(const n in this.metrics)e[n]=fa(k0(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=kE(e.optimizer_config),r=Sa(n);let i;if(typeof e.loss=="string")i=Lu(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>Lu(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=Lu(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>Lu(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=Lu(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=Rce(e);if(u.length===0)throw new q(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new q(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await d3(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:e_e,generatedBy:`TensorFlow.js tfjs-layers v${dq}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:h}=await d3(await this.optimizer.getWeights(),u);r.specs.push(...h),r.data=Pce([r.data,c])}return this.userDefinedMetadata!=null&&(z3(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){z3(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}of.className="Model";ge(of);class vq extends of{}vq.className="Functional";ge(vq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Af extends of{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:M1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new q(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Af||e instanceof of;let r;if(n){if(r=e,r.outputs.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=n0e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new q(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=QK(this.outputs[0])}this.inboundNodes=[],new F1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Tc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(_t(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new of({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ss("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ss("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ss("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ss("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new q("Legacy serialization format not supported yet.");s=n}else F(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Af))throw new Qe(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const c=Sa(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Af.className="Sequential";ge(Af);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t_e(t){return new Af(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $r=class extends vd{getConfig(){return{}}};class _q extends $r{apply(e,n=1){return zve(e,n)}}_q.className="elu";ge(_q);class xq extends $r{apply(e){return L8(e)}}xq.className="selu";ge(xq);class bq extends $r{apply(e){return Uc(e)}}bq.className="relu";ge(bq);class wq extends $r{apply(e){return ie(()=>qm(6,Uc(e)))}}wq.className="relu6";ge(wq);let Sq=class extends $r{apply(e){return e}};Sq.className="linear";ge(Sq);class kq extends $r{apply(e){return md(e)}}kq.className="sigmoid";ge(kq);class Cq extends $r{apply(e){return Vve(e)}}Cq.className="hardSigmoid";ge(Cq);class Tq extends $r{apply(e){return ev(e)}}Tq.className="softplus";ge(Tq);class $q extends $r{apply(e){return jve(e)}}$q.className="softsign";ge($q);class Eq extends $r{apply(e){return T1(e)}}Eq.className="tanh";ge(Eq);let mP=class extends $r{apply(e,n=-1){return vN(e,n)}};mP.className="softmax";ge(mP);class Iq extends $r{apply(e,n=-1){return E8(e,n)}}Iq.className="logSoftmax";ge(Iq);class Aq extends $r{apply(e){return ie(()=>ie(()=>{const n=Math.sqrt(2),r=Z(.5,ve(1,S8(ze(e,n))));return Z(e,r)}))}}Aq.className="gelu";ge(Aq);class Oq extends $r{apply(e){return ie(()=>Z(.5,Z(e,ve(1,T1(Z(Sr(ze(2,Math.PI)),ve(e,Z(.044715,Sc(e,3)))))))))}}Oq.className="gelu_new";ge(Oq);class Nq extends $r{apply(e){return ie(()=>Z(e,T1(ev(e))))}}Nq.className="mish";ge(Nq);class Pq extends $r{apply(e,n=1){return ie(()=>Z(md(Z(e,n)),e))}}Pq.className="swish";ge(Pq);function Gl(t){return t.getClassName()}function $C(t,e={}){return av(t,vs.getMap().classNameMap,e,"activation")}function Hl(t){if(t==null){const e={};return e.className="linear",e.config={},$C(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},$C(e)}else return t instanceof $r?t:$C(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n_e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Rq extends vd{}class Dq extends Rq{constructor(e){super(),n_e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ie(()=>{let n=qn([1]);return this.hasL1&&(n=ve(n,Be(Z(this.l1,Dr(e))))),this.hasL2&&(n=ve(n,Be(Z(this.l2,uv(e))))),te(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Dq.className="L1L2";ge(Dq);const H3={l1l2:"L1L2"};function Dt(t){return tP(t)}function K3(t,e={}){return av(t,vs.getMap().classNameMap,e,"regularizer")}function sn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in H3?H3[t]:t,config:{}};return K3(n)}else return t instanceof Rq?t:K3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mq extends st{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ke(e);let r=Uc(e);return this.maxValue!=null&&(r=Yi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Mq.className="ReLU";ge(Mq);class Lq extends st{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ke(e);return nN(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Lq.className="LeakyReLU";ge(Lq);class Fq extends st{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=nn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=sn(e.alphaRegularizer),this.alphaConstraint=jn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new q(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=_t(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Bn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Ke(e),lN(e,this.alpha.read())}getConfig(){const e={alphaInitializer:un(this.alphaInitializer),alphaRegularizer:Dt(this.alphaRegularizer),alphaConstraint:zn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Fq.className="PReLU";ge(Fq);let Bq=class extends st{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Qe(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ke(e);return I1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Bq.className="ELU";ge(Bq);class zq extends st{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Ke(e);return Z(r,Ee(ts(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}zq.className="ThresholdedReLU";ge(zq);class jq extends st{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new mP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ie(()=>{let r=Ke(e);const i=n.mask;if(i!=null){const s=Z(Ue(su(r.shape),Ee(i,r.dtype)),St(-1e9));r=ve(r,s)}return this.axis instanceof Array?this.axis.length>1?Zo(Ue(r,I8(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}jq.className="Softmax";ge(jq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function af(t,e,n){if(typeof t=="number")return Tc(t,e);if(t.length!==e)throw new q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!Mve(i))throw new q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function lo(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function Po(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Wl([n-e,0]);else if(r==="same")t=t*e;else throw new q(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gP(t,e){return ie(()=>(Cn(e),e==="channelsFirst"?pt(t,[0,2,3,1]):t))}function Vq(t,e){return ie(()=>(Cn(e),e==="channelsFirst"?pt(t,[0,2,3,4,1]):t))}function r_e(t,e,n,r=1,i="valid",s,o=1){return ie(()=>{if(s==null&&(s=fo()),Cn(s),t.shape.length!==3)throw new q(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new q(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new q(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=pt(t,[0,2,1])),i==="causal")throw new Qe("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=v8(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=go(a,n)),a})}function q3(t,e,n,r=[1,1],i="valid",s,o,a=null){return ie(()=>{if(s==null&&(s=fo()),Cn(s),t.rank!==3&&t.rank!==4)throw new q(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new q(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=gP(t,s);if(i==="causal")throw new Qe("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=hme({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=pt(l,[0,3,1,2])),l})}function i_e(t,e,n,r=[1,1,1],i="valid",s,o){return ie(()=>{if(s==null&&(s=fo()),Cn(s),t.rank!==4&&t.rank!==5)throw new q(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new q(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Vq(t,s);if(i==="causal")throw new Qe("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=cfe(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=go(a,n)),s==="channelsFirst"&&(a=pt(a,[0,4,1,2,3])),a})}class j1 extends st{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",j1.verifyArgs(n),this.rank=e,Zn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Qe(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=af(n.kernelSize,e,"kernelSize"),this.strides=af(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ns(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Cn(this.dataFormat),this.activation=Hl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=nn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=jn(n.biasConstraint),this.biasRegularizer=sn(n.biasRegularizer),this.activityRegularizer=sn(n.activityRegularizer),this.dilationRate=af(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new q(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new q(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new q(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(No("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!nP(e.kernelSize,"number",1,3))throw new q(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Gl(this.activation),useBias:this.useBias,biasInitializer:un(this.biasInitializer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),biasConstraint:zn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class _d extends j1{constructor(e,n){super(e,n),this.kernel=null,_d.verifyArgs(n),this.filters=n.filters,Zn(this.filters,"filters"),this.kernelInitializer=nn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=jn(n.kernelConstraint),this.kernelRegularizer=sn(n.kernelRegularizer)}build(e){e=_t(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ie(()=>{e=Ke(e);let r;const i=this.bias==null?null:this.bias.read(),s=FK(this.activation.getClassName());if(s!=null&&this.rank===2)r=q3(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=r_e(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=q3(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=i_e(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Qe("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=_t(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=lo(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:un(this.kernelInitializer),kernelRegularizer:Dt(this.kernelRegularizer),kernelConstraint:zn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new q(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class dv extends _d{constructor(e){super(2,e),dv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!nP(e.kernelSize,"number",1,2))throw new q(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}dv.className="Conv2D";ge(dv);class pv extends _d{constructor(e){super(3,e),pv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new q(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}pv.className="Conv3D";ge(pv);class Uq extends dv{constructor(e){if(super(e),this.inputSpec=[new Bn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new q(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=_t(e),e.length!==4)throw new q("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{let r=Ke(e);if(r.shape.length!==4)throw new q(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],u=i[a],c=this.kernelSize[0],h=this.kernelSize[1],f=this.strides[0],p=this.strides[1],m=Po(l,f,c,this.padding),_=Po(u,p,h,this.padding),v=[s,m,_,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,1]));let g=_8(r,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=pt(g,[0,3,1,2])),this.bias!=null&&(g=go(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=_t(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=Po(n[i],l,o,this.padding),n[s]=Po(n[s],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Uq.className="Conv2DTranspose";ge(Uq);class Wq extends pv{constructor(e){if(super(e),this.inputSpec=[new Bn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new q(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=_t(e),e.length!==5)throw new q("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{let r=Ke(e);if(r.shape.length!==5)throw new q(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=i[l],c=i[o],h=i[a],f=this.kernelSize[0],p=this.kernelSize[1],m=this.kernelSize[2],_=this.strides[0],v=this.strides[1],g=this.strides[2],x=Po(u,_,f,this.padding),b=Po(c,v,p,this.padding),w=Po(h,g,m,this.padding),k=[s,x,b,w,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,4,1]));let C=dfe(r,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=pt(C,[0,4,1,2,3])),this.bias!==null&&(C=go(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=_t(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],h=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[i]=Po(n[i],c,a,this.padding),n[s]=Po(n[s],h,l,this.padding),n[o]=Po(n[o],f,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Wq.className="Conv3DTranspose";ge(Wq);class Gq extends _d{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new q(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=nn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=sn(n.depthwiseRegularizer),this.depthwiseConstraint=jn(n.depthwiseConstraint),this.pointwiseInitializer=nn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=sn(n.pointwiseRegularizer),this.pointwiseConstraint=jn(n.pointwiseConstraint)}build(e){if(e=_t(e),e.length<this.rank+2)throw new q(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new q(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Bn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{e=Ke(e);let r;if(this.rank===1)throw new Qe("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=pt(e,[0,2,3,1])),r=F8(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=go(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=un(this.depthwiseInitializer),e.pointwiseInitializer=un(this.pointwiseInitializer),e.depthwiseRegularizer=Dt(this.depthwiseRegularizer),e.pointwiseRegularizer=Dt(this.pointwiseRegularizer),e.depthwiseConstraint=zn(this.depthwiseConstraint),e.pointwiseConstraint=zn(this.pointwiseConstraint),e}}Gq.className="SeparableConv";class Hq extends Gq{constructor(e){super(2,e)}}Hq.className="SeparableConv2D";ge(Hq);class V1 extends _d{constructor(e){super(1,e),V1.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!nP(e.kernelSize,"number",1,1))throw new q(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}V1.className="Conv1D";ge(V1);class Kq extends st{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ie(()=>{if(e=Ke(e),this.dataFormat==="channelsLast"){const r=S0(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return S0(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=S0(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return S0(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Kq.className="Cropping2D";ge(Kq);class qq extends st{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Pve(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ie(()=>{let r=Ke(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=pt(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?ga.resizeNearestNeighbor(r,[s,o]):ga.resizeBilinear(r,[s,o]);return pt(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?ga.resizeNearestNeighbor(r,[s,o]):ga.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}qq.className="UpSampling2D";ge(qq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s_e(t,e,n=[1,1],r="valid",i,s){return ie(()=>{i==null&&(i=fo()),Cn(i);let o=gP(t,i);if(t.rank!==4)throw new q(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new q(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=JO(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=pt(o,[0,3,1,2])),o})}class Xq extends j1{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=nn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=jn(e.depthwiseConstraint),this.depthwiseRegularizer=sn(e.depthwiseRegularizer)}build(e){if(e=_t(e),e.length<4)throw new q(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new q(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{e=Ke(e);let r=s_e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=go(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=_t(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=lo(n,this.kernelSize[0],this.padding,this.strides[0]),o=lo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=un(this.depthwiseInitializer),e.depthwiseRegularizer=Dt(this.depthwiseRegularizer),e.depthwiseConstraint=zn(this.depthwiseRegularizer),e}}Xq.className="DepthwiseConv2D";ge(Xq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zq(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function Yq(t,e,n,r=!1,i,s,o=!1,a=!1){return ie(()=>{const l=e.shape.length;if(l<3)throw new q(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(ho(2,l));e=pt(e,u),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Ee(Ee(i,"bool"),"float32"),i.rank===l-1&&(i=Zr(i,-1)),i=pt(i,u)),r&&(e=kc(e,0),i!=null&&(i=kc(i,0)));const c=[];let h,f=n;const p=e.shape[0],m=Cc(e);let _;i!=null&&(_=Cc(i));for(let g=0;g<p;++g){const x=m[g],b=ie(()=>t(x,f));if(i==null)h=b[0],f=b[1];else{const w=ie(()=>{const k=_[g],C=Ue(Ns(k),k),T=ve(Z(b[0],k),Z(f[0],C)),E=f.map((A,$)=>ve(Z(b[1][$],k),Z(A,C)));return{output:T,newStates:E}});h=w.output,f=w.newStates}a&&c.push(h)}let v;return a&&(v=Ra(c,1)),[h,v,f]})}class au extends st{constructor(e){super(e);let n;if(e.cell==null)throw new q("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new _P({cells:e.cell}):n=e.cell,n.stateSize==null)throw new q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Bn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ho(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){bE(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return ie(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Qe("Constants support is not implemented in RNN yet.");bE(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Bn({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Ct(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new q(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new Bn({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ie(()=>{if(!this.stateful)throw new Oo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>qn([r,i])):this.states_=[qn([r,this.cell.stateSize])];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>qn([r,i])):this.states_[0]=qn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!Ct(s.shape,a))throw new q(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Uo(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Zq(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Bn({shape:u.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Jo){const u=[e].concat(o),c=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=h,f}else return super.apply(e,n)}call(e,n){return ie(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Ke(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new q(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},u=Yq((m,_)=>{const v=this.cell.call([m].concat(_),a);return[v[0],v.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],h=u[1],f=u[2];this.stateful&&this.resetStates(f,i);const p=this.returnSequences?h:c;return this.returnState?[p].concat(f):p})}getInitialState(e){return ie(()=>{let n=qn(e.shape);return n=Be(n,[1,2]),n=lv(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?_E(n,[1,r]):n):this.cell.stateSize>1?[_E(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===au.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=Sa(i,r);return new e(Object.assign(n,{cell:s}))}}au.className="RNN";ge(au);class U1 extends st{}class yP extends U1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Zn(this.units,"units"),this.activation=Hl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=sn(e.kernelRegularizer),this.recurrentRegularizer=sn(e.recurrentRegularizer),this.biasRegularizer=sn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=If([1,Wl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=If([1,Wl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=_t(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{if(e=e,e.length!==2)throw new q(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Kl({ones:()=>Ns(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Kl({ones:()=>Ns(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=Ho(Z(e,o),this.kernel.read()):s=Ho(e,this.kernel.read()),this.bias!=null&&(s=go(s,this.bias.read())),a!=null&&(r=Z(r,a));let l=ve(s,Ho(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Gl(this.activation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:zn(this.kernelConstraint),recurrentConstraint:zn(this.recurrentConstraint),biasConstraint:zn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}yP.className="SimpleRNNCell";ge(yP);class Jq extends au{constructor(e){e.cell=new yP(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}Jq.className="SimpleRNN";ge(Jq);class vP extends U1{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new q("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Zn(this.units,"units"),this.activation=Hl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Hl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=sn(e.kernelRegularizer),this.recurrentRegularizer=sn(e.recurrentRegularizer),this.biasRegularizer=sn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=If([1,Wl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=If([1,Wl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=_t(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{if(e=e,e.length!==2)throw new q(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Kl({ones:()=>Ns(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Kl({ones:()=>Ns(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=Z(e,s[0]));let c=Ho(e,this.kernel.read());this.useBias&&(c=go(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Z(i,o[0]));const h=this.recurrentKernel.read(),[f,p]=qi(h,[2*this.units,this.units],h.rank-1),m=Ho(i,f),[_,v,g]=qi(c,3,c.rank-1),[x,b]=qi(m,2,m.rank-1);a=this.recurrentActivation.apply(ve(_,x)),l=this.recurrentActivation.apply(ve(v,b));const w=Ho(Z(l,i),p);u=this.activation.apply(ve(g,w));const k=ve(Z(a,i),Z(ve(1,wn(a)),u));return[k,k]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Gl(this.activation),recurrentActivation:Gl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:zn(this.kernelConstraint),recurrentConstraint:zn(this.recurrentConstraint),biasConstraint:zn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}vP.className="GRUCell";ge(vP);class Qq extends au{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vP(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Qq.className="GRU";ge(Qq);class W1 extends U1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Zn(this.units,"units"),this.activation=Hl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Hl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=sn(e.kernelRegularizer),this.recurrentRegularizer=sn(e.recurrentRegularizer),this.biasRegularizer=sn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=If([1,Wl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=If([1,Wl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=_t(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends Ds{apply(l,u){const c=s.apply([o]),h=new iP().apply([o]),f=s.apply([o*2]);return O3(O3(c,h),f)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ie(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new q(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Kl({ones:()=>Ns(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Kl({ones:()=>Ns(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,h;0<this.dropout&&this.dropout<1&&(e=Z(e,o[0]));let f=Ho(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Z(i,a[0])),f=ve(f,Ho(i,this.recurrentKernel.read())),this.useBias&&(f=go(f,this.bias.read()));const[p,m,_,v]=qi(f,4,f.rank-1);l=this.recurrentActivation.apply(p),u=this.recurrentActivation.apply(m),c=ve(Z(u,s),Z(l,this.activation.apply(_))),h=this.recurrentActivation.apply(v);const g=Z(h,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Gl(this.activation),recurrentActivation:Gl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Dt(this.kernelRegularizer),recurrentRegularizer:Dt(this.recurrentRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:zn(this.kernelConstraint),recurrentConstraint:zn(this.recurrentConstraint),biasConstraint:zn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}W1.className="LSTMCell";ge(W1);class e9 extends au{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new W1(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}e9.className="LSTM";ge(e9);class _P extends U1{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ie(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){bE(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{ac(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(Sa(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return wE(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}hP(n)}}_P.className="StackedRNNCells";ge(_P);function Kl(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):GK(e(),n),a=()=>cv(o,e,r);return!i||i<=1?Uo(a().clone()):Array(i).fill(void 0).map(a).map(u=>Uo(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var o_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class t9 extends au{constructor(e){if(e.unroll)throw new Qe("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Qe("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Bn({ndim:5})]}call(e,n){return ie(()=>{if(this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new q("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ie(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=qn(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){ie(()=>{if(!this.stateful)throw new Oo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qn(s)):this.states_=[qn(s)];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qn(s)):this.states_[0]=qn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=s;if(!Ct(l.shape,u))throw new q(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Uo(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],h=lo(u,i[0],s,o[0],a[0]),f=lo(c,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,h,f]:[h,f,r]]}}t9.className="ConvRNN2D";class xP extends W1{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Zn(this.filters,"filters"),this.kernelSize=af(r,2,"kernelSize"),this.kernelSize.forEach(l=>Zn(l,"kernelSize")),this.strides=af(i||1,2,"strides"),this.strides.forEach(l=>Zn(l,"strides")),this.padding=s||"valid",ns(this.padding),this.dataFormat=o||"channelsLast",Cn(this.dataFormat),this.dilationRate=af(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Zn(l,"dilationRate"))}build(e){var n;e=_t(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new q(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Ds{apply(f,p){const m=u.apply([c]),_=su([c]),v=u.apply([c*2]);return rP([m,_,v])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ie(()=>{if(e.length!==3)throw new q(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Kl({ones:()=>Ns(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(G,Y,ee)=>!Y||!Y[ee]?G:Z(Y[ee],G);let c=u(i,l,0),h=u(i,l,1),f=u(i,l,2),p=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Kl({ones:()=>Ns(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let _=u(s,m,0),v=u(s,m,1),g=u(s,m,2),x=u(s,m,3);const b=3,[w,k,C,T]=qi(this.kernel.read(),a,b),[E,A,$,N]=this.useBias?qi(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,w,E,this.padding),h=this.inputConv(h,k,A,this.padding),f=this.inputConv(f,C,$,this.padding),p=this.inputConv(p,T,N,this.padding);const[P,M,B,z]=qi(this.recurrentKernel.read(),a,b);_=this.recurrentConv(_,P),v=this.recurrentConv(v,M),g=this.recurrentConv(g,B),x=this.recurrentConv(x,z);const j=this.recurrentActivation.apply(ve(c,_)),U=this.recurrentActivation.apply(ve(h,v)),D=ve(Z(U,o),Z(j,this.activation.apply(ve(f,g)))),W=Z(this.recurrentActivation.apply(ve(p,x)),this.activation.apply(D));return[W,W,D]})}getConfig(){const e=super.getConfig(),n=o_e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const s=wc(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?go(s,r,this.dataFormat):s}recurrentConv(e,n){return wc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}xP.className="ConvLSTM2DCell";ge(xP);class n9 extends t9{constructor(e){const n=new xP(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}n9.className="ConvLSTM2D";ge(n9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bP extends st{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return cv(()=>GK(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}bP.className="Dropout";ge(bP);class r9 extends bP{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}r9.className="SpatialDropout1D";ge(r9);class wP extends st{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Zn(this.units,"units"),this.activation=Hl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=jn(e.kernelConstraint),this.biasConstraint=jn(e.biasConstraint),this.kernelRegularizer=sn(e.kernelRegularizer),this.biasRegularizer=sn(e.biasRegularizer),this.activityRegularizer=sn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=_t(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=_t(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e),i=FK(this.activation.getClassName());let s;return i!=null?s=Ho(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Ho(r,this.kernel.read()),this.bias!=null&&(s=go(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Gl(this.activation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Dt(this.kernelRegularizer),biasRegularizer:Dt(this.biasRegularizer),activityRegularizer:Dt(this.activityRegularizer),kernelConstraint:zn(this.kernelConstraint),biasConstraint:zn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}wP.className="Dense";ge(wP);class i9 extends st{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=_t(e);for(const n of e.slice(1))if(n==null)throw new q(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ml(e,1)]}call(e,n){return ie(()=>{this.invokeCallHook(e,n);let r=Ke(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=pt(r,i)}return Bve(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}i9.className="Flatten";ge(i9);class s9 extends st{constructor(e){super(e),this.supportsMasking=!0,this.activation=Hl(e.activation)}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e);return this.activation.apply(r)})}getConfig(){const e={activation:Gl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}s9.className="Activation";ge(s9);class o9 extends st{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ie(()=>(e=Ke(e),Lve(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}o9.className="RepeatVector";ge(o9);class a9 extends st{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(o===null)o=l;else throw new q("Can only specifiy one unknown dimension.");else s*=u}const a=Ml(e);if(o!==null){if(s===0||a%s!==0)throw new q(r);i[o]=a/s}else if(a!==s)throw new q(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return te(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}a9.className="Reshape";ge(a9);class l9 extends st{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ho(1,e.dims.length+1);if(!Ct(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Bn({ndim:this.dims.length+1})]}computeOutputShape(e){e=_t(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return pt(Ke(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}l9.className="Permute";ge(l9);class u9 extends st{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Ke(e);return fE(bx(r,this.maskValue),-1)}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e),o=fE(bx(r,this.maskValue),-1,!0);return Z(r,Ee(o,r.dtype))})}}u9.className="Masking";ge(u9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class c9 extends st{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Et(e.inputLength))}this.inputDim=e.inputDim,Zn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Zn(this.outputDim,"outputDim"),this.embeddingsInitializer=nn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=sn(e.embeddingsRegularizer),this.activityRegularizer=sn(e.activityRegularizer),this.embeddingsConstraint=jn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ie(()=>this.maskZero?(e=Ke(e),bx(e,gt(e))):null)}computeOutputShape(e){if(e=_t(e),this.inputLength==null)return[...e,this.outputDim];const n=Et(this.inputLength);if(n.length!==e.length-1)throw new q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ie(()=>{this.invokeCallHook(e,n);let r=Ke(e);r.dtype!=="int32"&&(r=Go(r,"int32"));const i=WK(this.embeddings.read(),te(r,[r.size]));return te(i,_t(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:un(this.embeddingsInitializer),embeddingsRegularizer:Dt(this.embeddingsRegularizer),activityRegularizer:Dt(this.activityRegularizer),embeddingsConstraint:zn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}c9.className="Embedding";ge(c9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hc extends st{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Qe}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new q("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[_t(e)]),e=e,e.length<2)throw new q(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Dl(n),n.length>1)throw new q(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&Dl(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ie(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=Wl(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=lv(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,h=c[0],f=c.slice(1).concat([h]);let p=te(l,[h].concat(Ml(c.slice(1))));p=pt(p,[1,0]),p=te(p,f),r.push(p),s=!0}else if(u>1){const c=ho(1,u).concat([0]);r.push(pt(l,c)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,u=l.length,c=l[u-1],h=[c].concat(l.slice(0,l.length-1));o=te(pt(te(o,[-1,c]),[1,0]),h)}else if(a>1){const l=[a-1].concat(ho(0,a-1));o=pt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=Dl(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ie(()=>{if(n==null)return null;if(!Array.isArray(n))throw new q("`mask` should be an Array");if(!Array.isArray(e))throw new q("`inputs` should be an Array");if(n.length!==e.length)throw new q(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Zr(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Pa(r,n[i]);return r})}}class h9 extends Hc{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ve(n,e[r]);return n})}}h9.className="Add";ge(h9);class f9 extends Hc{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Z(n,e[r]);return n})}}f9.className="Multiply";ge(f9);class d9 extends Hc{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ve(n,e[r]);return Z(1/e.length,n)})}}d9.className="Average";ge(d9);class p9 extends Hc{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=iu(n,e[r]);return n})}}p9.className="Maximum";ge(p9);class m9 extends Hc{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=qm(n,e[r]);return n})}}m9.className="Minimum";ge(m9);class g9 extends Hc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new q("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(Ct(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ie(()=>rP(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new q("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new q("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new q("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new q(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ie(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Ee(Ns(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Zr(n[o],-1)):i.push(n[o]);const s=ti(i,this.axis);return y8(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}g9.className="Concatenate";ge(g9);function yp(t,e){for(;t<0;)t+=e;return t}function a_e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Qe("batchDot is not implemented for tensors of 4D or higher rank yet");if(F(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),F(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Qe("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return ie(()=>{let o;if(r>i){o=r-i;const l=[];for(let u=0;u<o;++u)l.push(1);e=te(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=te(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=Be(Z(t,e),s[0]):a=Be(Z(pt(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;a=wt(t,e,l,u)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let c=l;c<l+o;++c)u.push(c);a=nv(a,u)}return a.shape.length===1&&(a=Zr(a,1)),a})}let y9=class extends Hc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){F(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Qe("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new q(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new q(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>yp(s,e[o].shape.length)):i=[yp(this.axes,n.shape.length),yp(this.axes,r.shape.length)],this.normalize&&(n=Ex(n,i[0]),r=Ex(r,i[1])),a_e(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[yp(this.axes,e.length),yp(this.axes,n.length)],r}computeOutputShape(e){F(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Qe("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};y9.className="Dot";ge(y9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class v9 extends st{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e);return cv(()=>ve(L1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}v9.className="GaussianNoise";ge(v9);class _9 extends st{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=Ke(e);return this.rate>0&&this.rate<1?cv(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return Z(r,L1(r.shape,1,s))},()=>r,n.training||!1):r})}}_9.className="GaussianDropout";ge(_9);class x9 extends st{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ke(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ie(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return cv(()=>{const s=Ke(e),l=-1.6732632423543772*1.0507009873554805;let u=jc(tv(r),this.rate);u=Go(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,h=-c*l*this.rate,f=ve(Z(s,u),Z(ve(u,-1),l));return ve(Z(f,c),h)},()=>Ke(e),n.training||!1)}return e})}}x9.className="AlphaDropout";ge(x9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jm(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=zhe(t,e,n,r,i,s);else if(t.rank===3)o=Vhe(t,e,n,r,i,s);else if(t.rank===4)o=Whe(t,e,n,r,i,s);else throw new Qe(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function l_e(t,e,n,r,i=.001){return ie(()=>{const s=sN(t,r),o=s.mean,a=s.variance;return[Jm(t,o,a,n,e,i),o,a]})}function u_e(t,e,n,r,i=.001){return ie(()=>{const s=sN(t,r),o=s.mean,a=s.variance,l=[];for(const m of ho(0,t.rank))r.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);const u=te(o,l),c=te(a,l),h=e==null?null:te(e,l),f=n==null?null:te(n,l);return[Jm(t,u,c,f,h,i),o,a]})}function c_e(t,e,n,r,i=.001){return Ct(r.slice().sort(),ho(0,t.rank-1))?l_e(t,e,n,r,i):u_e(t,e,n,r,i)}class b9 extends st{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nn(e.betaInitializer||"zeros"),this.gammaInitializer=nn(e.gammaInitializer||"ones"),this.movingMeanInitializer=nn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=nn(e.movingVarianceInitializer||"ones"),this.betaConstraint=jn(e.betaConstraint),this.gammaConstraint=jn(e.gammaConstraint),this.betaRegularizer=sn(e.betaRegularizer),this.gammaRegularizer=sn(e.gammaRegularizer)}build(e){e=_t(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new q(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Bn({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ie(()=>{const r=n.training==null?!1:n.training,i=Ke(e),s=i.shape,o=s.length,a=ho(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=Tc(1,o);u[l]=s[l];const c=a.slice();c.sort();const h=!Ct(c,ho(0,o).slice(0,o-1)),f=()=>{if(h){const x=te(this.movingMean.read(),u),b=te(this.movingVariance.read(),u),w=this.center?te(this.beta.read(),u):null,k=this.scale?te(this.gamma.read(),u):null;return Jm(i,x,b,w,k,this.epsilon)}else return Jm(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[p,m,_]=c_e(i,this.gamma.read(),this.beta.read(),a,this.epsilon),v=(x,b,w)=>{ie(()=>{const k=1-w,C=x.read(),T=Z(Ue(C,b),k);x.write(Ue(C,T))})};return(()=>{v(this.movingMean,m,this.momentum),v(this.movingVariance,_,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:un(this.betaInitializer),gammaInitializer:un(this.gammaInitializer),movingMeanInitializer:un(this.movingMeanInitializer),movingVarianceInitializer:un(this.movingVarianceInitializer),betaRegularizer:Dt(this.betaRegularizer),gammaRegularizer:Dt(this.gammaRegularizer),betaConstraint:zn(this.betaConstraint),gammaConstraint:zn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}b9.className="BatchNormalization";ge(b9);class w9 extends st{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nn(e.betaInitializer||"zeros"),this.gammaInitializer=nn(e.gammaInitializer||"ones"),this.betaRegularizer=sn(e.betaRegularizer),this.gammaRegularizer=sn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=_t(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Dl(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Ke(e),i=r.shape,s=i.length;return ie(()=>{let{mean:a,variance:l}=sN(r,this.axis,!0);const u=Tc(1,s);for(const _ of this.axis)u[_]=i[_];const c=_=>_!=null&&_.shape.length!==s?te(_,u):_;let h=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const p=[],m=[];for(let _=0;_<s;++_)this.axis.indexOf(_)!==-1?(p.push(i[_]),m.push(1)):(p.push(1),m.push(i[_]));return a=no(a,p),l=no(l,p),h!=null&&(h=no(h,m)),f!=null&&(f=no(f,m)),Jm(r,a,l,f,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:un(this.betaInitializer),gammaInitializer:un(this.gammaInitializer),betaRegularizer:Dt(this.betaRegularizer),gammaRegularizer:Dt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}w9.className="LayerNormalization";ge(w9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h_e(t,e,n){return ie(()=>{if(t.rank!==4)throw new q(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=fo()),n!=="channelsLast"&&n!=="channelsFirst")throw new q(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],oN(t,r)})}class S9 extends st{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?fo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new q(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new q(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new q(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Bn({ndim:4})]}computeOutputShape(e){e=_t(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ie(()=>h_e(Ke(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}S9.className="ZeroPadding2D";ge(S9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function G1(t,e,n,r,i,s){return ie(()=>{Cn(i),zK(s),ns(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=fo()),s==null&&(s="max"),t=gP(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=iN(t,e,n,a):o=qO(t,e,n,a),i==="channelsFirst"&&(o=pt(o,[0,3,1,2])),o})}function k9(t,e,n,r,i,s){return ie(()=>{Cn(i),zK(s),ns(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=fo()),s==null&&(s="max"),t=Vq(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=Ede(t,e,n,a):o=Ahe(t,e,n,a),i==="channelsFirst"&&(o=pt(o,[0,4,1,2,3])),o})}class C9 extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new q(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Zn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new q(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Zn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ns(this.padding),this.inputSpec=[new Bn({ndim:3})]}computeOutputShape(e){e=_t(e);const n=lo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ie(()=>{this.invokeCallHook(e,n),e=lv(Ke(e),2);const r=this.poolingFunction(Ke(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return nv(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class T9 extends C9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),G1(e,n,r,i,s,"max")}}T9.className="MaxPooling1D";ge(T9);class $9 extends C9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),G1(e,n,r,i,s,"avg")}}$9.className="AveragePooling1D";ge($9);class E9 extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new q(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Zn(this.poolSize,"poolSize"),Zn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),ns(this.padding),this.inputSpec=[new Bn({ndim:4})]}computeOutputShape(e){e=_t(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=lo(n,this.poolSize[0],this.padding,this.strides[0]),r=lo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ke(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class I9 extends E9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),G1(e,n,r,i,s,"max")}}I9.className="MaxPooling2D";ge(I9);class A9 extends E9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),G1(e,n,r,i,s,"avg")}}A9.className="AveragePooling2D";ge(A9);class O9 extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new q(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Zn(this.poolSize,"poolSize"),Zn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),ns(this.padding),this.inputSpec=[new Bn({ndim:5})]}computeOutputShape(e){e=_t(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=lo(n,this.poolSize[0],this.padding,this.strides[0]),r=lo(r,this.poolSize[1],this.padding,this.strides[1]),i=lo(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ke(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class N9 extends O9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),k9(e,n,r,i,s,"max")}}N9.className="MaxPooling3D";ge(N9);class P9 extends O9{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Cn(s),ns(i),k9(e,n,r,i,s,"avg")}}P9.className="AveragePooling3D";ge(P9);class R9 extends st{constructor(e){super(e),this.inputSpec=[new Bn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Qe}}class D9 extends R9{constructor(e){super(e||{})}call(e,n){return ie(()=>{const r=Ke(e);return An(r,1)})}}D9.className="GlobalAveragePooling1D";ge(D9);class M9 extends R9{constructor(e){super(e||{})}call(e,n){return ie(()=>{const r=Ke(e);return ao(r,1)})}}M9.className="GlobalMaxPooling1D";ge(M9);class L9 extends st{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Cn(this.dataFormat),this.inputSpec=[new Bn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Qe}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class F9 extends L9{call(e,n){return ie(()=>{const r=Ke(e);return this.dataFormat==="channelsLast"?An(r,[1,2]):An(r,[2,3])})}}F9.className="GlobalAveragePooling2D";ge(F9);class B9 extends L9{call(e,n){return ie(()=>{const r=Ke(e);return this.dataFormat==="channelsLast"?ao(r,[1,2]):ao(r,[2,3])})}}B9.className="GlobalMaxPooling2D";ge(B9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z9 extends st{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=Sa(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class j9 extends z9{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=_t(e),e.length<3)throw new q(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=_t(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return ie(()=>(e=Ke(e),Yq((o,a)=>[Ke(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}j9.className="TimeDistributed";ge(j9);function f_e(t){Gc(Nve,"BidirectionalMergeMode",t)}const d_e="concat";class V9 extends z9{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Sa(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Sa(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?d_e:e.mergeMode,f_e(this.mergeMode),e.weights)throw new Qe("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Yr(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Zq(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(h=>new Bn({shape:h.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(i!=null)throw new Qe("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Jo;for(const u of o)if(u instanceof Jo!==l)throw new q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),c=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=h,f}else return super.apply(e,n)}call(e,n){return ie(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=kc(s,1));let a;return this.mergeMode==="concat"?a=rP([i,s]):this.mergeMode==="sum"?a=ve(i,s):this.mergeMode==="ave"?a=Z(.5,ve(i,s)):this.mergeMode==="mul"?a=Z(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){ac(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),ac(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Sa(n.layer);if(delete n.layer,n.numConstants!=null)throw new Qe("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}V9.className="Bidirectional";ge(V9);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class U9 extends st{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ie(()=>(e=Ke(e),e.dtype!=="float32"&&(e=Go(e,"float32")),ve(Z(e,this.scale),this.offset)))}}U9.className="Rescaling";ge(U9);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:p_e,cropAndResize:m_e}=ga;class W9 extends st{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return ie(()=>{let u,c=!1;const h=n/o,f=r/a,p=(i+n)/o,m=(s+r)/a,_=[h,f,p,m],v=[];e.rank===3?(c=!0,u=Ra([e])):u=e;for(let k=0;k<u.shape[0];k++)v.push(_);const g=a8(v,[v.length,4]),x=Xm(0,v.length,1,"int32"),w=m_e(u,g,x,[i,s],"nearest");return Go(c?Ke(Cc(w)):w,l)})}upsize(e,n,r,i){return ie(()=>{const s=p_e(e,[n,r]);return Go(s,i)})}call(e,n){return ie(()=>{const r=Ke(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=_t(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}W9.className="CenterCrop";ge(W9);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g_e(t,e,n,r){let i=Ke(t);if(i.dtype!=="int32"&&(i=Go(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Zr(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Zr(i,-1)),i.rank>2)throw new q(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=g3(a,r,n,o):l=g3(a,[],n,o),e!=="tfIdf")return l;if(r)return Z(l,r);throw new q("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class G9 extends st{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=_t(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ie(()=>{e=Ke(e),e.dtype!=="int32"&&(e=Go(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new q(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Ke(n.countWeights)}const i=ao(e),s=_x(e),o=ts(this.numTokens,i).bufferSync().get(0),a=jc(s,0).bufferSync().get(0);if(!(o&&a))throw new q(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return g_e(e,this.outputMode,this.numTokens,r)})}}G9.className="CategoryEncoding";ge(G9);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const y_e=["bilinear","nearest"],X3=new Set(y_e);class H9 extends st{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(X3.has(e.interpolation))this.interpolation=e.interpolation;else throw new q(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=_t(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ie(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return ga.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ga.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...X3]} are supported`)})}}H9.className="Resizing";ge(H9);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class K9{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}K9.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class q9 extends st{constructor(e){super(e),this.randomGenerator=new K9(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}q9.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const v_e=["bilinear","nearest"],Z3=new Set(v_e);class X9 extends q9{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new q(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new q(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new q(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(Z3.has(r))this.interpolation=r;else throw new q(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=_t(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ie(()=>{const r=Ke(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=tv([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return ga.resizeBilinear(e,o);case"nearest":return ga.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...Z3]} are supported`)}})}}X9.className="RandomWidth";ge(X9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EC(t){return new wP(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e=oe();__e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Y3;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Y3||(Y3={}));var J3;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(J3||(J3={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Q3;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(Q3||(Q3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x_e=H8;class H1 extends YA{nextDataId(){return H1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new h6(this,Eo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&Vi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&ry(r[0])){const s=r.map(o=>Rl(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Da(i,s)}return Gue(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ul(i));return rt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return rt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Eo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Xr();return e(),{kernelMs:Xr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Pe([e],"where");const n=this.readSync(e.dataId);return x_e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}H1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const b_e=t=>{const{x:e}=t.inputs,n=t.backend;Pe(e,"abs");let r=new Float32Array(ce(e.shape));const i=n.data.get(e.dataId).values;return r=Z9(i),n.makeOutput(r,e.shape,e.dtype)},w_e={kernelName:Sw,backendName:"cpu",kernelFunc:b_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tn(t){return(e,n,r,i,s)=>{const o=Xe(e,n),a=o.length,l=Le(o),u=ce(o),c=br(s,u),h=e.length,f=n.length,p=Le(e),m=Le(n),_=$f(e,o),v=$f(n,o);if(_.length+v.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<c.length;++g){const x=fd(g,a,l),b=x.slice(-h);_.forEach(T=>b[T]=0);const w=Vo(b,h,p),k=x.slice(-f);v.forEach(T=>k[T]=0);const C=Vo(k,f,m);c[g]=t(r[w],i[C])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const S_e={kernelName:cO,backendName:"cpu",kernelFunc:vi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Px(t,e,n="float32"){if(n==="complex64"){const i=Px(t,e,"float32"),s=Px(t,e,"float32");return vi({inputs:{real:i,imag:s},backend:t})}const r=wr(ce(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const k_e={kernelName:ky,backendName:"cpu",kernelFunc:Qo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $c(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const C_e={kernelName:RO,backendName:"cpu",kernelFunc:$c};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=zc([0],n),[s,o]=Tn((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function ql(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Qo({inputs:{x:i},backend:n});const c=Px(n,i.shape,i.dtype),h=ql({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=vi({inputs:{real:h,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),f}if(i.dtype==="complex64"){const c=$c({inputs:{input:i},backend:n}),h=ql({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),h}if(!p6(i.dtype,s)){const c=Qo({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,u]=Y9(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}const T_e={kernelName:hy,backendName:"cpu",kernelFunc:ql};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;Pe([o,a],t);const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,h=o.dtype==="string"?Ma(u):u,f=o.dtype==="string"?Ma(c):c,p=r||o.dtype,[m,_]=e(o.shape,a.shape,h,f,p);return l.makeTensorInfo(_,p,m)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=ql({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),h=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,p=l.data.get(h.dataId).values,m=l.data.get(f.dataId).values,_=ql({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(_.dataId),g=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,b=l.data.get(g.dataId).values,w=l.data.get(x.dataId).values,[k,C,T]=n(o.shape,a.shape,p,m,b,w),E=l.makeTensorInfo(T,"float32",k),A=l.makeTensorInfo(T,"float32",C),$=vi({inputs:{real:E,imag:A},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(_),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(A),$}else{const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,h=r||o.dtype,[f,p]=e(o.shape,a.shape,u,c,h);return l.makeTensorInfo(p,h,f)}}}function SP(t){return(e,n,r,i,s,o)=>{const a=Xe(e,n),l=ce(a),u=a.length,c=Le(a),h=br("float32",l),f=br("float32",l),p=$f(e,a),m=$f(n,a),_=Da(r,i),v=Da(s,o),g=e.length,x=Le(e),b=n.length,w=Le(n);if(p.length+m.length===0)for(let k=0;k<h.length;k++){const C=k%_.length,T=k%v.length,E=t(_[C*2],_[C*2+1],v[T*2],v[T*2+1]);h[k]=E.real,f[k]=E.imag}else for(let k=0;k<h.length;k++){const C=fd(k,u,c),T=C.slice(-g);p.forEach(P=>T[P]=0);const E=Vo(T,g,x),A=C.slice(-b);m.forEach(P=>A[P]=0);const $=Vo(A,b,w),N=t(_[E*2],_[E*2+1],v[$*2],v[$*2+1]);h[k]=N.real,f[k]=N.imag}return[h,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J9=Tn((t,e)=>t+e),$_e=SP((t,e,n,r)=>({real:t+n,imag:e+r})),Of=Wn(dd,J9,$_e),E_e={kernelName:dd,backendName:"cpu",kernelFunc:Of};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kP(t,e,n,r,i){const s=ce(r),o=wr(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Q9(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=rt([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7=Tn((t,e)=>t&e),I_e=Wn(uO,e7),A_e={kernelName:uO,backendName:"cpu",kernelFunc:I_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ta(t){return(e,n,r)=>{const i=bn(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(t,e,n){const r=ta(e);return lu(t,r,n)}function lu(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;Pe(o,t);const a=s,l=a.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Ma(l)}else u=l;const c=n||o.dtype,h=e(u,c,i);return a.makeTensorInfo(o.shape,c,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t7=ta(t=>Math.ceil(t)),O_e=lu(fy,t7),N_e={kernelName:fy,backendName:"cpu",kernelFunc:O_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(t,e,n,r){const i=bn(n,ce(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=ce(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?Ma(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+s;for(let h=0;h<o.shape[1];++h)i[c+h]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7=Tn((t,e)=>t===e?1:0),i7=Wn(Fw,r7,null,"bool"),P_e={kernelName:Fw,backendName:"cpu",kernelFunc:i7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s7=ta(t=>Math.exp(t)),o7=lu(_y,s7,"float32"),R_e={kernelName:_y,backendName:"cpu",kernelFunc:o7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7=ta(t=>Math.expm1(t)),D_e=lu(xy,a7),M_e={kernelName:xy,backendName:"cpu",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7=ta(t=>Math.floor(t)),L_e=lu(by,l7),F_e={kernelName:by,backendName:"cpu",kernelFunc:L_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7=Tn((t,e)=>Math.floor(t/e)),B_e=Wn(wy,u7,null,"int32"),z_e={kernelName:wy,backendName:"cpu",kernelFunc:B_e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7(t,e,n,r,i,s,o,a,l){const u=rt([r,s],n);for(let c=0;c<r;c++){const h=[];let f=0;for(let p=0;p<i;p++){const m=t[c*i+p];f+=m*o[p],h.push(m)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let p=0;p<s;p++)u.values[c*s+p]=e.get(...e.indexToLoc(f*s+p))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(t,e,n){const r=rt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7=Tn((t,e)=>t>e?1:0),j_e=Wn(Vw,f7,null,"bool"),V_e={kernelName:Vw,backendName:"cpu",kernelFunc:j_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7=Tn((t,e)=>t>=e?1:0),U_e=Wn(Sy,d7,null,"bool"),W_e={kernelName:Sy,backendName:"cpu",kernelFunc:U_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7=Tn((t,e)=>t<e?1:0),G_e=Wn(Ww,p7,null,"bool"),H_e={kernelName:Ww,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7=Tn((t,e)=>t<=e?1:0),K_e=Wn(Gw,m7,null,"bool"),q_e={kernelName:Gw,backendName:"cpu",kernelFunc:K_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7(t,e,n){const r=(e-t)/(n-1),i=wr(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7=ta(t=>Math.log(t)),X_e=lu(Ey,y7),Z_e={kernelName:Ey,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7(t,e,n,r){const i=br(r,ce(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7=Tn((t,e)=>Math.max(t,e)),Y_e=Wn(Ay,_7),J_e={kernelName:Ay,backendName:"cpu",kernelFunc:Y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7=Tn((t,e)=>Math.min(t,e)),Q_e=Wn(Oy,x7),exe={kernelName:Oy,backendName:"cpu",kernelFunc:Q_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CP=Tn((t,e)=>t*e),txe=SP((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),K1=Wn(Py,CP,txe),nxe={kernelName:Py,backendName:"cpu",kernelFunc:K1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b7(t,e,n){const r=tu(-1,n);return CP([],e,r,t,n)}function rxe(t){const{inputs:e,backend:n}=t,{x:r}=e;Pe(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=b7(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const ixe={kernelName:n1,backendName:"cpu",kernelFunc:rxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7=Tn((t,e)=>t!==e?1:0),sxe=Wn(r1,w7,null,"bool"),oxe={kernelName:r1,backendName:"cpu",kernelFunc:sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TP(t,e,n,r,i){const s=e.length,o=ce(e),a=Le(e),l=Le(i),u=br(n,ce(i));for(let c=0;c<o;++c){const h=fd(c,s,a),f=new Array(h.length);for(let m=0;m<f.length;m++)f[m]=h[r[m]];const p=Vo(f,s,l);u[p]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;Pe(i,"transpose");const o=i.shape.length,a=new Array(o);for(let h=0;h<a.length;h++)a[h]=i.shape[s[h]];const l=r.data.get(i.dataId).values,u=TP(l,i.shape,i.dtype,s,a);return{dataId:r.write(u,a,i.dtype),shape:a,dtype:i.dtype}}const axe={kernelName:rf,backendName:"cpu",kernelFunc:ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S7(t,e,n,r){const[i,s]=Qn(t,r),o=Ti(e,"int32"),a=wr(ce(i),o),l=ce(s);for(let u=0;u<a.length;++u){const c=u*l;let h=1;for(let f=0;f<l;++f)h*=n[c+f];a[u]=h}return{outVals:a,outShape:i,outDtype:o}}function lxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Pe(i,"prod");const a=i.shape.length,l=it(s,i.shape),u=hn(l,a);let c=l,h=i;const f=[];u!=null&&(h=ri({inputs:{x:i},backend:n,attrs:{perm:u}}),f.push(h),c=kn(c.length,a));const p=n.data.get(h.dataId).values,{outVals:m,outShape:_,outDtype:v}=S7(h.shape,h.dtype,p,c);let g=_;return o&&(g=On(_,l)),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(g,v,m)}const uxe={kernelName:u1,backendName:"cpu",kernelFunc:lxe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=fd(i,e.length,Le(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function hxe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function fxe(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);hxe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let h=1;h<l+1;++h)a[u].push(h*c)}for(let u=0;u<t.length;++u){let c=t[u],h=t[u]+1;for(let f=0;f<n.length;++f){const p=n[f],m=f+e.length-1;if(m>=0){const _=a[m],v=_[_.length-1]-p[c];for(let g=c;g<h;++g)a[m].push(p[g+1]+v)}c=p[c],h=p[h]}h!==c&&(i.push([c,h]),s+=h-c)}return{outSplits:a,valueSlices:i,numValues:s}}function dxe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=bn("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function eB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function pxe(t,e,n,r,i,s){const o=eB(e,2)[1],a=eB(s,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let h=0;h<r;++h)i[l*a+h]=t[c*o+h];++l}}function mxe(t,e,n,r,i){const s=e.slice();s[0]=i;const o=bn(n,ce(s)),a=t.length,l=a===0?0:a/e[0];return pxe(t,e,r,l,o,s),[o,s]}function k7(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(cxe(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:h,numValues:f}=fxe(s,o,t,u),p=dxe(c),m=mxe(n,r,i,h,f);return[p,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tB=2147483647;function C7(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,u=o.length===0,c=[];a||c.push(e[0]),l||c.push(i[0]),u||c.push(o[0]);for(let v=1;v<c.length;++v)if(c[v]!==c[v-1])throw new Error("starts, limits, and deltas must have the same shape");const h=c.length===0?1:c[0],f=bn("int32",h+1);f[0]=0;for(let v=0;v<h;++v){const g=a?t[0]:t[v],x=l?r[0]:r[v],b=u?s[0]:s[v];if(b===0)throw new Error("Requires delta != 0");let w;if(b>0&&x<g||b<0&&x>g)w=0;else if(w=Math.ceil(Math.abs((x-g)/b)),w>tB)throw new Error(`Requires ((limit - start) / delta) <= ${tB}`);f[v+1]=f[v]+w}const p=f[h],m=bn(n,p);let _=0;for(let v=0;v<h;++v){const g=f[v+1]-f[v];let x=a?t[0]:t[v];const b=u?s[0]:s[v];for(let w=0;w<g;++w)m[_++]=x,x+=b}return[f,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var us=eo;class Rx{constructor(e,n,r,i,s,o,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=hK(c),this.raggedRank=fK(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===us.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===us.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case us.VALUE_ROWIDS:return Rx.getMaxWidthValueRowID(n);case us.ROW_SPLITS:return Rx.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${us[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return rB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;dK(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=cK(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return F(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let u=Math.min(i,l),c=n[a];c===-1&&(u=0);for(let h=0;h<u;++h)o.push(c),c+=r;for(let h=0;h<l-u;++h)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<s;++c){const h=e[c];if(h===l)u>=0&&(++a,a<i?u+=r:u=-1);else{if(a=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);u=n[h]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case us.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case us.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${us[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case us.FIRST_DIM_SIZE:return e[0];case us.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case us.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${us[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=rB(r,!1),o=bn(this.valuesDType,ce(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],r[u]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=ce(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const m=this.defaultValueShape;ie(()=>{const _=te(c,m);c=hm(_,a).dataSync()})}let h=0,f=0,p=0;for(let m=0;m<=u;++m){let _=m<u?n[m]:-1;if(_===p){++p;continue}if(f<p){const v=s.subarray(h*l),g=o.subarray(f*l),x=(p-f)*l;nB(g,v,x)}if(m>=u){const v=r.length;_=Math.floor(v/l)}if(_>p)if(this.defaultValue.length===1)o.subarray(p*l,_*l).fill(this.defaultValue[0]),p=_;else for(;_>p;){const v=o.slice(p*l);nB(v,c,l),++p}_<0?(h=m+1,f=p):(h=m,f=p,p=f+1)}}}function nB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function rB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function T7(t,e,n,r,i,s,o,a,l,u){return new Rx(t,e,n,r,i,s,o,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $7(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return wr(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=wr(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E7=ta(t=>1/Math.sqrt(t)),gxe=lu(By,E7),yxe={kernelName:By,backendName:"cpu",kernelFunc:gxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xu(t,e,n,r,i,s,o,a,l,u){const c=[r/i,i],h=t.values,f=e.values;if(r===0)return rt(n,e.dtype);const p=l instanceof lr?l:rt(c,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let m=0;m<s;m++){const _=[];let v=0;for(let g=0;g<o;g++){const x=h[m*o+g];_.push(x),v+=x*a[g]}if(v<0||v>=r/i)throw new Error(`Invalid indices: ${_} does not index into ${n}`);for(let g=0;g<i;g++)u?p.values[v*i+g]+=f[m*i+g]:p.values[v*i+g]=e.rank===0?f[0]:f[m*i+g]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vxe=ta(t=>1/(1+Math.exp(-t))),I7=It(Wy,t=>1/(1+Math.exp(-t))),_xe={kernelName:Wy,backendName:"cpu",kernelFunc:I7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A7(t,e,n,r,i){const s=NN(r,e,n),o=ce(n),a=Le(r);if(s){const h=PN(e,a);return i==="string"?t.slice(h,h+o):t.subarray(h,h+o)}const l=i==="string"?Ma(t):t,u=rt(r,i,l),c=rt(n,i);for(let h=0;h<c.size;++h){const f=c.indexToLoc(h),p=f.map((m,_)=>m+e[_]);c.set(u.get(...p),...f)}return i==="string"?PK(c.values):c.values}function Ec(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;Pe(i,"slice");const[a,l]=N1(i,s,o);AN(i,a,l);const u=n.data.get(i.dataId).values,c=A7(u,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const xxe={kernelName:m1,backendName:"cpu",kernelFunc:Ec};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(t,e,n,r,i,s,o){const a=e[0],l=s[0],u=new Array(l),c=new Array(a),h=e[1];if(l===0){if(a!==0)throw new Error(xK(a));const v=bn(n,0),g=bn(i,0);return[v,[0,h],g,u,c]}let f=!0,p=0;const m=new Array(l).fill(0);for(let v=0;v<a;++v){const g=t[v*h];if(g<0)throw new Error(bK(v,g));if(g>=l)throw new Error(wK(v,g,l));++m[g],f=f&&g>=p,p=g}let _=!0;for(let v=0;v<l;++v){const g=m[v]===0;u[v]=g,_=_&&!g,m[v]=Math.max(m[v],1),v>0&&(m[v]+=m[v-1])}if(_&&f){const v=t,g=r;for(let x=0;x<a;++x)c[x]=x;return[v,[a,h],g,u,c]}else{const v=m[l-1],g=bn(n,v*h),x=bn(i,v),b=new Array(l).fill(0);for(let w=0;w<a;++w){const k=t[w*h],C=b[k],T=(k===0?0:m[k-1])+C;b[k]++;for(let E=0;E<h;++E)g[T*h+E]=t[w*h+E];x[T]=r[w],c[w]=T}for(let w=0;w<l;++w)if(b[w]===0){const C=w===0?0:m[w-1];g[C*h+0]=w;for(let T=1;T<h;++T)g[C*h+T]=0;x[C]=o}return[g,[v,h],x,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7(t,e,n,r,i){const s=ce(r),o=e[0],a=i.length,l=[];let u=1,c=-1;for(let v=0;v<a;++v){const g=i[v];if(g===-1){if(c!==-1)throw new Error(SK(c,v));c=v,l.push(1)}else{if(g<0)throw new Error(kK(v,g));u*=g,l.push(g)}}if(c!==-1){if(u<=0)throw new Error(CK());const v=Math.trunc(s/u);if(u*v!==s)throw new Error(TK(r,l));l[c]=v}if(ce(l)!==s)throw new Error($K(r,l));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let v=f-2;v>=0;--v)p[v]=p[v+1]*r[v+1]}const m=[];if(a>0){m[a-1]=1;for(let v=a-2;v>=0;--v)m[v]=m[v+1]*l[v+1]}const _=bn(n,o*a);for(let v=0;v<o;++v){let g=0;for(let x=0;x<f;++x)g+=t[v*f+x]*p[x];for(let x=0;x<a;++x)_[v*a+x]=Math.trunc(g/m[x]),g%=m[x]}return[_,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $P(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],h=a>0?i[a-1]+1:0;if(h<0)throw new Error(yE());const f=e.slice();f[0]=h;const p=f.reduce((b,w)=>b*w,1),m=bn(n,p);if(a===0)return h>0&&m.fill(o),[m,f];if(h<=0)throw new Error(yE());let _=0,v=1,g=0,x=i[_];for(;;){let b=0;if(v<a){if(b=i[v],x===b){++v;continue}if(x>=b)throw new Error(EK())}if(x<0||x>=h)throw new Error(IK(x,h));x>g&&m.fill(o,g*u,x*u);for(let w=_;w<v;++w){const k=r[w];if(k<0||k>=l[0])throw new Error(AK(w,r[w],l[0]));for(let C=0;C<u;C++)m[x*u+C]+=t[k*u+C]}if(s)for(let w=0;w<u;w++)m[x*u+w]/=v-_;if(_=v,++v,g=x+1,x=b,v>a)break}return g<h&&m.fill(o,g*u,h*u),[m,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxe=ta(t=>Math.sqrt(t)),wxe=It(Hy,t=>Math.sqrt(t)),Sxe={kernelName:Hy,backendName:"cpu",kernelFunc:wxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7=Tn((t,e)=>{const n=t-e;return n*n}),kxe=Wn(Ky,P7),Cxe={kernelName:Ky,backendName:"cpu",kernelFunc:kxe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7=ta((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),Txe=lu(FO,R7),$xe={kernelName:FO,backendName:"cpu",kernelFunc:Txe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D7(t,e,n,r){const i=rt(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Exe{constructor(e,n,r,i,s,o){this.separator=Rl(e),this.nGramWidths=n,this.leftPad=Rl(r),this.rightPad=Rl(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),c=Math.max(0,l-(s-(a+1))),h=o-(u+c),f=n+(u>0?0:a-l);let p=0;p+=u*this.leftPad.length;for(let x=0;x<h;++x)p+=e[f+x].length;p+=c*this.rightPad.length;const m=u+c+h-1;p+=m*this.separator.length,r[i+a]=new Uint8Array(p);const _=r[i+a];let v=0;const g=x=>x.forEach(b=>_[v++]=b);for(let x=0;x<u;++x)g(this.leftPad),g(this.separator);for(let x=0;x<h-1;++x)g(e[f+x]),g(this.separator);if(h>0){g(e[f+h-1]);for(let x=0;x<c;++x)g(this.separator),g(this.rightPad)}else{for(let x=0;x<c-1;++x)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=bn("int32",i);if(r===0||i===0){const l=new Array(r);for(let u=0;u<=s;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(h=>{c+=this.getNumNGrams(u,h)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const a=new Array(o[s]);for(let l=0;l<s;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(h=>{const f=n[l+1]-n[l],p=this.getNumNGrams(f,h);this.createNGrams(e,u,a,c,p,h),c+=p}),this.preserveShort&&c===o[l]){const h=n[l+1]-n[l];if(h===0)continue;const f=h+2*this.padWidth;this.createNGrams(e,u,a,c,1,f)}}return[a,o]}}function M7(t,e,n,r,i,s,o,a){return new Exe(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function L7(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const p=i.length;Ixe(t[f],e,n,i);const m=i.length-p;a[f]=m,s+=m,o=Math.max(o,m)}const l=bn("int32",s*2),u=new Array(s),c=[r,o];let h=0;for(let f=0;f<r;++f)for(let p=0;p<a[f];++p)l[h*2]=f,l[h*2+1]=p,u[h]=i[h],++h;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F7(t,e){const n=bn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=cce(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B7=Tn((t,e)=>t-e),Axe=SP((t,e,n,r)=>({real:t-n,imag:e-r})),EP=Wn(qy,B7,Axe),Oxe={kernelName:qy,backendName:"cpu",kernelFunc:EP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=rt(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Up=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function j7(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*c/a+h)),p=Math.min(r,Math.floor(e+(a-l)*c/a+h));j7(t,e,f,p)}const i=t[e];let s=n,o=r;for(Ch(t,n,e),Up(t[r],i)>0&&Ch(t,n,r);s<o;){for(Ch(t,s,o),s++,o--;Up(t[s],i)<0;)s=s+1;for(;Up(t[o],i)>0;)o=o-1}Up(t[n],i)===0?Ch(t,n,o):(o=o+1,Ch(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function V7(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=br(n,o*r),u=br("int32",o*r);for(let h=0;h<o;h++){const f=h*a,p=t.subarray(f,f+a);let m=new Array(p.length);p.forEach((x,b)=>m[b]={value:x,index:b}),r<m.length&&(j7(m,r),m=m.slice(0,r)),i&&m.sort(Up);const _=h*r,v=l.subarray(_,_+r),g=u.subarray(_,_+r);for(let x=0;x<r;x++)v[x]=m[x].value,g[x]=m[x].index}const c=e.slice();return c[c.length-1]=r,[rt(c,n,l),rt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7(t,e,n,r){const i=it(e,n)[0],s=[1,n[0],1];for(let m=0;m<i;m++)s[0]*=n[m];s[1]=n[i];for(let m=i+1;m<n.length;m++)s[2]*=n[m];const o=new Map,a=new Int32Array(n[i]),l=new lr(s,r,t),u=[],c=s[0]===1&&s[2]===1;for(let m=0;m<n[i];m++){let _;if(c)_=t[m].toString();else{const g=[];for(let x=0;x<s[0];x++)for(let b=0;b<s[2];b++)g.push(l.get(x,m,b));_=g.join(",")}const v=o.get(_);if(v!=null)a[m]=v;else{const g=o.size;o.set(_,g),a[m]=g,u.push(m)}}const h=s.slice();h[1]=o.size;const f=new lr(h,r);u.forEach((m,_)=>{for(let v=0;v<s[0];v++)for(let g=0;g<s[2];g++)f.set(l.get(v,m,g),v,_,g)});const p=n.slice();return p[i]=h[1],{outputValues:f.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nxe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:J9,bincountImpl:kP,bincountReduceImpl:Q9,bitwiseAndImpl:e7,castImpl:Y9,ceilImpl:t7,concatImpl:n7,equalImpl:r7,expImpl:s7,expm1Impl:a7,floorDivImpl:u7,floorImpl:l7,gatherNdImpl:c7,gatherV2Impl:h7,greaterEqualImpl:d7,greaterImpl:f7,lessEqualImpl:m7,lessImpl:p7,linSpaceImpl:g7,logImpl:y7,maxImpl:v7,maximumImpl:_7,minimumImpl:x7,multiplyImpl:CP,negImpl:b7,notEqualImpl:w7,prodImpl:S7,raggedGatherImpl:k7,raggedRangeImpl:C7,raggedTensorToTensorImpl:T7,rangeImpl:$7,rsqrtImpl:E7,scatterImpl:Xu,sigmoidImpl:vxe,simpleAbsImpl:Z9,sliceImpl:A7,sparseFillEmptyRowsImpl:O7,sparseReshapeImpl:N7,sparseSegmentReductionImpl:$P,sqrtImpl:bxe,squaredDifferenceImpl:P7,staticRegexReplaceImpl:R7,stridedSliceImpl:D7,stringNGramsImpl:M7,stringSplitImpl:L7,stringToHashBucketFastImpl:F7,subImpl:B7,tileImpl:z7,topKImpl:V7,transposeImpl:TP,uniqueImpl:U7},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */l8("cpu",()=>new H1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W7=It(yy,t=>t>=0?t:Math.exp(t)-1),Pxe={kernelName:yy,backendName:"cpu",kernelFunc:W7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;Pe([i],"leakyRelu");const o=ce(i.shape),a=n.data.get(i.dataId).values,l=br("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?s*a[u]:a[u];return n.makeTensorInfo(i.shape,"float32",l)}const Rxe={kernelName:Uw,backendName:"cpu",kernelFunc:G7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dxe=Tn((t,e)=>t<0?e*t:t);function H7(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Pe([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=Dxe(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const Mxe={kernelName:l1,backendName:"cpu",kernelFunc:H7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7=It(My,t=>Math.max(0,t)),Lxe={kernelName:My,backendName:"cpu",kernelFunc:K7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q7=It(Ly,t=>Math.min(Math.max(0,t),6)),Fxe={kernelName:Ly,backendName:"cpu",kernelFunc:q7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dx(t,e,n,r,i){if(n==="linear")return Qo({inputs:{x:e},backend:t});if(n==="relu")return K7({inputs:{x:e},backend:t});if(n==="elu")return W7({inputs:{x:e},backend:t});if(n==="relu6")return q7({inputs:{x:e},backend:t});if(n==="prelu")return H7({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return G7({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return I7({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=ce(i.shape),a=d6(s,o),l=ce(a);F(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,h=u.complexTensorInfos.imag;c.shape=a,h.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const Bxe={kernelName:c1,backendName:"cpu",kernelFunc:zt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;Pe([i,s],"matMul");const l=i.shape.length,u=s.shape.length,c=o?i.shape[l-2]:i.shape[l-1],h=a?s.shape[u-1]:s.shape[u-2],f=o?i.shape[l-1]:i.shape[l-2],p=a?s.shape[u-2]:s.shape[u-1],m=i.shape.slice(0,-2),_=s.shape.slice(0,-2),v=ce(m),g=ce(_),b=Xe(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,p]);F(c===h,()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const w=o?[v,c,f]:[v,f,c],k=a?[g,p,h]:[g,h,p],C=zt({inputs:{x:i},backend:n,attrs:{shape:w}}),T=zt({inputs:{x:s},backend:n,attrs:{shape:k}}),E=o?C.shape[1]:C.shape[2],A=o?C.shape[2]:C.shape[1],$=a?T.shape[1]:T.shape[2],N=Math.max(v,g),P=n.data.get(C.dataId).values,M=n.data.get(T.dataId).values,B=Le(C.shape),z=Le(T.shape),[j,U,D]=o?[B[0],1,B[1]]:[B[0],B[1],1],[W,G,Y]=a?[1,z[1],z[0]]:[z[1],1,z[0]],ee=A*$,se=rt([N,A,$],C.dtype),fe=se.values,le=n.blockSize;for(let de=0;de<N;de++){const Se=de%v,Te=de%g;for(let pe=0;pe<A;pe+=le){const xe=Math.min(pe+le,A);for(let be=0;be<$;be+=le){const he=Math.min(be+le,$);for(let je=0;je<E;je+=le){const Me=Math.min(je+le,E);for(let We=pe;We<xe;We++)for(let Ve=be;Ve<he;Ve++){let Ze=0;for(let ot=je;ot<Me;ot++){const tr=P[Se*j+We*U+ot*D],jt=M[ot*W+Ve*G+Te*Y];Ze+=tr*jt}fe[de*ee+(We*$+Ve)]+=Ze}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(b,se.dtype,se.values)}const zxe={kernelName:Ew,backendName:"cpu",kernelFunc:X7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let f,p,m;const _=[];f=X7({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(p=Of({inputs:{a:f,b:o},backend:n}),_.push(f),f=p),c&&(m=Dx(n,f,c,a,h),_.push(f),f=m);for(const g of _)n.disposeIntermediateTensorInfo(g);return f}const Vxe={kernelName:px,backendName:"cpu",kernelFunc:jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uxe=It(iy,t=>Math.acos(t)),Wxe={kernelName:iy,backendName:"cpu",kernelFunc:Uxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gxe=It(sy,t=>Math.acosh(t)),Hxe={kernelName:sy,backendName:"cpu",kernelFunc:Gxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(t){const{inputs:e,backend:n}=t,r=e;Pe(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=rt(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const qxe={kernelName:rO,backendName:"cpu",kernelFunc:Kxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Pe(i,"all");const a=it(s,i.shape);let l=a;const u=hn(l,i.shape.length);let c=i;u!=null&&(c=ri({inputs:{x:i},backend:n,attrs:{perm:u}}),l=kn(l.length,i.shape.length)),cr("all",l,c.shape.length);const[h,f]=Qn(c.shape,l),p=ce(f),m=wr(ce(h),c.dtype),_=n.data.get(c.dataId).values;for(let g=0;g<m.length;++g){const x=g*p;let b=_[x];for(let w=0;w<p;++w){const k=_[x+w];b=b&&k}m[g]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(h,c.dtype,m);if(o){const g=On(h,a),x=zt({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),x}return v}const Zxe={kernelName:iO,backendName:"cpu",kernelFunc:Xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Pe(i,"any");const a=it(s,i.shape);let l=a;const u=hn(l,i.shape.length);let c=i;u!=null&&(c=ri({inputs:{x:i},backend:n,attrs:{perm:u}}),l=kn(l.length,i.shape.length)),cr("any",l,c.shape.length);const[h,f]=Qn(c.shape,l),p=ce(f),m=wr(ce(h),c.dtype),_=n.data.get(c.dataId).values;for(let g=0;g<m.length;++g){const x=g*p;let b=_[x];for(let w=0;w<p;++w){const k=_[x+w];b=b||k}m[g]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(h,c.dtype,m);if(o){const g=On(h,a),x=zt({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),x}return v}const Jxe={kernelName:sO,backendName:"cpu",kernelFunc:Yxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Pe(i,"argMax");let o=it(s,i.shape);const a=hn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=ri({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=kn(o.length,l.shape.length)),o=[o[0]],cr("argMax",o,l.shape.length);const[c,h]=Qn(l.shape,o),f=ce(c),p=wr(f,"int32"),m=ce(h),_=n.data.get(l.dataId).values;for(let v=0;v<p.length;++v){const g=v*m;let x=_[g],b=0;for(let w=0;w<m;++w){const k=_[g+w];k>x&&(x=k,b=w)}p[v]=b}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",p)}const ebe={kernelName:kw,backendName:"cpu",kernelFunc:Qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Pe(i,"argMin");let o=it(s,i.shape);const a=hn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=ri({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=kn(o.length,l.shape.length)),o=[o[0]],cr("argMin",o,l.shape.length);const[c,h]=Qn(l.shape,o),f=ce(c),p=wr(f,"int32"),m=ce(h),_=n.data.get(l.dataId).values;for(let v=0;v<p.length;++v){const g=v*m;let x=_[g],b=0;for(let w=0;w<m;++w){const k=_[g+w];k<x&&(x=k,b=w)}p[v]=b}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",p)}const nbe={kernelName:Cw,backendName:"cpu",kernelFunc:tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rbe=It(oy,t=>Math.asin(t)),ibe={kernelName:oy,backendName:"cpu",kernelFunc:rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sbe=It(ay,t=>Math.asinh(t)),obe={kernelName:ay,backendName:"cpu",kernelFunc:sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abe=It(ly,t=>Math.atan(t)),lbe={kernelName:ly,backendName:"cpu",kernelFunc:abe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ube=Tn((t,e)=>Math.atan2(t,e)),cbe=Wn(cy,ube),hbe={kernelName:cy,backendName:"cpu",kernelFunc:cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fbe=It(uy,t=>Math.atanh(t)),dbe={kernelName:uy,backendName:"cpu",kernelFunc:fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IP(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,f=i.padInfo.top,p=i.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=rt(i.outShape,n),v=_.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],x=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let w=0;w<i.batchSize;++w){const k=w*g,C=w*r[0];for(let T=0;T<i.inChannels;++T)for(let E=0;E<i.outHeight;++E){const A=E*o-f,$=Math.max(0,A),N=Math.min(i.inHeight,c+A),P=k+E*x;for(let M=0;M<i.outWidth;++M){const B=M*a-p,z=Math.max(0,B),j=Math.min(i.inWidth,h+B);let U=m,D=0,W=0;for(let Y=$;Y<N;Y+=l){const ee=C+Y*r[1];for(let se=z;se<j;se+=u){const fe=ee+se*r[2],le=t[fe+T];s==="max"&&le>U?U=le:s==="avg"&&(D+=le,W++)}if(isNaN(U))break}const G=P+M*b+T;v[G]=s==="avg"?D/W:U}}}return _}function Z7(t,e,n,r,i=!1,s=!1){const o=rt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,_=rt(e,n,t);for(let v=0;v<r.batchSize;++v)for(let g=0;g<r.inChannels;++g)for(let x=0;x<r.outHeight;++x){const b=x*a-p;let w=b;for(;w<0;)w+=u;const k=Math.min(r.inHeight,h+b);for(let C=0;C<r.outWidth;++C){const T=C*l-m;let E=T;for(;E<0;)E+=c;const A=Math.min(r.inWidth,f+T);let $=Number.NEGATIVE_INFINITY,N=-1;for(let P=w;P<k;P+=u){const M=P-b;for(let B=E;B<A;B+=c){const z=B-T,j=_.get(v,P,B,g);j>$&&($=j,i?N=s?((v*r.inHeight+P)*r.inWidth+B)*r.inChannels+g:(P*r.inWidth+B)*r.inChannels+g:N=M*f+z)}}o.set(N,v,x,C,g)}}return o}function Y7(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,f=i.effectiveFilterDepth,p=i.effectiveFilterHeight,m=i.effectiveFilterWidth,_=i.padInfo.front,v=i.padInfo.top,g=i.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=rt(i.outShape,n),w=b.values,k=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],T=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let A=0;A<i.batchSize;++A){const $=A*k,N=A*r[0];for(let P=0;P<i.inChannels;++P)for(let M=0;M<i.outDepth;++M){const B=M*o-_;let z=B;for(;z<0;)z+=u;const j=Math.min(i.inDepth,f+B),U=$+M*C;for(let D=0;D<i.outHeight;++D){const W=D*a-v;let G=W;for(;G<0;)G+=c;const Y=Math.min(i.inHeight,p+W),ee=U+D*T;for(let se=0;se<i.outWidth;++se){const fe=se*l-g;let le=fe;for(;le<0;)le+=h;const de=Math.min(i.inWidth,m+fe),Se=ee+se*E;let Te=x,pe=0,xe=0;for(let he=z;he<j;he+=u){const je=N+he*r[1];for(let Me=G;Me<Y;Me+=c){const We=je+Me*r[2];for(let Ve=le;Ve<de;Ve+=h){const Ze=We+Ve*r[3],ot=t[Ze+P];if(s==="max"&&ot>Te?Te=ot:s==="avg"&&(pe+=ot,xe++),isNaN(Te))break}if(isNaN(Te))break}if(isNaN(Te))break}const be=Se+P;w[be]=s==="avg"?pe/Math.max(xe,1):Te}}}}return b}function pbe(t,e){const n=rt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;for(let _=0;_<e.batchSize;++_)for(let v=0;v<e.inChannels;++v)for(let g=0;g<e.outDepth;++g){const x=g*r-f;let b=x;for(;b<0;)b+=o;const w=Math.min(e.inDepth,u+x);for(let k=0;k<e.outHeight;++k){const C=k*i-p;let T=C;for(;T<0;)T+=a;const E=Math.min(e.inHeight,c+C);for(let A=0;A<e.outWidth;++A){const $=A*s-m;let N=$;for(;N<0;)N+=l;const P=Math.min(e.inWidth,h+$);let M=Number.NEGATIVE_INFINITY,B=-1;for(let z=b;z<w;z+=o){const j=z-x;for(let U=T;U<E;U+=a){const D=U-C;for(let W=N;W<P;W+=l){const G=W-$,Y=t.get(_,z,U,W,v);Y>=M&&(M=Y,B=j*c*h+D*c+G)}}}n.set(B,_,g,k,A,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Pe(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;F(Tr(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Rs(i.shape,s,o,u,a,l);let h;if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))h=Qo({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,p=Le(i.shape),m=IP(f,i.shape,i.dtype,p,c,"avg");h=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return h}const gbe={kernelName:Tw,backendName:"cpu",kernelFunc:mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Pe(i,"avgPool3d");const c=Ha(i.shape,s,o,1,a,l,u),h=n.data.get(i.dataId).values,f=Y7(h,i.shape,i.dtype,Le(i.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const vbe={kernelName:$w,backendName:"cpu",kernelFunc:ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Pe([i,s],"avgPool3DGrad");const c=Ha(s.shape,o,a,1,l,u),h=c.strideDepth,f=c.strideHeight,p=c.strideWidth,m=c.filterDepth,_=c.filterHeight,v=c.filterWidth,g=c.dilationDepth,x=c.dilationHeight,b=c.dilationWidth,w=c.effectiveFilterDepth,k=c.effectiveFilterHeight,C=c.effectiveFilterWidth,T=w-1-c.padInfo.front,E=C-1-c.padInfo.left,A=k-1-c.padInfo.top,$=rt(s.shape,"float32"),N=1/(m*_*v),P=n.bufferSync(i);for(let M=0;M<c.batchSize;++M)for(let B=0;B<c.inChannels;++B)for(let z=0;z<c.inDepth;++z)for(let j=0;j<c.inHeight;++j)for(let U=0;U<c.inWidth;++U){const D=z-T,W=j-A,G=U-E;let Y=0;for(let ee=0;ee<w;ee+=g){const se=(D+ee)/h;if(!(se<0||se>=c.outDepth||Math.floor(se)!==se))for(let fe=0;fe<k;fe+=x){const le=(W+fe)/f;if(!(le<0||le>=c.outHeight||Math.floor(le)!==le))for(let de=0;de<C;de+=b){const Se=(G+de)/p;if(Se<0||Se>=c.outWidth||Math.floor(Se)!==Se)continue;const Te=P.get(M,se,le,Se,B);Y+=Te}}}$.set(Y*N,M,z,j,U,B)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const xbe={kernelName:aO,backendName:"cpu",kernelFunc:_be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;Pe([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Rs(o.shape,a,l,1,u),h=c.strideHeight,f=c.strideWidth,p=c.filterHeight,m=c.filterWidth,_=c.dilationHeight,v=c.dilationWidth,g=c.effectiveFilterHeight,x=c.effectiveFilterWidth,b=x-1-c.padInfo.left,w=g-1-c.padInfo.top,k=rt(o.shape,"float32"),C=1/(p*m),T=n.data.get(i.dataId).values,E=rt(i.shape,"float32",T);for(let A=0;A<c.batchSize;++A)for(let $=0;$<c.inChannels;++$)for(let N=0;N<c.inHeight;++N)for(let P=0;P<c.inWidth;++P){const M=N-w,B=P-b;let z=0;for(let j=0;j<g;j+=_){const U=(M+j)/h;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(let D=0;D<x;D+=v){const W=(B+D)/f;if(W<0||W>=c.outWidth||Math.floor(W)!==W)continue;const G=E.get(A,U,W,$);z+=G}}k.set(z*C,A,N,P,$)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const wbe={kernelName:oO,backendName:"cpu",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;F(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Pe([i,a,l,s,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),_=new Float32Array(c.length),v=m.length,g=p.length,x=f.length,b=h.length;let w=0,k=0,C=0,T=0;for(let E=0;E<c.length;++E)_[E]=m[w++]+(c[E]-h[k++])*p[C++]/Math.sqrt(f[T++]+u),w>=v&&(w=0),k>=b&&(k=0),C>=g&&(C=0),T>=x&&(T=0);return n.makeTensorInfo(i.shape,i.dtype,_)}const kbe={kernelName:zw,backendName:"cpu",kernelFunc:Sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;Pe([i],"batchToSpaceND");const a=s.reduce((g,x)=>g*x),l=iv(i.shape,s,a),u=sv(l.length,s.length),c=ov(i.shape,s,a),h=FN(o,s.length),f=BN(c,o,s.length),p=zt({inputs:{x:i},backend:n,attrs:{shape:l}}),m=ri({inputs:{x:p},backend:n,attrs:{perm:u}}),_=zt({inputs:{x:m},backend:n,attrs:{shape:c}}),v=Ec({inputs:{x:_},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),v}const Tbe={kernelName:Iw,backendName:"cpu",kernelFunc:Cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=kP(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const Ebe={kernelName:lO,backendName:"cpu",kernelFunc:$be};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=Xe(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Abe={kernelName:_6,backendName:"cpu",kernelFunc:Ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Obe=It(dy,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Nbe={kernelName:dy,backendName:"cpu",kernelFunc:Obe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ce(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],h=l[u];r[u]=Math.hypot(c,h)}return n.makeOutput(r,e.shape,"float32")},Rbe={kernelName:Aw,backendName:"cpu",kernelFunc:Pbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nf(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const Dbe={kernelName:TO,backendName:"cpu",kernelFunc:Nf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=it(i,e[0].shape)[0],o=e.map(_=>_.shape);DN(o,s);let a=Wo(e.map(_=>_.shape),s);if(ce(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(_=>ce(_.shape)>0);if(l.length===1)return Qo({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const _=l.map(w=>$c({inputs:{input:w},backend:n})),v=l.map(w=>Nf({inputs:{input:w},backend:n})),g=Pf({inputs:_,backend:n,attrs:{axis:s}}),x=Pf({inputs:v,backend:n,attrs:{axis:s}}),b=vi({inputs:{real:g,imag:x},backend:n});return _.forEach(w=>n.disposeIntermediateTensorInfo(w)),v.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}const u=l.map(_=>{const g=[-1,ce(_.shape.slice(s))];return zt({inputs:{x:_},backend:n,attrs:{shape:g}})}),c=u.map(_=>({vals:n.data.get(_.dataId).values,shape:_.shape}));a=Wo(u.map(_=>_.shape),1);const h=u[0].shape[0]===1,f=n7(c,a,e[0].dtype,h),p=Wo(l.map(_=>_.shape),s),m=n.makeTensorInfo(p,e[0].dtype,f);return u.forEach(_=>n.disposeIntermediateTensorInfo(_)),m}const Mbe={kernelName:Ow,backendName:"cpu",kernelFunc:Pf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J7(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Pe([i,s],"conv2d");const h=Ka(l),f=ur(i.shape,s.shape,o,u,a,c,!1,h),p=f.filterHeight,m=f.filterWidth,_=f.dilationHeight,v=f.dilationWidth,g=f.padInfo.left,x=f.padInfo.top,b=f.dataFormat==="channelsLast",w=new lr(f.outShape,i.dtype),k=Le(i.shape),C=Le(s.shape),T=k[0],E=b?k[1]:k[2],A=b?k[2]:1,$=b?1:k[1],N=w.strides[0],P=b?w.strides[1]:w.strides[2],M=b?w.strides[2]:1,B=b?1:w.strides[1],z=n.data.get(i.dataId).values,j=n.data.get(s.dataId).values,U=w.values;for(let D=0;D<f.batchSize;++D){const W=D*T,G=D*N;for(let Y=0;Y<f.outHeight;++Y){const ee=G+Y*P,se=Y*f.strideHeight-x;for(let fe=0;fe<p;++fe){const le=se+fe*_;if(le<0||le>=f.inHeight)continue;const de=fe*C[0],Se=W+le*E;for(let Te=0;Te<f.outWidth;++Te){const pe=ee+Te*M,xe=Te*f.strideWidth-g;for(let be=0;be<m;++be){const he=xe+be*v;if(he<0||he>=f.inWidth)continue;const je=de+be*C[1],Me=Se+he*A;let We=je;for(let Ve=0;Ve<f.inChannels;++Ve){const Ze=z[Me+Ve*$];for(let ot=0;ot<f.outChannels;++ot)U[pe+ot*B]+=Ze*j[We+ot];We+=f.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,U)}const Lbe={kernelName:Nw,backendName:"cpu",kernelFunc:J7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Pe([i,s],"conv2dBackpropFilter");const h=Ka(l),f=ur(i.shape,c,o,1,a,u,!1,h),{strideHeight:p,strideWidth:m,filterHeight:_,filterWidth:v}=f,g=f.dataFormat==="channelsLast",x=new lr(f.filterShape,"float32"),b=f.padInfo.left,w=f.padInfo.top,k=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=new lr(i.shape,i.dtype,k),E=new lr(s.shape,s.dtype,C);for(let A=0;A<_;++A){const $=Math.max(0,Math.ceil((w-A)/p)),N=Math.min(f.outHeight,(f.inHeight+w-A)/p);for(let P=0;P<v;++P){const M=Math.max(0,Math.ceil((b-P)/m)),B=Math.min(f.outWidth,(f.inWidth+b-P)/m);for(let z=0;z<f.inChannels;++z)for(let j=0;j<f.outChannels;++j){let U=0;for(let D=0;D<f.batchSize;++D)for(let W=$;W<N;++W){const G=A+W*p-w;for(let Y=M;Y<B;++Y){const ee=P+Y*m-b;g?U+=T.get(D,G,ee,z)*E.get(D,W,Y,j):U+=T.get(D,z,G,ee)*E.get(D,j,W,Y)}}x.set(U,A,P,z,j)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Bbe={kernelName:hO,backendName:"cpu",kernelFunc:Fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Pe([i,s],"conv2dBackpropInput");const h=Le(s.shape),f=Le(i.shape);let p=Ka(u);const m=ur(o,s.shape,a,1,l,c,!1,p),_=new lr(m.inShape,"float32"),v=_.values,g=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,[b,w,k]=h,{batchSize:C,filterHeight:T,filterWidth:E,inChannels:A,inHeight:$,inWidth:N,outChannels:P,outHeight:M,outWidth:B,strideHeight:z,strideWidth:j}=m;p=m.dataFormat;const U=T-1-m.padInfo.top,D=E-1-m.padInfo.left,W=p==="channelsLast",G=_.strides[0],Y=W?_.strides[1]:_.strides[2],ee=W?_.strides[2]:1,se=W?1:_.strides[1],fe=f[0],le=W?f[1]:f[2],de=W?f[2]:1,Se=W?1:f[1];for(let Te=0;Te<C;++Te)for(let pe=0;pe<A;++pe)for(let xe=0;xe<$;++xe){const be=xe-U,he=Math.max(0,Math.ceil(be/z)),je=Math.min(M,(T+be)/z);for(let Me=0;Me<N;++Me){const We=Me-D,Ve=Math.max(0,Math.ceil(We/j)),Ze=Math.min(B,(E+We)/j);let ot=0;for(let jt=he;jt<je;++jt){const Nn=jt*z-be;for(let on=Ve;on<Ze;++on){const ui=on*j-We,Ir=fe*Te+le*jt+de*on,ci=b*(T-1-Nn)+w*(E-1-ui)+k*pe;for(let rs=0;rs<P;++rs){const Bs=g[Ir+Se*rs],zs=x[ci+rs];ot+=Bs*zs}}}const tr=G*Te+Y*xe+ee*Me+se*pe;v[tr]=ot}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const jbe={kernelName:Pw,backendName:"cpu",kernelFunc:zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;Pe([i,s],"conv3d");const u=nu(i.shape,s.shape,o,l,a),{filterDepth:c,filterHeight:h,filterWidth:f,dilationDepth:p,dilationHeight:m,dilationWidth:_,padInfo:v}=u,g=v.front,x=v.left,b=v.top,w=new lr(u.outShape,i.dtype),k=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=w.values,E=Le(i.shape),A=Le(s.shape);for(let $=0;$<u.batchSize;++$){const N=$*E[0],P=$*w.strides[0];for(let M=0;M<u.outDepth;++M){const B=P+M*w.strides[1],z=M*u.strideDepth-g;for(let j=0;j<c;++j){const U=z+j*p;if(U<0||U>=u.inDepth)continue;const D=j*A[0],W=N+U*E[1];for(let G=0;G<u.outHeight;++G){const Y=B+G*w.strides[2],ee=G*u.strideHeight-b;for(let se=0;se<h;++se){const fe=ee+se*m;if(fe<0||fe>=u.inHeight)continue;const le=D+se*A[1],de=W+fe*E[2];for(let Se=0;Se<u.outWidth;++Se){const Te=Y+Se*u.outChannels,pe=Se*u.strideWidth-x;for(let xe=0;xe<f;++xe){const be=pe+xe*_;if(be<0||be>=u.inWidth)continue;const he=le+xe*A[2],je=de+be*u.inChannels;let Me=he;for(let We=0;We<u.inChannels;++We){const Ve=k[je+We];for(let Ze=0;Ze<u.outChannels;++Ze)T[Te+Ze]+=Ve*C[Me+Ze];Me+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Ube={kernelName:Rw,backendName:"cpu",kernelFunc:Vbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;Pe([i,s],"conv3dBackpropFilterV2");const u=Le(i.shape),c=Le(s.shape),h=nu(i.shape,l,o,1,a),f=h.strideDepth,p=h.strideHeight,m=h.strideWidth,_=h.filterDepth,v=h.filterHeight,g=h.filterWidth,x=new lr(h.filterShape,"float32"),b=x.values,[w,k,C,T]=x.strides,E=n.data.get(s.dataId).values,[A,$,N,P]=c,M=n.data.get(i.dataId).values,[B,z,j,U]=u,D=h.padInfo.front,W=h.padInfo.left,G=h.padInfo.top;for(let Y=0;Y<_;++Y){const ee=Math.max(0,Math.ceil((D-Y)/f)),se=Math.min(h.outDepth,(h.inDepth+D-Y)/f),fe=Y*w;for(let le=0;le<v;++le){const de=Math.max(0,Math.ceil((G-le)/p)),Se=Math.min(h.outHeight,(h.inHeight+G-le)/p),Te=le*k+fe;for(let pe=0;pe<g;++pe){const xe=Math.max(0,Math.ceil((W-pe)/m)),be=Math.min(h.outWidth,(h.inWidth+W-pe)/m),he=pe*C+Te;for(let je=0;je<h.inChannels;++je){const Me=je*T+he;for(let We=0;We<h.outChannels;++We){let Ve=0;for(let Ze=0;Ze<h.batchSize;++Ze){const ot=Ze*B,tr=Ze*A;for(let jt=ee;jt<se;++jt){const on=(Y+jt*f-D)*z+ot,ui=jt*$+tr;for(let Ir=de;Ir<Se;++Ir){const rs=(le+Ir*p-G)*j+on,Bs=Ir*N+ui;for(let zs=xe;zs<be;++zs){const rh=(pe+zs*m-W)*U+rs,ih=zs*P+Bs;Ve+=M[rh+je]*E[ih+We]}}}}b[Me+We]=Ve}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Gbe={kernelName:fO,backendName:"cpu",kernelFunc:Wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;Pe([i],"conv3dBackpropInputV2");const u=Le(i.shape),c=Le(s.shape),h=nu(l,s.shape,a,1,o),f=new lr(h.inShape,"float32"),p=f.values,[m,_,v,g]=f.strides,x=n.data.get(i.dataId).values,[b,w,k,C]=u,T=n.data.get(s.dataId).values,[E,A,$,N]=c,{batchSize:P,filterDepth:M,filterHeight:B,filterWidth:z,inChannels:j,inDepth:U,inHeight:D,inWidth:W,outChannels:G,outDepth:Y,outHeight:ee,outWidth:se,strideDepth:fe,strideHeight:le,strideWidth:de}=h,Se=M-1-h.padInfo.front,Te=B-1-h.padInfo.top,pe=z-1-h.padInfo.left;for(let xe=0;xe<P;++xe)for(let be=0;be<j;++be)for(let he=0;he<U;++he){const je=he-Se,Me=Math.max(0,Math.ceil(je/fe)),We=Math.min(Y,(M+je)/fe);for(let Ve=0;Ve<D;++Ve){const Ze=Ve-Te,ot=Math.max(0,Math.ceil(Ze/le)),tr=Math.min(ee,(B+Ze)/le);for(let jt=0;jt<W;++jt){const Nn=jt-pe,on=Math.max(0,Math.ceil(Nn/de)),ui=Math.min(se,(z+Nn)/de);let Ir=0;for(let ci=Me;ci<We;++ci){const rs=ci*fe-je;for(let Bs=ot;Bs<tr;++Bs){const zs=Bs*le-Ze;for(let mu=on;mu<ui;++mu){const rh=mu*de-Nn,ih=b*xe+w*ci+k*Bs+C*mu,rk=E*(M-1-rs)+A*(B-1-zs)+$*(z-1-rh)+N*be;for(let gu=0;gu<G;++gu){const Gd=x[ih+gu],Rv=T[rk+gu];Ir+=Gd*Rv}}}}p[m*xe+_*he+v*Ve+g*jt+be]=Ir}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const Kbe={kernelName:dO,backendName:"cpu",kernelFunc:Hbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qbe=It(py,t=>Math.cos(t)),Xbe={kernelName:py,backendName:"cpu",kernelFunc:qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zbe=It(my,t=>Math.cosh(t)),Ybe={kernelName:my,backendName:"cpu",kernelFunc:Zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,h,f,p]=i.shape,m=s.shape[0],[_,v]=a,g=rt([m,_,v,p],"float32"),x=n.data.get(s.dataId).values,b=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,k=Le(i.shape),C=Le(g.shape);for(let T=0;T<m;T++){const E=T*4,A=x[E],$=x[E+1],N=x[E+2],P=x[E+3],M=b[T];if(M>=c)continue;const B=_>1?(N-A)*(h-1)/(_-1):0,z=v>1?(P-$)*(f-1)/(v-1):0;for(let j=0;j<_;j++){const U=_>1?A*(h-1)+j*B:.5*(A+N)*(h-1);if(U<0||U>h-1){for(let D=0;D<v;D++)for(let W=0;W<p;W++){const G=W+D*C[2]+j*C[1]+T*C[0];g.values[G]=u}continue}if(l==="bilinear"){const D=Math.floor(U),W=Math.ceil(U),G=U-D;for(let Y=0;Y<v;Y++){const ee=v>1?$*(f-1)+Y*z:.5*($+P)*(f-1);if(ee<0||ee>f-1){for(let de=0;de<p;de++){const Se=de+Y*C[2]+j*C[1]+T*C[0];g.values[Se]=u}continue}const se=Math.floor(ee),fe=Math.ceil(ee),le=ee-se;for(let de=0;de<p;de++){let Se=de+se*k[2]+D*k[1]+M*k[0];const Te=w[Se];Se=de+fe*k[2]+D*k[1]+M*k[0];const pe=w[Se];Se=de+se*k[2]+W*k[1]+M*k[0];const xe=w[Se];Se=de+fe*k[2]+W*k[1]+M*k[0];const be=w[Se],he=Te+(pe-Te)*le,je=xe+(be-xe)*le;Se=de+Y*C[2]+j*C[1]+T*C[0],g.values[Se]=he+(je-he)*G}}}else for(let D=0;D<v;++D){const W=v>1?$*(f-1)+D*z:.5*($+P)*(f-1);if(W<0||W>f-1){for(let ee=0;ee<p;ee++){const se=ee+D*C[2]+j*C[1]+T*C[0];g.values[se]=u}continue}const G=Math.round(W),Y=Math.round(U);for(let ee=0;ee<p;ee++){const se=ee+G*k[2]+Y*k[1]+M*k[0],fe=ee+D*C[2]+j*C[1]+T*C[0];g.values[fe]=w[se]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Qbe={kernelName:mO,backendName:"cpu",kernelFunc:Jbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;Pe(i,"cumprod");const l=hn([s],i.shape.length);let u=i;l!=null&&(u=ri({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=kn(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=Ti(u.dtype,"int32"),f=eO(ce(u.shape),h),p=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],_=a?(g,x)=>g+m-x-1:(g,x)=>g+x;for(let g=0;g<p.length;g+=m)for(let x=0;x<m;x++){const b=_(g,x);if(x===0)f[b]=o?1:p[b];else{const w=_(g,x-1);f[b]=o?p[w]*f[w]:p[b]*f[w]}}const v=n.makeTensorInfo(u.shape,h,f);if(l!=null){const g=ru(l),x=ri({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const twe={kernelName:pO,backendName:"cpu",kernelFunc:ewe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;Pe(i,"cumsum");const l=hn([s],i.shape.length);let u=i;l!=null&&(u=ri({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=kn(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=Ti(u.dtype,"int32"),f=wr(ce(u.shape),h),p=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],_=a?(g,x)=>g+m-x-1:(g,x)=>g+x;for(let g=0;g<p.length;g+=m)for(let x=0;x<m;x++){const b=_(g,x);if(x===0)f[b]=o?0:p[b];else{const w=_(g,x-1);f[b]=o?p[w]+f[w]:p[b]+f[w]}}const v=n.makeTensorInfo(u.shape,h,f);if(l!=null){const g=ru(l),x=ri({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const rwe={kernelName:Dw,backendName:"cpu",kernelFunc:nwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=kP(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=Q9(l,u,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const swe={kernelName:gO,backendName:"cpu",kernelFunc:iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;F(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],h=l*s,f=u*s,p=c/(s*s),m=n.data.get(i.dataId).values,_=new Float32Array(a*h*f*p);let v=0;for(let g=0;g<a;++g)for(let x=0;x<h;++x){const b=Math.floor(x/s),w=x%s;for(let k=0;k<f;++k){const C=Math.floor(k/s),T=k%s,E=(w*s+T)*p;for(let A=0;A<p;++A){const N=A+E+c*(C+u*(b+l*g));_[v++]=m[N]}}}return n.makeTensorInfo([a,h,f,p],i.dtype,_)}const awe={kernelName:yO,backendName:"cpu",kernelFunc:owe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;Pe([i,s],"depthwiseConv2DNative");const c=Le(i.shape),h=Le(s.shape);let f=l;f==null&&(f=[1,1]),F(Tr(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const p=ur(i.shape,s.shape,o,f,a,u,!0),{filterHeight:m,filterWidth:_,dilationHeight:v,dilationWidth:g,padInfo:x}=p,b=x.left,w=x.top,k=p.outChannels/p.inChannels,C=new lr(p.outShape,i.dtype),T=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,A=C.values;for(let $=0;$<p.batchSize;++$){const N=$*c[0],P=$*C.strides[0];for(let M=0;M<p.outHeight;++M){const B=P+M*C.strides[1],z=M*p.strideHeight-w;for(let j=0;j<m;++j){const U=z+j*v;if(U<0||U>=p.inHeight)continue;const D=j*h[0],W=N+U*c[1];for(let G=0;G<p.outWidth;++G){const Y=B+G*C.strides[2],ee=G*p.strideWidth-b;for(let se=0;se<_;++se){const fe=ee+se*g;if(fe<0||fe>=p.inWidth)continue;const le=D+se*h[1],de=W+fe*p.inChannels;let Se=Y,Te=le;for(let pe=0;pe<p.inChannels;++pe){const xe=T[de+pe];for(let be=0;be<k;++be)A[Se+be]+=xe*E[Te+be];Se+=k,Te+=k}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const lwe={kernelName:Mw,backendName:"cpu",kernelFunc:Q7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Pe([i,s],"depthwiseConv2dNativeBackpropFilter");const h=ur(i.shape,c,o,a,l,u,!0),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:_}=h,v=new lr(h.filterShape,"float32"),g=h.padInfo.left,x=h.padInfo.top,b=h.outChannels/h.inChannels,w=n.data.get(i.dataId).values,k=new lr(i.shape,i.dtype,w),C=n.data.get(s.dataId).values,T=new lr(s.shape,s.dtype,C);for(let E=0;E<m;++E){const A=Math.max(0,Math.ceil((x-E)/f)),$=Math.min(h.outHeight,(h.inHeight+x-E)/f);for(let N=0;N<_;++N){const P=Math.max(0,Math.ceil((g-N)/p)),M=Math.min(h.outWidth,(h.inWidth+g-N)/p);for(let B=0;B<h.outChannels;++B){const z=Math.trunc(B/b),j=B%b;let U=0;for(let D=0;D<h.batchSize;++D)for(let W=A;W<$;++W){const G=E+W*f-x;for(let Y=P;Y<M;++Y){const ee=N+Y*p-g;U+=k.get(D,G,ee,z)*T.get(D,W,Y,B)}}v.set(U,E,N,z,j)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const cwe={kernelName:vO,backendName:"cpu",kernelFunc:uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Pe([i,s],"depthwiseConv2DNativeBackpropInput");const h=Le(i.shape),f=Le(s.shape),p=ur(c,s.shape,o,a,l,u,!0),m=new lr(p.inShape,"float32"),_=m.values,[v,g,x]=m.strides,b=n.data.get(i.dataId).values,[w,k,C]=h,T=n.data.get(s.dataId).values,[E,A,$]=f,{batchSize:N,filterHeight:P,filterWidth:M,inChannels:B,inHeight:z,inWidth:j,outChannels:U,outHeight:D,outWidth:W,strideHeight:G,strideWidth:Y}=p,ee=P-1-p.padInfo.top,se=M-1-p.padInfo.left,fe=U/B;for(let le=0;le<N;++le)for(let de=0;de<B;++de)for(let Se=0;Se<z;++Se){const Te=Se-ee,pe=Math.max(0,Math.ceil(Te/G)),xe=Math.min(D,(P+Te)/G);for(let be=0;be<j;++be){const he=be-se,je=Math.max(0,Math.ceil(he/Y)),Me=Math.min(W,(M+he)/Y);let We=0;for(let Ve=pe;Ve<xe;++Ve){const Ze=Ve*G-Te;for(let ot=je;ot<Me;++ot){const tr=ot*Y-he,jt=w*le+k*Ve+C*ot,Nn=E*(P-1-Ze)+A*(M-1-tr)+$*de;for(let on=0;on<fe;++on){const ui=de*fe+on,Ir=b[jt+ui],ci=T[Nn+on];We+=Ir*ci}}}_[v*le+g*Se+x*be+de]=We}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const fwe={kernelName:_O,backendName:"cpu",kernelFunc:hwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=ce(r.shape),s=n.data.get(r.dataId).values,o=rt([i,i],r.dtype),a=o.values;for(let u=0;u<s.length;u++)a[u*i+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const pwe={kernelName:x6,backendName:"cpu",kernelFunc:dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mwe={kernelName:Lw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,h=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:p,inHeight:m,inWidth:_,inChannels:v,outHeight:g,outWidth:x,padInfo:b,strideHeight:w,strideWidth:k,filterHeight:C,filterWidth:T,dilationHeight:E,dilationWidth:A,outShape:$}=Qy(r.shape,i.shape,s,o,"NHWC",a),N=ce($),P=$.length,M=bn(r.dtype,N);for(let z=0;z<p;++z)for(let j=0;j<g;++j){const U=j*w-b.top;for(let D=0;D<x;++D){const W=D*k-b.left;for(let G=0;G<v;++G){let Y=Number.MIN_SAFE_INTEGER;for(let se=0;se<C;++se){const fe=U+se*E;if(fe>=0&&fe<m)for(let le=0;le<T;++le){const de=W+le*A;if(de>=0&&de<_){const Se=Vo([z,fe,de,G],c,Le(r.shape)),Te=Vo([se,le,G],f,Le(i.shape)),pe=u[Se]+h[Te];pe>Y&&(Y=pe)}}}const ee=Vo([z,j,D,G],P,Le($));M[ee]=Y}}}return{dataId:l.write(zc(M,r.dtype),$,r.dtype),shape:$,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gwe={kernelName:tE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=oo(r.shape,u.data.get(r.dataId).values),h=oo(i.shape,u.data.get(i.dataId).values),{batchSize:f,inHeight:p,inWidth:m,inChannels:_,outHeight:v,outWidth:g,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:C,dilationHeight:T,dilationWidth:E,outShape:A}=Qy(r.shape,i.shape,o,a,"NHWC",l);F(s.rank===A.length,()=>`Error in ${tE}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);const $=oo(A,u.data.get(s.dataId).values),N=g6(i.shape,i.dtype);for(let M=0;M<f;++M)for(let B=0;B<v;++B){const z=B*b-x.top;for(let j=0;j<g;++j){const U=j*w-x.left;for(let D=0;D<_;++D){let W=Number.MIN_SAFE_INTEGER,G=0,Y=0;for(let ee=0;ee<k;++ee){const se=z+ee*T;if(se>=0&&se<p)for(let fe=0;fe<C;++fe){const le=U+fe*E;if(le>=0&&le<m){const de=c[M][se][le][D]+h[ee][fe][D];de>W&&(W=de,G=ee,Y=fe)}}}N[G][Y][D]+=$[M][B][j][D]}}}return{dataId:u.write(zc(N,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ywe={kernelName:eE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=oo(r.shape,u.data.get(r.dataId).values),h=oo(i.shape,u.data.get(i.dataId).values),{batchSize:f,inHeight:p,inWidth:m,inChannels:_,outHeight:v,outWidth:g,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:C,dilationHeight:T,dilationWidth:E,outShape:A}=Qy(r.shape,i.shape,o,a,"NHWC",l);F(s.rank===A.length,()=>`Error in ${eE}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);const $=oo(A,u.data.get(s.dataId).values),N=g6(r.shape,r.dtype);for(let M=0;M<f;++M)for(let B=0;B<v;++B){const z=B*b-x.top;for(let j=0;j<g;++j){const U=j*w-x.left;for(let D=0;D<_;++D){let W=Number.MIN_SAFE_INTEGER,G=z<0?0:z,Y=U<0?0:U;for(let ee=0;ee<k;++ee){const se=z+ee*T;if(se>=0&&se<p)for(let fe=0;fe<C;++fe){const le=U+fe*E;if(le>=0&&le<m){const de=c[M][se][le][D]+h[ee][fe][D];de>W&&(W=de,G=se,Y=le)}}}N[M][G][Y][D]+=$[M][B][j][D]}}}return{dataId:u.write(zc(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const h=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${c} type.`);const[f,p]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],_=n.data.get(i.dataId).values,v=i.dtype==="float32"?255:1,g=new Uint8ClampedArray(p*f*4);for(let b=0;b<f*p;++b){const w=[0,0,0,255*u];for(let C=0;C<m;C++){const T=_[b*m+C];if(i.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(i.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);m===1?(w[0]=T*v,w[1]=T*v,w[2]=T*v):w[C]=T*v}const k=b*4;g[k+0]=Math.round(w[0]),g[k+1]=Math.round(w[1]),g[k+2]=Math.round(w[2]),g[k+3]=Math.round(w[3])}s.width=p,s.height=f;const x=new ImageData(g,p,f);return h.putImageData(x,0,0),i}const _we={kernelName:Que,backendName:"cpu",kernelFunc:vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Pe(i,"sum");let a;i.dtype==="bool"?a=ql({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=Qo({inputs:{x:i},backend:n});const l=a.shape.length,u=it(s,a.shape),c=hn(u,l);let h=u,f=a;c!=null&&(f=ri({inputs:{x:a},backend:n,attrs:{perm:c}}),h=kn(h.length,l)),cr("sum",h,f.shape.length);const[p,m]=Qn(f.shape,h),_=Ti(f.dtype,"int32");let v=Px(n,p,_);const g=ce(m),x=n.data.get(v.dataId).values,b=n.data.get(f.dataId).values;for(let w=0;w<x.length;++w){const k=w*g;let C=0;for(let T=0;T<g;++T)C+=b[k+T];x[w]=C}if(o){const w=On(v.shape,u),k=v;v=zt({inputs:{x:v},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(k)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),v}const xwe={kernelName:g1,backendName:"cpu",kernelFunc:mv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=KN(i,s.length);XN(o.length,l,s);const{path:u,steps:c}=ZN(a,l),h=c.length;let f=null,p=o.length;const m=[];for(let _=0;_<h;++_){for(const v of c[_]){const{permutationIndices:g,expandDims:x}=qN(p,l[v]);let b;YN(g)?b=s[v]:(b=ri({inputs:{x:s[v]},backend:n,attrs:{perm:g}}),m.push(b));const w=b.shape.slice();for(let k=0;k<x.length;++k)w.splice(x[k],0,1);Ct(b.shape,w)||(b=zt({inputs:{x:b},backend:n,attrs:{shape:w}}),m.push(b)),f===null?f=b:(f=K1({inputs:{a:b,b:f},backend:n}),m.push(f))}_<h-1&&(u[_]>=0&&(f=mv({inputs:{x:f},backend:n,attrs:{axis:u[_]-(o.length-p),keepDims:!1}}),m.push(f)),p--)}for(const _ of m)_!==f&&n.disposeIntermediateTensorInfo(_);return f}const wwe={kernelName:xO,backendName:"cpu",kernelFunc:bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Pe([r,i],"eluGrad");const s=new Float32Array(ce(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?s[l]=a[l]:s[l]=a[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",s)}const kwe={kernelName:bO,backendName:"cpu",kernelFunc:Swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cwe=zN,Twe=jN,$we=VN,Ewe=UN,Iwe=WN,Awe=GN,Owe=It(vy,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Cwe*n);return e*(1-((((Awe*r+Iwe)*r+Ewe)*r+$we)*r+Twe)*r*Math.exp(-n*n))}),Nwe={kernelName:vy,backendName:"cpu",kernelFunc:Owe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mx(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(F(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),zt({inputs:{x:i},backend:n,attrs:{shape:a}})}const Pwe={kernelName:Bw,backendName:"cpu",kernelFunc:Mx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe=Tn((t,e)=>t/e),AP=Wn(gy,Rwe),EE={kernelName:gy,backendName:"cpu",kernelFunc:AP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,s],c=ce(u),h=br("float32",c),f=br("float32",c);for(let v=0;v<i;v++){const g=Ec({inputs:{x:a},backend:n,attrs:{begin:[v,0],size:[1,s]}}),x=Ec({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,s]}}),b=vi({inputs:{real:g,imag:x},backend:n}),{real:w,imag:k}=Dwe(b,e,n),C=Da(w,k);for(let T=0;T<s;T++){const E=HN(C,T);h[v*s+T]=E.real,f[v*s+T]=E.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b)}const p=n.makeTensorInfo(u,"float32",h),m=n.makeTensorInfo(u,"float32",f),_=vi({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),_}function Dwe(t,e,n){const r=ce(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(Mwe(r)){const a=IE(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),h=n.makeTensorInfo([],"float32",tu(r,"float32")),f=Qo({inputs:{x:h},backend:n}),p=EE.kernelFunc({inputs:{a:u,b:h},backend:n}),m=EE.kernelFunc({inputs:{a:c,b:f},backend:n}),_=n.data.get(p.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),{real:_,imag:v}}return a}else{const a=Da(s,o),l=Lwe(a,r,e);return pK(l)}}function Mwe(t){return(t&t-1)===0}function IE(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=Da(t,e),o=n/2,a=mK(s),l=a.real,u=a.imag,c=[l.length],h=i.makeTensorInfo(c,"float32",l),f=i.makeTensorInfo(c,"float32",u),p=vi({inputs:{real:h,imag:f},backend:i}),m=gK(s),_=m.real,v=m.imag,g=[_.length],x=i.makeTensorInfo(g,"float32",_),b=i.makeTensorInfo(g,"float32",v),w=vi({inputs:{real:x,imag:b},backend:i}),k=IE(l,u,o,r,i),C=k.real,T=k.imag,E=[C.length],A=i.makeTensorInfo(E,"float32",C),$=i.makeTensorInfo(E,"float32",T),N=vi({inputs:{real:A,imag:$},backend:i}),P=IE(_,v,o,r,i),M=P.real,B=P.imag,z=[M.length],j=i.makeTensorInfo(z,"float32",M),U=i.makeTensorInfo(z,"float32",B),D=vi({inputs:{real:j,imag:U},backend:i}),W=vK(n,r),G=[W.real.length],Y=i.makeTensorInfo(G,"float32",W.real),ee=i.makeTensorInfo(G,"float32",W.imag),se=vi({inputs:{real:Y,imag:ee},backend:i}),fe=K1({inputs:{a:se,b:D},backend:i}),le=Of({inputs:{a:N,b:fe},backend:i}),de=EP({inputs:{a:N,b:fe},backend:i}),Se=$c({inputs:{input:le},backend:i}),Te=$c({inputs:{input:de},backend:i}),pe=Nf({inputs:{input:le},backend:i}),xe=Nf({inputs:{input:de},backend:i}),be=Pf({inputs:[Se,Te],backend:i,attrs:{axis:0}}),he=Pf({inputs:[pe,xe],backend:i,attrs:{axis:0}}),je=i.data.get(be.dataId).values,Me=i.data.get(he.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(de),i.disposeIntermediateTensorInfo(Se),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(Te),i.disposeIntermediateTensorInfo(xe),i.disposeIntermediateTensorInfo(be),i.disposeIntermediateTensorInfo(he),{real:je,imag:Me}}function Lwe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=_K(i*a,e,n),u=HN(t,a);s+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(s/=e,o/=e),yK(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ce(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=zt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=eX(a,!1,n),u=zt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const Bwe={kernelName:wO,backendName:"cpu",kernelFunc:Fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||hd(i),a=bn(o,ce(r));return jwe(a,i,o),e.makeTensorInfo(r,o,a)}const zwe={kernelName:SO,backendName:"cpu",kernelFunc:OP};function jwe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vwe={kernelName:kO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=br(r.dtype,ce(r.shape)),[o,a,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const p=f*l*a*u;for(let m=0;m<a;m++){const _=m*(l*u);for(let v=0;v<l;v++){const g=v*u;for(let x=0;x<u;x++){const b=Math.round(l-v-1),w=p+_+g+x;let k=c[w];if(b>=0&&b<l){const C=b*u,T=p+_+C+x;k=c[T]}s[w]=k}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:m}=r;let _=J7({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){const v=_;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=zt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});_=Of({inputs:{a:_,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else _=Of({inputs:{a:_,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(p){const v=_;if(c==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=zt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});_=Dx(n,_,p,g,m),n.disposeIntermediateTensorInfo(g)}else _=Dx(n,_,p,a,m);n.disposeIntermediateTensorInfo(v)}return _}const Wwe={kernelName:mx,backendName:"cpu",kernelFunc:Uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:m}=r;let _=Q7({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){const v=_;_=Of({inputs:{a:_,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){const v=_;_=Dx(n,_,p,a,m),n.disposeIntermediateTensorInfo(v)}return _}const Hwe={kernelName:B6,backendName:"cpu",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=ce(r.shape),o=i.shape,a=o[o.length-1],[l,u,c,h]=IN(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,p=n.bufferSync(r),m=c7(f,p,r.dtype,u,a,c,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,m.values)}const qwe={kernelName:b6,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;Pe([i,s],"gatherV2");const l=it(o,i.shape)[0],u=n.data.get(s.dataId).values,c=i.shape[l];for(let w=0;w<u.length;++w){const k=u[w];F(k<=c-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${c-1}]`)}let h=a;a==null&&(h=0);const f=ce(s.shape),p=QN(i,s,l,h),m=zt({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),_=zt({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}}),v=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],g=n.bufferSync(_),x=n.bufferSync(m),b=h7(x,g,v);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}const Zwe={kernelName:jw,backendName:"cpu",kernelFunc:Xwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ce(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=zt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=eX(a,!0,n),u=zt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const Jwe={kernelName:CO,backendName:"cpu",kernelFunc:Ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe=It(Cy,t=>Number.isFinite(t)?1:0,"bool"),e1e={kernelName:Cy,backendName:"cpu",kernelFunc:Qwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t1e=It(Ty,t=>Math.abs(t)===1/0?1:0,"bool"),n1e={kernelName:Ty,backendName:"cpu",kernelFunc:t1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r1e=It($y,t=>Number.isNaN(t)?1:0,"bool"),i1e={kernelName:$y,backendName:"cpu",kernelFunc:r1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=g7(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const o1e={kernelName:w6,backendName:"cpu",kernelFunc:s1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a1e=It(Iy,t=>Math.log1p(t)),l1e={kernelName:Iy,backendName:"cpu",kernelFunc:a1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1e=Tn((t,e)=>t&&e),c1e=Wn(Hw,u1e,null,"bool"),h1e={kernelName:Hw,backendName:"cpu",kernelFunc:c1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f1e=It(Kw,t=>t?0:1,"bool"),d1e={kernelName:Kw,backendName:"cpu",kernelFunc:f1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1e=Tn((t,e)=>t||e),m1e=Wn(qw,p1e,null,"bool"),g1e={kernelName:qw,backendName:"cpu",kernelFunc:m1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;Pe(i,"LRN");const u=i.shape[3],c=u-1,h=n.data.get(i.dataId).values,f=ce(i.shape),p=new Float32Array(f);function m(_){const v=_%u;let g=_-v+Math.max(0,v-s);const x=_-v+Math.min(v+s,c);let b=0;for(;g<=x;g++){const w=h[g];b+=w*w}return b}for(let _=0;_<f;_++){const v=m(_),g=h[_]*Math.pow(o+a*v,-l);p[_]=g}return n.makeTensorInfo(i.shape,i.dtype,p)}const v1e={kernelName:Xw,backendName:"cpu",kernelFunc:y1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Pe(o,"LRNGrad");const h=ce(o.shape),f=o.shape[3],p=n.data.get(o.dataId).values,m=n.data.get(i.dataId).values,_=n.data.get(s.dataId).values,v=new Float32Array(h),g=h;for(let x=0;x<g;x++){const b=x%f,w=x-b+Math.max(0,b-a),k=x-b+Math.min(f,b+a+1);let C=0;for(let T=w;T<k;T++)C+=Math.pow(m[T],2);C=u*C+l;for(let T=w;T<k;T++){let E=-2*u*c*m[T]*_[x]/C;x===T&&(E+=Math.pow(C,-c)),E*=p[x],v[T]+=E}}return n.makeTensorInfo(o.shape,i.dtype,v)}const x1e={kernelName:$O,backendName:"cpu",kernelFunc:_1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const u=l.length,c=it(s,l);let h=c;const f=hn(h,u);let p=a.data.get(i.dataId).values;if(f!=null){const w=new Array(u);for(let k=0;k<w.length;k++)w[k]=l[f[k]];p=TP(p,l,i.dtype,f,w),h=kn(h.length,u),l=w}Pe(i,"max"),cr("max",h,u);const[m,_]=Qn(l,h),v=ce(_),g=v7(p,v,m,i.dtype),x=a.write(g,m,i.dtype);let b=m;return o&&(b=On(m,c)),{dataId:x,shape:b,dtype:i.dtype}}const b1e={kernelName:Zw,backendName:"cpu",kernelFunc:tX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Pe(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;F(Tr(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Rs(i.shape,s,o,u,a,l);let h;if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))h=Qo({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,p=Le(i.shape),m=IP(f,i.shape,i.dtype,p,c,"max");h=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return h}const S1e={kernelName:Yw,backendName:"cpu",kernelFunc:w1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Pe(i,"maxPool3d");const c=Ha(i.shape,s,o,1,a,l,u),h=n.data.get(i.dataId).values,f=Y7(h,i.shape,i.dtype,Le(i.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const C1e={kernelName:Jw,backendName:"cpu",kernelFunc:k1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Pe([i,s],"maxPool3DGrad");const c=Ha(s.shape,o,a,1,l,u),h=n.bufferSync(s),f=pbe(h,c),p=c.strideDepth,m=c.strideHeight,_=c.strideWidth,v=c.dilationDepth,g=c.dilationHeight,x=c.dilationWidth,b=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=b-1-c.padInfo.front,T=k-1-c.padInfo.left,E=w-1-c.padInfo.top,A=rt(s.shape,"float32"),$=n.bufferSync(i);for(let N=0;N<c.batchSize;++N)for(let P=0;P<c.inChannels;++P)for(let M=0;M<c.inDepth;++M)for(let B=0;B<c.inHeight;++B)for(let z=0;z<c.inWidth;++z){const j=M-C,U=B-E,D=z-T;let W=0;for(let G=0;G<b;G+=v){const Y=(j+G)/p;if(!(Y<0||Y>=c.outDepth||Math.floor(Y)!==Y))for(let ee=0;ee<w;ee+=g){const se=(U+ee)/m;if(!(se<0||se>=c.outHeight||Math.floor(se)!==se))for(let fe=0;fe<k;fe+=x){const le=(D+fe)/_;if(le<0||le>=c.outWidth||Math.floor(le)!==le)continue;const de=b*w*k-1-f.get(N,Y,se,le,P),Se=G*w*k+ee*k+fe,Te=de===Se?1:0;if(Te===0)continue;const pe=$.get(N,Y,se,le,P);W+=pe*Te}}}A.set(W,N,M,B,z,P)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const $1e={kernelName:IO,backendName:"cpu",kernelFunc:T1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;Pe([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,f=Rs(a.shape,l,u,1,c,h),p=n.data.get(a.dataId).values,m=rt(f.outShape,a.dtype,Z7(p,a.shape,a.dtype,f).values),_=f.strideHeight,v=f.strideWidth,g=f.dilationHeight,x=f.dilationWidth,b=f.effectiveFilterHeight,w=f.effectiveFilterWidth,k=w-1-f.padInfo.left,C=b-1-f.padInfo.top,T=rt(a.shape,"float32"),E=n.data.get(i.dataId).values,A=rt(i.shape,"float32",E);for(let $=0;$<f.batchSize;++$)for(let N=0;N<f.inChannels;++N)for(let P=0;P<f.inHeight;++P)for(let M=0;M<f.inWidth;++M){const B=P-C,z=M-k;let j=0;for(let U=0;U<b;U+=g){const D=(B+U)/_;if(!(D<0||D>=f.outHeight||Math.floor(D)!==D))for(let W=0;W<w;W+=x){const G=(z+W)/v;if(G<0||G>=f.outWidth||Math.floor(G)!==G)continue;const Y=b*w-1-m.get($,D,G,N),ee=U*w+W,se=Y===ee?1:0;if(se===0)continue;const fe=A.get($,D,G,N);j+=fe*se}}T.set(j,$,P,M,N)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const I1e={kernelName:EO,backendName:"cpu",kernelFunc:E1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t,e,n,r,i){const s=Le(e),o=IP(t,e,n,s,i,"max"),a=Z7(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1e={kernelName:S6,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;Pe(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Rs(r.shape,i,s,[1,1],o),[h,f]=A1e(u,r.shape,r.dtype,a,c),p=l.write(h,c.outShape,r.dtype),m=l.write(f,c.outShape,r.dtype);return[{dataId:p,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=it(s,i.shape),u=Qn(i.shape,a)[1],c=ce(u),h=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(f);const p=ql({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});h.push(p);const m=AP({inputs:{a:p,b:f},backend:n});h.push(m);const _=mv({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:o}});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),_}const P1e={kernelName:Qw,backendName:"cpu",kernelFunc:N1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Pe(i,"min");const a=it(s,i.shape);let l=a;const u=hn(l,i.shape.length);let c=i;u!=null&&(c=ri({inputs:{x:i},backend:n,attrs:{perm:u}}),l=kn(l.length,i.shape.length)),cr("min",l,c.shape.length);const[h,f]=Qn(c.shape,l),p=ce(f),m=wr(ce(h),c.dtype),_=n.data.get(c.dataId).values;for(let g=0;g<m.length;++g){const x=g*p;let b=_[x];for(let w=0;w<p;++w){const k=_[x+w];(Number.isNaN(k)||k<b)&&(b=k)}m[g]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(h,c.dtype,m);if(o){const g=On(h,a),x=zt({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),x}return v}const D1e={kernelName:e1,backendName:"cpu",kernelFunc:R1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;Pe(i,"mirrorPad");const a=s.map((b,w)=>b[0]+i.shape[w]+b[1]),l=s.map(b=>b[0]),u=s.map((b,w)=>b[0]+i.shape[w]),c=o==="reflect"?0:1,h=n.data.get(i.dataId).values,f=i.shape.length,p=Le(i.shape),m=ce(a),_=a.length,v=Le(a),g=br(i.dtype,m);for(let b=0;b<m;b++){let w=fd(b,_,v);for(let C=0;C<_;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,T)=>C-l[T]);const k=Vo(w,f,p);g[b]=h[k]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const L1e={kernelName:t1,backendName:"cpu",kernelFunc:M1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e=Tn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),B1e=Wn(Ny,F1e),z1e={kernelName:Ny,backendName:"cpu",kernelFunc:B1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=it([a],i.shape),u=tX({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=On(u.shape,l),h=zt({inputs:{x:u},backend:n,attrs:{shape:c}}),f=EP({inputs:{a:i,b:h},backend:n}),p=o7({inputs:{x:f},backend:n}),m=mv({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),_=zt({inputs:{x:m},backend:n,attrs:{shape:c}}),v=AP({inputs:{a:p,b:_},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),v}const j1e={kernelName:_1,backendName:"cpu",kernelFunc:nX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;Pe(i,"multinomial");const l=a?i:nX({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],h=n.data.get(l.dataId).values,f=[u,s],p=wr(ce(f),"int32");for(let m=0;m<u;++m){const _=m*c,v=new Float32Array(c-1);v[0]=h[_];for(let b=1;b<v.length;++b)v[b]=v[b-1]+h[_+b];const g=mN.alea(o.toString()),x=m*s;for(let b=0;b<s;++b){const w=g();p[x+b]=v.length;for(let k=0;k<v.length;k++)if(w<v[k]){p[x+b]=k;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",p)}const U1e={kernelName:k6,backendName:"cpu",kernelFunc:V1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1e=kN;function G1e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Pe(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:h}=W1e(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const H1e={kernelName:AO,backendName:"cpu",kernelFunc:G1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1e=CN;function q1e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Pe(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:p}=K1e(c,h,o,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const X1e={kernelName:OO,backendName:"cpu",kernelFunc:q1e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e=TN;function Y1e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Pe(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,f=o,p=a,m=l,_=u,{selectedIndices:v,selectedScores:g}=Z1e(c,h,f,p,m,_);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const J1e={kernelName:NO,backendName:"cpu",kernelFunc:Y1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;Pe(i,"oneHot");const u=ce(i.shape),c=new Float32Array(u*o);c.fill(l);const h=n.data.get(i.dataId).values;for(let f=0;f<u;++f)h[f]>=0&&h[f]<o&&(c[f*o+h[f]]=a);return n.makeTensorInfo([...i.shape,o],s,c)}const eSe={kernelName:s1,backendName:"cpu",kernelFunc:Q1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lx(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=$c({inputs:{input:r},backend:n}),s=Lx({inputs:{x:i},backend:n}),o=Nf({inputs:{input:r},backend:n}),a=Lx({inputs:{x:o},backend:n}),l=vi({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return OP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const tSe={kernelName:w1,backendName:"cpu",kernelFunc:Lx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rX(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=$c({inputs:{input:r},backend:n}),s=rX({inputs:{x:i},backend:n}),o=Nf({inputs:{input:r},backend:n}),a=Lx({inputs:{x:o},backend:n}),l=vi({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return OP({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const nSe={kernelName:i1,backendName:"cpu",kernelFunc:rX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return Mx({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(c=>{QA(s,c.shape,"All tensors passed to stack must have matching shapes"),F(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const h=Mx({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(h),h}),u=Pf({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const rSe={kernelName:o1,backendName:"cpu",kernelFunc:iX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;Pe(i,"pad");const a=s.map((x,b)=>x[0]+i.shape[b]+x[1]),l=s.map(x=>x[0]),u=n.data.get(i.dataId).values,c=ce(i.shape),h=i.shape.length,f=Le(i.shape),p=ce(a),m=a.length,_=Le(a),v=br(i.dtype,p);o!==0&&v.fill(o);for(let x=0;x<c;x++){const w=fd(x,h,f).map((C,T)=>C+l[T]),k=Vo(w,m,_);v[k]=u[x]}return{dataId:n.write(v,a,i.dtype),shape:a,dtype:i.dtype}}const sX={kernelName:a1,backendName:"cpu",kernelFunc:iSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sSe=Tn((t,e)=>Math.pow(t,e)),oSe=Wn(Ry,sSe),aSe={kernelName:Ry,backendName:"cpu",kernelFunc:oSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,a=i.map(v=>n.data.get(v.dataId).values),l=i.map(v=>v.shape),u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,[h,f,p]=k7(a,l,u,s.shape,s.dtype,c,o.shape),m=h.map(v=>n.makeTensorInfo([v.length],"int32",v)),_=n.makeTensorInfo(p,s.dtype,f);return m.concat([_])}const uSe={kernelName:C6,backendName:"cpu",kernelFunc:lSe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=C7(o,r.shape,r.dtype,a,i.shape,l,s.shape),h=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[h,f]}const hSe={kernelName:T6,backendName:"cpu",kernelFunc:cSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,h=n.data.get(o.dataId).values,f=a.map(v=>n.data.get(v.dataId).values),p=a.map(v=>v.shape),[m,_]=T7(u,i.shape,c,s.shape,s.dtype,h,o.shape,f,p,l);return n.makeTensorInfo(m,s.dtype,_)}const dSe={kernelName:$6,backendName:"cpu",kernelFunc:fSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=$7(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const mSe={kernelName:PO,backendName:"cpu",kernelFunc:pSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe=It(Dy,t=>1/t),ySe={kernelName:Dy,backendName:"cpu",kernelFunc:gSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;Pe(i,"resizeBilinear");const l=Le(i.shape),[u,c]=a,[h,f,p,m]=i.shape,_=n.data.get(i.dataId).values,v=new Float32Array(ce([h,u,c,m])),g=[s&&u>1?f-1:f,s&&c>1?p-1:p],x=[s&&u>1?u-1:u,s&&c>1?c-1:c];let b=0;const w=g[0]/x[0],k=g[1]/x[1];for(let C=0;C<h;C++)for(let T=0;T<u;T++){let E;o?E=w*(T+.5)-.5:E=w*T;const A=Math.max(0,Math.floor(E)),$=E-A,N=Math.min(f-1,Math.ceil(E)),P=C*l[0]+A*l[1],M=C*l[0]+N*l[1];for(let B=0;B<c;B++){let z;o?z=k*(B+.5)-.5:z=k*B;const j=Math.max(0,Math.floor(z)),U=z-j,D=Math.min(p-1,Math.ceil(z)),W=P+j*l[2],G=M+j*l[2],Y=P+D*l[2],ee=M+D*l[2];for(let se=0;se<m;se++){const fe=_[W+se],le=_[G+se],de=_[Y+se],Se=_[ee+se],Te=fe+(de-fe)*U,pe=le+(Se-le)*U,xe=Te+(pe-Te)*$;v[b++]=xe}}}return n.makeTensorInfo([h,u,c,m],"float32",v)}const _Se={kernelName:f1,backendName:"cpu",kernelFunc:vSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;Pe([s,i],"resizeBilinearGrad");const a=Le(i.shape),[l,u,c,h]=i.shape,[,f,p]=s.shape,m=new Float32Array(l*u*c*h),_=[o&&f>1?u-1:u,o&&p>1?c-1:c],v=[o&&f>1?f-1:f,o&&p>1?p-1:p],g=_[0]/v[0],x=_[1]/v[1],b=n.data.get(s.dataId).values;let w=0;for(let k=0;k<l;k++){const C=k*a[0];for(let T=0;T<f;T++){const E=T*g,A=Math.floor(E),$=Math.min(Math.ceil(E),u-1),N=C+A*a[1],P=C+$*a[1],M=E-A,B=1-M;for(let z=0;z<p;z++){const j=z*x,U=Math.floor(j),D=Math.min(Math.ceil(j),c-1),W=j-U,G=1-W,Y=N+U*a[2],ee=N+D*a[2],se=P+U*a[2],fe=P+D*a[2],le=B*G,de=B*W,Se=M*G,Te=M*W;for(let pe=0;pe<h;pe++){const xe=b[w++];m[Y+pe]+=xe*le,m[ee+pe]+=xe*de,m[se+pe]+=xe*Se,m[fe+pe]+=xe*Te}}}}return n.makeTensorInfo([l,c,u,h],"float32",m)}const bSe={kernelName:MO,backendName:"cpu",kernelFunc:xSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;Pe(i,"resizeNearestNeighbor");const l=Le(i.shape),[u,c]=a,[h,f,p,m]=i.shape,_=n.data.get(i.dataId).values,v=new Float32Array(h*u*c*m),g=[s&&u>1?f-1:f,s&&c>1?p-1:p],x=[s&&u>1?u-1:u,s&&c>1?c-1:c],b=g[0]/x[0],w=g[1]/x[1];let k=0;for(let C=0;C<h;C++){const T=C*l[0];for(let E=0;E<u;E++){const A=o?b*(E+.5):b*E;let $=Math.min(f-1,s?Math.round(A):Math.floor(A));o&&($=Math.max(0,$));const N=T+$*l[1];for(let P=0;P<c;P++){const M=o?w*(P+.5):w*P;let B=Math.min(p-1,s?Math.round(M):Math.floor(M));o&&(B=Math.max(0,B));const z=N+B*l[2];for(let j=0;j<m;j++){const U=_[z+j];v[k++]=U}}}}return n.makeTensorInfo([h,u,c,m],i.dtype,v)}const SSe={kernelName:h1,backendName:"cpu",kernelFunc:wSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;Pe([s,i],"resizeNearestNeighborGrad");const a=Le(i.shape),l=Le(s.shape),[u,c,h,f]=i.shape,[,p,m]=s.shape,_=new Float32Array(u*c*h*f),v=n.data.get(s.dataId).values,g=[o&&p>1?c-1:c,o&&m>1?h-1:h],x=[o&&p>1?p-1:p,o&&m>1?m-1:m],b=g[0]/x[0],w=g[1]/x[1],k=1/b,C=1/w,T=Math.ceil(k)*2+2,E=Math.ceil(C)*2+2;for(let A=0;A<u;A++){const $=A*a[0];for(let N=0;N<c;N++){const P=$+N*a[1],M=Math.floor(N*k),B=Math.floor(M-T/2);for(let z=0;z<h;z++){const j=P+z*a[2],U=Math.floor(z*C),D=Math.floor(U-E/2);for(let W=0;W<f;W++){let G=0;for(let Y=0;Y<T;Y++){const ee=Y+B;if(ee<0||ee>=p)continue;const se=$+ee*l[1],fe=ee*b,le=Math.min(c-1,o?Math.round(fe):Math.floor(fe));if(N===le)for(let de=0;de<E;de++){const Se=de+D;if(Se<0||Se>=m)continue;const Te=se+Se*l[2],pe=Se*w,xe=Math.min(h-1,o?Math.round(pe):Math.floor(pe));z===xe&&(G+=v[Te+W])}}_[j+W]=G}}}}return n.makeTensorInfo(i.shape,i.dtype,_)}const CSe={kernelName:DO,backendName:"cpu",kernelFunc:kSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;Pe(i,"reverse");const o=i.shape.length,a=it(s,i.shape);if(o===0)return Qo({inputs:{x:i},backend:n});const l=new lr(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const h=l.indexToLoc(c),f=h.slice();a.forEach(p=>f[p]=i.shape[p]-1-f[p]),l.set(u.get(...f),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const $Se={kernelName:d1,backendName:"cpu",kernelFunc:TSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe={kernelName:UO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=br(r.dtype,ce(r.shape)),[u,c,h,f]=r.shape,[p,m]=LN(o,c,h),_=255,v=Math.sin(i),g=Math.cos(i),x=a.data.get(r.dataId).values;for(let w=0;w<u;w++){const k=w*h*c*f;for(let C=0;C<c;C++){const T=C*(h*f);for(let E=0;E<h;E++){const A=E*f;for(let $=0;$<f;$++){const N=[u,C,E,$],P=N[2],M=N[1];let B=(P-p)*g-(M-m)*v,z=(P-p)*v+(M-m)*g;B=Math.round(B+p),z=Math.round(z+m);let j=s;if(typeof s!="number"&&($===3?j=_:j=s[$]),B>=0&&B<h&&z>=0&&z<c){const D=z*(h*f),W=B*f,G=k+D+W+$;j=x[G]}const U=k+T+A+$;l[U]=j}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISe=It(Fy,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),ASe={kernelName:Fy,backendName:"cpu",kernelFunc:ISe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Wc(s,i,o),f=!0,p=n.bufferSync(i),m=n.bufferSync(s),_=Xu(p,m,o,h,u,l,a,c,0,f);return n.makeTensorInfo(o,_.dtype,_.values)}const NSe={kernelName:E6,backendName:"cpu",kernelFunc:OSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function RSe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function DSe(t,e,n,r,i,s){const o=bn("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*i;for(let c=0;c<i;++c)o[u+c]=s==="left"?PSe(l,e[c+u]):RSe(l,e[c+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=DSe(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",u)}const LSe={kernelName:A6,backendName:"cpu",kernelFunc:MSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;Pe([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=Ti(i.dtype,s.dtype),h=wr(ce(i.shape),c);let f=0;const p=o===0||o>1||i.shape.length===1?1:ce(i.shape.slice(1));for(let m=0;m<a.length;m++)for(let _=0;_<p;_++)a[m]===1?h[f++]=l[m]:h[f++]=u[m];return n.makeTensorInfo(i.shape,c,h)}const BSe={kernelName:p1,backendName:"cpu",kernelFunc:FSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe=R1,jSe=D1,VSe=It(zy,t=>t>=0?jSe*t:zSe*(Math.exp(t)-1)),USe={kernelName:zy,backendName:"cpu",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WSe=It(Uy,t=>t<0?-1:t>0?1:0),GSe={kernelName:Uy,backendName:"cpu",kernelFunc:WSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=It(jy,t=>Math.sin(t)),KSe={kernelName:jy,backendName:"cpu",kernelFunc:HSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qSe=It(Vy,t=>Math.sinh(t)),XSe={kernelName:Vy,backendName:"cpu",kernelFunc:qSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZSe=11920928955078125e-23,iB=Math.log(ZSe)+2,YSe=It(Gy,t=>{const e=t>-iB,n=t<iB,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),JSe={kernelName:Gy,backendName:"cpu",kernelFunc:YSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;Pe([i],"spaceToBatchND");const a=ce(s),l=[[0,0]];l.push(...o);for(let C=1+s.length;C<i.shape.length;++C)l.push([0,0]);const u=sX.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=iv(u.shape,s,a,!1),h=sv(c.length,s.length,!1),f=ov(u.shape,s,a,!1),_=zt({inputs:{x:u},backend:n,attrs:{shape:c}}),x=ri({inputs:{x:_},backend:n,attrs:{perm:h}}),k=zt({inputs:{x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(x),k}const eke={kernelName:y1,backendName:"cpu",kernelFunc:QSe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values[0],[h,f,p,m,_]=O7(a,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],i.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([_.length],r.dtype,new Int32Array(_))]}const nke={kernelName:O6,backendName:"cpu",kernelFunc:tke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,h]=N7(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}const ike={kernelName:N6,backendName:"cpu",kernelFunc:rke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=$P(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const oke={kernelName:P6,backendName:"cpu",kernelFunc:ske};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=$P(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const lke={kernelName:R6,backendName:"cpu",kernelFunc:ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:f}=Wc(s,i,a),p=!1,m=n.bufferSync(i);let _;switch(s.dtype){case"bool":{const v=n.bufferSync(s),g=!!n.data.get(o.dataId).values[0];_=Xu(m,v,a,f,c,u,l,h,g,p);break}case"float32":{const v=n.bufferSync(s),g=n.data.get(o.dataId).values[0];_=Xu(m,v,a,f,c,u,l,h,g,p);break}case"int32":{const v=n.bufferSync(s),g=n.data.get(o.dataId).values[0];_=Xu(m,v,a,f,c,u,l,h,g,p);break}case"string":{const v=n.bufferSync(s),g=Ul(n.data.get(o.dataId).values[0]);_=Xu(m,v,a,f,c,u,l,h,g,p);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,_.dtype,_.values)}const cke={kernelName:D6,backendName:"cpu",kernelFunc:uke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=it(o,i.shape)[0],l=JN(i,s,a),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(h=>{const f=[...c];f[a]=h;const p=Ec({inputs:{x:i},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const fke={kernelName:v1,backendName:"cpu",kernelFunc:hke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke={kernelName:LO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Pe(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke=It(Jy,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),mke={kernelName:Jy,backendName:"cpu",kernelFunc:pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:f}=r;Pe(i,"stridedSlice");const{finalShapeSparse:p,finalShape:m,isIdentity:_,sliceDim0:v,isSimpleSlice:g,begin:x,end:b,strides:w}=RN(i.shape,s,o,a,l,u,c,h,f);let k;if(_)k=zt({inputs:{x:i},backend:n,attrs:{shape:m}});else if(v||g){F(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=ON(x,b,w),T=Ec({inputs:{x:i},backend:n,attrs:{begin:x,size:C}});k=zt({inputs:{x:T},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(T)}else{const C=n.bufferSync(i),T=D7(p,C,w,x);k=n.makeTensorInfo(m,T.dtype,T.values)}return k}const yke={kernelName:BO,backendName:"cpu",kernelFunc:gke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,f=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[m,_]=M7(f,p,i,s,o,a,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(h.shape,"int32",_)]}const _ke={kernelName:M6,backendName:"cpu",kernelFunc:vke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,h]=L7(a,l,i),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const bke={kernelName:L6,backendName:"cpu",kernelFunc:xke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=F7(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const Ske={kernelName:F6,backendName:"cpu",kernelFunc:wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kke=It(Xy,t=>Math.tan(t)),Cke={kernelName:Xy,backendName:"cpu",kernelFunc:kke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke=It(Zy,t=>Math.tanh(t)),$ke={kernelName:Zy,backendName:"cpu",kernelFunc:Tke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=Wc(s,i,r.shape),h=!1,f=n.bufferSync(i),p=n.bufferSync(s),m=n.bufferSync(r),_=Xu(f,p,r.shape,c,l,a,o,u,m,h);return n.makeTensorInfo(r.shape,_.dtype,_.values)}const Ike={kernelName:I6,backendName:"cpu",kernelFunc:Eke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;Pe(i,"tile");const o=z7(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Oke={kernelName:Yy,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;Pe(i,"topk");const a=n.data.get(i.dataId).values,[l,u]=V7(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Pke={kernelName:zO,backendName:"cpu",kernelFunc:Nke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=n,[c,h,f,p]=i.shape,[m,_]=u??[h,f],v=[c,m,_,p],g=Le(i.shape),x=g[0],b=g[1],w=g[2],k=Le(v),C=k[0],T=k[1],E=k[2],A=br(i.dtype,ce(v));A.fill(l);const $=r.data.get(i.dataId).values,N=r.data.get(s.dataId).values;for(let M=0;M<c;++M){const B=s.shape[0]===1?N:N.subarray(M*8,M*8+8);for(let z=0;z<m;++z)for(let j=0;j<_;++j)for(let U=0;U<p;++U){let D;const W=B[6]*j+B[7]*z+1;if(W===0)continue;const G=(B[0]*j+B[1]*z+B[2])/W,Y=(B[3]*j+B[4]*z+B[5])/W,ee=sB(G,f,a),se=sB(Y,h,a);switch(o){case"nearest":D=zke($,h,f,x,b,w,M,se,ee,U,l);break;case"bilinear":D=jke($,h,f,x,b,w,M,se,ee,U,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const fe=M*C+z*T+j*E+U;A[fe]=D}return r.makeTensorInfo(v,i.dtype,A)}return{dataId:r.write(A,v,i.dtype),shape:i.shape,dtype:i.dtype}}const Dke={kernelName:jO,backendName:"cpu",kernelFunc:Rke};function sB(t,e,n){switch(n){case"reflect":return Mke(t,e);case"wrap":return Lke(t,e);case"nearest":return Bke(t,e);case"constant":default:return Fke(t)}}function Mke(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return gc(0,n,e-1)}function Lke(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return gc(0,n,e-1)}function Fke(t,e){return t}function Bke(t,e){return gc(0,t,e-1)}function Wp(t,e,n,r,i,s,o,a,l,u,c){const h=o*r+a*i+l*s+u;return 0<=a&&a<e&&0<=l&&l<n?t[h]:c}function zke(t,e,n,r,i,s,o,a,l,u,c){const h=Math.round(a),f=Math.round(l);return Wp(t,e,n,r,i,s,o,h,f,u,c)}function jke(t,e,n,r,i,s,o,a,l,u,c){const h=Math.floor(a),f=Math.floor(l),p=h+1,m=f+1,_=(m-l)*Wp(t,e,n,r,i,s,o,h,f,u,c)+(l-f)*Wp(t,e,n,r,i,s,o,h,m,u,c),v=(m-l)*Wp(t,e,n,r,i,s,o,p,f,u,c)+(l-f)*Wp(t,e,n,r,i,s,o,p,m,u,c);return(p-a)*_+(a-h)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Pe(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:u}=U7(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const Uke={kernelName:VO,backendName:"cpu",kernelFunc:Vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let u=0;for(let p=0;p<o;p++)p!==s&&(l[u++]=i.shape[p]);const c=new Array(o).fill(0),h=i.shape.slice();h[s]=1;const f=new Array(a);for(let p=0;p<f.length;p++){c[s]=p;const m=Ec({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});f[p]=zt({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return f}const Gke={kernelName:x1,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;Pe(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,u=[],c=[],h=a-l;let f=s;for(let m=0;m<h;++m){const _=Mx({inputs:{input:f},backend:n,attrs:{dim:m+1}});f=_,c.push(_)}for(let m=0;m<o;++m){const _=tu(m,"int32"),v=n.makeTensorInfo([],"int32",_),g=i7({inputs:{a:v,b:f},backend:n}),x=ql({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),b=K1({inputs:{a:x,b:i},backend:n}),w=mv({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(w),c.push(v),c.push(g),c.push(x),c.push(b),c.push(w)}const p=iX({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Kke={kernelName:b1,backendName:"cpu",kernelFunc:Hke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke=[Vxe,w_e,Wxe,Hxe,E_e,qxe,Zxe,Jxe,ebe,nbe,ibe,obe,lbe,hbe,dbe,gbe,vbe,xbe,wbe,zxe,kbe,Tbe,Ebe,A_e,Abe,T_e,N_e,Nbe,S_e,Rbe,Mbe,Lbe,Bbe,jbe,Ube,Gbe,Kbe,Xbe,Ybe,Qbe,twe,rwe,swe,awe,lwe,cwe,fwe,pwe,mwe,gwe,ywe,_we,wwe,Pxe,kwe,P_e,Nwe,R_e,Pwe,M_e,Bwe,zwe,Vwe,F_e,z_e,Wwe,Hwe,qwe,Zwe,V_e,W_e,k_e,Jwe,Dbe,e1e,n1e,i1e,Rxe,H_e,q_e,o1e,Z_e,l1e,h1e,d1e,g1e,v1e,x1e,b1e,J_e,S1e,C1e,$1e,I1e,O1e,P1e,D1e,exe,L1e,z1e,U1e,nxe,ixe,H1e,X1e,J1e,oxe,eSe,nSe,rSe,sX,aSe,Mxe,uxe,uSe,hSe,dSe,mSe,C_e,EE,ySe,Lxe,Fxe,Bxe,_Se,bSe,SSe,CSe,$Se,ESe,ASe,yxe,NSe,LSe,BSe,USe,_xe,GSe,KSe,XSe,xxe,j1e,JSe,eke,nke,ike,oke,lke,cke,fke,Sxe,dke,Cxe,$xe,mke,yke,_ke,bke,Ske,Oxe,xwe,Cke,$ke,Ike,Oke,Pke,Dke,axe,Uke,Gke,Kke,tSe];for(const t of qke)z6(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fu={},C0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Xke(t,e){Fu[t]=e}function po(t,e){if(!(t in Fu)||e!=null){const r=Yke(t,e);if(r!==null)Fu[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Fu[t];return n==null||n.isContextLost()?(delete Fu[t],po(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Fu[t])}function Zke(t){if(!oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Yke(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Zke(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Fu[t]},!1),oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(C0.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",C0)||n.getContext("experimental-webgl",C0):n.getContext("webgl2",C0)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qm;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Qm||(Qm={}));var Gi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Gi||(Gi={}));var or;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(or||(or={}));function gv(t,e){return[e,t]}function Jke(t,e){return t*e}function T0(t){const e=ce(t),n=Math.ceil(e/4);return Z$(n)}function xd(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Qke(t,e){const[n,r]=xd(t,e);return n*r*4}function NP(t,e){const n=t;let r,i,s,o,a,l,u,c,h,f;return oe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,h=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,h=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $e(t,e){const n=e();return oe().getBool("DEBUG")&&eCe(t),n}function eCe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+iCe(t,e))}const tCe=596e-10,nCe=65504;function rCe(t){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||tCe<Math.abs(t)&&Math.abs(t)<nCe)}function iCe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function $0(t,e){return qa(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function sCe(t,e){const n=qa(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function oCe(t,e){const n=qa(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),oe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw oX(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const aCe=/ERROR: [0-9]+:([0-9]+):/g;function oX(t,e){const n=aCe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((h,f)=>nf((f+1).toString(),s)+h);let a=0;for(let h=0;h<o.length;h++)a=Math.max(o[h].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${nf(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function lCe(t){return qa(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function uCe(t,e){if($e(t,()=>t.linkProgram(e)),!oe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function IC(t,e){if($e(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function cCe(t,e){const n=qa(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function hCe(t,e){const n=qa(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function fCe(t){return qa(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function dCe(t,e){const n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function pCe(t){return qa(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function oB(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:($e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),$e(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),$e(t,()=>t.enableVertexAttribArray(a)),!0)}function mCe(t,e,n){xCe(t,n),$e(t,()=>t.activeTexture(t.TEXTURE0+n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function gCe(t,e,n){return qa(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function yCe(t,e,n){return t.getUniformLocation(e,n)}function vCe(t,e,n,r){$e(t,()=>mCe(t,e,r)),$e(t,()=>t.uniform1i(n,r))}function AC(t,e,n){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function aB(t,e){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function E0(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+_Ce(t,e))}function _Ce(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function qa(t,e,n){const r=$e(t,()=>e());if(r==null)throw new Error(n);return r}function xCe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Rf(t,e=2){return ce(t.slice(0,t.length-e))}function Df(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function I0(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Rf(t),...Df(t)]),e}function bCe(t,e=!1){let n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?JA(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=eu(t).newShape);let i=ce(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=Rf(t);let l=2,u=2;t.length&&([l,u]=Df(t)),i=a*(l/2)*(u/2),s=Z$(i).map(c=>c*2)}else s=Z$(i);return s}function A0(t){return t%2===0}function Fx(t,e){if(t=t.slice(-2),e=e.slice(-2),Ct(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||A0(n)&&A0(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&A0(t[0])&&A0(e[0])}let OC,NC;function wCe(t){if(OC==null){const e=po(t);OC=e.getParameter(e.MAX_TEXTURE_SIZE)}return OC}function SCe(t){if(NC==null){const e=po(t);NC=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,NC)}function kCe(t){if(t===0)return 0;let e;const n=po(t);return ks(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:ks(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function ks(t,e){return t.getExtension(e)!=null}function lB(t){try{if(po(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function CCe(t){if(t===0)return!1;const e=po(t);if(t===1){if(!ks(e,"OES_texture_float"))return!1}else if(!ks(e,"EXT_color_buffer_float"))return!1;return AE(e)}function TCe(t){if(t===0)return!1;const e=po(t);if(t===1){if(!ks(e,"OES_texture_float")||!ks(e,"WEBGL_color_buffer_float"))return!1}else{if(ks(e,"EXT_color_buffer_float"))return AE(e);const r="EXT_color_buffer_half_float";if(ks(e,r)){const i=e.getExtension(r);return $Ce(e,i)}return!1}return AE(e)}function AE(t){const e=NP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function $Ce(t,e){const n=NP(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function ECe(t){return t!==2?!1:po(t).fenceSync!=null}function yv(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Re=oe();Re.registerFlag("HAS_WEBGL",()=>Re.getNumber("WEBGL_VERSION")>0);Re.registerFlag("WEBGL_VERSION",()=>lB(2)?2:lB(1)?1:0);Re.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Re.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Re.get("WEBGL_VERSION")===2);Re.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Re.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Re.registerFlag("WEBGL_PACK",()=>Re.getBool("HAS_WEBGL"));Re.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_CLIP",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_REDUCE",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_LAZILY_UNPACK",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_CONV_IM2COL",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>wCe(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>SCe(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Re.getNumber("WEBGL_VERSION");return t===0?0:kCe(t)});Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Re.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!r8());Re.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>CCe(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Re.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Re.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Re.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>TCe(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ECe(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Re.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Re.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Re.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>r8()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Re.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Re.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Re.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Re.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Re.registerFlag("WEBGL_EXP_CONV",()=>!1);Re.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Re.getBool("IS_TEST"));Re.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Re.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Re.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Re.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gr(){let t,e,n,r,i,s,o,a,l,u;return oe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e,n="index"){const r=Le(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function q1(t,e,n="index"){const r=Le(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function ICe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function ACe(t,e,n="index"){const r=t.map((s,o)=>o),i=ICe(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function PP(t){const e=Le(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function RP(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const aX=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:lX}=_ge;function OCe(t,e,n){const r=[];if(t.forEach(p=>{const m=ce(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:_}=DP(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(_.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(p=>NCe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Gr(),l=DCe(a);let u,c,h=FCe(a);return e.isPacked?(u=PCe(e.logicalShape,o,n.enableShapeUniforms),c=LCe(a)):(u=RCe(e.logicalShape,o,n.enableShapeUniforms),c=MCe(a)),n.packedInputs&&(h+=VCe),[h,l,c,i,u,s,n.userCode].join(`
`)}function bd(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return eTe(t,e);case 1:return nTe(t,e);case 2:return iTe(t,e);case 3:return oTe(t,e);case 4:return lTe(t,e);case 5:return uTe(t);case 6:return cTe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function uX(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return QCe(t);case 1:return tTe(t,e);case 2:return rTe(t,e);case 3:return sTe(t,e);default:return aTe(t,e)}}function NCe(t,e,n=!1,r){let i="";n?i+=uX(t,r):i+=bd(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=hTe(t,e):i+=fTe(t,e)),i}function PCe(t,e,n){switch(t.length){case 0:return cX();case 1:return UCe(t,e,n);case 2:return YCe(t,e,n);case 3:return GCe(t,e,n);default:return KCe(t,e,n)}}function RCe(t,e,n){switch(t.length){case 0:return cX();case 1:return WCe(t,e,n);case 2:return JCe(t,e,n);case 3:return HCe(t,e,n);case 4:return qCe(t,e,n);case 5:return XCe(t,e);case 6:return ZCe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function DCe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function MCe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function LCe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function FCe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${BCe}
    ${zCe}
    ${jCe}
  `}const BCe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zCe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jCe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,VCe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function cX(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function UCe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function WCe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function GCe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function HCe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${q1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Kc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function KCe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function qCe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${q1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Kc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function XCe(t,e){const n=Kc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function ZCe(t,e){const n=Kc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function YCe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Ct(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function JCe(t,e,n){return Ct(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function qc(t){return`offset${t}`}function QCe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Gr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function eTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=qc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function tTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Gr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function nTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${wd(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=qc(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function rTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=Gr();if(s!=null&&Ct(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function iTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Ct(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],p=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=eu(n),l=o;if(l.length<n.length){const f=Sd(t,l),p=["row","col"];return`
      ${bd(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${kd(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${wd(t)}
      }
    `;const u=s[0],c=s[1],h=qc(r);return c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function sTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),p=[1,2],m=Sd(t,f),_=["b","row","col"];return`
        ${uX(m,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${kd(_,p)});
        }
      `}const a=Gr();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),h=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${h}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function oTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=eu(n),u=a;if(u.length<n.length){const _=Sd(t,u),v=["row","col","depth"];return`
        ${bd(_,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${kd(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${wd(t)}
      }
    `;const c=t.shapeInfo.texShape,h=c[0],f=c[1],p=t.shapeInfo.flatOffset;if(f===s&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=qc(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${h}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function aTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Gr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],h=Math.ceil(s[o-1]/2);let f=h*Math.ceil(s[o-2]/2),p="int b, int row, int col",m=`b * ${f} + (row / 2) * ${h} + (col / 2)`;for(let _=2;_<o-1;_++)p=`int b${_}, `+p,f*=s[o-_-1],m=`b${_} * ${f} + `+m;return`
    vec4 ${r}(${p}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function lTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:u}=eu(n);if(l.length<n.length){const x=Sd(t,l),b=["row","col","depth","depth2"];return`
      ${bd(x,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${kd(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${wd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1],m=`int stride2 = ${r}Shape[3];`,_=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${_}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===s&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=qc(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${_}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${p}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function uTe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:u}=eu(e);if(l.length<e.length){const _=Sd(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${bd(_)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${kd(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${wd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=qc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function cTe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=eu(e);if(i.length<e.length){const v=Sd(t,i),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${bd(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${kd(g,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${wd(t)}
      }
    `;const h=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],m=f[1];if(m===c&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const _=qc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${_};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function wd(t){const e=t.name,n=ce(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function hTe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=lX(t.shapeInfo.logicalShape,e.logicalShape),l=Nt(o),u=o-s;let c;const h=["x","y","z","w","u","v"];s===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(x=>`coords.${h[x+u]} = 0;`).join(`
`);let f="";o<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((x,b)=>`coords.${h[b+u]}`).join(", ");let p="return outputValue;";const _=ce(t.shapeInfo.logicalShape)===1,g=ce(e.logicalShape)===1;if(s===1&&!_&&!g)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(_&&!g)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const x=s-2,b=s-1;a.indexOf(x)>-1&&a.indexOf(b)>-1?p="return vec4(outputValue.x);":a.indexOf(x)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${p}
    }
  `}function fTe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Ct(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Nt(l),c=lX(t.shapeInfo.logicalShape,e.logicalShape),h=l-a;let f;const p=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(_=>`coords.${p[_+h]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((_,v)=>`coords.${p[v+h]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${r}(${m});
    }
  `}function Nt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function DP(t,e,n){const{newShape:r,keptDims:i}=eu(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!Ct(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function Sd(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function kd(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t,e,n,r){const i=n.map((c,h)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:f}}),s=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=OCe(i,o,e),l=oCe(t.gl,a),u=t.createProgram(l);return oe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o},hX(t,e,u)))}function hX(t,e,n){const r=[],i=[];let s,o,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),oe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const h of e.variableNames){const f={name:h,uniform:t.getUniformLocation(n,h,c),offset:t.getUniformLocation(n,`offset${h}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${h}Shape`,c),f.texShape=t.getUniformLocation(n,`${h}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const h of e.customUniforms)i.push(t.getUniformLocation(n,h.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function uB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!Ct(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!Ct(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function pTe(t,e,n,r,i){e.program.enableShapeUniforms||(uB(e.inShapeInfos,n),uB([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),oe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:h,shape:f,texShape:p}=e.variablesLocations[l];if(f){const{uniformShape:m}=DP(e.program.packedInputs,u.shape,u.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(f,new Int32Array(m));break;case 2:t.gl.uniform2iv(f,new Int32Array(m));break;case 3:t.gl.uniform3iv(f,new Int32Array(m));break;case 4:t.gl.uniform4iv(f,new Int32Array(m));break}}if(p&&t.gl.uniform2i(p,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(ce(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let m=u.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(c,m)}continue}u.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Le(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],h=i[l];if(u.type==="float")t.gl.uniform1fv(c,h);else if(u.type==="vec2")t.gl.uniform2fv(c,h);else if(u.type==="vec3")t.gl.uniform3fv(c,h);else if(u.type==="vec4")t.gl.uniform4fv(c,h);else if(u.type==="int")t.gl.uniform1iv(c,h);else if(u.type==="ivec2")t.gl.uniform2iv(c,h);else if(u.type==="ivec3")t.gl.uniform3iv(c,h);else if(u.type==="ivec4")t.gl.uniform4iv(c,h);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function mTe(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:h}=DP(t.packedInputs,o.shape,l);let f="",p="",m="";if(c.length===1&&t.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${k[0]>1}_${k[1]>1}`}else if(c.length===2&&!t.packedInputs)p=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const k=Le(c);m=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}const _=o.shape.length,v=c.length===2&&Ct(o.shape,l),g=ce(o.shape)===1,x=$f(o.shape,n.shape),b=!t.packedInputs&&_===n.shape.length&&Ct(l,n.texData.texShape),w=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${_}_${b}_${u?h:""}_${c.length}_${g}_${x}_${v}_${f}_${p}_${m}_${w}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${oe().getNumber("WEBGL_VERSION")}`,s}function Er(t){return oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gTe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Qm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Gr();this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?q1(["r","c","d"],e):Kc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yTe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Qm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Gr();this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?q1(["r","c","d"],e):Kc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vTe{constructor(e){this.variableNames=["A"],this.outTexUsage=Gi.DOWNLOAD;const n=Gr();this.outputShape=e,this.userCode=`
      ${aX}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Te{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Gi.DOWNLOAD;const n=Gr();this.outputShape=e,this.userCode=`
      ${aX}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTe={R:0,G:1,B:2,A:3};class cB{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Gr();this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${xTe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?RP():PP(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bTe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Gr();this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?RP():PP(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(t){const e=Gr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return sCe(t,n)}function STe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return cCe(t,e)}function kTe(t){const e=new Uint16Array([0,1,2,2,1,3]);return hCe(t,e)}function vv(t,e,n,r,i,s){dCe(e,n);const o=fCe(t),a=t.TEXTURE_2D;return $e(t,()=>t.bindTexture(a,o)),$e(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),$e(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),oe().getNumber("WEBGL_VERSION")===1?$e(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):$e(t,()=>t.texStorage2D(a,1,r,e,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function fX(t){return t.internalFormatFloat}function CTe(t,e,n,r){const[i,s]=gv(e,n);return vv(t,i,s,fX(r),r.textureFormatFloat,t.FLOAT)}function dX(t){return t.internalFormatHalfFloat}function TTe(t,e,n,r){const[i,s]=gv(e,n);return vv(t,i,s,dX(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function pX(t){return t.downloadTextureFormat}function $Te(t,e,n,r){const[i,s]=gv(e,n);return vv(t,i,s,pX(r),t.RGBA,t.UNSIGNED_BYTE)}function mX(t){return t.internalFormatPackedFloat}function ETe(t,e,n,r){const[i,s]=xd(e,n);return vv(t,i,s,mX(r),t.RGBA,t.FLOAT)}function gX(t){return t.internalFormatPackedHalfFloat}function ITe(t,e,n,r){const[i,s]=xd(e,n);return vv(t,i,s,gX(r),t.RGBA,r.textureTypeHalfFloat)}function ATe(t,e,n){return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),oB(t,e,"clipSpacePos",n,3,20,0)&&oB(t,e,"uv",n,2,20,12)}function OTe(t,e,n,r,i,s){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),oe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function NTe(t,e,n){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?oe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):oe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function PTe(t,e,n,r){const i=t.createBuffer();$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return $e(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),$e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function RTe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function DTe(t,e,n,r){const[i,s]=gv(e,n),o=4,a=new Uint8Array(Jke(e*n,o));return $e(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function MTe(t,e,n,r,i,s,o,a){const l=t,u=new Float32Array(Qke(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function LTe(t,e,n){const r=new Float32Array(e*n*4);return $e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=oe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Xke(n,e)):this.gl=po(n),e=this.gl,oe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>$e(s,()=>s.createVertexArray()),this.bindVertexArray=o=>$e(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>$e(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>$e(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>$e(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>$e(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>$e(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>$e(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),oe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=$0(this.gl,s),ks(this.gl,o))this.textureHalfFloatExtension=$0(this.gl,o);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ks(this.gl,i))this.colorBufferHalfFloatExtension=$0(this.gl,i);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ks(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(ks(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=STe(this.gl),this.indexBuffer=kTe(this.gl),this.framebuffer=pCe(this.gl),this.textureConfig=NP(this.gl,this.textureHalfFloatExtension)}get debug(){return oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;$e(e,()=>e.finish()),$e(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),$e(e,()=>e.deleteFramebuffer(this.framebuffer)),$e(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),$e(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),$e(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),CTe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),TTe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),$Te(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),NTe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),OTe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),ITe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),ETe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(aB(this.gl,this.framebuffer),this.outputTexture=null),$e(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>DTe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return MTe(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return RTe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=PTe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>LTe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=wTe(n));const r=lCe(n);$e(n,()=>n.attachShader(r,this.vertexShader)),$e(n,()=>n.attachShader(r,e)),uCe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&IC(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;$e(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),ATe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&($e(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&IC(this.gl,this.program),$e(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?gCe(this.gl,e,n):yCe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),$e(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),vCe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=xd(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&IC(this.gl,this.program),E0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}$e(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),$e(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=$0(this.gl,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await ZF(()=>this.disposed||this.isQueryAvailable(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=FTe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in oe().platform&&(r=oe().platform.setTimeoutCustom.bind(oe().platform)),ZF(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),AC(this.gl,e,this.framebuffer),this.debug&&E0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(AC(this.gl,this.outputTexture,this.framebuffer),this.debug&&E0(this.gl)):aB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;AC(i,e,this.framebuffer),this.debug&&E0(i),this.outputTexture=e,$e(i,()=>i.viewport(0,0,n,r)),$e(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),$e(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function FTe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:BTe,bincountImpl:yX,bincountReduceImpl:zTe,bitwiseAndImpl:jTe,castImpl:VTe,ceilImpl:UTe,concatImpl:WTe,equalImpl:GTe,expImpl:HTe,expm1Impl:KTe,floorImpl:qTe,gatherNdImpl:XTe,gatherV2Impl:ZTe,greaterImpl:YTe,greaterEqualImpl:JTe,lessImpl:QTe,lessEqualImpl:e$e,linSpaceImpl:t$e,logImpl:n$e,maxImpl:r$e,maximumImpl:i$e,minimumImpl:s$e,multiplyImpl:o$e,negImpl:a$e,notEqualImpl:l$e,prodImpl:u$e,raggedGatherImpl:c$e,raggedRangeImpl:h$e,raggedTensorToTensorImpl:f$e,rangeImpl:d$e,rsqrtImpl:p$e,scatterImpl:m$e,sigmoidImpl:g$e,simpleAbsImpl:vX,sliceImpl:y$e,sparseFillEmptyRowsImpl:v$e,sparseReshapeImpl:_$e,sparseSegmentReductionImpl:_X,sqrtImpl:x$e,staticRegexReplaceImpl:b$e,stridedSliceImpl:w$e,stringNGramsImpl:S$e,stringSplitImpl:k$e,stringToHashBucketFastImpl:C$e,subImpl:T$e,tileImpl:$$e,topKImpl:E$e,transposeImpl:MP,uniqueImpl:I$e}=Nxe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function zr(t,e){return e===1?[t]:xX(t,e)}function A$e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O$e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Er(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=zr("rc",this.rank),r=Nt(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bX{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${N$e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?RP():PP(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function N$e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?ACe(["r","c","d"],"inputShape"):Kc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P$e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=fB(n,r),s=dB(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=hB(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===or.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===or.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===or.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===or.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===or.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=fB(r,i),o=dB(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=hB(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function R$e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function hB(t,e,n,r,i){const s=D$e(e,r);let o;if(i){const[l,u]=xd(t[0],t[1]);o=l*u}else{const[l,u]=gv(t[0],t[1]);o=l*u}const a=R$e(n,s);return o*a}function D$e(t,e){switch(t){case or.PACKED_2X2_FLOAT32:return mX(e);case or.PACKED_2X2_FLOAT16:return gX(e);case or.UNPACKED_FLOAT32:return fX(e);case or.UNPACKED_FLOAT16:return dX(e);case or.PACKED_4X1_UNSIGNED_BYTE:return pX(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function M$e(t){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?or.PACKED_2X2_FLOAT32:or.UNPACKED_FLOAT32:t?or.PACKED_2X2_FLOAT16:or.UNPACKED_FLOAT16}function fB(t,e){if(t===Gi.UPLOAD)return or.PACKED_2X2_FLOAT32;if(t===Gi.RENDER||t==null)return M$e(e);if(t===Gi.DOWNLOAD||t===Gi.PIXELS)return or.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function dB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Do{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ms="if (isnan(x)) return x;",L$e="return x;",pB="return abs(x);",F$e="return (x >= 0.0) ? x : (exp(x) - 1.0);",B$e=Ms+`
  return (x < 0.0) ? 0.0 : x;
`,z$e=Ms+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ul="return x;",j$e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$e="return x;",U$e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,W$e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,G$e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,H$e="return 1.0 / (1.0 + exp(-1.0 * x));";class xl{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length);const n=e.length,r=zr("rc",n),i=Nt(n),s=A$e(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$e=H8,X$e=1e-7,Z$e=1e-4,O0={};function Y$e(t){return t in O0||(O0[t]={}),O0[t]}const J$e=oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Q$e=600;function eEe(){return oe().global.screen==null?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*Q$e/1024/1024}class X1 extends YA{nextDataId(){return X1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof PC)n=e;else{const r=po(oe().getNumber("WEBGL_VERSION"),e);n=new PC(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=po(oe().getNumber("WEBGL_VERSION"));n=new PC(r),this.binaryCache=Y$e(oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new P$e(this.gpgpu),this.numMBBeforeWarning=eEe(),this.texData=new h6(this,Eo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const u=I0(n),c=new cB(u,!1,o),h=this.runWebGLProgram(c,[a],r,[[i,s]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),h.dataId}write(e,n,r){if((oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Gi.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Gi.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let f;l?f=new xl(a,ul):f=new Do(a,ul);const p=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),m=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Xr());let h;if(i==="complex64"){const f=this.readSync(s.real.dataId),p=this.readSync(s.imag.dataId);h=Da(f,p)}else h=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Xr()-c),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(_=>m.push(_))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let m;l?m=new xl(i,ul):m=new Do(i,ul);const _=this.runWebGLProgram(m,[{dataId:e,shape:i,dtype:o}],o),v=this.read(_.dataId);return this.disposeIntermediateTensorInfo(_),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(oe().getBool("DEBUG")&&!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&oe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...T0(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(o==="complex64"){const m=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),_=m[0],v=m[1];h=Da(_,v)}else if(u==null)h=this.getValuesFromTexture(e);else{const m=ce(i);h=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const m=this.gpgpu.gl;$e(m,()=>m.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(e,h),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(m=>m(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Eo().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new xl(s,ul):p=new Do(s,ul);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),_=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),_}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),h=Eo().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:h},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ul(i));return rt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return rt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!rCe(r))throw oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=ce(n);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),p=this.texData.get(f.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...T0(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),m}const o=oe().getBool("WEBGL_PACK")&&i===!0,a=o?I0(n):n,l=o?new _Te(a):new vTe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=yc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=yc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=zue(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Xr(),endMs:null}}endTimer(e){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Xr(),e)}async getQueryTime(e){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=J$e){return oe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ce(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Vi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return q$e(e.shape,n)}packedUnaryOp(e,n,r){const i=new xl(e.shape,n),s=this.compileAndRun(i,[e],r);return Eo().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=vX(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pB,e.dtype);const n=new Do(e.shape,pB),r=this.compileAndRun(n,[e]);return Eo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&ry(r[0])){const s=r.map(o=>Rl(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Eo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new K$e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new O$e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Rf(e.shape),...Df(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Rf(n),...Df(n)],o=new bX(s,r),a=!0,l=[r],u=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const f=ce(s),p=n[0]*n[1]*4;F(f<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=I0(s);let l;i?l=new yTe(a):l=new gTe(a);const u=!0,c=[n??T0(a)],h=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:s,dataId:h.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Qm.DENSE){const g=o??T0(e.outputShape);l.texShape=g.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ce(a.shape)===0)return l.values=br(a.dtype,0),a;const u=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(g.dataId);if(x.texture==null){if(!e.packedInputs&&ce(g.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!x.isPacked!=!!e.packedInputs)g=x.isPacked?this.unpackTensor(g):this.packTensor(g),u.push(g),x=this.texData.get(g.dataId);else if(x.isPacked&&!Fx(x.shape,g.shape)){const b=g,w=g.shape;g.shape=x.shape,g=this.packedReshape(g,w),u.push(g),x=this.texData.get(g.dataId),b.shape=w}return{shape:g.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const h={shape:a.shape,texData:l,isUniform:!1},f=mTe(e,c,h),p=this.getAndSaveBinary(f,()=>dTe(this.gpgpu,e,c,h)),m=this.activeTimers!=null;let _;m&&(_=this.startTimer()),oe().get("ENGINE_COMPILE_ONLY")||pTe(this.gpgpu,p,c,h,i),u.forEach(g=>this.disposeIntermediateTensorInfo(g)),m&&(_=this.endTimer(_),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(_)}));const v=oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const g=Xr();g-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!oe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ie(()=>{if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=oe().getBool("DEBUG");oe().set("DEBUG",!1);const n=this.abs(St(1e-8)).dataSync()[0];if(oe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?X$e:Z$e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Xr());let h=n.texShape;if(h==null&&(h=bCe(r,l),n.texShape=h),s!=null){const f=I0(r);let p,m=h[1],_=h[0];const v=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!v)&&([m,_]=xd(h[0],h[1])),l?p=new bTe(f,v):p=new cB(f,v);const g=v?[_,m]:h,x=this.makeTensorInfo(g,i),b=this.texData.get(x.dataId);v?b.usage=Gi.PIXELS:b.usage=Gi.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,_,s);const w=[[_,m]],C=this.runWebGLProgram(p,[x],i,w,!0),T=this.texData.get(C.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=Xr()-c)}else{const f=this.acquireTexture(h,a,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=tEe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*dx(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await uK(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(oX(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=hX(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=Eo().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,n,r,s,o,a);return Eo().makeTensorFromDataId(u,n,r,l)}}X1.nextDataId=0;function tEe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */i8()&&l8("webgl",()=>new X1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LP=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ic{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Xe(n,r),this.enableShapeUniforms=Er(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Cd{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Xe(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Er(s);let o="";if(i)if(s===0||ce(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Nt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=zr("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const nEe={kernelName:ky,backendName:"webgl",kernelFunc:Ei};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=Ei({inputs:{x:r},backend:n}),l=Ei({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const rEe={kernelName:cO,backendName:"webgl",kernelFunc:uu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wX="return (a < 0.) ? b * a : a;",SX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function iEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",tu(s,"float32")),a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cd(SX,i.shape,o.shape):new Ic(wX,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const sEe={kernelName:Uw,backendName:"webgl",kernelFunc:iEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kX="return (a < 0.) ? b * a : a;",CX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function oEe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cd(CX,r.shape,i.shape):new Ic(kX,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const aEe={kernelName:l1,backendName:"webgl",kernelFunc:oEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Td="if (isnan(x)) return x;";function yt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const h=a.texData.get(o.dataId),f=n(h.values,l);return a.makeTensorInfo(o.shape,l,f)}const u=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new xl(o.shape,e):c=new Do(o.shape,t),a.runWebGLProgram(c,[o],l)}}function hr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&l.dtype==="complex64"){const m=c.texData.get(l.dataId),_=c.texData.get(u.dataId),[v,g]=[[m.complexTensorInfos.real,_.complexTensorInfos.real],[m.complexTensorInfos.imag,_.complexTensorInfos.imag]].map(b=>{const[w,k]=b,C={dataId:w.dataId,dtype:w.dtype,shape:l.shape},T={dataId:k.dataId,dtype:k.dtype,shape:u.shape},E=new Ic(t,l.shape,u.shape);return c.runWebGLProgram(E,[C,T],Ti(w.dtype,k.dtype))}),x=uu({inputs:{real:v,imag:g},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(g),x}const h=s||Ti(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&i!=null){const m=c.texData.get(l.dataId).values,_=c.texData.get(u.dataId).values,v=l.dtype==="string"?Ma(m):m,g=l.dtype==="string"?Ma(_):_,[x,b]=i(l.shape,u.shape,v,g,h),w=c.makeTensorInfo(b,h),k=c.texData.get(w.dataId);return k.values=x,w}const f=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return f?p=new Cd(e,l.shape,u.shape,n):p=new Ic(t,l.shape,u.shape),c.runWebGLProgram(p,[l,u],h)}}function eg(t,e=!1){if(t==="linear")return e?V$e:L$e;if(t==="relu")return e?W$e:B$e;if(t==="elu")return e?U$e:F$e;if(t==="relu6")return e?G$e:z$e;if(t==="prelu")return e?CX:kX;if(t==="leakyrelu")return e?SX:wX;if(t==="sigmoid")return e?H$e:j$e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TX{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Er(this.outputShape.length);const c=i?e[1]:e[2],h=Math.ceil(c/2),f=i?"i * 2, rc.y":"rc.y, i * 2",p=s?"rc.z, i * 2":"i * 2, rc.z",m=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],_=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",g="";a&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:v=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",w="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${w};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${_[0]});
          result += (${m[1]} * ${_[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class gB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Xe(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yB="return a * b;";function FP(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Ti(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new gB(mB.REAL,r.shape,i.shape),c=new gB(mB.IMAG,r.shape,i.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(u,h,"float32"),p=n.runWebGLProgram(c,h,"float32"),m=uu({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=o$e(r.shape,i.shape,a.values,l.values,s),h=n.makeTensorInfo(c,s),f=n.texData.get(h.dataId);return f.values=u,h}let o;return oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Cd(yB,r.shape,i.shape):o=new Ic(yB,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const lEe={kernelName:Py,backendName:"webgl",kernelFunc:FP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t,e,n){const r=[Rf(t.shape),...Df(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Rf(e),...Df(e)],o=new bX(s,r),a=!0,l=[r],u=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=ce(i.shape),l=d6(s,a),u=ce(l);F(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!Fx(i.shape,l)&&!(c.texture!==null&&Fx(c.shape,l))?uEe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const cEe={kernelName:c1,backendName:"webgl",kernelFunc:ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const h=1/n;u=`sumValue += dot(values * ${Sf(h)?h.toPrecision(2):h}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hEe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,h=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${h===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${h===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${h===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=P1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Zc(t,e,n,r){const i=fEe(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:u}=i[o];let c,h;n==="mean"?c=o===0?new vB({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new vB({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new hEe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),h=s,s=r.runWebGLProgram(c,[s],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dEe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Nt(this.rank),s=pEe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function pEe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mEe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Nt(this.rank),s=xX("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=s[c];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1(t,e,n){const r=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mEe(t.shape,e):new dEe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t,e,n,r){const i=e,s=t.shape.length,o=it(i,t.shape);let a=o;const l=hn(a,s),u=l!=null;let c=t;u&&(c=Z1(t,l,r),a=kn(a.length,s)),cr("sum",a,s);const[h,f]=Qn(c.shape,a);let p=h;n&&(p=On(h,o));const m=ce(f),v=ce(t.shape)/m,g=ke({inputs:{x:c},attrs:{shape:[v,m]},backend:r}),x=GO(t.dtype),b=Zc(g,x,"sum",r),w=ke({inputs:{x:b},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return gEe(i,s,o,n)}const yEe={kernelName:g1,backendName:"webgl",kernelFunc:Y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wr(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=i.shape[s[c]];let u;if(o.shouldExecuteOnCPU([i])){const h=o.texData.get(i.dataId).values,f=MP(h,i.shape,i.dtype,s,l);u=o.makeTensorInfo(l,i.dtype);const p=o.texData.get(u.dataId);p.values=f}else u=Z1(i,s,o);return u}const vEe={kernelName:rf,backendName:"webgl",kernelFunc:Wr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $X=1e3;function Bx({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,h=n?t.shape[u-2]:t.shape[u-1],f=r?e.shape[c-1]:e.shape[c-2],p=n?t.shape[u-1]:t.shape[u-2],m=r?e.shape[c-2]:e.shape[c-1],_=t.shape.slice(0,-2),v=e.shape.slice(0,-2),g=ce(_),x=ce(v),w=Xe(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,m]);F(h===f,()=>`Error in matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=n?[g,h,p]:[g,p,h],C=r?[x,m,f]:[x,f,m],T=ke({inputs:{x:t},backend:i,attrs:{shape:k}}),E=ke({inputs:{x:e},backend:i,attrs:{shape:C}}),A=[T,E],$=Math.max(g,x),N=n?T.shape[1]:T.shape[2],P=s!=null,M=o!=null,B=l==="leakyrelu",z=l!=null?eg(l,!0):null,j=P||M||B||z!=null;let U;if((p===1||m===1)&&N>$X&&j===!1){let W=T,G=E;n&&(W=Wr({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),A.push(W)),r&&(G=Wr({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(G));const Y=m!==1,ee=m===1;let se=W;Y&&(se=ke({inputs:{x:W},backend:i,attrs:{shape:[$,N,1]}}),A.push(se));const fe=m===1?2:1;let le=G;ee&&(le=ke({inputs:{x:G},backend:i,attrs:{shape:[$,1,N]}}),A.push(le));const de=FP({inputs:{a:se,b:le},backend:i});U=Y1({inputs:{x:de},backend:i,attrs:{axis:fe,keepDims:!0}}),A.push(de)}else{const W=Ti(t.dtype,e.dtype),G=new TX(k,C,[$,p,m],n,r,P,z,M,B),Y=[T,E];if(s!=null&&Y.push(s),M&&Y.push(o),B){const ee=i.makeTensorInfo([],"float32",tu(a,"float32"));Y.push(ee),A.push(ee)}U=i.runWebGLProgram(G,Y,W)}const D=ke({inputs:{x:U},backend:i,attrs:{shape:w}});A.push(U);for(const W of A)i.disposeIntermediateTensorInfo(W);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return Bx({a:i,b:s,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:c})}const xEe={kernelName:px,backendName:"webgl",kernelFunc:_Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _B="return abs(x);";function bEe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=vX(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new xl(r.shape,_B):i=new Do(r.shape,_B),n.runWebGLProgram(i,[r],r.dtype)}const wEe={kernelName:Sw,backendName:"webgl",kernelFunc:bEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SEe=Ms+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,kEe=yt({opSnippet:SEe}),CEe={kernelName:iy,backendName:"webgl",kernelFunc:kEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TEe=Ms+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,$Ee=yt({opSnippet:TEe}),EEe={kernelName:sy,backendName:"webgl",kernelFunc:$Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xB="return a + b;",IEe=hr({opSnippet:xB,packedOpSnippet:xB,supportsComplex:!0,cpuKernelImpl:BTe}),AEe={kernelName:dd,backendName:"webgl",kernelFunc:IEe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OEe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NEe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ei({inputs:{x:r[0]},backend:n});if(r.length>oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=k_({inputs:r.slice(0,l),backend:n}),c=k_({inputs:r.slice(l),backend:n});return k_({inputs:[u,c],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>Ti(l,u)),s=r.map(l=>l.shape),a=oe().getBool("WEBGL_PACK")?new NEe(r[0].shape,s):new OEe(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const PEe={kernelName:rO,backendName:"webgl",kernelFunc:k_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=it(s,i.shape);let u=l;const c=hn(u,a);let h=i;c!=null&&(h=Wr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=kn(u.length,a)),cr("all",u,a);const[f,p]=Qn(h.shape,u),m=ce(p),_=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),v=Zc(_,_.dtype,"all",n);let g;if(o){const x=On(f,l);g=ke({inputs:{x:v},backend:n,attrs:{shape:x}})}else g=ke({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(h),g}const DEe={kernelName:iO,backendName:"webgl",kernelFunc:REe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=it(s,i.shape);let u=l;const c=hn(u,a);let h=i;c!=null&&(h=Wr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=kn(u.length,a)),cr("any",u,a);const[f,p]=Qn(h.shape,u),m=ce(p),_=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),v=Zc(_,_.dtype,"any",n);let g;if(o){const x=On(f,l);g=ke({inputs:{x:v},backend:n,attrs:{shape:x}})}else g=ke({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(h),g}const LEe={kernelName:sO,backendName:"webgl",kernelFunc:MEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FEe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BEe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Nt(l),c=zr("coords",l);let h,f;if(o===1){f=l+1;const E=Nt(f);h=`
        ${E} sourceLocR = ${E}(${c.join()}, 0);
        ++${c[l-1]};
        ${E} sourceLocG = ${E}(${c.join()}, 0);
        ++${c[l-2]};
        ${E} sourceLocA = ${E}(${c.join()}, 0);
        --${c[l-1]};
        ${E} sourceLocB = ${E}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,h=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,f),m="."+p[f-1],_=p.map(E=>"int "+E),v=zr("sourceLocR",f-1).concat("inIdx.r"),g=zr("sourceLocG",f-1).concat("inIdx.g"),x=zr("sourceLocB",f-1).concat("inIdx.b"),b=zr("sourceLocA",f-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",k=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()})));`,C=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,T=i?"":`
      float getBestIndicesAChannel(${_.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${_.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=P1(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new FEe(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const h=EX(t,e,n,c);return t.disposeIntermediateTensorInfo(c),h}function IX(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=P1(s),a=new BEe(i,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=IX(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function AX(t,e,n,r){const i=[n];if(cr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!oe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[u,c]=Qn(l.shape,i),h=ce(c),f=ke({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});s.push(f);const p=EX(t,f,r);s.push(p);const m=ke({inputs:{x:p},backend:t,attrs:{shape:u}});return s.forEach(_=>t.disposeIntermediateTensorInfo(_)),m}return IX(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=it(s,i.shape);const a=hn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=kn(o.length,l.shape.length)),cr("argMax",[o[0]],l.shape.length);const c=AX(n,l,o[0],"max");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const jEe={kernelName:kw,backendName:"webgl",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=it(s,i.shape);const a=hn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=kn(o.length,l.shape.length)),cr("argMin",[o[0]],l.shape.length);const c=AX(n,l,o[0],"min");return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const UEe={kernelName:Cw,backendName:"webgl",kernelFunc:VEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEe=Ms+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,GEe=yt({opSnippet:WEe}),HEe={kernelName:oy,backendName:"webgl",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe=Ms+"return log(x + sqrt(x * x + 1.0));",qEe=yt({opSnippet:KEe}),XEe={kernelName:ay,backendName:"webgl",kernelFunc:qEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZEe=Ms+`
  return atan(x);
`,YEe=yt({opSnippet:ZEe}),JEe={kernelName:ly,backendName:"webgl",kernelFunc:YEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QEe=LP+`
  return atan(a, b);
`,eIe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xc+`
  return result;
`,tIe=hr({opSnippet:QEe,packedOpSnippet:eIe}),nIe={kernelName:cy,backendName:"webgl",kernelFunc:tIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe=Ms+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,iIe=yt({opSnippet:rIe}),sIe={kernelName:uy,backendName:"webgl",kernelFunc:iIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tg{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const _=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(_||(x="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?v:g:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const k=Math.floor(o/4)*4,C=o%4,T=`
      if (${_}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${k};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${w});
      }
    `}}class BP{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,h=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterDepth,m=e.effectiveFilterHeight,_=e.effectiveFilterWidth,v=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let w="0.0";if(b||(w="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${g}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${_};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${$} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${_} +
                      wR * ${_} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,E=o%4,A=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${g}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${A}
            }

            int xC = xCCorner + ${T};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${A}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;yv(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;F(Tr(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Rs(i.shape,s,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))return Ei({inputs:{x:i},backend:n});const h=new tg(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const aIe={kernelName:Tw,backendName:"webgl",kernelFunc:oIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],h=Ha(i.shape,s,o,c,a,l,u),f=new BP(h,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const uIe={kernelName:$w,backendName:"webgl",kernelFunc:lIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cIe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,h=u-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${h});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class hIe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=h-1-e.padInfo.front,_=f-1-e.padInfo.top,v=p-1-e.padInfo.left,g=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${_}, ${v});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],f=Ha(o.shape,a,l,h,u,c),p=new hIe(f);return n.runWebGLProgram(p,[i],o.dtype)}const dIe={kernelName:aO,backendName:"webgl",kernelFunc:fIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;yv([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Rs(o.shape,a,l,1,u),h=new cIe(c);return n.runWebGLProgram(h,[i],o.dtype)}const mIe={kernelName:oO,backendName:"webgl",kernelFunc:pIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return Bx({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const yIe={kernelName:Ew,backendName:"webgl",kernelFunc:gIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vIe{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Xe(e,n),Xe(e,r);let a="0.0";i!=null&&(Xe(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Xe(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ie{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Xe(e,n),Xe(e,r);let a="vec4(0.0)";i!=null&&(Xe(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Xe(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;F(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,s];let c=null;o!=null&&(c=o.shape,u.push(o));let h=null;a!=null&&(h=a.shape,u.push(a));const f=oe().getBool("WEBGL_PACK_NORMALIZATION")?new _Ie(r.shape,i.shape,s.shape,c,h,l):new vIe(r.shape,i.shape,s.shape,c,h,l);return e.runWebGLProgram(f,u,u[0].dtype)},bIe={kernelName:zw,backendName:"webgl",kernelFunc:xIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wIe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Nt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=SIe(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${OE[a]} = start[${a}] + coords.${OE[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const OE=["x","y","z","w","u","v"];function SIe(t){if(t===1)return"sourceLoc";if(t<=6)return OE.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kIe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Nt(this.rank),r=zr("coords",this.rank),i=zr("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,h)=>`start[${h}]`).join()});`:e.map((c,h)=>`${i[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=PN(e,Le(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function $d(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=N1(i,s,o);if(AN(i,a,l),ce(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const h=n.texData.get(i.dataId),f=y$e(h.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:u}=n.texData.get(i.dataId),c=NN(i.shape,a,l);if(u||!c){const h=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kIe(l):new wIe(l),f=[a];return n.runWebGLProgram(h,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),CIe(i,a,l,n)}const TIe={kernelName:m1,backendName:"webgl",kernelFunc:$d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;F(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((x,b)=>x*b),l=iv(i.shape,s,a),u=sv(l.length,s.length),c=ov(i.shape,s,a),h=FN(o,s.length),f=BN(c,o,s.length),p=[],m=ke({inputs:{x:i},backend:n,attrs:{shape:l}}),_=Wr({inputs:{x:m},backend:n,attrs:{perm:u}}),v=ke({inputs:{x:_},backend:n,attrs:{shape:c}}),g=$d({inputs:{x:v},backend:n,attrs:{begin:h,size:f}});return p.push(m),p.push(_),p.push(v),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),g},EIe={kernelName:Iw,backendName:"webgl",kernelFunc:$Ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),u=yX(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const AIe={kernelName:lO,backendName:"webgl",kernelFunc:IIe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,NIe=`
  return float(int(a.r) & int(b.r));
`;function PIe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[c,h]=jTe(r.shape,i.shape,l,u,r.dtype),f=n.makeTensorInfo(h,r.dtype),p=n.texData.get(f.dataId);return p.values=c,f}let a;return s?a=new Cd(OIe,r.shape,i.shape,!1):a=new Ic(NIe,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const RIe={kernelName:uO,backendName:"webgl",kernelFunc:PIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=Xe(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const MIe={kernelName:_6,backendName:"webgl",kernelFunc:DIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe="return float(a != b);",OX=hr({opSnippet:LIe,cpuKernelImpl:l$e,dtype:"bool"}),FIe={kernelName:r1,backendName:"webgl",kernelFunc:OX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _v(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ei({inputs:{x:i.complexTensorInfos.real},backend:n})}const BIe={kernelName:RO,backendName:"webgl",kernelFunc:_v};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe="return float(int(x));";function jIe(t,e){const n=new Do(t.shape,zIe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ei({inputs:{x:i},backend:n});const o=qn(i.shape),a=NE({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=uu({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=_v({inputs:{input:i},backend:n}),a=NE({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!p6(i.dtype,s)){const o=Ei({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,u]=VTe(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}if(s==="int32")return jIe(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",br("bool",1)),l=OX({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const VIe={kernelName:hy,backendName:"webgl",kernelFunc:NE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bB="return ceil(x);",UIe=yt({opSnippet:bB,packedOpSnippet:bB,cpuKernelImpl:UTe}),WIe={kernelName:fy,backendName:"webgl",kernelFunc:UIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GIe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HIe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;oe().getBool("WEBGL_PACK_CLIP")?a=new HIe(i.shape):a=new GIe(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const qIe={kernelName:dy,backendName:"webgl",kernelFunc:KIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XIe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function ZIe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new XIe(r.shape),o=[wB(r,i.complexTensorInfos.real),wB(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const YIe={kernelName:Aw,backendName:"webgl",kernelFunc:ZIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JIe{constructor(e){this.outputShape=[],this.outputShape=Wo(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QIe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Wo(e,n);const r=this.outputShape,i=r.length,s=Nt(i),o=zr("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((_,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let _=1;_<l.length;_++)l[_]=l[_-1]+e[_][n];const u=a[n],c=a.slice(-2),h=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${c.join()}));
        }`;for(let _=1;_<l.length;_++){const v=l[_-1];f+=`
        if (${u} < ${l[_]}  && ${u} >= ${l[_-1]}) {
          return getChannel(
            getT${_}(${N0(a,u,v)}),
            vec2(${N0(c,u,v)}));
        }`}const p=l.length,m=l[l.length-1];f+=`
        return getChannel(
          getT${p}(${N0(a,u,m)}),
          vec2(${N0(c,u,m)}));`,this.userCode=`
      float getValue(${a.map(_=>"int "+_)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function N0(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ei({inputs:{x:i.complexTensorInfos.imag},backend:n})}const e2e={kernelName:TO,backendName:"webgl",kernelFunc:J1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gp(t,e,n){const r=t[0].dtype;if(r==="complex64"){const p=t.map(x=>_v({inputs:{input:x},backend:n})),m=t.map(x=>J1({inputs:{input:x},backend:n})),_=Gp(p,e,n),v=Gp(m,e,n),g=uu({inputs:{real:_,imag:v},backend:n});return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(v),g}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const p=t.map(w=>{const C=[-1,ce(w.shape.slice(e))];return ke({inputs:{x:w},backend:n,attrs:{shape:C}})}),m=p.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),_=Wo(p.map(w=>w.shape),1),v=p[0].shape[0]===1,g=WTe(m,_,r,v),x=Wo(t.map(w=>w.shape),e),b=n.makeTensorInfo(x,r,g);return p.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const s=t.filter(p=>ce(p.shape)>0),o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const p=o?new Do(t[0].shape,ul):new xl(t[0].shape,ul);return n.runWebGLProgram(p,t,r)}const a=oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const p=[];for(let _=0;_<s.length;_+=a){const v=s.slice(_,_+a);p.push(Gp(v,e,n))}const m=Gp(p,e,n);for(const _ of p)n.disposeIntermediateTensorInfo(_);return m}if(o){const p=new QIe(s.map(m=>m.shape),e);return n.runWebGLProgram(p,s,r)}const{tensors2D:l,outShape:u}=t2e(s,e,n),c=new JIe(l.map(p=>p.shape)),h=n.runWebGLProgram(c,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const f=ke({inputs:{x:h},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(h),f}function t2e(t,e,n){const r=Wo(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>ke({inputs:{x:s},attrs:{shape:[-1,ce(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=it(i,e[0].shape)[0],o=e.map(u=>u.shape);DN(o,s);const a=Wo(e.map(u=>u.shape),s);if(ce(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>ce(u.shape)>0);return l.length===1?Ei({inputs:{x:l[0]},backend:n}):Gp(l,s,n)}const n2e={kernelName:Ow,backendName:"webgl",kernelFunc:NX};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PX{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,_=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,x=v?2:3,b=v?3:1;let w="",k="";r&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,k="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${_===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${_===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${_===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${k}
        setOutput(result);
      }
    `}}class r2e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.filterDepth,f=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,_=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${_===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${_===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${_===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RX{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Er(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,h=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)f+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;f+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)f+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(h+1)/2;v++){const g=v*2;if(f+=`
           xC = xCCorner + ${g*l};
           `,a===1){if(g<c&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?f+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const x=o%2===0?JA(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:f+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):x===1?f+=`
                     xC${g+1} = xTexelC${g};
                     `:f+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(f+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(f+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(f+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let p="",m="";r&&(i?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${_}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i2e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Er(this.outputShape.length);const{dataFormat:r}=n,i=Gr(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let h=0;h<=1;h++)u+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zx(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function DX({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,h=l[0]*l[1]*l[2],f=n.outChannels,p=n.dataFormat==="channelsLast",m=!1,_=!1;let v;const g=[];if(s!=null){const w=zx(s.shape,p);w!=null&&(s=ke({inputs:{x:s},backend:r,attrs:{shape:w}}),g.push(s))}if(i!=null){const w=zx(i.shape,p);w!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:w}}),g.push(i))}if(!((h===1||f===1)&&c>$X)&&u.isPacked&&p&&u.texture!=null&&l[2]%2!==0&&Ct(u.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,F(Fx(u.shape,k.shape),()=>`packed reshape ${u.shape} to ${k.shape} isn't free`);const T=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(T);const E=Bx({a:k,b:T,backend:r,transposeA:m,transposeB:_,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),A=r.texData.get(E.dataId);F(A.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,A.shape=n.outShape,v=Ei({inputs:{x:E},backend:r}),v.shape=n.outShape,g.push(E)}else{const w=n.outHeight*n.outWidth,k=ke({inputs:{x:t},backend:r,attrs:{shape:p?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=Bx({a:p?k:C,b:p?C:k,transposeA:!p,transposeB:_,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});v=ke({inputs:{x:T},backend:r,attrs:{shape:n.outShape}}),g.push(k),g.push(C),g.push(T)}for(const w of g)r.disposeIntermediateTensorInfo(w);return v}function MX({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:h,outHeight:f,dataFormat:p}=n,m=p==="channelsLast",_=l*u*c,v=f*h,g=[n.batchSize,_,v],x=!0,b=!1,w=[];if(s!=null){const D=zx(s.shape,m);D!=null&&(s=ke({inputs:{x:s},backend:r,attrs:{shape:D}}),w.push(s))}if(i!=null){const D=zx(i.shape,m);D!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:D}}),w.push(i))}const k=ke({inputs:{x:e},backend:r,attrs:{shape:[1,_,ce(e.shape)/_]}});w.push(k);const C=new i2e(g,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=r.runWebGLProgram(C,[t],"float32",T),A=ke({inputs:{x:E},backend:r,attrs:{shape:g}});w.push(E),w.push(A);const $=i!=null,N=s!=null,P=a==="leakyrelu",M=a?eg(a,!0):null,B=new TX(m?A.shape:k.shape,m?k.shape:A.shape,m?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,b,$,M,N,P),z=m?[A,k]:[k,A];if(i&&z.push(i),N&&z.push(s),P){const D=r.makeTensorInfo([],"float32",tu(o,"float32"));z.push(D),w.push(D)}const j=r.runWebGLProgram(B,z,"float32"),U=ke({inputs:{x:j},backend:r,attrs:{shape:n.outShape}});w.push(j);for(const D of w)r.disposeIntermediateTensorInfo(D);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=Ka(l),f=ur(i.shape,s.shape,o,u,a,c,!1,h);let p;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))p=DX({x:i,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&h==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const _=new RX(f),v=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];p=n.runWebGLProgram(_,[i,s],"float32",v)}else if(oe().getBool("WEBGL_CONV_IM2COL"))p=MX({x:i,filter:s,convInfo:f,backend:n});else{const _=new PX(f);p=n.runWebGLProgram(_,[i,s],"float32")}const m=ke({inputs:{x:p},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(p),m}const o2e={kernelName:Nw,backendName:"webgl",kernelFunc:s2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class l2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class u2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class c2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=Ka(l),f=ur(i.shape,c,o,1,a,u,!1,h),p=new a2e(f);return n.runWebGLProgram(p,[i,s],"float32")}const f2e={kernelName:hO,backendName:"webgl",kernelFunc:h2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d2e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Er(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=Ka(u),f=ur(o,s.shape,a,1,l,c,!1,h);if(oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const p=[[f.strideHeight,f.strideWidth]],m=new d2e(f);return n.runWebGLProgram(m,[i,s],"float32",p)}else{const p=new l2e(f);return n.runWebGLProgram(p,[i,s],"float32")}}const m2e={kernelName:Pw,backendName:"webgl",kernelFunc:p2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=nu(i.shape,s.shape,o,l,a),c=new r2e(u);return n.runWebGLProgram(c,[i,s],"float32")}const y2e={kernelName:Rw,backendName:"webgl",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,u=nu(i.shape,l,o,1,a),c=new u2e(u);return n.runWebGLProgram(c,[i,s],"float32")}const _2e={kernelName:fO,backendName:"webgl",kernelFunc:v2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,u=nu(l,s.shape,a,1,o),c=new c2e(u);return n.runWebGLProgram(c,[i,s],"float32")}const b2e={kernelName:dO,backendName:"webgl",kernelFunc:x2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e=Td+`
  return cos(x);
`,S2e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Xc}
  return result;
`,k2e=yt({opSnippet:w2e,packedOpSnippet:S2e}),C2e={kernelName:py,backendName:"webgl",kernelFunc:k2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,$2e=yt({opSnippet:T2e}),E2e={kernelName:my,backendName:"webgl",kernelFunc:$2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I2e{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[c]=n,[h,f]=r;this.outputShape=[c,h,f,u];const p=i==="bilinear"?1:0,[m,_]=[`${a-1}.0`,`${l-1}.0`],[v,g,x]=h>1?[`${(a-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[b,w,k]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${_} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${_}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${_} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new I2e(i.shape,s.shape,a,l,u);return n.runWebGLProgram(c,[i,s,o],"float32")},O2e={kernelName:mO,backendName:"webgl",kernelFunc:A2e};var ng;(function(t){t.Prod="*",t.Sum="+"})(ng||(ng={}));class SB{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===ng.Prod?"1.0":"0.0",a=r?o:`getX(${kB(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=i?`end != ${l-1}`:"end != 0",c=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Nt(s)} coords = getOutputCoords();
        int end = ${CB(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${CB(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${kB(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function kB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function CB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(t,e,n,r,i,s){const o=e.shape.length,a=hn([r],o);let l=e;a!=null&&(l=Wr({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=kn(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let h=Ei({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const p=new SB(t,l.shape,!1,s),m=[[f]],_=h;h=n.runWebGLProgram(p,[h],h.dtype,m),n.disposeIntermediateTensorInfo(_)}if(i){const f=new SB(t,l.shape,i,s),p=h;h=n.runWebGLProgram(f,[h],h.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const f=ru(a),p=Wr({inputs:{x:h},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),p}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return LX(ng.Prod,i,n,s,o,a)}const P2e={kernelName:pO,backendName:"webgl",kernelFunc:N2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return LX(ng.Sum,i,n,s,o,a)}const D2e={kernelName:Dw,backendName:"webgl",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=yX(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=zTe(l,u,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const L2e={kernelName:gO,backendName:"webgl",kernelFunc:M2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F2e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],u=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],h=l*s,f=u*s,p=c/(s*s),m=o==="NHWC"?[a,h,f,p]:[a,p,h,f],_=new F2e(m,s,o);return n.runWebGLProgram(_,[i],i.dtype)}const z2e={kernelName:yO,backendName:"webgl",kernelFunc:B2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FX{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Er(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BX{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Er(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,h=e.filterWidth,f=h;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<h;g++)p+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;p+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<h;g++)p+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(f+1)/2;g++){const x=g*2;if(p+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<h&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?p+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<h)){const b=a%2===0?JA(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:p+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):b===1?p+=`
                    xC${x+1} = xTexelC${x};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<h&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<h&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<h&&(p+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<h&&(p+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<h&&(p+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let m="",_="";r&&(i?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,_="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${_}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),F(Tr(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=ur(i.shape,s.shape,o,c,a,u,!0);let f;oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?f=new BX(h):f=new FX(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[i,s],"float32",p)}const V2e={kernelName:Mw,backendName:"webgl",kernelFunc:j2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class W2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,h=ur(i.shape,c,o,a,l,u,!0),f=new U2e(h);return n.runWebGLProgram(f,[i,s],"float32")}const H2e={kernelName:vO,backendName:"webgl",kernelFunc:G2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,h=ur(c,s.shape,o,a,l,u,!0),f=new W2e(h);return n.runWebGLProgram(f,[i,s],"float32")}const q2e={kernelName:_O,backendName:"webgl",kernelFunc:K2e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X2e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=ce(r.shape),o=ke({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new X2e(s),l=n.runWebGLProgram(a,[o],o.dtype),u=ke({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const Y2e={kernelName:x6,backendName:"webgl",kernelFunc:Z2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J2e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:h,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${h}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=Qy(i.shape,s.shape,o,a,"NHWC",l);let c;const h=new J2e(u);c=n.runWebGLProgram(h,[i,s],"float32");const f=ke({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const eAe={kernelName:Lw,backendName:"webgl",kernelFunc:Q2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=KN(i,s.length);XN(o.length,l,s);const{path:u,steps:c}=ZN(a,l),h=c.length;let f=null,p=o.length;const m=[];for(let _=0;_<h;++_){for(const v of c[_]){const{permutationIndices:g,expandDims:x}=qN(p,l[v]);let b;YN(g)?b=s[v]:(b=Wr({inputs:{x:s[v]},backend:n,attrs:{perm:g}}),m.push(b));const w=b.shape.slice();for(let k=0;k<x.length;++k)w.splice(x[k],0,1);Ct(b.shape,w)||(b=ke({inputs:{x:b},backend:n,attrs:{shape:w}}),m.push(b)),f===null?f=b:(f=FP({inputs:{a:b,b:f},backend:n}),m.push(f))}_<h-1&&(u[_]>=0&&(f=Y1({inputs:{x:f},backend:n,attrs:{axis:u[_]-(o.length-p),keepDims:!1}}),m.push(f)),p--)}for(const _ of m)_!==f&&n.disposeIntermediateTensorInfo(_);return f}const nAe={kernelName:xO,backendName:"webgl",kernelFunc:tAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe="return (x >= 0.0) ? x : (exp(x) - 1.0);",iAe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,sAe=yt({opSnippet:rAe,packedOpSnippet:iAe}),oAe={kernelName:yy,backendName:"webgl",kernelFunc:sAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe="return (b >= 0.0) ? a : a * (b + 1.0);",lAe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,uAe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cd(lAe,r.shape,i.shape):new Ic(aAe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},cAe={kernelName:bO,backendName:"webgl",kernelFunc:uAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe=`
  return vec4(equal(a, b));
`,fAe="return float(a == b);",dAe=hr({opSnippet:fAe,packedOpSnippet:hAe,dtype:"bool",cpuKernelImpl:GTe}),pAe={kernelName:Fw,backendName:"webgl",kernelFunc:dAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${zN};
  float a1 = ${jN};
  float a2 = ${VN};
  float a3 = ${UN};
  float a4 = ${WN};
  float a5 = ${GN};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,gAe=yt({opSnippet:mAe}),yAe={kernelName:vy,backendName:"webgl",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe=Td+`
  return exp(x);
`,_Ae=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zX=yt({opSnippet:vAe,packedOpSnippet:_Ae,cpuKernelImpl:HTe,dtype:"float32"}),xAe={kernelName:_y,backendName:"webgl",kernelFunc:zX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PE(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(F(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),ke({inputs:{x:s},backend:r,attrs:{shape:a}})}const bAe={kernelName:Bw,backendName:"webgl",kernelFunc:PE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TB="return exp(x) - 1.0;",wAe=yt({opSnippet:TB,packedOpSnippet:TB,cpuKernelImpl:KTe}),SAe={kernelName:xy,backendName:"webgl",kernelFunc:wAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $B{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(t,e,n){const r=n.texData.get(t.dataId),i=ce(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=ke({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,u=new $B("real",l,e),c=new $B("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,h,"float32"),p=n.runWebGLProgram(c,h,"float32"),m=uu({inputs:{real:f,imag:p},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p);const _=ke({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(m),_}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t){const{inputs:e,backend:n}=t,{input:r}=e;return jX(r,!1,n)}const CAe={kernelName:wO,backendName:"webgl",kernelFunc:kAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TAe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xv(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||hd(i),s==="string"){const o=bn(s,ce(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new TAe(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const $Ae={kernelName:SO,backendName:"webgl",kernelFunc:xv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EAe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:kO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new EAe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EB="return floor(x);",AAe=yt({opSnippet:EB,packedOpSnippet:EB,cpuKernelImpl:qTe}),OAe={kernelName:by,backendName:"webgl",kernelFunc:AAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,PAe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,RAe=hr({opSnippet:NAe,packedOpSnippet:PAe,dtype:"int32"}),DAe={kernelName:wy,backendName:"webgl",kernelFunc:RAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MAe{constructor(e){this.variableNames=["A"];const n=Gr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LAe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Gr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAe={kernelName:tce,backendName:"webgl",kernelFunc:BAe};let yh,RC=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function BAe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],h=[u,l,s];if(a||o){const _=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(yh==null||_!==RC)&&(RC=_,yh=document.createElement("canvas").getContext("2d",{willReadFrequently:RC})),yh.canvas.width=l,yh.canvas.height=u,yh.drawImage(i,0,0,l,u),i=yh.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=Gi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const p=oe().getBool("WEBGL_PACK")?new LAe(h):new MAe(h),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:m}=r,_=Ka(c),v=ur(i.shape,s.shape,l,h,u,f,!1,_);let g;const x=[],b=o!=null,w=a!=null,k=p==="leakyrelu",C=()=>{const E=[i,s],A=($,N)=>{if(N==="NCHW"&&$.shape.length===1&&$.shape[0]!==1){const P=ke({inputs:{x:$},backend:n,attrs:{shape:[$.shape[0],1,1]}});return x.push(P),P}return $};if(b&&E.push(A(o,c)),w&&E.push(A(a,c)),k){const $=n.makeTensorInfo([],"float32",tu(m,"float32"));E.push($),x.push($)}return E};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))g=DX({x:i,filter:s,convInfo:v,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else if(v.strideWidth<=2&&_==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const E=p?eg(p,!0):null,A=new RX(v,b,E,w,k),$=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],N=C();g=n.runWebGLProgram(A,N,"float32",$)}else if(oe().getBool("WEBGL_CONV_IM2COL"))g=MX({x:i,filter:s,convInfo:v,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else{const E=p?eg(p,!1):null,A=new PX(v,b,E,w,k),$=C();g=n.runWebGLProgram(A,$,"float32")}const T=ke({inputs:{x:g},backend:n,attrs:{shape:v.outShape}});return x.push(g),x.forEach(E=>n.disposeIntermediateTensorInfo(E)),T}const jAe={kernelName:mx,backendName:"webgl",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,m=[];let _=c;_==null&&(_=[1,1]),F(Tr(l,_),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${_}'`);const v=ur(i.shape,s.shape,l,_,u,h,!0),g=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=f?eg(f,g):null,b=[i,s],w=o!=null,k=a!=null,C=f==="leakyrelu";if(w&&b.push(o),k&&b.push(a),C){const $=n.makeTensorInfo([],"float32",tu(p,"float32"));b.push($),m.push($)}let T;g?T=new BX(v,w,x,k,C):T=new FX(v,w,x,k,C);const E=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],A=n.runWebGLProgram(T,b,"float32",E);return m.forEach($=>n.disposeIntermediateTensorInfo($)),A}const UAe={kernelName:B6,backendName:"webgl",kernelFunc:VAe};class WAe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Nt(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GAe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=ce(r.shape),[l,u,c,h]=IN(r,i),f=ke({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),p=ke({inputs:{x:r},backend:n,attrs:{shape:[ce(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const g=n.readSync(i.dataId),x=n.bufferSync(r),b=XTe(g,x,r.dtype,u,o,c,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const m=new WAe(o,h,[u,c],r.shape),_=n.runWebGLProgram(m,[p,f],p.dtype),v=ke({inputs:{x:_},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(_),v}const HAe={kernelName:b6,backendName:"webgl",kernelFunc:GAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KAe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Nt(this.rank),i=qAe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function qAe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=it(o,i.shape)[0];if(oe().get("DEBUG")){const x=n.readSync(s.dataId),b=i.shape[l];for(let w=0;w<x.length;++w){const k=x[w];F(k<=b-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${b-1}]`)}}const u=QN(i,s,l,a),c=ce(s.shape),h=[],f=ke({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=ke({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});h.push(f),h.push(p);const m=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const x=n.bufferSync(p),b=n.bufferSync(f),w=ZTe(b,x,m);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(u.outputShape,w.dtype,w.values)}const _=new KAe(f.shape,m),v=n.runWebGLProgram(_,[f,p],f.dtype);h.push(v);const g=ke({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const XAe={kernelName:jw,backendName:"webgl",kernelFunc:VX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe="return float(a > b);",YAe=`
  return vec4(greaterThan(a, b));
`,JAe=hr({opSnippet:ZAe,packedOpSnippet:YAe,cpuKernelImpl:YTe,dtype:"bool"}),QAe={kernelName:Vw,backendName:"webgl",kernelFunc:JAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe="return float(a >= b);",tOe=`
  return vec4(greaterThanEqual(a, b));
`,nOe=hr({opSnippet:eOe,packedOpSnippet:tOe,dtype:"bool",cpuKernelImpl:JTe}),rOe={kernelName:Sy,backendName:"webgl",kernelFunc:nOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t){const{inputs:e,backend:n}=t,{input:r}=e;return jX(r,!0,n)}const sOe={kernelName:CO,backendName:"webgl",kernelFunc:iOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOe="return float(!isnan(x) && !isinf(x));",aOe=yt({opSnippet:oOe,dtype:"bool"}),lOe={kernelName:Cy,backendName:"webgl",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOe="return float(isinf(x));",cOe=yt({opSnippet:uOe,dtype:"bool"}),hOe={kernelName:Ty,backendName:"webgl",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe="return float(isnan(x));",dOe=yt({opSnippet:fOe,dtype:"bool"}),pOe={kernelName:$y,backendName:"webgl",kernelFunc:dOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe="return float(a < b);",gOe=`
  return vec4(lessThan(a, b));
`,yOe=hr({opSnippet:mOe,packedOpSnippet:gOe,cpuKernelImpl:QTe,dtype:"bool"}),vOe={kernelName:Ww,backendName:"webgl",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe="return float(a <= b);",xOe=`
  return vec4(lessThanEqual(a, b));
`,bOe=hr({opSnippet:_Oe,packedOpSnippet:xOe,cpuKernelImpl:e$e,dtype:"bool"}),wOe={kernelName:Gw,backendName:"webgl",kernelFunc:bOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=t$e(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const kOe={kernelName:w6,backendName:"webgl",kernelFunc:SOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=Td+`
  return x < 0.0 ? 0./0. : log(x);
`,TOe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,$Oe=yt({opSnippet:COe,packedOpSnippet:TOe,cpuKernelImpl:n$e}),EOe={kernelName:Ey,backendName:"webgl",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe=Td+`
  return log(1.0 + x);
`,AOe=yt({opSnippet:IOe}),OOe={kernelName:Iy,backendName:"webgl",kernelFunc:AOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe="return float(a >= 1.0 && b >= 1.0);",POe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,ROe=hr({opSnippet:NOe,packedOpSnippet:POe,dtype:"bool"}),DOe={kernelName:Hw,backendName:"webgl",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe="return float(!(x >= 1.0));",LOe=yt({opSnippet:MOe}),FOe={kernelName:Kw,backendName:"webgl",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe="return float(a >= 1.0 || b >= 1.0);",zOe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,jOe=hr({opSnippet:BOe,packedOpSnippet:zOe,dtype:"bool"}),VOe={kernelName:qw,backendName:"webgl",kernelFunc:jOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UOe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WOe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GOe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,u=oe().getBool("WEBGL_PACK_NORMALIZATION")?new WOe(i.shape,s,o,a,l):new UOe(i.shape,s,o,a,l);return n.runWebGLProgram(u,[i],i.dtype)},HOe={kernelName:Xw,backendName:"webgl",kernelFunc:GOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KOe{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,h=new KOe(i.shape,a,l,u,c);return n.runWebGLProgram(h,[i,s,o],i.dtype)},XOe={kernelName:$O,backendName:"webgl",kernelFunc:qOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t,e,n,r){const i=ce(e),o=ce(t.shape)/i,a=ke({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Zc(a,t.dtype,"max",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=it(s,i.shape);let u=l;const c=hn(u,a),h=c!=null,f=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(f){const b=n.texData.get(p.dataId).values,w=new Array(a);for(let T=0;T<w.length;T++)w[T]=i.shape[c[T]];const k=MP(b,i.shape,i.dtype,c,w);p=n.makeTensorInfo(w,i.dtype);const C=n.texData.get(p.dataId);C.values=k}else p=Z1(i,c,n);u=kn(u.length,a)}cr("max",u,a);const[m,_]=Qn(p.shape,u);let v=m;o&&(v=On(m,l));let g;if(f){const b=n.texData.get(p.dataId).values,w=r$e(b,ce(_),v,i.dtype);g=n.makeTensorInfo(v,i.dtype);const k=n.texData.get(g.dataId);k.values=w}else g=ZOe(p,_,v,n);return h&&n.disposeIntermediateTensorInfo(p),g}const YOe={kernelName:Zw,backendName:"webgl",kernelFunc:UX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe=LP+`
  return max(a, b);
`,QOe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xc+`
  return result;
`,eNe=hr({opSnippet:JOe,packedOpSnippet:QOe,cpuKernelImpl:i$e}),tNe={kernelName:Ay,backendName:"webgl",kernelFunc:eNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;yv(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;F(Tr(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Rs(i.shape,s,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Ct(c.inShape,c.outShape))return Ei({inputs:{x:i},backend:n});const h=new tg(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const rNe={kernelName:Yw,backendName:"webgl",kernelFunc:nNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],h=Ha(i.shape,s,o,c,a,u,l),f=new BP(h,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const sNe={kernelName:Jw,backendName:"webgl",kernelFunc:iNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,u=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class aNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=u-1-e.padInfo.top,p=c-1-e.padInfo.left,m=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${f}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],f=Ha(o.shape,a,l,h,u,c),p=new BP(f,"max",!0),m=n.runWebGLProgram(p,[o],o.dtype),_=new aNe(f),v=n.runWebGLProgram(_,[i,m],o.dtype);return n.disposeIntermediateTensorInfo(m),v}const uNe={kernelName:IO,backendName:"webgl",kernelFunc:lNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;yv([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,f=Rs(a.shape,l,u,1,c,h),p=!0,m=new tg(f,"max",p),_=n.runWebGLProgram(m,[a],a.dtype),v=new oNe(f),g=n.runWebGLProgram(v,[i,_],a.dtype);return n.disposeIntermediateTensorInfo(_),g}const hNe={kernelName:EO,backendName:"webgl",kernelFunc:cNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t,e,n,r){let i=new tg(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new tg(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe={kernelName:S6,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;F(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];F(Tr(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Rs(r.shape,i,s,u,o),[h,f]=fNe(r,a,c,l);return[h,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e,n,r){const i=ce(e),o=ce(t.shape)/i,a=ke({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Zc(a,"float32","mean",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:Qw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=it(s,r.shape);let u=l;const c=hn(u,a),h=c!=null,f=o.shouldExecuteOnCPU([r]),p=[];let m=r;if(h){if(f){const w=o.texData.get(m.dataId).values,k=new Array(a);for(let E=0;E<k.length;E++)k[E]=r.shape[c[E]];const C=MP(w,r.shape,r.dtype,c,k);m=o.makeTensorInfo(k,r.dtype);const T=o.texData.get(m.dataId);T.values=C}else m=Z1(r,c,o);p.push(m),u=kn(u.length,a)}cr("sum",u,a);const[_,v]=Qn(m.shape,u);let g=_;i&&(g=On(_,l));const x=pNe(m,v,g,o);for(const b of p)o.disposeIntermediateTensorInfo(b);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=it(s,i.shape);let u=l;const c=hn(u,a);let h=i;c!=null&&(h=Wr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=kn(u.length,i.shape.length)),cr("min",u,a);const[f,p]=Qn(h.shape,u),m=ce(p),_=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),v=Zc(_,_.dtype,"min",n);let g;if(o){const x=On(f,l);g=ke({inputs:{x:v},backend:n,attrs:{shape:x}})}else g=ke({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(h),g}const yNe={kernelName:e1,backendName:"webgl",kernelFunc:gNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe=LP+`
  return min(a, b);
`,_Ne=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xc+`
  return result;
`,xNe=hr({opSnippet:vNe,packedOpSnippet:_Ne,cpuKernelImpl:s$e}),bNe={kernelName:Oy,backendName:"webgl",kernelFunc:xNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,h)=>c[0]+e[h]+c[1]);const i=e.length,s=Nt(i),o=n.map(c=>c[0]).join(","),a=n.map((c,h)=>c[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,_)=>m[0]+e[_]+m[1]);const i=e.length,s=Nt(i),o=n.map(m=>m[0]).join(","),a=n.map((m,_)=>m[0]+e[_]).join(","),l=zr("rc",i),u=zr("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,h=i===1?"source":`vec2(${u.slice(-2).join()})`,f=r==="reflect"?0:1;let p="";if(i===1){const m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${l[i-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
      `}else{const m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${h});
        ${l[i-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${h});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${m}
          result[2] = getChannel(getX(${u.join()}), ${h});
          ${l[i-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${u.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SNe(r.shape,i,s):new wNe(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},CNe={kernelName:t1,backendName:"webgl",kernelFunc:kNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,$Ne=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Xc+`
  return result;
`,ENe=hr({opSnippet:TNe,packedOpSnippet:$Ne}),INe={kernelName:Ny,backendName:"webgl",kernelFunc:ENe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ANe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe=`
if (a == b) {
  return 1.0;
};
return a / b;`,NNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,WX=hr({opSnippet:ONe,packedOpSnippet:NNe,checkOutOfBounds:!0}),PNe={kernelName:gy,backendName:"webgl",kernelFunc:WX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB="return a - b;",GX=hr({opSnippet:IB,packedOpSnippet:IB,supportsComplex:!0,cpuKernelImpl:T$e}),RNe={kernelName:qy,backendName:"webgl",kernelFunc:GX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=it([s],i.shape),a=UX({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=On(a.shape,o),u=ke({inputs:{x:a},backend:n,attrs:{shape:l}}),c=GX({inputs:{a:i,b:u},backend:n}),h=zX({inputs:{x:c},backend:n}),f=Y1({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),p=ke({inputs:{x:f},backend:n,attrs:{shape:l}}),m=WX({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}const DNe={kernelName:_1,backendName:"webgl",kernelFunc:HX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:HX({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],h=new ANe(u,c,s),f=[[o]],p=n.runWebGLProgram(h,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),p}const LNe={kernelName:k6,backendName:"webgl",kernelFunc:MNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FNe=Ms+`
  return -x;
`,BNe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function zNe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=a$e(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new xl(r.shape,BNe):i=new Do(r.shape,FNe),n.runWebGLProgram(i,[r],r.dtype)}const jNe={kernelName:n1,backendName:"webgl",kernelFunc:zNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe=kN;function UNe(t){Vi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:h}=VNe(u,c,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const WNe={kernelName:AO,backendName:"webgl",kernelFunc:UNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe=CN;function HNe(t){Vi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),h=n.readSync(s.dataId),{selectedIndices:f,validOutputs:p}=GNe(c,h,o,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const KNe={kernelName:OO,backendName:"webgl",kernelFunc:HNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe=TN;function XNe(t){Vi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),h=n.readSync(s.dataId),f=o,p=a,m=l,_=u,{selectedIndices:v,selectedScores:g}=qNe(c,h,f,p,m,_);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const ZNe={kernelName:NO,backendName:"webgl",kernelFunc:XNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YNe{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,u=ce(i.shape),c=new YNe(u,o,a,l),h=ke({inputs:{x:i},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(c,[h],s);n.disposeIntermediateTensorInfo(h);const p=[...i.shape,o],m=ke({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),m},QNe={kernelName:s1,backendName:"webgl",kernelFunc:JNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jx(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=_v({inputs:{input:r},backend:n}),s=jx({inputs:{x:i},backend:n}),o=J1({inputs:{input:r},backend:n}),a=jx({inputs:{x:o},backend:n}),l=uu({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return xv({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const ePe={kernelName:w1,backendName:"webgl",kernelFunc:jx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=_v({inputs:{input:r},backend:n}),s=KX({inputs:{x:i},backend:n}),o=J1({inputs:{input:r},backend:n}),a=jx({inputs:{x:o},backend:n}),l=uu({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return xv({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const tPe={kernelName:i1,backendName:"webgl",kernelFunc:KX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return PE({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(c=>{QA(s,c.shape,"All tensors passed to stack must have matching shapes"),F(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const h=PE({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(h),h}),u=NX({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const rPe={kernelName:o1,backendName:"webgl",kernelFunc:nPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iPe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const i=e.length,s=Nt(i),o=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sPe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((_,v)=>_[0]+e[v]+_[1]);const i=e.length,s=Nt(i),o=n.map(_=>_[0]).join(","),a=n.map((_,v)=>_[0]+e[v]).join(","),l=zr("rc",i),u=zr("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,h=i===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${c}) {`],p=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let _=0,v=i===1?2:4;_<v;_++)m+=`
        ${f[_]}
        if (${p}) {
          result[${_}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${_}] = getChannel(getX(${u.join()}), ${h});
        }
      `;m+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qX=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if(ce(i.shape)===0){const u=s.map((c,h)=>c[0]+i.shape[h]+c[1]);return xv({backend:n,attrs:{shape:u,value:o,dtype:i.dtype}})}const a=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sPe(i.shape,s,o):new iPe(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},oPe={kernelName:a1,backendName:"webgl",kernelFunc:qX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,lPe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Xc+`
  return result;
`,uPe=hr({opSnippet:aPe,packedOpSnippet:lPe}),cPe={kernelName:Ry,backendName:"webgl",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],u=it(s,i.shape);let c=u;const h=hn(c,a);let f=i;h!=null&&(f=Wr({inputs:{x:i},backend:n,attrs:{perm:h}}),c=kn(c.length,a),l.push(f)),cr("prod",c,a);let p;if(n.shouldExecuteOnCPU([f])){const m=n.texData.get(f.dataId).values,{outVals:_,outShape:v,outDtype:g}=u$e(f.shape,f.dtype,m,c);p=n.makeTensorInfo(v,g,_)}else{const[m,_]=Qn(f.shape,c),v=ce(_),g=ke({inputs:{x:f},backend:n,attrs:{shape:[-1,v]}}),x=GO(i.dtype),b=Zc(g,x,"prod",n);p=ke({inputs:{x:b},backend:n,attrs:{shape:m}}),l.push(g),l.push(b)}if(o){l.push(p);const m=On(p.shape,u);p=ke({inputs:{x:p},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const fPe={kernelName:u1,backendName:"webgl",kernelFunc:hPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(g=>n.readSync(g.dataId)),u=i.map(g=>g.shape),c=n.readSync(s.dataId),h=n.readSync(o.dataId),[f,p,m]=c$e(l,u,c,s.shape,s.dtype,h,o.shape,a),_=f.map(g=>n.makeTensorInfo([g.length],"int32",g)),v=n.makeTensorInfo(m,s.dtype,p);return _.concat([v])}const pPe={kernelName:C6,backendName:"webgl",kernelFunc:dPe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=h$e(o,r.shape,r.dtype,a,i.shape,l,s.shape),h=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[h,f]}const gPe={kernelName:T6,backendName:"webgl",kernelFunc:mPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yPe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),h=n.readSync(o.dataId),f=a.map(v=>n.readSync(v.dataId)),p=a.map(v=>v.shape),[m,_]=f$e(u,i.shape,c,s.shape,s.dtype,h,o.shape,f,p,l);return n.makeTensorInfo(m,s.dtype,_)}const vPe={kernelName:$6,backendName:"webgl",kernelFunc:yPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XX=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=d$e(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},_Pe={kernelName:PO,backendName:"webgl",kernelFunc:XX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe="return 1.0 / x;",bPe=yt({opSnippet:xPe}),wPe={kernelName:Dy,backendName:"webgl",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=Ms+`
  return (x < 0.0) ? 0.0 : x;
`,kPe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CPe=yt({opSnippet:SPe,packedOpSnippet:kPe}),TPe={kernelName:My,backendName:"webgl",kernelFunc:CPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=Ms+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,EPe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,IPe=yt({opSnippet:$Pe,packedOpSnippet:EPe}),APe={kernelName:Ly,backendName:"webgl",kernelFunc:IPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OPe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/h[0]},
          ${c[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NPe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/h[0]},
          ${c[1]/h[1]},
          ${c[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new NPe(i.shape,l,u,s,o):new OPe(i.shape,l,u,s,o);return n.runWebGLProgram(c,[i],"float32")}const RPe={kernelName:f1,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DPe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],h=l[1]/u[1],f=1/c,p=1/h,m=Math.ceil(f)*2+2,_=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${h});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${_});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new DPe(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const LPe={kernelName:MO,backendName:"webgl",kernelFunc:MPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FPe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let p;s?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/h[0]},
          ${c[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BPe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],h=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let p;s?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/h[0]},
          ${c[1]/h[1]},
          ${c[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new BPe(i.shape,l,u,s,o):new FPe(i.shape,l,u,s,o);return n.runWebGLProgram(c,[i],i.dtype)}const jPe={kernelName:h1,backendName:"webgl",kernelFunc:zPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VPe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],h=l[1]/u[1],f=1/c,p=1/h,m=Math.ceil(f)*2+2,_=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${h});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${_});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new VPe(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const WPe={kernelName:DO,backendName:"webgl",kernelFunc:UPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=Nt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HPe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=zr("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Nt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${u(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${s}) {
              result.a = ${h(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return f(m)}function u(m){return m[r-1]="("+m[r-1]+" + 1)",f(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",f(m)}function h(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",f(m)}function f(m){const _=e.map((x,b)=>p(b,m)),v=_.join(","),g=_.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${g}))`}function p(m,_){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${_[m]} - 1`:`${_[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=it(s,i.shape);if(o===0)return Ei({inputs:{x:i},backend:n});const l=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HPe(i.shape,a):new GPe(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const qPe={kernelName:d1,backendName:"webgl",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XPe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe={kernelName:UO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new XPe(r.shape,s),[u,c]=LN(o,r.shape[1],r.shape[2]),h=[[u,c,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YPe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,JPe=yt({opSnippet:YPe}),QPe={kernelName:Fy,backendName:"webgl",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe="return inversesqrt(x);",tRe=yt({opSnippet:eRe,cpuKernelImpl:p$e}),nRe={kernelName:By,backendName:"webgl",kernelFunc:tRe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zP{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Nt(s.length),c=Nt(o.length);let h="";r===1?h="i":r===2&&(h="i, j");const f=`getIndices(${h})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let _="";l&&(_="coords[0], coords[1]");const v=`getDefaultValue(${_})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rRe{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=Nt(s.length),c=Nt(o.length);let h="";r===1?h="i":r===2&&(h="i, j");const f=`getIndices(${h})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let _="";l&&(_="coords[0], coords[1]");const v=`getDefaultValue(${_})`,g=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Wc(s,i,o),f=[h/u,u];if(h===0)return n.makeTensorInfo(o,i.dtype);const p=ke({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),m=ke({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),_=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;oe().getBool("WEBGL_PACK")?v=new rRe(l,a,p.shape.length,m.shape.length,c,f):v=new zP(l,a,p.shape.length,m.shape.length,c,f);const g=n.runWebGLProgram(v,[m,p,_],m.dtype),x=ke({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(_),x}const sRe={kernelName:E6,backendName:"webgl",kernelFunc:iRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oRe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=oe().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new oRe(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const lRe={kernelName:A6,backendName:"webgl",kernelFunc:aRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uRe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);i=l.join(),s=u.join()}const o=Nt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new uRe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],Ti(i.dtype,s.dtype))}const hRe={kernelName:p1,backendName:"webgl",kernelFunc:cRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${R1};
  float scale = ${D1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,dRe=yt({opSnippet:fRe}),pRe={kernelName:zy,backendName:"webgl",kernelFunc:dRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRe=Td+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,gRe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yRe=yt({opSnippet:mRe,packedOpSnippet:gRe,cpuKernelImpl:g$e}),vRe={kernelName:Wy,backendName:"webgl",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Re=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,xRe=yt({opSnippet:_Re}),bRe={kernelName:Uy,backendName:"webgl",kernelFunc:xRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wRe=Td+`
  return sin(x);
`,SRe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Xc}
  return result;
`,kRe=yt({opSnippet:wRe,packedOpSnippet:SRe}),CRe={kernelName:jy,backendName:"webgl",kernelFunc:kRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,$Re=yt({opSnippet:TRe}),ERe={kernelName:Vy,backendName:"webgl",kernelFunc:$Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IRe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,ARe=yt({opSnippet:IRe}),ORe={kernelName:Gy,backendName:"webgl",kernelFunc:ARe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NRe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;F(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((g,x)=>g*x),l=[[0,0]];l.push(...o);for(let g=1+s.length;g<i.shape.length;++g)l.push([0,0]);const u=[],c=qX({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=iv(c.shape,s,a,!1),f=sv(h.length,s.length,!1),p=ov(c.shape,s,a,!1),m=ke({inputs:{x:c},backend:n,attrs:{shape:h}}),_=Wr({inputs:{x:m},backend:n,attrs:{perm:f}}),v=ke({inputs:{x:_},backend:n,attrs:{shape:p}});return u.push(c),u.push(m),u.push(_),u.forEach(g=>n.disposeIntermediateTensorInfo(g)),v},PRe={kernelName:y1,backendName:"webgl",kernelFunc:NRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=n.readSync(o.dataId)[0],[h,f,p,m,_]=v$e(a,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],i.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([_.length],r.dtype,new Int32Array(_))]}const DRe={kernelName:O6,backendName:"webgl",kernelFunc:RRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,h]=_$e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}const LRe={kernelName:N6,backendName:"webgl",kernelFunc:MRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=_X(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const BRe={kernelName:P6,backendName:"webgl",kernelFunc:FRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=_X(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const jRe={kernelName:R6,backendName:"webgl",kernelFunc:zRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:f}=Wc(s,i,a),p=!1;if(s.dtype==="string"){const g=n.bufferSync(i),x=n.bufferSync(s),b=Ul(n.readSync(o.dataId)[0]),w=m$e(g,x,a,f,c,u,l,h,b,p);return n.makeTensorInfo(a,w.dtype,w.values)}const m=new zP(u,l,i.shape.length,s.shape.length,h,[f,1],p),_=n.runWebGLProgram(m,[s,i,o],s.dtype),v=ke({inputs:{x:_},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(_),v}const URe={kernelName:D6,backendName:"webgl",kernelFunc:VRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=it(o,i.shape)[0],l=JN(i,s,a),u=i.shape.length,c=new Array(u).fill(0),h=i.shape.slice();return l.map(f=>{const p=[...h];p[a]=f;const m=$d({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[a]+=f,m})}const GRe={kernelName:v1,backendName:"webgl",kernelFunc:WRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB="return sqrt(x);",HRe=yt({opSnippet:AB,packedOpSnippet:AB,cpuKernelImpl:x$e}),KRe={kernelName:Hy,backendName:"webgl",kernelFunc:HRe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qRe="return x * x;",XRe=yt({opSnippet:qRe}),ZRe={kernelName:LO,backendName:"webgl",kernelFunc:XRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OB="return (a - b) * (a - b);",YRe=hr({opSnippet:OB,packedOpSnippet:OB}),JRe={kernelName:Ky,backendName:"webgl",kernelFunc:YRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=Ma(s),a=b$e(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const eDe={kernelName:FO,backendName:"webgl",kernelFunc:QRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Ms+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Do(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const nDe={kernelName:Jy,backendName:"webgl",kernelFunc:tDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rDe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Nt(r.length),o=Nt(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:m,isIdentity:_,sliceDim0:v,isSimpleSlice:g,begin:x,end:b,strides:w}=RN(i.shape,s,o,a,l,u,c,h,f);let k;if(_)k=ke({inputs:{x:i},backend:n,attrs:{shape:m}});else if(v||g){F(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const T=ON(x,b,w),E=$d({inputs:{x:i},backend:n,attrs:{begin:x,size:T}});k=ke({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){const E=n.readSync(i.dataId),A=rt(i.shape,i.dtype,E),$=w$e(p,A,w,x);k=n.makeTensorInfo(m,i.dtype,$.values)}else{const E=new rDe(x,w,p);k=n.runWebGLProgram(E,[i],i.dtype)}const C=ke({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),C}const sDe={kernelName:BO,backendName:"webgl",kernelFunc:iDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=e,f=n.readSync(c.dataId),p=n.readSync(h.dataId),[m,_]=S$e(f,p,i,s,o,a,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(h.shape,"int32",_)]}const aDe={kernelName:M6,backendName:"webgl",kernelFunc:oDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[u,c,h]=k$e(a,l,i),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const uDe={kernelName:L6,backendName:"webgl",kernelFunc:lDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=C$e(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const hDe={kernelName:F6,backendName:"webgl",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fDe="return tan(x);",dDe=yt({opSnippet:fDe}),pDe={kernelName:Xy,backendName:"webgl",kernelFunc:dDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mDe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,gDe=yt({opSnippet:mDe}),yDe={kernelName:Zy,backendName:"webgl",kernelFunc:gDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Wc(o,s,i.shape),f=[h/u,u];if(h===0)return n.makeTensorInfo(i.shape,s.dtype);const p=ke({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),m=ke({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),_=ke({inputs:{x:i},backend:n,attrs:{shape:f}}),v=new zP(l,a,p.shape.length,m.shape.length,c,f,!1,!0),g=n.runWebGLProgram(v,[m,p,_],_.dtype),x=ke({inputs:{x:g},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(g),x}const _De={kernelName:I6,backendName:"webgl",kernelFunc:vDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xDe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Nt(this.rank),s=bDe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function bDe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),u=i.dtype==="string"?l.map(f=>Ul(f)):l,c=rt(i.shape,i.dtype,u),h=$$e(c,s);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const o=new xDe(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const wDe={kernelName:Yy,backendName:"webgl",kernelFunc:ZX};class SDe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class kDe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function NB(t){let e=1;for(;e<t;)e*=2;return e}function CDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<a||s>l){const $=n.readSync(i.dataId),[N,P]=E$e($,u,i.dtype,s,o);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[i,xv({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),f=h!==null&&h.isPacked,p=f?n.unpackTensor(i):i,_=ce(u)/c,v=ke({inputs:{x:p},attrs:{shape:[_,c]},backend:n});f&&ku(n,p);const g=NB(s),x=NB(c);let b=null;const w=()=>b===null?[v,v]:[v,b],k=($,N,P)=>{const M=w(),B=new SDe(P),j=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[$],[N]],U=b;b=n.runWebGLProgram(B,M,"int32",j),ku(n,U)};for(let $=1;$<g;$*=2){const N=$*2;for(let P=$;P>=1;P/=2)k(N,P,[_,x])}for(let $=x;$>g;$/=2){const N=w(),P=new kDe([_,$/2]),B=[[c],[b===null?1:0],[g]],z=b;b=n.runWebGLProgram(P,N,"int32",B),ku(n,z);const j=g/2,U=j*2;for(let D=j;D>=1;D/=2)k(U,D,b.shape)}let C=b;b=$d({inputs:{x:b},backend:n,attrs:{begin:0,size:[_,s]}}),ku(n,C);let T=VX({inputs:{x:v,indices:b},backend:n,attrs:{axis:1,batchDims:1}});ku(n,v);const E=u.slice(0,-1);E.push(s),C=b,b=ke({inputs:{x:b},attrs:{shape:E},backend:n}),ku(n,C);const A=T;return T=ke({inputs:{x:T},attrs:{shape:E},backend:n}),ku(n,A),[T,b]}const TDe={kernelName:zO,backendName:"webgl",kernelFunc:CDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $De{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,h,f,p]=i.shape,[m,_]=u??[h,f],v=[c,m,_,p],g=new $De(h,f,o,a,l,v);return n.runWebGLProgram(g,[i,s],"float32")}const IDe={kernelName:jO,backendName:"webgl",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;yv(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:u}=I$e(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const ODe={kernelName:VO,backendName:"webgl",kernelFunc:ADe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],u=new Array(a-1);let c=0;for(let _=0;_<a;_++)_!==s&&(u[c++]=o.shape[_]);const h=[],f=new Array(a).fill(0),p=o.shape.slice();p[s]=1;const m=new Array(l);for(let _=0;_<m.length;_++){f[s]=_;const v=$d({inputs:{x:o},backend:n,attrs:{begin:f,size:p}}),g=ke({inputs:{x:v},backend:n,attrs:{shape:u}});m[_]=g,h.push(v)}return h.forEach(_=>n.disposeIntermediateTensorInfo(_)),m}const PDe={kernelName:x1,backendName:"webgl",kernelFunc:NDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RDe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,h=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let u=0;const c=hn([u],a);let h=i;c!=null&&(h=Wr({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(h),u=kn(1,a)[0]);const f=NK(h.shape,u,o),p=ce([h.shape[u]]),m=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(m);const _=GO(i.dtype),v=(w,k,C,T,E)=>{const A=w.shape[0],$=w.shape[1],N=OK($,E),P={windowSize:N,inSize:$,batchSize:A,numSegments:E},M=new RDe(P,k),B=n.compileAndRun(M,[w,C],T);if(l.push(B),B.shape[1]===E)return B;const z=XX({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),j=ZX({inputs:{x:z},backend:n,attrs:{reps:[$/N]}});return l.push(z),l.push(j),v(B,k,j,T,E)},g=v(m,"unsortedSegmentSum",s,_,o),x=ke({inputs:{x:g},backend:n,attrs:{shape:f}});let b=x;if(c!=null){l.push(x);const w=ru(c);b=Wr({inputs:{x:b},backend:n,attrs:{perm:w}})}return l.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const MDe={kernelName:b1,backendName:"webgl",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe=[xEe,wEe,CEe,EEe,AEe,PEe,DEe,LEe,jEe,UEe,HEe,XEe,JEe,nIe,sIe,aIe,uIe,dIe,mIe,yIe,bIe,EIe,AIe,RIe,MIe,VIe,WIe,qIe,rEe,YIe,n2e,o2e,f2e,m2e,y2e,_2e,b2e,C2e,E2e,O2e,P2e,D2e,L2e,z2e,V2e,H2e,q2e,Y2e,eAe,nAe,oAe,cAe,pAe,yAe,xAe,bAe,SAe,CAe,$Ae,IAe,OAe,DAe,FAe,jAe,UAe,HAe,XAe,QAe,rOe,nEe,sOe,e2e,lOe,hOe,pOe,sEe,vOe,wOe,kOe,EOe,OOe,DOe,FOe,VOe,HOe,XOe,YOe,tNe,rNe,sNe,uNe,hNe,dNe,mNe,yNe,bNe,CNe,INe,LNe,lEe,jNe,WNe,KNe,ZNe,FIe,QNe,tPe,rPe,oPe,cPe,aEe,fPe,pPe,gPe,vPe,_Pe,BIe,PNe,wPe,TPe,APe,cEe,RPe,LPe,jPe,WPe,qPe,ZPe,QPe,nRe,sRe,lRe,hRe,pRe,vRe,bRe,CRe,ERe,TIe,DNe,ORe,PRe,DRe,LRe,BRe,jRe,URe,GRe,KRe,ZRe,JRe,eDe,nDe,sDe,aDe,uDe,hDe,RNe,yEe,pDe,yDe,_De,wDe,TDe,IDe,vEe,ODe,PDe,MDe,ePe];for(const t of LDe)z6(t);const DC=[{id:"1",type:"danger",message:"Critical load detected in Zone A - Immediate attention required",timestamp:new Date().toISOString()},{id:"2",type:"warning",message:"Efficiency dropping in renewable energy sector",timestamp:new Date(Date.now()-3e5).toISOString()},{id:"3",type:"info",message:"AI Prediction: Potential efficiency improvement opportunity in Zone C",timestamp:new Date(Date.now()-6e5).toISOString()},{id:"4",type:"info",message:"Weather alert: High wind conditions affecting turbine performance",timestamp:new Date(Date.now()-75e4).toISOString()},{id:"5",type:"info",message:"Scheduled maintenance completed for Zone C",timestamp:new Date(Date.now()-9e5).toISOString()}],C_=[{id:"f1",zoneId:"1",type:"voltage_drop",severity:"high",location:"Transformer Station A-3",timestamp:new Date().toISOString(),affectedUsers:2345,readings:{voltage:198,current:95.5,frequency:49.2,powerFactor:.82},description:"Severe voltage drop detected at main transformer. Emergency intervention required."},{id:"f2",zoneId:"3",type:"overload",severity:"medium",location:"Distribution Hub B-7",timestamp:new Date(Date.now()-9e5).toISOString(),affectedUsers:1250,readings:{voltage:235,current:150.2,frequency:50.1,powerFactor:.88},description:"Sustained high current load detected. Load balancing recommended."},{id:"f3",zoneId:"6",type:"equipment_failure",severity:"low",location:"Solar Array C-12",timestamp:new Date(Date.now()-18e5).toISOString(),affectedUsers:450,readings:{voltage:228,current:45.8,frequency:50,powerFactor:.94,temperature:78},description:"Inverter efficiency degradation detected. Maintenance inspection recommended."}],P0=[{id:"1",name:"Zone A",status:"critical",load:92,efficiency:78,faults:[C_[0]],prediction:{loadTrend:"increasing",nextHourLoad:95,maintenanceScore:.35,failureProbability:.82}},{id:"2",name:"Zone B",status:"normal",load:65,efficiency:89,faults:[],prediction:{loadTrend:"stable",nextHourLoad:67,maintenanceScore:.92,failureProbability:.05}},{id:"3",name:"Zone C",status:"warning",load:78,efficiency:82,faults:[C_[1]],prediction:{loadTrend:"decreasing",nextHourLoad:72,maintenanceScore:.65,failureProbability:.45}},{id:"4",name:"Zone D",status:"normal",load:45,efficiency:95,faults:[],prediction:{loadTrend:"stable",nextHourLoad:46,maintenanceScore:.88,failureProbability:.08}},{id:"5",name:"Zone E",status:"normal",load:58,efficiency:91,faults:[],prediction:{loadTrend:"increasing",nextHourLoad:63,maintenanceScore:.85,failureProbability:.12}},{id:"6",name:"Zone F",status:"warning",load:82,efficiency:76,faults:[C_[2]],prediction:{loadTrend:"decreasing",nextHourLoad:77,maintenanceScore:.58,failureProbability:.35}}];function FDe({zones:t}){const[e,n]=J.useState(null),[r,i]=J.useState(C_);J.useEffect(()=>{async function l(){const u=t_e({layers:[EC({inputShape:[4],units:8,activation:"relu"}),EC({units:4,activation:"relu"}),EC({units:1,activation:"sigmoid"})]});n(u)}l()},[]);const s=l=>{switch(l){case"voltage_drop":return V.jsx(M5,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"});case"overload":return V.jsx(A5,{className:"w-5 h-5 text-red-600 dark:text-red-400"});case"equipment_failure":return V.jsx(D5,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"});default:return V.jsx(O5,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}},o=l=>{switch(l){case"high":return"bg-red-50 dark:bg-red-900/20";case"medium":return"bg-yellow-50 dark:bg-yellow-900/20";case"low":return"bg-orange-50 dark:bg-orange-900/20"}},a=(l,u)=>{const h={voltage:{min:220,max:240},frequency:{min:49.5,max:50.5},powerFactor:{min:.95,max:1}}[u];return h?l<h.min||l>h.max?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"};return V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"flex items-center justify-between mb-4",children:[V.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Fault Detection System"}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-sm",children:"Active Monitoring"}),V.jsxs("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[r.length," Active Faults"]})]})]}),V.jsxs("div",{className:"grid gap-4",children:[r.map((l,u)=>V.jsx(As.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.1},className:`p-4 rounded-lg ${o(l.severity)}`,children:V.jsxs("div",{className:"flex items-start gap-3",children:[V.jsx("div",{className:`p-2 rounded-lg ${l.severity==="high"?"bg-red-100 dark:bg-red-900":l.severity==="medium"?"bg-yellow-100 dark:bg-yellow-900":"bg-orange-100 dark:bg-orange-900"}`,children:s(l.type)}),V.jsxs("div",{className:"flex-1",children:[V.jsxs("div",{className:"flex items-center justify-between mb-2",children:[V.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.description}),V.jsx("span",{className:`text-sm font-medium ${l.severity==="high"?"text-red-600 dark:text-red-400":l.severity==="medium"?"text-yellow-600 dark:text-yellow-400":"text-orange-600 dark:text-orange-400"}`,children:l.severity.toUpperCase()})]}),V.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[V.jsxs("div",{children:[V.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Location: ",l.location]}),V.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Affected Users: ",l.affectedUsers.toLocaleString()]})]}),V.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[V.jsxs("div",{className:a(l.readings.voltage,"voltage"),children:[V.jsx("span",{className:"font-medium",children:"Voltage"}),V.jsxs("p",{children:[l.readings.voltage,"V"]})]}),V.jsxs("div",{className:a(l.readings.frequency,"frequency"),children:[V.jsx("span",{className:"font-medium",children:"Frequency"}),V.jsxs("p",{children:[l.readings.frequency,"Hz"]})]}),V.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[V.jsx("span",{className:"font-medium",children:"Current"}),V.jsxs("p",{children:[l.readings.current,"A"]})]}),V.jsxs("div",{className:a(l.readings.powerFactor,"powerFactor"),children:[V.jsx("span",{className:"font-medium",children:"PF"}),V.jsx("p",{children:l.readings.powerFactor})]})]})]}),V.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Detected at ",new Date(l.timestamp).toLocaleTimeString()]})]})]})},l.id)),r.length===0&&V.jsx("div",{className:"text-center py-8",children:V.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No faults detected. All systems operating normally."})})]})]})}function YX(t,e){const n=J.useRef(e);J.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function BDe(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const zDe=1;function jDe(t){return Object.freeze({__version:zDe,map:t})}function VDe(t,e){return Object.freeze({...t,...e})}const JX=J.createContext(null),QX=JX.Provider;function jP(){const t=J.useContext(JX);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function UDe(t){function e(n,r){const{instance:i,context:s}=t(n).current;return J.useImperativeHandle(r,()=>i),n.children==null?null:X.createElement(QX,{value:s},n.children)}return J.forwardRef(e)}function WDe(t){function e(n,r){const[i,s]=J.useState(!1),{instance:o}=t(n,s).current;J.useImperativeHandle(r,()=>o),J.useEffect(function(){i&&o.update()},[o,i,n.children]);const a=o._contentNode;return a?E5.createPortal(n.children,a):null}return J.forwardRef(e)}function GDe(t){function e(n,r){const{instance:i}=t(n).current;return J.useImperativeHandle(r,()=>i),null}return J.forwardRef(e)}function VP(t,e){const n=J.useRef();J.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Q1(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function HDe(t,e){return function(r,i){const s=jP(),o=t(Q1(r,s),s);return YX(s.map,r.attribution),VP(o.current,r.eventHandlers),e(o.current,s,r,i),o}}var RE={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(ln,function(n){var r="1.9.4";function i(d){var y,S,I,O;for(S=1,I=arguments.length;S<I;S++){O=arguments[S];for(y in O)d[y]=O[y]}return d}var s=Object.create||function(){function d(){}return function(y){return d.prototype=y,new d}}();function o(d,y){var S=Array.prototype.slice;if(d.bind)return d.bind.apply(d,S.call(arguments,1));var I=S.call(arguments,2);return function(){return d.apply(y,I.length?I.concat(S.call(arguments)):arguments)}}var a=0;function l(d){return"_leaflet_id"in d||(d._leaflet_id=++a),d._leaflet_id}function u(d,y,S){var I,O,R,K;return K=function(){I=!1,O&&(R.apply(S,O),O=!1)},R=function(){I?O=arguments:(d.apply(S,arguments),setTimeout(K,y),I=!0)},R}function c(d,y,S){var I=y[1],O=y[0],R=I-O;return d===I&&S?d:((d-O)%R+R)%R+O}function h(){return!1}function f(d,y){if(y===!1)return d;var S=Math.pow(10,y===void 0?6:y);return Math.round(d*S)/S}function p(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function m(d){return p(d).split(/\s+/)}function _(d,y){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?s(d.options):{});for(var S in y)d.options[S]=y[S];return d.options}function v(d,y,S){var I=[];for(var O in d)I.push(encodeURIComponent(S?O.toUpperCase():O)+"="+encodeURIComponent(d[O]));return(!y||y.indexOf("?")===-1?"?":"&")+I.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function x(d,y){return d.replace(g,function(S,I){var O=y[I];if(O===void 0)throw new Error("No value provided for variable "+S);return typeof O=="function"&&(O=O(y)),O})}var b=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function w(d,y){for(var S=0;S<d.length;S++)if(d[S]===y)return S;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var T=0;function E(d){var y=+new Date,S=Math.max(0,16-(y-T));return T=y+S,window.setTimeout(d,S)}var A=window.requestAnimationFrame||C("RequestAnimationFrame")||E,$=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function N(d,y,S){if(S&&A===E)d.call(y);else return A.call(window,o(d,y))}function P(d){d&&$.call(window,d)}var M={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:u,wrapNum:c,falseFn:h,formatNum:f,trim:p,splitWords:m,setOptions:_,getParamString:v,template:x,isArray:b,indexOf:w,emptyImageUrl:k,requestFn:A,cancelFn:$,requestAnimFrame:N,cancelAnimFrame:P};function B(){}B.extend=function(d){var y=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=y.__super__=this.prototype,I=s(S);I.constructor=y,y.prototype=I;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(y[O]=this[O]);return d.statics&&i(y,d.statics),d.includes&&(z(d.includes),i.apply(null,[I].concat(d.includes))),i(I,d),delete I.statics,delete I.includes,I.options&&(I.options=S.options?s(S.options):{},i(I.options,d.options)),I._initHooks=[],I.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,K=I._initHooks.length;R<K;R++)I._initHooks[R].call(this)}},y},B.include=function(d){var y=this.prototype.options;return i(this.prototype,d),d.options&&(this.prototype.options=y,this.mergeOptions(d.options)),this},B.mergeOptions=function(d){return i(this.prototype.options,d),this},B.addInitHook=function(d){var y=Array.prototype.slice.call(arguments,1),S=typeof d=="function"?d:function(){this[d].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function z(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=b(d)?d:[d];for(var y=0;y<d.length;y++)d[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var j={on:function(d,y,S){if(typeof d=="object")for(var I in d)this._on(I,d[I],y);else{d=m(d);for(var O=0,R=d.length;O<R;O++)this._on(d[O],y,S)}return this},off:function(d,y,S){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var I in d)this._off(I,d[I],y);else{d=m(d);for(var O=arguments.length===1,R=0,K=d.length;R<K;R++)O?this._off(d[R]):this._off(d[R],y,S)}return this},_on:function(d,y,S,I){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(d,y,S)===!1){S===this&&(S=void 0);var O={fn:y,ctx:S};I&&(O.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(O)}},_off:function(d,y,S){var I,O,R;if(this._events&&(I=this._events[d],!!I)){if(arguments.length===1){if(this._firingCount)for(O=0,R=I.length;O<R;O++)I[O].fn=h;delete this._events[d];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var K=this._listens(d,y,S);if(K!==!1){var re=I[K];this._firingCount&&(re.fn=h,this._events[d]=I=I.slice()),I.splice(K,1)}}},fire:function(d,y,S){if(!this.listens(d,S))return this;var I=i({},y,{type:d,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var O=this._events[d];if(O){this._firingCount=this._firingCount+1||1;for(var R=0,K=O.length;R<K;R++){var re=O[R],ae=re.fn;re.once&&this.off(d,ae,re.ctx),ae.call(re.ctx||this,I)}this._firingCount--}}return S&&this._propagateEvent(I),this},listens:function(d,y,S,I){typeof d!="string"&&console.warn('"string" type argument expected');var O=y;typeof y!="function"&&(I=!!y,O=void 0,S=void 0);var R=this._events&&this._events[d];if(R&&R.length&&this._listens(d,O,S)!==!1)return!0;if(I){for(var K in this._eventParents)if(this._eventParents[K].listens(d,y,S,I))return!0}return!1},_listens:function(d,y,S){if(!this._events)return!1;var I=this._events[d]||[];if(!y)return!!I.length;S===this&&(S=void 0);for(var O=0,R=I.length;O<R;O++)if(I[O].fn===y&&I[O].ctx===S)return O;return!1},once:function(d,y,S){if(typeof d=="object")for(var I in d)this._on(I,d[I],y,!0);else{d=m(d);for(var O=0,R=d.length;O<R;O++)this._on(d[O],y,S,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[l(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[l(d)],this},_propagateEvent:function(d){for(var y in this._eventParents)this._eventParents[y].fire(d.type,i({layer:d.target,propagatedFrom:d.target},d),!0)}};j.addEventListener=j.on,j.removeEventListener=j.clearAllEventListeners=j.off,j.addOneTimeEventListener=j.once,j.fireEvent=j.fire,j.hasEventListeners=j.listens;var U=B.extend(j);function D(d,y,S){this.x=S?Math.round(d):d,this.y=S?Math.round(y):y}var W=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(d){return this.clone()._add(G(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(G(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new D(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new D(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=W(this.x),this.y=W(this.y),this},distanceTo:function(d){d=G(d);var y=d.x-this.x,S=d.y-this.y;return Math.sqrt(y*y+S*S)},equals:function(d){return d=G(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=G(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function G(d,y,S){return d instanceof D?d:b(d)?new D(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new D(d.x,d.y):new D(d,y,S)}function Y(d,y){if(d)for(var S=y?[d,y]:d,I=0,O=S.length;I<O;I++)this.extend(S[I])}Y.prototype={extend:function(d){var y,S;if(!d)return this;if(d instanceof D||typeof d[0]=="number"||"x"in d)y=S=G(d);else if(d=ee(d),y=d.min,S=d.max,!y||!S)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=S.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(d){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var y,S;return typeof d[0]=="number"||d instanceof D?d=G(d):d=ee(d),d instanceof Y?(y=d.min,S=d.max):y=S=d,y.x>=this.min.x&&S.x<=this.max.x&&y.y>=this.min.y&&S.y<=this.max.y},intersects:function(d){d=ee(d);var y=this.min,S=this.max,I=d.min,O=d.max,R=O.x>=y.x&&I.x<=S.x,K=O.y>=y.y&&I.y<=S.y;return R&&K},overlaps:function(d){d=ee(d);var y=this.min,S=this.max,I=d.min,O=d.max,R=O.x>y.x&&I.x<S.x,K=O.y>y.y&&I.y<S.y;return R&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var y=this.min,S=this.max,I=Math.abs(y.x-S.x)*d,O=Math.abs(y.y-S.y)*d;return ee(G(y.x-I,y.y-O),G(S.x+I,S.y+O))},equals:function(d){return d?(d=ee(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function ee(d,y){return!d||d instanceof Y?d:new Y(d,y)}function se(d,y){if(d)for(var S=y?[d,y]:d,I=0,O=S.length;I<O;I++)this.extend(S[I])}se.prototype={extend:function(d){var y=this._southWest,S=this._northEast,I,O;if(d instanceof le)I=d,O=d;else if(d instanceof se){if(I=d._southWest,O=d._northEast,!I||!O)return this}else return d?this.extend(de(d)||fe(d)):this;return!y&&!S?(this._southWest=new le(I.lat,I.lng),this._northEast=new le(O.lat,O.lng)):(y.lat=Math.min(I.lat,y.lat),y.lng=Math.min(I.lng,y.lng),S.lat=Math.max(O.lat,S.lat),S.lng=Math.max(O.lng,S.lng)),this},pad:function(d){var y=this._southWest,S=this._northEast,I=Math.abs(y.lat-S.lat)*d,O=Math.abs(y.lng-S.lng)*d;return new se(new le(y.lat-I,y.lng-O),new le(S.lat+I,S.lng+O))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof le||"lat"in d?d=de(d):d=fe(d);var y=this._southWest,S=this._northEast,I,O;return d instanceof se?(I=d.getSouthWest(),O=d.getNorthEast()):I=O=d,I.lat>=y.lat&&O.lat<=S.lat&&I.lng>=y.lng&&O.lng<=S.lng},intersects:function(d){d=fe(d);var y=this._southWest,S=this._northEast,I=d.getSouthWest(),O=d.getNorthEast(),R=O.lat>=y.lat&&I.lat<=S.lat,K=O.lng>=y.lng&&I.lng<=S.lng;return R&&K},overlaps:function(d){d=fe(d);var y=this._southWest,S=this._northEast,I=d.getSouthWest(),O=d.getNorthEast(),R=O.lat>y.lat&&I.lat<S.lat,K=O.lng>y.lng&&I.lng<S.lng;return R&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,y){return d?(d=fe(d),this._southWest.equals(d.getSouthWest(),y)&&this._northEast.equals(d.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(d,y){return d instanceof se?d:new se(d,y)}function le(d,y,S){if(isNaN(d)||isNaN(y))throw new Error("Invalid LatLng object: ("+d+", "+y+")");this.lat=+d,this.lng=+y,S!==void 0&&(this.alt=+S)}le.prototype={equals:function(d,y){if(!d)return!1;d=de(d);var S=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return S<=(y===void 0?1e-9:y)},toString:function(d){return"LatLng("+f(this.lat,d)+", "+f(this.lng,d)+")"},distanceTo:function(d){return Te.distance(this,de(d))},wrap:function(){return Te.wrapLatLng(this)},toBounds:function(d){var y=180*d/40075017,S=y/Math.cos(Math.PI/180*this.lat);return fe([this.lat-y,this.lng-S],[this.lat+y,this.lng+S])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function de(d,y,S){return d instanceof le?d:b(d)&&typeof d[0]!="object"?d.length===3?new le(d[0],d[1],d[2]):d.length===2?new le(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new le(d.lat,"lng"in d?d.lng:d.lon,d.alt):y===void 0?null:new le(d,y,S)}var Se={latLngToPoint:function(d,y){var S=this.projection.project(d),I=this.scale(y);return this.transformation._transform(S,I)},pointToLatLng:function(d,y){var S=this.scale(y),I=this.transformation.untransform(d,S);return this.projection.unproject(I)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var y=this.projection.bounds,S=this.scale(d),I=this.transformation.transform(y.min,S),O=this.transformation.transform(y.max,S);return new Y(I,O)},infinite:!1,wrapLatLng:function(d){var y=this.wrapLng?c(d.lng,this.wrapLng,!0):d.lng,S=this.wrapLat?c(d.lat,this.wrapLat,!0):d.lat,I=d.alt;return new le(S,y,I)},wrapLatLngBounds:function(d){var y=d.getCenter(),S=this.wrapLatLng(y),I=y.lat-S.lat,O=y.lng-S.lng;if(I===0&&O===0)return d;var R=d.getSouthWest(),K=d.getNorthEast(),re=new le(R.lat-I,R.lng-O),ae=new le(K.lat-I,K.lng-O);return new se(re,ae)}},Te=i({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(d,y){var S=Math.PI/180,I=d.lat*S,O=y.lat*S,R=Math.sin((y.lat-d.lat)*S/2),K=Math.sin((y.lng-d.lng)*S/2),re=R*R+Math.cos(I)*Math.cos(O)*K*K,ae=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*ae}}),pe=6378137,xe={R:pe,MAX_LATITUDE:85.0511287798,project:function(d){var y=Math.PI/180,S=this.MAX_LATITUDE,I=Math.max(Math.min(S,d.lat),-S),O=Math.sin(I*y);return new D(this.R*d.lng*y,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(d){var y=180/Math.PI;return new le((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*y,d.x*y/this.R)},bounds:function(){var d=pe*Math.PI;return new Y([-d,-d],[d,d])}()};function be(d,y,S,I){if(b(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=y,this._c=S,this._d=I}be.prototype={transform:function(d,y){return this._transform(d.clone(),y)},_transform:function(d,y){return y=y||1,d.x=y*(this._a*d.x+this._b),d.y=y*(this._c*d.y+this._d),d},untransform:function(d,y){return y=y||1,new D((d.x/y-this._b)/this._a,(d.y/y-this._d)/this._c)}};function he(d,y,S,I){return new be(d,y,S,I)}var je=i({},Te,{code:"EPSG:3857",projection:xe,transformation:function(){var d=.5/(Math.PI*xe.R);return he(d,.5,-d,.5)}()}),Me=i({},je,{code:"EPSG:900913"});function We(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function Ve(d,y){var S="",I,O,R,K,re,ae;for(I=0,R=d.length;I<R;I++){for(re=d[I],O=0,K=re.length;O<K;O++)ae=re[O],S+=(O?"L":"M")+ae.x+" "+ae.y;S+=y?Fe.svg?"z":"x":""}return S||"M0 0"}var Ze=document.documentElement.style,ot="ActiveXObject"in window,tr=ot&&!document.addEventListener,jt="msLaunchUri"in navigator&&!("documentMode"in document),Nn=vo("webkit"),on=vo("android"),ui=vo("android 2")||vo("android 3"),Ir=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ci=on&&vo("Google")&&Ir<537&&!("AudioNode"in window),rs=!!window.opera,Bs=!jt&&vo("chrome"),zs=vo("gecko")&&!Nn&&!rs&&!ot,mu=!Bs&&vo("safari"),rh=vo("phantom"),ih="OTransition"in Ze,rk=navigator.platform.indexOf("Win")===0,gu=ot&&"transition"in Ze,Gd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ui,Rv="MozPerspective"in Ze,lte=!window.L_DISABLE_3D&&(gu||Gd||Rv)&&!ih&&!rh,Hd=typeof orientation<"u"||vo("mobile"),ute=Hd&&Nn,cte=Hd&&Gd,TD=!window.PointerEvent&&window.MSPointerEvent,$D=!!(window.PointerEvent||TD),ED="ontouchstart"in window||!!window.TouchEvent,hte=!window.L_NO_TOUCH&&(ED||$D),fte=Hd&&rs,dte=Hd&&zs,pte=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,mte=function(){var d=!1;try{var y=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",h,y),window.removeEventListener("testPassiveEventSupport",h,y)}catch{}return d}(),gte=function(){return!!document.createElement("canvas").getContext}(),ik=!!(document.createElementNS&&We("svg").createSVGRect),yte=!!ik&&function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vte=!ik&&function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var y=d.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),_te=navigator.platform.indexOf("Mac")===0,xte=navigator.platform.indexOf("Linux")===0;function vo(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var Fe={ie:ot,ielt9:tr,edge:jt,webkit:Nn,android:on,android23:ui,androidStock:ci,opera:rs,chrome:Bs,gecko:zs,safari:mu,phantom:rh,opera12:ih,win:rk,ie3d:gu,webkit3d:Gd,gecko3d:Rv,any3d:lte,mobile:Hd,mobileWebkit:ute,mobileWebkit3d:cte,msPointer:TD,pointer:$D,touch:hte,touchNative:ED,mobileOpera:fte,mobileGecko:dte,retina:pte,passiveEvents:mte,canvas:gte,svg:ik,vml:vte,inlineSvg:yte,mac:_te,linux:xte},ID=Fe.msPointer?"MSPointerDown":"pointerdown",AD=Fe.msPointer?"MSPointerMove":"pointermove",OD=Fe.msPointer?"MSPointerUp":"pointerup",ND=Fe.msPointer?"MSPointerCancel":"pointercancel",sk={touchstart:ID,touchmove:AD,touchend:OD,touchcancel:ND},PD={touchstart:Tte,touchmove:Dv,touchend:Dv,touchcancel:Dv},sh={},RD=!1;function bte(d,y,S){return y==="touchstart"&&Cte(),PD[y]?(S=PD[y].bind(this,S),d.addEventListener(sk[y],S,!1),S):(console.warn("wrong event specified:",y),h)}function wte(d,y,S){if(!sk[y]){console.warn("wrong event specified:",y);return}d.removeEventListener(sk[y],S,!1)}function Ste(d){sh[d.pointerId]=d}function kte(d){sh[d.pointerId]&&(sh[d.pointerId]=d)}function DD(d){delete sh[d.pointerId]}function Cte(){RD||(document.addEventListener(ID,Ste,!0),document.addEventListener(AD,kte,!0),document.addEventListener(OD,DD,!0),document.addEventListener(ND,DD,!0),RD=!0)}function Dv(d,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var S in sh)y.touches.push(sh[S]);y.changedTouches=[y],d(y)}}function Tte(d,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&dr(y),Dv(d,y)}function $te(d){var y={},S,I;for(I in d)S=d[I],y[I]=S&&S.bind?S.bind(d):S;return d=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Ete=200;function Ite(d,y){d.addEventListener("dblclick",y);var S=0,I;function O(R){if(R.detail!==1){I=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var K=zD(R);if(!(K.some(function(ae){return ae instanceof HTMLLabelElement&&ae.attributes.for})&&!K.some(function(ae){return ae instanceof HTMLInputElement||ae instanceof HTMLSelectElement}))){var re=Date.now();re-S<=Ete?(I++,I===2&&y($te(R))):I=1,S=re}}}return d.addEventListener("click",O),{dblclick:y,simDblclick:O}}function Ate(d,y){d.removeEventListener("dblclick",y.dblclick),d.removeEventListener("click",y.simDblclick)}var ok=Fv(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kd=Fv(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),MD=Kd==="webkitTransition"||Kd==="OTransition"?Kd+"End":"transitionend";function LD(d){return typeof d=="string"?document.getElementById(d):d}function qd(d,y){var S=d.style[y]||d.currentStyle&&d.currentStyle[y];if((!S||S==="auto")&&document.defaultView){var I=document.defaultView.getComputedStyle(d,null);S=I?I[y]:null}return S==="auto"?null:S}function bt(d,y,S){var I=document.createElement(d);return I.className=y||"",S&&S.appendChild(I),I}function fn(d){var y=d.parentNode;y&&y.removeChild(d)}function Mv(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function oh(d){var y=d.parentNode;y&&y.lastChild!==d&&y.appendChild(d)}function ah(d){var y=d.parentNode;y&&y.firstChild!==d&&y.insertBefore(d,y.firstChild)}function ak(d,y){if(d.classList!==void 0)return d.classList.contains(y);var S=Lv(d);return S.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(S)}function tt(d,y){if(d.classList!==void 0)for(var S=m(y),I=0,O=S.length;I<O;I++)d.classList.add(S[I]);else if(!ak(d,y)){var R=Lv(d);lk(d,(R?R+" ":"")+y)}}function $n(d,y){d.classList!==void 0?d.classList.remove(y):lk(d,p((" "+Lv(d)+" ").replace(" "+y+" "," ")))}function lk(d,y){d.className.baseVal===void 0?d.className=y:d.className.baseVal=y}function Lv(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function is(d,y){"opacity"in d.style?d.style.opacity=y:"filter"in d.style&&Ote(d,y)}function Ote(d,y){var S=!1,I="DXImageTransform.Microsoft.Alpha";try{S=d.filters.item(I)}catch{if(y===1)return}y=Math.round(y*100),S?(S.Enabled=y!==100,S.Opacity=y):d.style.filter+=" progid:"+I+"(opacity="+y+")"}function Fv(d){for(var y=document.documentElement.style,S=0;S<d.length;S++)if(d[S]in y)return d[S];return!1}function yu(d,y,S){var I=y||new D(0,0);d.style[ok]=(Fe.ie3d?"translate("+I.x+"px,"+I.y+"px)":"translate3d("+I.x+"px,"+I.y+"px,0)")+(S?" scale("+S+")":"")}function Pn(d,y){d._leaflet_pos=y,Fe.any3d?yu(d,y):(d.style.left=y.x+"px",d.style.top=y.y+"px")}function vu(d){return d._leaflet_pos||new D(0,0)}var Xd,Zd,uk;if("onselectstart"in document)Xd=function(){Ye(window,"selectstart",dr)},Zd=function(){Vt(window,"selectstart",dr)};else{var Yd=Fv(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xd=function(){if(Yd){var d=document.documentElement.style;uk=d[Yd],d[Yd]="none"}},Zd=function(){Yd&&(document.documentElement.style[Yd]=uk,uk=void 0)}}function ck(){Ye(window,"dragstart",dr)}function hk(){Vt(window,"dragstart",dr)}var Bv,fk;function dk(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(zv(),Bv=d,fk=d.style.outlineStyle,d.style.outlineStyle="none",Ye(window,"keydown",zv))}function zv(){Bv&&(Bv.style.outlineStyle=fk,Bv=void 0,fk=void 0,Vt(window,"keydown",zv))}function FD(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function pk(d){var y=d.getBoundingClientRect();return{x:y.width/d.offsetWidth||1,y:y.height/d.offsetHeight||1,boundingClientRect:y}}var Nte={__proto__:null,TRANSFORM:ok,TRANSITION:Kd,TRANSITION_END:MD,get:LD,getStyle:qd,create:bt,remove:fn,empty:Mv,toFront:oh,toBack:ah,hasClass:ak,addClass:tt,removeClass:$n,setClass:lk,getClass:Lv,setOpacity:is,testProp:Fv,setTransform:yu,setPosition:Pn,getPosition:vu,get disableTextSelection(){return Xd},get enableTextSelection(){return Zd},disableImageDrag:ck,enableImageDrag:hk,preventOutline:dk,restoreOutline:zv,getSizedParentNode:FD,getScale:pk};function Ye(d,y,S,I){if(y&&typeof y=="object")for(var O in y)gk(d,O,y[O],S);else{y=m(y);for(var R=0,K=y.length;R<K;R++)gk(d,y[R],S,I)}return this}var _o="_leaflet_events";function Vt(d,y,S,I){if(arguments.length===1)BD(d),delete d[_o];else if(y&&typeof y=="object")for(var O in y)yk(d,O,y[O],S);else if(y=m(y),arguments.length===2)BD(d,function(re){return w(y,re)!==-1});else for(var R=0,K=y.length;R<K;R++)yk(d,y[R],S,I);return this}function BD(d,y){for(var S in d[_o]){var I=S.split(/\d/)[0];(!y||y(I))&&yk(d,I,null,null,S)}}var mk={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function gk(d,y,S,I){var O=y+l(S)+(I?"_"+l(I):"");if(d[_o]&&d[_o][O])return this;var R=function(re){return S.call(I||d,re||window.event)},K=R;!Fe.touchNative&&Fe.pointer&&y.indexOf("touch")===0?R=bte(d,y,R):Fe.touch&&y==="dblclick"?R=Ite(d,R):"addEventListener"in d?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?d.addEventListener(mk[y]||y,R,Fe.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(R=function(re){re=re||window.event,_k(d,re)&&K(re)},d.addEventListener(mk[y],R,!1)):d.addEventListener(y,K,!1):d.attachEvent("on"+y,R),d[_o]=d[_o]||{},d[_o][O]=R}function yk(d,y,S,I,O){O=O||y+l(S)+(I?"_"+l(I):"");var R=d[_o]&&d[_o][O];if(!R)return this;!Fe.touchNative&&Fe.pointer&&y.indexOf("touch")===0?wte(d,y,R):Fe.touch&&y==="dblclick"?Ate(d,R):"removeEventListener"in d?d.removeEventListener(mk[y]||y,R,!1):d.detachEvent("on"+y,R),d[_o][O]=null}function _u(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function vk(d){return gk(d,"wheel",_u),this}function Jd(d){return Ye(d,"mousedown touchstart dblclick contextmenu",_u),d._leaflet_disable_click=!0,this}function dr(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function xu(d){return dr(d),_u(d),this}function zD(d){if(d.composedPath)return d.composedPath();for(var y=[],S=d.target;S;)y.push(S),S=S.parentNode;return y}function jD(d,y){if(!y)return new D(d.clientX,d.clientY);var S=pk(y),I=S.boundingClientRect;return new D((d.clientX-I.left)/S.x-y.clientLeft,(d.clientY-I.top)/S.y-y.clientTop)}var Pte=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function VD(d){return Fe.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/Pte:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function _k(d,y){var S=y.relatedTarget;if(!S)return!0;try{for(;S&&S!==d;)S=S.parentNode}catch{return!1}return S!==d}var Rte={__proto__:null,on:Ye,off:Vt,stopPropagation:_u,disableScrollPropagation:vk,disableClickPropagation:Jd,preventDefault:dr,stop:xu,getPropagationPath:zD,getMousePosition:jD,getWheelDelta:VD,isExternalTarget:_k,addListener:Ye,removeListener:Vt},UD=U.extend({run:function(d,y,S,I){this.stop(),this._el=d,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(I||.5,.2),this._startPos=vu(d),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(d){var y=+new Date-this._startTime,S=this._duration*1e3;y<S?this._runFrame(this._easeOut(y/S),d):(this._runFrame(1),this._complete())},_runFrame:function(d,y){var S=this._startPos.add(this._offset.multiplyBy(d));y&&S._round(),Pn(this._el,S),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),vt=U.extend({options:{crs:je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,y){y=_(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(de(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kd&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ye(this._proxy,MD,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,y,S){if(y=y===void 0?this._zoom:this._limitZoom(y),d=this._limitCenter(de(d),y,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var I=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,y,S.zoom):this._tryAnimatedPan(d,S.pan);if(I)return clearTimeout(this._sizeTimer),this}return this._resetView(d,y,S.pan&&S.pan.noMoveStart),this},setZoom:function(d,y){return this._loaded?this.setView(this.getCenter(),d,{zoom:y}):(this._zoom=d,this)},zoomIn:function(d,y){return d=d||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,y)},zoomOut:function(d,y){return d=d||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,y)},setZoomAround:function(d,y,S){var I=this.getZoomScale(y),O=this.getSize().divideBy(2),R=d instanceof D?d:this.latLngToContainerPoint(d),K=R.subtract(O).multiplyBy(1-1/I),re=this.containerPointToLatLng(O.add(K));return this.setView(re,y,{zoom:S})},_getBoundsCenterZoom:function(d,y){y=y||{},d=d.getBounds?d.getBounds():fe(d);var S=G(y.paddingTopLeft||y.padding||[0,0]),I=G(y.paddingBottomRight||y.padding||[0,0]),O=this.getBoundsZoom(d,!1,S.add(I));if(O=typeof y.maxZoom=="number"?Math.min(y.maxZoom,O):O,O===1/0)return{center:d.getCenter(),zoom:O};var R=I.subtract(S).divideBy(2),K=this.project(d.getSouthWest(),O),re=this.project(d.getNorthEast(),O),ae=this.unproject(K.add(re).divideBy(2).add(R),O);return{center:ae,zoom:O}},fitBounds:function(d,y){if(d=fe(d),!d.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(d,y);return this.setView(S.center,S.zoom,y)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,y){return this.setView(d,this._zoom,{pan:y})},panBy:function(d,y){if(d=G(d).round(),y=y||{},!d.x&&!d.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new UD,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,S,y.duration||.25,y.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,y,S){if(S=S||{},S.animate===!1||!Fe.any3d)return this.setView(d,y,S);this._stop();var I=this.project(this.getCenter()),O=this.project(d),R=this.getSize(),K=this._zoom;d=de(d),y=y===void 0?K:y;var re=Math.max(R.x,R.y),ae=re*this.getZoomScale(K,y),ye=O.distanceTo(I)||1,Ae=1.42,qe=Ae*Ae;function ut(Rn){var Jv=Rn?-1:1,wne=Rn?ae:re,Sne=ae*ae-re*re+Jv*qe*qe*ye*ye,kne=2*wne*qe*ye,Ak=Sne/kne,SM=Math.sqrt(Ak*Ak+1)-Ak,Cne=SM<1e-9?-18:Math.log(SM);return Cne}function Hr(Rn){return(Math.exp(Rn)-Math.exp(-Rn))/2}function nr(Rn){return(Math.exp(Rn)+Math.exp(-Rn))/2}function os(Rn){return Hr(Rn)/nr(Rn)}var hi=ut(0);function dh(Rn){return re*(nr(hi)/nr(hi+Ae*Rn))}function vne(Rn){return re*(nr(hi)*os(hi+Ae*Rn)-Hr(hi))/qe}function _ne(Rn){return 1-Math.pow(1-Rn,1.5)}var xne=Date.now(),bM=(ut(1)-hi)/Ae,bne=S.duration?1e3*S.duration:1e3*bM*.8;function wM(){var Rn=(Date.now()-xne)/bne,Jv=_ne(Rn)*bM;Rn<=1?(this._flyToFrame=N(wM,this),this._move(this.unproject(I.add(O.subtract(I).multiplyBy(vne(Jv)/ye)),K),this.getScaleZoom(re/dh(Jv),K),{flyTo:!0})):this._move(d,y)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),wM.call(this),this},flyToBounds:function(d,y){var S=this._getBoundsCenterZoom(d,y);return this.flyTo(S.center,S.zoom,y)},setMaxBounds:function(d){return d=fe(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var y=this.options.minZoom;return this.options.minZoom=d,this._loaded&&y!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var y=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&y!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,y){this._enforcingBounds=!0;var S=this.getCenter(),I=this._limitCenter(S,this._zoom,fe(d));return S.equals(I)||this.panTo(I,y),this._enforcingBounds=!1,this},panInside:function(d,y){y=y||{};var S=G(y.paddingTopLeft||y.padding||[0,0]),I=G(y.paddingBottomRight||y.padding||[0,0]),O=this.project(this.getCenter()),R=this.project(d),K=this.getPixelBounds(),re=ee([K.min.add(S),K.max.subtract(I)]),ae=re.getSize();if(!re.contains(R)){this._enforcingBounds=!0;var ye=R.subtract(re.getCenter()),Ae=re.extend(R).getSize().subtract(ae);O.x+=ye.x<0?-Ae.x:Ae.x,O.y+=ye.y<0?-Ae.y:Ae.y,this.panTo(this.unproject(O),y),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=i({animate:!1,pan:!0},d===!0?{animate:!0}:d);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),I=y.divideBy(2).round(),O=S.divideBy(2).round(),R=I.subtract(O);return!R.x&&!R.y?this:(d.animate&&d.pan?this.panBy(R):(d.pan&&this._rawPanBy(R),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=i({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,S,d):navigator.geolocation.getCurrentPosition(y,S,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var y=d.code,S=d.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var y=d.coords.latitude,S=d.coords.longitude,I=new le(y,S),O=I.toBounds(d.coords.accuracy*2),R=this._locateOptions;if(R.setView){var K=this.getBoundsZoom(O);this.setView(I,R.maxZoom?Math.min(K,R.maxZoom):K)}var re={latlng:I,bounds:O,timestamp:d.timestamp};for(var ae in d.coords)typeof d.coords[ae]=="number"&&(re[ae]=d.coords[ae]);this.fire("locationfound",re)}},addHandler:function(d,y){if(!y)return this;var S=this[d]=new y(this);return this._handlers.push(S),this.options[d]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)fn(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,y){var S="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),I=bt("div",S,y||this._mapPane);return d&&(this._panes[d]=I),I},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),y=this.unproject(d.getBottomLeft()),S=this.unproject(d.getTopRight());return new se(y,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,y,S){d=fe(d),S=G(S||[0,0]);var I=this.getZoom()||0,O=this.getMinZoom(),R=this.getMaxZoom(),K=d.getNorthWest(),re=d.getSouthEast(),ae=this.getSize().subtract(S),ye=ee(this.project(re,I),this.project(K,I)).getSize(),Ae=Fe.any3d?this.options.zoomSnap:1,qe=ae.x/ye.x,ut=ae.y/ye.y,Hr=y?Math.max(qe,ut):Math.min(qe,ut);return I=this.getScaleZoom(Hr,I),Ae&&(I=Math.round(I/(Ae/100))*(Ae/100),I=y?Math.ceil(I/Ae)*Ae:Math.floor(I/Ae)*Ae),Math.max(O,Math.min(R,I))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,y){var S=this._getTopLeftPoint(d,y);return new Y(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,y){var S=this.options.crs;return y=y===void 0?this._zoom:y,S.scale(d)/S.scale(y)},getScaleZoom:function(d,y){var S=this.options.crs;y=y===void 0?this._zoom:y;var I=S.zoom(d*S.scale(y));return isNaN(I)?1/0:I},project:function(d,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(de(d),y)},unproject:function(d,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(G(d),y)},layerPointToLatLng:function(d){var y=G(d).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(d){var y=this.project(de(d))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(de(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(fe(d))},distance:function(d,y){return this.options.crs.distance(de(d),de(y))},containerPointToLayerPoint:function(d){return G(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return G(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var y=this.containerPointToLayerPoint(G(d));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(d)))},mouseEventToContainerPoint:function(d){return jD(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var y=this._container=LD(d);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ye(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,tt(d,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=qd(d,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pn(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(d.markerPane,"leaflet-zoom-hide"),tt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,y,S){Pn(this._mapPane,new D(0,0));var I=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var O=this._zoom!==y;this._moveStart(O,S)._move(d,y)._moveEnd(O),this.fire("viewreset"),I&&this.fire("load")},_moveStart:function(d,y){return d&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(d,y,S,I){y===void 0&&(y=this._zoom);var O=this._zoom!==y;return this._zoom=y,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),I?S&&S.pinch&&this.fire("zoom",S):((O||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){Pn(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[l(this._container)]=this;var y=d?Vt:Ye;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,y){for(var S=[],I,O=y==="mouseout"||y==="mouseover",R=d.target||d.srcElement,K=!1;R;){if(I=this._targets[l(R)],I&&(y==="click"||y==="preclick")&&this._draggableMoved(I)){K=!0;break}if(I&&I.listens(y,!0)&&(O&&!_k(R,d)||(S.push(I),O))||R===this._container)break;R=R.parentNode}return!S.length&&!K&&!O&&this.listens(y,!0)&&(S=[this]),S},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var y=d.target||d.srcElement;if(!(!this._loaded||y._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(y))){var S=d.type;S==="mousedown"&&dk(y),this._fireDOMEvent(d,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,y,S){if(d.type==="click"){var I=i({},d);I.type="preclick",this._fireDOMEvent(I,I.type,S)}var O=this._findEventTargets(d,y);if(S){for(var R=[],K=0;K<S.length;K++)S[K].listens(y,!0)&&R.push(S[K]);O=R.concat(O)}if(O.length){y==="contextmenu"&&dr(d);var re=O[0],ae={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var ye=re.getLatLng&&(!re._radius||re._radius<=10);ae.containerPoint=ye?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(d),ae.layerPoint=this.containerPointToLayerPoint(ae.containerPoint),ae.latlng=ye?re.getLatLng():this.layerPointToLatLng(ae.layerPoint)}for(K=0;K<O.length;K++)if(O[K].fire(y,ae,!0),ae.originalEvent._stopped||O[K].options.bubblingMouseEvents===!1&&w(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,y=this._handlers.length;d<y;d++)this._handlers[d].disable()},whenReady:function(d,y){return this._loaded?d.call(y||this,{target:this}):this.on("load",d,y),this},_getMapPanePos:function(){return vu(this._mapPane)||new D(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,y){var S=d&&y!==void 0?this._getNewPixelOrigin(d,y):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,y){var S=this.getSize()._divideBy(2);return this.project(d,y)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,y,S){var I=this._getNewPixelOrigin(S,y);return this.project(d,y)._subtract(I)},_latLngBoundsToNewLayerBounds:function(d,y,S){var I=this._getNewPixelOrigin(S,y);return ee([this.project(d.getSouthWest(),y)._subtract(I),this.project(d.getNorthWest(),y)._subtract(I),this.project(d.getSouthEast(),y)._subtract(I),this.project(d.getNorthEast(),y)._subtract(I)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,y,S){if(!S)return d;var I=this.project(d,y),O=this.getSize().divideBy(2),R=new Y(I.subtract(O),I.add(O)),K=this._getBoundsOffset(R,S,y);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?d:this.unproject(I.add(K),y)},_limitOffset:function(d,y){if(!y)return d;var S=this.getPixelBounds(),I=new Y(S.min.add(d),S.max.add(d));return d.add(this._getBoundsOffset(I,y))},_getBoundsOffset:function(d,y,S){var I=ee(this.project(y.getNorthEast(),S),this.project(y.getSouthWest(),S)),O=I.min.subtract(d.min),R=I.max.subtract(d.max),K=this._rebound(O.x,-R.x),re=this._rebound(O.y,-R.y);return new D(K,re)},_rebound:function(d,y){return d+y>0?Math.round(d-y)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(y))},_limitZoom:function(d){var y=this.getMinZoom(),S=this.getMaxZoom(),I=Fe.any3d?this.options.zoomSnap:1;return I&&(d=Math.round(d/I)*I),Math.max(y,Math.min(S,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$n(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,y){var S=this._getCenterOffset(d)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,y),!0)},_createAnimProxy:function(){var d=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(y){var S=ok,I=this._proxy.style[S];yu(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),I===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),y=this.getZoom();yu(this._proxy,this.project(d,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,y,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var I=this.getZoomScale(y),O=this._getCenterOffset(d)._divideBy(1-1/I);return S.animate!==!0&&!this.getSize().contains(O)?!1:(N(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(d,y,!0)},this),!0)},_animateZoom:function(d,y,S,I){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=y,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:y,noUpdate:I}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$n(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dte(d,y){return new vt(d,y)}var js=B.extend({options:{position:"topright"},initialize:function(d){_(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var y=this._map;return y&&y.removeControl(this),this.options.position=d,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var y=this._container=this.onAdd(d),S=this.getPosition(),I=d._controlCorners[S];return tt(y,"leaflet-control"),S.indexOf("bottom")!==-1?I.insertBefore(y,I.firstChild):I.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),Qd=function(d){return new js(d)};vt.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},y="leaflet-",S=this._controlContainer=bt("div",y+"control-container",this._container);function I(O,R){var K=y+O+" "+y+R;d[O+R]=bt("div",K,S)}I("top","left"),I("top","right"),I("bottom","left"),I("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)fn(this._controlCorners[d]);fn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var WD=js.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,y,S,I){return S<I?-1:I<S?1:0}},initialize:function(d,y,S){_(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var I in d)this._addLayer(d[I],I);for(I in y)this._addLayer(y[I],I,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return js.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,y){return this._addLayer(d,y),this._map?this._update():this},addOverlay:function(d,y){return this._addLayer(d,y,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(d));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):$n(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $n(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",y=this._container=bt("div",d),S=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Jd(y),vk(y);var I=this._section=bt("section",d+"-list");S&&(this._map.on("click",this.collapse,this),Ye(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=bt("a",d+"-toggle",y);O.href="#",O.title="Layers",O.setAttribute("role","button"),Ye(O,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){dr(R),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=bt("div",d+"-base",I),this._separator=bt("div",d+"-separator",I),this._overlaysList=bt("div",d+"-overlays",I),y.appendChild(I)},_getLayer:function(d){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===d)return this._layers[y]},_addLayer:function(d,y,S){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:y,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(I,O){return this.options.sortFunction(I.layer,O.layer,I.name,O.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mv(this._baseLayersList),Mv(this._overlaysList),this._layerControlInputs=[];var d,y,S,I,O=0;for(S=0;S<this._layers.length;S++)I=this._layers[S],this._addItem(I),y=y||I.overlay,d=d||!I.overlay,O+=I.overlay?0:1;return this.options.hideSingleBase&&(d=d&&O>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=y&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var y=this._getLayer(l(d.target)),S=y.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;S&&this._map.fire(S,y)},_createRadioElement:function(d,y){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(y?' checked="checked"':"")+"/>",I=document.createElement("div");return I.innerHTML=S,I.firstChild},_addItem:function(d){var y=document.createElement("label"),S=this._map.hasLayer(d.layer),I;d.overlay?(I=document.createElement("input"),I.type="checkbox",I.className="leaflet-control-layers-selector",I.defaultChecked=S):I=this._createRadioElement("leaflet-base-layers_"+l(this),S),this._layerControlInputs.push(I),I.layerId=l(d.layer),Ye(I,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+d.name;var R=document.createElement("span");y.appendChild(R),R.appendChild(I),R.appendChild(O);var K=d.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,y,S,I=[],O=[];this._handlingClick=!0;for(var R=d.length-1;R>=0;R--)y=d[R],S=this._getLayer(y.layerId).layer,y.checked?I.push(S):y.checked||O.push(S);for(R=0;R<O.length;R++)this._map.hasLayer(O[R])&&this._map.removeLayer(O[R]);for(R=0;R<I.length;R++)this._map.hasLayer(I[R])||this._map.addLayer(I[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,y,S,I=this._map.getZoom(),O=d.length-1;O>=0;O--)y=d[O],S=this._getLayer(y.layerId).layer,y.disabled=S.options.minZoom!==void 0&&I<S.options.minZoom||S.options.maxZoom!==void 0&&I>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,Ye(d,"click",dr),this.expand();var y=this;setTimeout(function(){Vt(d,"click",dr),y._preventClick=!1})}}),Mte=function(d,y,S){return new WD(d,y,S)},xk=js.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var y="leaflet-control-zoom",S=bt("div",y+" leaflet-bar"),I=this.options;return this._zoomInButton=this._createButton(I.zoomInText,I.zoomInTitle,y+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(I.zoomOutText,I.zoomOutTitle,y+"-out",S,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,y,S,I,O){var R=bt("a",S,I);return R.innerHTML=d,R.href="#",R.title=y,R.setAttribute("role","button"),R.setAttribute("aria-label",y),Jd(R),Ye(R,"click",xu),Ye(R,"click",O,this),Ye(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var d=this._map,y="leaflet-disabled";$n(this._zoomInButton,y),$n(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(tt(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(tt(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xk,this.addControl(this.zoomControl))});var Lte=function(d){return new xk(d)},GD=js.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var y="leaflet-control-scale",S=bt("div",y),I=this.options;return this._addScales(I,y+"-line",S),d.on(I.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),S},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,y,S){d.metric&&(this._mScale=bt("div",y,S)),d.imperial&&(this._iScale=bt("div",y,S))},_update:function(){var d=this._map,y=d.getSize().y/2,S=d.distance(d.containerPointToLatLng([0,y]),d.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(S)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var y=this._getRoundNum(d),S=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,S,y/d)},_updateImperial:function(d){var y=d*3.2808399,S,I,O;y>5280?(S=y/5280,I=this._getRoundNum(S),this._updateScale(this._iScale,I+" mi",I/S)):(O=this._getRoundNum(y),this._updateScale(this._iScale,O+" ft",O/y))},_updateScale:function(d,y,S){d.style.width=Math.round(this.options.maxWidth*S)+"px",d.innerHTML=y},_getRoundNum:function(d){var y=Math.pow(10,(Math.floor(d)+"").length-1),S=d/y;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,y*S}}),Fte=function(d){return new GD(d)},Bte='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',bk=js.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?Bte+" ":"")+"Leaflet</a>"},initialize:function(d){_(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Jd(this._container);for(var y in d._layers)d._layers[y].getAttribution&&this.addAttribution(d._layers[y].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var y in this._attributions)this._attributions[y]&&d.push(y);var S=[];this.options.prefix&&S.push(this.options.prefix),d.length&&S.push(d.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new bk().addTo(this)});var zte=function(d){return new bk(d)};js.Layers=WD,js.Zoom=xk,js.Scale=GD,js.Attribution=bk,Qd.layers=Mte,Qd.zoom=Lte,Qd.scale=Fte,Qd.attribution=zte;var xo=B.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xo.addTo=function(d,y){return d.addHandler(y,this),this};var jte={Events:j},HD=Fe.touch?"touchstart mousedown":"mousedown",Ja=U.extend({options:{clickTolerance:3},initialize:function(d,y,S,I){_(this,I),this._element=d,this._dragStartTarget=y||d,this._preventOutline=S},enable:function(){this._enabled||(Ye(this._dragStartTarget,HD,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ja._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,HD,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!ak(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){Ja._dragging===this&&this.finishDrag();return}if(!(Ja._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(Ja._dragging=this,this._preventOutline&&dk(this._element),ck(),Xd(),!this._moving)){this.fire("down");var y=d.touches?d.touches[0]:d,S=FD(this._element);this._startPoint=new D(y.clientX,y.clientY),this._startPos=vu(this._element),this._parentScale=pk(S);var I=d.type==="mousedown";Ye(document,I?"mousemove":"touchmove",this._onMove,this),Ye(document,I?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var y=d.touches&&d.touches.length===1?d.touches[0]:d,S=new D(y.clientX,y.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,dr(d),this._moved||(this.fire("dragstart"),this._moved=!0,tt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),Pn(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){$n(document.body,"leaflet-dragging"),this._lastTarget&&($n(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),hk(),Zd();var y=this._moved&&this._moving;this._moving=!1,Ja._dragging=!1,y&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function KD(d,y,S){var I,O=[1,4,2,8],R,K,re,ae,ye,Ae,qe,ut;for(R=0,Ae=d.length;R<Ae;R++)d[R]._code=bu(d[R],y);for(re=0;re<4;re++){for(qe=O[re],I=[],R=0,Ae=d.length,K=Ae-1;R<Ae;K=R++)ae=d[R],ye=d[K],ae._code&qe?ye._code&qe||(ut=jv(ye,ae,qe,y,S),ut._code=bu(ut,y),I.push(ut)):(ye._code&qe&&(ut=jv(ye,ae,qe,y,S),ut._code=bu(ut,y),I.push(ut)),I.push(ae));d=I}return d}function qD(d,y){var S,I,O,R,K,re,ae,ye,Ae;if(!d||d.length===0)throw new Error("latlngs not passed");ss(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var qe=de([0,0]),ut=fe(d),Hr=ut.getNorthWest().distanceTo(ut.getSouthWest())*ut.getNorthEast().distanceTo(ut.getNorthWest());Hr<1700&&(qe=wk(d));var nr=d.length,os=[];for(S=0;S<nr;S++){var hi=de(d[S]);os.push(y.project(de([hi.lat-qe.lat,hi.lng-qe.lng])))}for(re=ae=ye=0,S=0,I=nr-1;S<nr;I=S++)O=os[S],R=os[I],K=O.y*R.x-R.y*O.x,ae+=(O.x+R.x)*K,ye+=(O.y+R.y)*K,re+=K*3;re===0?Ae=os[0]:Ae=[ae/re,ye/re];var dh=y.unproject(G(Ae));return de([dh.lat+qe.lat,dh.lng+qe.lng])}function wk(d){for(var y=0,S=0,I=0,O=0;O<d.length;O++){var R=de(d[O]);y+=R.lat,S+=R.lng,I++}return de([y/I,S/I])}var Vte={__proto__:null,clipPolygon:KD,polygonCenter:qD,centroid:wk};function XD(d,y){if(!y||!d.length)return d.slice();var S=y*y;return d=Gte(d,S),d=Wte(d,S),d}function ZD(d,y,S){return Math.sqrt(ep(d,y,S,!0))}function Ute(d,y,S){return ep(d,y,S)}function Wte(d,y){var S=d.length,I=typeof Uint8Array<"u"?Uint8Array:Array,O=new I(S);O[0]=O[S-1]=1,Sk(d,O,y,0,S-1);var R,K=[];for(R=0;R<S;R++)O[R]&&K.push(d[R]);return K}function Sk(d,y,S,I,O){var R=0,K,re,ae;for(re=I+1;re<=O-1;re++)ae=ep(d[re],d[I],d[O],!0),ae>R&&(K=re,R=ae);R>S&&(y[K]=1,Sk(d,y,S,I,K),Sk(d,y,S,K,O))}function Gte(d,y){for(var S=[d[0]],I=1,O=0,R=d.length;I<R;I++)Hte(d[I],d[O])>y&&(S.push(d[I]),O=I);return O<R-1&&S.push(d[R-1]),S}var YD;function JD(d,y,S,I,O){var R=I?YD:bu(d,S),K=bu(y,S),re,ae,ye;for(YD=K;;){if(!(R|K))return[d,y];if(R&K)return!1;re=R||K,ae=jv(d,y,re,S,O),ye=bu(ae,S),re===R?(d=ae,R=ye):(y=ae,K=ye)}}function jv(d,y,S,I,O){var R=y.x-d.x,K=y.y-d.y,re=I.min,ae=I.max,ye,Ae;return S&8?(ye=d.x+R*(ae.y-d.y)/K,Ae=ae.y):S&4?(ye=d.x+R*(re.y-d.y)/K,Ae=re.y):S&2?(ye=ae.x,Ae=d.y+K*(ae.x-d.x)/R):S&1&&(ye=re.x,Ae=d.y+K*(re.x-d.x)/R),new D(ye,Ae,O)}function bu(d,y){var S=0;return d.x<y.min.x?S|=1:d.x>y.max.x&&(S|=2),d.y<y.min.y?S|=4:d.y>y.max.y&&(S|=8),S}function Hte(d,y){var S=y.x-d.x,I=y.y-d.y;return S*S+I*I}function ep(d,y,S,I){var O=y.x,R=y.y,K=S.x-O,re=S.y-R,ae=K*K+re*re,ye;return ae>0&&(ye=((d.x-O)*K+(d.y-R)*re)/ae,ye>1?(O=S.x,R=S.y):ye>0&&(O+=K*ye,R+=re*ye)),K=d.x-O,re=d.y-R,I?K*K+re*re:new D(O,R)}function ss(d){return!b(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function QD(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ss(d)}function eM(d,y){var S,I,O,R,K,re,ae,ye;if(!d||d.length===0)throw new Error("latlngs not passed");ss(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Ae=de([0,0]),qe=fe(d),ut=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());ut<1700&&(Ae=wk(d));var Hr=d.length,nr=[];for(S=0;S<Hr;S++){var os=de(d[S]);nr.push(y.project(de([os.lat-Ae.lat,os.lng-Ae.lng])))}for(S=0,I=0;S<Hr-1;S++)I+=nr[S].distanceTo(nr[S+1])/2;if(I===0)ye=nr[0];else for(S=0,R=0;S<Hr-1;S++)if(K=nr[S],re=nr[S+1],O=K.distanceTo(re),R+=O,R>I){ae=(R-I)/O,ye=[re.x-ae*(re.x-K.x),re.y-ae*(re.y-K.y)];break}var hi=y.unproject(G(ye));return de([hi.lat+Ae.lat,hi.lng+Ae.lng])}var Kte={__proto__:null,simplify:XD,pointToSegmentDistance:ZD,closestPointOnSegment:Ute,clipSegment:JD,_getEdgeIntersection:jv,_getBitCode:bu,_sqClosestPointOnSegment:ep,isFlat:ss,_flat:QD,polylineCenter:eM},kk={project:function(d){return new D(d.lng,d.lat)},unproject:function(d){return new le(d.y,d.x)},bounds:new Y([-180,-90],[180,90])},Ck={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var y=Math.PI/180,S=this.R,I=d.lat*y,O=this.R_MINOR/S,R=Math.sqrt(1-O*O),K=R*Math.sin(I),re=Math.tan(Math.PI/4-I/2)/Math.pow((1-K)/(1+K),R/2);return I=-S*Math.log(Math.max(re,1e-10)),new D(d.lng*y*S,I)},unproject:function(d){for(var y=180/Math.PI,S=this.R,I=this.R_MINOR/S,O=Math.sqrt(1-I*I),R=Math.exp(-d.y/S),K=Math.PI/2-2*Math.atan(R),re=0,ae=.1,ye;re<15&&Math.abs(ae)>1e-7;re++)ye=O*Math.sin(K),ye=Math.pow((1-ye)/(1+ye),O/2),ae=Math.PI/2-2*Math.atan(R*ye)-K,K+=ae;return new le(K*y,d.x*y/S)}},qte={__proto__:null,LonLat:kk,Mercator:Ck,SphericalMercator:xe},Xte=i({},Te,{code:"EPSG:3395",projection:Ck,transformation:function(){var d=.5/(Math.PI*Ck.R);return he(d,.5,-d,.5)}()}),tM=i({},Te,{code:"EPSG:4326",projection:kk,transformation:he(1/180,1,-1/180,.5)}),Zte=i({},Se,{projection:kk,transformation:he(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,y){var S=y.lng-d.lng,I=y.lat-d.lat;return Math.sqrt(S*S+I*I)},infinite:!0});Se.Earth=Te,Se.EPSG3395=Xte,Se.EPSG3857=je,Se.EPSG900913=Me,Se.EPSG4326=tM,Se.Simple=Zte;var Vs=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[l(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[l(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var y=d.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var S=this.getEvents();y.on(S,this),this.once("remove",function(){y.off(S,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(d);return this._layers[y]?this:(this._layers[y]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var y=l(d);return this._layers[y]?(this._loaded&&d.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return l(d)in this._layers},eachLayer:function(d,y){for(var S in this._layers)d.call(y,this._layers[S]);return this},_addLayers:function(d){d=d?b(d)?d:[d]:[];for(var y=0,S=d.length;y<S;y++)this.addLayer(d[y])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[l(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var y=l(d);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,y=-1/0,S=this._getZoomSpan();for(var I in this._zoomBoundLayers){var O=this._zoomBoundLayers[I].options;d=O.minZoom===void 0?d:Math.min(d,O.minZoom),y=O.maxZoom===void 0?y:Math.max(y,O.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=d===1/0?void 0:d,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lh=Vs.extend({initialize:function(d,y){_(this,y),this._layers={};var S,I;if(d)for(S=0,I=d.length;S<I;S++)this.addLayer(d[S])},addLayer:function(d){var y=this.getLayerId(d);return this._layers[y]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var y=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(d){var y=typeof d=="number"?d:this.getLayerId(d);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var y=Array.prototype.slice.call(arguments,1),S,I;for(S in this._layers)I=this._layers[S],I[d]&&I[d].apply(I,y);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,y){for(var S in this._layers)d.call(y,this._layers[S]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return l(d)}}),Yte=function(d,y){return new lh(d,y)},ra=lh.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),lh.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),lh.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new se;for(var y in this._layers){var S=this._layers[y];d.extend(S.getBounds?S.getBounds():S.getLatLng())}return d}}),Jte=function(d,y){return new ra(d,y)},uh=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){_(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,y){var S=this._getIconUrl(d);if(!S){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var I=this._createImg(S,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(I,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),I},_setIconStyles:function(d,y){var S=this.options,I=S[y+"Size"];typeof I=="number"&&(I=[I,I]);var O=G(I),R=G(y==="shadow"&&S.shadowAnchor||S.iconAnchor||O&&O.divideBy(2,!0));d.className="leaflet-marker-"+y+" "+(S.className||""),R&&(d.style.marginLeft=-R.x+"px",d.style.marginTop=-R.y+"px"),O&&(d.style.width=O.x+"px",d.style.height=O.y+"px")},_createImg:function(d,y){return y=y||document.createElement("img"),y.src=d,y},_getIconUrl:function(d){return Fe.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function Qte(d){return new uh(d)}var tp=uh.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof tp.imagePath!="string"&&(tp.imagePath=this._detectIconPath()),(this.options.imagePath||tp.imagePath)+uh.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var y=function(S,I,O){var R=I.exec(S);return R&&R[O]};return d=y(d,/^url\((['"])?(.+)\1\)$/,2),d&&y(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=bt("div","leaflet-default-icon-path",document.body),y=qd(d,"background-image")||qd(d,"backgroundImage");if(document.body.removeChild(d),y=this._stripUrl(y),y)return y;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),nM=xo.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new Ja(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$n(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var y=this._marker,S=y._map,I=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,R=vu(y._icon),K=S.getPixelBounds(),re=S.getPixelOrigin(),ae=ee(K.min._subtract(re).add(O),K.max._subtract(re).subtract(O));if(!ae.contains(R)){var ye=G((Math.max(ae.max.x,R.x)-ae.max.x)/(K.max.x-ae.max.x)-(Math.min(ae.min.x,R.x)-ae.min.x)/(K.min.x-ae.min.x),(Math.max(ae.max.y,R.y)-ae.max.y)/(K.max.y-ae.max.y)-(Math.min(ae.min.y,R.y)-ae.min.y)/(K.min.y-ae.min.y)).multiplyBy(I);S.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),Pn(y._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=N(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,d)))},_onDrag:function(d){var y=this._marker,S=y._shadow,I=vu(y._icon),O=y._map.layerPointToLatLng(I);S&&Pn(S,I),y._latlng=O,d.latlng=O,d.oldLatLng=this._oldLatLng,y.fire("move",d).fire("drag",d)},_onDragEnd:function(d){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),Vv=Vs.extend({options:{icon:new tp,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,y){_(this,y),this._latlng=de(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var y=this._latlng;return this._latlng=de(d),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=d.icon.createIcon(this._icon),I=!1;S!==this._icon&&(this._icon&&this._removeIcon(),I=!0,d.title&&(S.title=d.title),S.tagName==="IMG"&&(S.alt=d.alt||"")),tt(S,y),d.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ye(S,"focus",this._panOnFocus,this);var O=d.icon.createShadow(this._shadow),R=!1;O!==this._shadow&&(this._removeShadow(),R=!0),O&&(tt(O,y),O.alt=""),this._shadow=O,d.opacity<1&&this._updateOpacity(),I&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&R&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),fn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fn(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&Pn(this._icon,d),this._shadow&&Pn(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nM)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nM(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&is(this._icon,d),this._shadow&&is(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var y=this.options.icon.options,S=y.iconSize?G(y.iconSize):G(0,0),I=y.iconAnchor?G(y.iconAnchor):G(0,0);d.panInside(this._latlng,{paddingTopLeft:I,paddingBottomRight:S.subtract(I)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ene(d,y){return new Vv(d,y)}var Qa=Vs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return _(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Uv=Qa.extend({options:{fill:!0,radius:10},initialize:function(d,y){_(this,y),this._latlng=de(d),this._radius=this.options.radius},setLatLng:function(d){var y=this._latlng;return this._latlng=de(d),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var y=d&&d.radius||this._radius;return Qa.prototype.setStyle.call(this,d),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,y=this._radiusY||d,S=this._clickTolerance(),I=[d+S,y+S];this._pxBounds=new Y(this._point.subtract(I),this._point.add(I))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tne(d,y){return new Uv(d,y)}var Tk=Uv.extend({initialize:function(d,y,S){if(typeof y=="number"&&(y=i({},S,{radius:y})),_(this,y),this._latlng=de(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:Qa.prototype.setStyle,_project:function(){var d=this._latlng.lng,y=this._latlng.lat,S=this._map,I=S.options.crs;if(I.distance===Te.distance){var O=Math.PI/180,R=this._mRadius/Te.R/O,K=S.project([y+R,d]),re=S.project([y-R,d]),ae=K.add(re).divideBy(2),ye=S.unproject(ae).lat,Ae=Math.acos((Math.cos(R*O)-Math.sin(y*O)*Math.sin(ye*O))/(Math.cos(y*O)*Math.cos(ye*O)))/O;(isNaN(Ae)||Ae===0)&&(Ae=R/Math.cos(Math.PI/180*y)),this._point=ae.subtract(S.getPixelOrigin()),this._radius=isNaN(Ae)?0:ae.x-S.project([ye,d-Ae]).x,this._radiusY=ae.y-K.y}else{var qe=I.unproject(I.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(qe).x}this._updateBounds()}});function nne(d,y,S){return new Tk(d,y,S)}var ia=Qa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,y){_(this,y),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var y=1/0,S=null,I=ep,O,R,K=0,re=this._parts.length;K<re;K++)for(var ae=this._parts[K],ye=1,Ae=ae.length;ye<Ae;ye++){O=ae[ye-1],R=ae[ye];var qe=I(d,O,R,!0);qe<y&&(y=qe,S=I(d,O,R))}return S&&(S.distance=Math.sqrt(y)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eM(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,y){return y=y||this._defaultShape(),d=de(d),y.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new se,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return ss(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var y=[],S=ss(d),I=0,O=d.length;I<O;I++)S?(y[I]=de(d[I]),this._bounds.extend(y[I])):y[I]=this._convertLatLngs(d[I]);return y},_project:function(){var d=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),y=new D(d,d);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(d,y,S){var I=d[0]instanceof le,O=d.length,R,K;if(I){for(K=[],R=0;R<O;R++)K[R]=this._map.latLngToLayerPoint(d[R]),S.extend(K[R]);y.push(K)}else for(R=0;R<O;R++)this._projectLatlngs(d[R],y,S)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,S,I,O,R,K,re,ae;for(S=0,O=0,R=this._rings.length;S<R;S++)for(ae=this._rings[S],I=0,K=ae.length;I<K-1;I++)re=JD(ae[I],ae[I+1],d,I,!0),re&&(y[O]=y[O]||[],y[O].push(re[0]),(re[1]!==ae[I+1]||I===K-2)&&(y[O].push(re[1]),O++))}},_simplifyPoints:function(){for(var d=this._parts,y=this.options.smoothFactor,S=0,I=d.length;S<I;S++)d[S]=XD(d[S],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,y){var S,I,O,R,K,re,ae=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(S=0,R=this._parts.length;S<R;S++)for(re=this._parts[S],I=0,K=re.length,O=K-1;I<K;O=I++)if(!(!y&&I===0)&&ZD(d,re[O],re[I])<=ae)return!0;return!1}});function rne(d,y){return new ia(d,y)}ia._flat=QD;var ch=ia.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qD(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var y=ia.prototype._convertLatLngs.call(this,d),S=y.length;return S>=2&&y[0]instanceof le&&y[0].equals(y[S-1])&&y.pop(),y},_setLatLngs:function(d){ia.prototype._setLatLngs.call(this,d),ss(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ss(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,y=this.options.weight,S=new D(y,y);if(d=new Y(d.min.subtract(S),d.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var I=0,O=this._rings.length,R;I<O;I++)R=KD(this._rings[I],d,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var y=!1,S,I,O,R,K,re,ae,ye;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(R=0,ae=this._parts.length;R<ae;R++)for(S=this._parts[R],K=0,ye=S.length,re=ye-1;K<ye;re=K++)I=S[K],O=S[re],I.y>d.y!=O.y>d.y&&d.x<(O.x-I.x)*(d.y-I.y)/(O.y-I.y)+I.x&&(y=!y);return y||ia.prototype._containsPoint.call(this,d,!0)}});function ine(d,y){return new ch(d,y)}var sa=ra.extend({initialize:function(d,y){_(this,y),this._layers={},d&&this.addData(d)},addData:function(d){var y=b(d)?d:d.features,S,I,O;if(y){for(S=0,I=y.length;S<I;S++)O=y[S],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var R=this.options;if(R.filter&&!R.filter(d))return this;var K=Wv(d,R);return K?(K.feature=Kv(d),K.defaultOptions=K.options,this.resetStyle(K),R.onEachFeature&&R.onEachFeature(d,K),this.addLayer(K)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=i({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(y){this._setLayerStyle(y,d)},this)},_setLayerStyle:function(d,y){d.setStyle&&(typeof y=="function"&&(y=y(d.feature)),d.setStyle(y))}});function Wv(d,y){var S=d.type==="Feature"?d.geometry:d,I=S?S.coordinates:null,O=[],R=y&&y.pointToLayer,K=y&&y.coordsToLatLng||$k,re,ae,ye,Ae;if(!I&&!S)return null;switch(S.type){case"Point":return re=K(I),rM(R,d,re,y);case"MultiPoint":for(ye=0,Ae=I.length;ye<Ae;ye++)re=K(I[ye]),O.push(rM(R,d,re,y));return new ra(O);case"LineString":case"MultiLineString":return ae=Gv(I,S.type==="LineString"?0:1,K),new ia(ae,y);case"Polygon":case"MultiPolygon":return ae=Gv(I,S.type==="Polygon"?1:2,K),new ch(ae,y);case"GeometryCollection":for(ye=0,Ae=S.geometries.length;ye<Ae;ye++){var qe=Wv({geometry:S.geometries[ye],type:"Feature",properties:d.properties},y);qe&&O.push(qe)}return new ra(O);case"FeatureCollection":for(ye=0,Ae=S.features.length;ye<Ae;ye++){var ut=Wv(S.features[ye],y);ut&&O.push(ut)}return new ra(O);default:throw new Error("Invalid GeoJSON object.")}}function rM(d,y,S,I){return d?d(y,S):new Vv(S,I&&I.markersInheritOptions&&I)}function $k(d){return new le(d[1],d[0],d[2])}function Gv(d,y,S){for(var I=[],O=0,R=d.length,K;O<R;O++)K=y?Gv(d[O],y-1,S):(S||$k)(d[O]),I.push(K);return I}function Ek(d,y){return d=de(d),d.alt!==void 0?[f(d.lng,y),f(d.lat,y),f(d.alt,y)]:[f(d.lng,y),f(d.lat,y)]}function Hv(d,y,S,I){for(var O=[],R=0,K=d.length;R<K;R++)O.push(y?Hv(d[R],ss(d[R])?0:y-1,S,I):Ek(d[R],I));return!y&&S&&O.length>0&&O.push(O[0].slice()),O}function hh(d,y){return d.feature?i({},d.feature,{geometry:y}):Kv(y)}function Kv(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var Ik={toGeoJSON:function(d){return hh(this,{type:"Point",coordinates:Ek(this.getLatLng(),d)})}};Vv.include(Ik),Tk.include(Ik),Uv.include(Ik),ia.include({toGeoJSON:function(d){var y=!ss(this._latlngs),S=Hv(this._latlngs,y?1:0,!1,d);return hh(this,{type:(y?"Multi":"")+"LineString",coordinates:S})}}),ch.include({toGeoJSON:function(d){var y=!ss(this._latlngs),S=y&&!ss(this._latlngs[0]),I=Hv(this._latlngs,S?2:y?1:0,!0,d);return y||(I=[I]),hh(this,{type:(S?"Multi":"")+"Polygon",coordinates:I})}}),lh.include({toMultiPoint:function(d){var y=[];return this.eachLayer(function(S){y.push(S.toGeoJSON(d).geometry.coordinates)}),hh(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(d){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(d);var S=y==="GeometryCollection",I=[];return this.eachLayer(function(O){if(O.toGeoJSON){var R=O.toGeoJSON(d);if(S)I.push(R.geometry);else{var K=Kv(R);K.type==="FeatureCollection"?I.push.apply(I,K.features):I.push(K)}}}),S?hh(this,{geometries:I,type:"GeometryCollection"}):{type:"FeatureCollection",features:I}}});function iM(d,y){return new sa(d,y)}var sne=iM,qv=Vs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,y,S){this._url=d,this._bounds=fe(y),_(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&oh(this._image),this},bringToBack:function(){return this._map&&ah(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=fe(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",y=this._image=d?this._url:bt("img");if(tt(y,"leaflet-image-layer"),this._zoomAnimated&&tt(y,"leaflet-zoom-animated"),this.options.className&&tt(y,this.options.className),y.onselectstart=h,y.onmousemove=h,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(d){var y=this._map.getZoomScale(d.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;yu(this._image,S,y)},_reset:function(){var d=this._image,y=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=y.getSize();Pn(d,y.min),d.style.width=S.x+"px",d.style.height=S.y+"px"},_updateOpacity:function(){is(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),one=function(d,y,S){return new qv(d,y,S)},sM=qv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",y=this._image=d?this._url:bt("video");if(tt(y,"leaflet-image-layer"),this._zoomAnimated&&tt(y,"leaflet-zoom-animated"),this.options.className&&tt(y,this.options.className),y.onselectstart=h,y.onmousemove=h,y.onloadeddata=o(this.fire,this,"load"),d){for(var S=y.getElementsByTagName("source"),I=[],O=0;O<S.length;O++)I.push(S[O].src);this._url=S.length>0?I:[y.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var K=bt("source");K.src=this._url[R],y.appendChild(K)}}});function ane(d,y,S){return new sM(d,y,S)}var oM=qv.extend({_initImage:function(){var d=this._image=this._url;tt(d,"leaflet-image-layer"),this._zoomAnimated&&tt(d,"leaflet-zoom-animated"),this.options.className&&tt(d,this.options.className),d.onselectstart=h,d.onmousemove=h}});function lne(d,y,S){return new oM(d,y,S)}var bo=Vs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,y){d&&(d instanceof le||b(d))?(this._latlng=de(d),_(this,y)):(_(this,d),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&is(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&is(this._container,1),this.bringToFront(),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(is(this._container,0),this._removeTimeout=setTimeout(o(fn,void 0,this._container),200)):fn(this._container),this.options.interactive&&($n(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=de(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oh(this._container),this},bringToBack:function(){return this._map&&ah(this._container),this},_prepareOpen:function(d){var y=this._source;if(!y._map)return!1;if(y instanceof ra){y=null;var S=this._source._layers;for(var I in S)if(S[I]._map){y=S[I];break}if(!y)return!1;this._source=y}if(!d)if(y.getCenter)d=y.getCenter();else if(y.getLatLng)d=y.getLatLng();else if(y.getBounds)d=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")d.innerHTML=y;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),y=G(this.options.offset),S=this._getAnchor();this._zoomAnimated?Pn(this._container,d.add(S)):y=y.add(d).add(S);var I=this._containerBottom=-y.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=I+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(d,y,S,I){var O=y;return O instanceof d||(O=new d(I).setContent(y)),S&&O.setLatLng(S),O}}),Vs.include({_initOverlay:function(d,y,S,I){var O=S;return O instanceof d?(_(O,I),O._source=this):(O=y&&!I?y:new d(I,this),O.setContent(S)),O}});var Xv=bo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,bo.prototype.openOn.call(this,d)},onAdd:function(d){bo.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qa||this._source.on("preclick",_u))},onRemove:function(d){bo.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qa||this._source.off("preclick",_u))},getEvents:function(){var d=bo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",y=this._container=bt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=bt("div",d+"-content-wrapper",y);if(this._contentNode=bt("div",d+"-content",S),Jd(y),vk(this._contentNode),Ye(y,"contextmenu",_u),this._tipContainer=bt("div",d+"-tip-container",y),this._tip=bt("div",d+"-tip",this._tipContainer),this.options.closeButton){var I=this._closeButton=bt("a",d+"-close-button",y);I.setAttribute("role","button"),I.setAttribute("aria-label","Close popup"),I.href="#close",I.innerHTML='<span aria-hidden="true">&#215;</span>',Ye(I,"click",function(O){dr(O),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,y=d.style;y.width="",y.whiteSpace="nowrap";var S=d.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),y.width=S+1+"px",y.whiteSpace="",y.height="";var I=d.offsetHeight,O=this.options.maxHeight,R="leaflet-popup-scrolled";O&&I>O?(y.height=O+"px",tt(d,R)):$n(d,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),S=this._getAnchor();Pn(this._container,y.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,y=parseInt(qd(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+y,I=this._containerWidth,O=new D(this._containerLeft,-S-this._containerBottom);O._add(vu(this._container));var R=d.layerPointToContainerPoint(O),K=G(this.options.autoPanPadding),re=G(this.options.autoPanPaddingTopLeft||K),ae=G(this.options.autoPanPaddingBottomRight||K),ye=d.getSize(),Ae=0,qe=0;R.x+I+ae.x>ye.x&&(Ae=R.x+I-ye.x+ae.x),R.x-Ae-re.x<0&&(Ae=R.x-re.x),R.y+S+ae.y>ye.y&&(qe=R.y+S-ye.y+ae.y),R.y-qe-re.y<0&&(qe=R.y-re.y),(Ae||qe)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([Ae,qe]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),une=function(d,y){return new Xv(d,y)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(d,y,S){return this._initOverlay(Xv,d,y,S).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),Vs.include({bindPopup:function(d,y){return this._popup=this._initOverlay(Xv,this._popup,d,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof ra||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){xu(d);var y=d.layer||d.target;if(this._popup._source===y&&!(y instanceof Qa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=y,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var Zv=bo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){bo.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){bo.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=bo.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",y=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var y,S,I=this._map,O=this._container,R=I.latLngToContainerPoint(I.getCenter()),K=I.layerPointToContainerPoint(d),re=this.options.direction,ae=O.offsetWidth,ye=O.offsetHeight,Ae=G(this.options.offset),qe=this._getAnchor();re==="top"?(y=ae/2,S=ye):re==="bottom"?(y=ae/2,S=0):re==="center"?(y=ae/2,S=ye/2):re==="right"?(y=0,S=ye/2):re==="left"?(y=ae,S=ye/2):K.x<R.x?(re="right",y=0,S=ye/2):(re="left",y=ae+(Ae.x+qe.x)*2,S=ye/2),d=d.subtract(G(y,S,!0)).add(Ae).add(qe),$n(O,"leaflet-tooltip-right"),$n(O,"leaflet-tooltip-left"),$n(O,"leaflet-tooltip-top"),$n(O,"leaflet-tooltip-bottom"),tt(O,"leaflet-tooltip-"+re),Pn(O,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&is(this._container,d)},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(y)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cne=function(d,y){return new Zv(d,y)};vt.include({openTooltip:function(d,y,S){return this._initOverlay(Zv,d,y,S).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),Vs.include({bindTooltip:function(d,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zv,this._tooltip,d,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var y=d?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[y](S),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof ra||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var y=typeof d.getElement=="function"&&d.getElement();y&&(Ye(y,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),Ye(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var y=typeof d.getElement=="function"&&d.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var y=d.latlng,S,I;this._tooltip.options.sticky&&d.originalEvent&&(S=this._map.mouseEventToContainerPoint(d.originalEvent),I=this._map.containerPointToLayerPoint(S),y=this._map.layerPointToLatLng(I)),this._tooltip.setLatLng(y)}});var aM=uh.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var y=d&&d.tagName==="DIV"?d:document.createElement("div"),S=this.options;if(S.html instanceof Element?(Mv(y),y.appendChild(S.html)):y.innerHTML=S.html!==!1?S.html:"",S.bgPos){var I=G(S.bgPos);y.style.backgroundPosition=-I.x+"px "+-I.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function hne(d){return new aM(d)}uh.Default=tp;var np=Vs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){_(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),fn(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oh(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ah(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof D?d:new D(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var y=this.getPane().children,S=-d(-1/0,1/0),I=0,O=y.length,R;I<O;I++)R=y[I].style.zIndex,y[I]!==this._container&&R&&(S=d(S,+R));isFinite(S)&&(this.options.zIndex=S+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){is(this._container,this.options.opacity);var d=+new Date,y=!1,S=!1;for(var I in this._tiles){var O=this._tiles[I];if(!(!O.current||!O.loaded)){var R=Math.min(1,(d-O.loaded)/200);is(O.el,R),R<1?y=!0:(O.active?S=!0:this._onOpaqueTile(O),O.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),y&&(P(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,y=this.options.maxZoom;if(d!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===d?(this._levels[S].el.style.zIndex=y-Math.abs(d-S),this._onUpdateLevel(S)):(fn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var I=this._levels[d],O=this._map;return I||(I=this._levels[d]={},I.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),I.el.style.zIndex=y,I.origin=O.project(O.unproject(O.getPixelOrigin()),d).round(),I.zoom=d,this._setZoomTransform(I,O.getCenter(),O.getZoom()),h(I.el.offsetWidth),this._onCreateLevel(I)),this._level=I,I}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var d,y,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)y=this._tiles[d],y.retain=y.current;for(d in this._tiles)if(y=this._tiles[d],y.current&&!y.active){var I=y.coords;this._retainParent(I.x,I.y,I.z,I.z-5)||this._retainChildren(I.x,I.y,I.z,I.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var y in this._tiles)this._tiles[y].coords.z===d&&this._removeTile(y)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)fn(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,y,S,I){var O=Math.floor(d/2),R=Math.floor(y/2),K=S-1,re=new D(+O,+R);re.z=+K;var ae=this._tileCoordsToKey(re),ye=this._tiles[ae];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),K>I?this._retainParent(O,R,K,I):!1)},_retainChildren:function(d,y,S,I){for(var O=2*d;O<2*d+2;O++)for(var R=2*y;R<2*y+2;R++){var K=new D(O,R);K.z=S+1;var re=this._tileCoordsToKey(K),ae=this._tiles[re];if(ae&&ae.active){ae.retain=!0;continue}else ae&&ae.loaded&&(ae.retain=!0);S+1<I&&this._retainChildren(O,R,S+1,I)}},_resetView:function(d){var y=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var y=this.options;return y.minNativeZoom!==void 0&&d<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<d?y.maxNativeZoom:d},_setView:function(d,y,S,I){var O=Math.round(y);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var R=this.options.updateWhenZooming&&O!==this._tileZoom;(!I||R)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(d),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(d,y)},_setZoomTransforms:function(d,y){for(var S in this._levels)this._setZoomTransform(this._levels[S],d,y)},_setZoomTransform:function(d,y,S){var I=this._map.getZoomScale(S,d.zoom),O=d.origin.multiplyBy(I).subtract(this._map._getNewPixelOrigin(y,S)).round();Fe.any3d?yu(d.el,O,I):Pn(d.el,O)},_resetGrid:function(){var d=this._map,y=d.options.crs,S=this._tileSize=this.getTileSize(),I=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,y.wrapLng[0]],I).x/S.x),Math.ceil(d.project([0,y.wrapLng[1]],I).x/S.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([y.wrapLat[0],0],I).y/S.x),Math.ceil(d.project([y.wrapLat[1],0],I).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var y=this._map,S=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),I=y.getZoomScale(S,this._tileZoom),O=y.project(d,this._tileZoom).floor(),R=y.getSize().divideBy(I*2);return new Y(O.subtract(R),O.add(R))},_update:function(d){var y=this._map;if(y){var S=this._clampZoom(y.getZoom());if(d===void 0&&(d=y.getCenter()),this._tileZoom!==void 0){var I=this._getTiledPixelBounds(d),O=this._pxBoundsToTileRange(I),R=O.getCenter(),K=[],re=this.options.keepBuffer,ae=new Y(O.getBottomLeft().subtract([re,-re]),O.getTopRight().add([re,-re]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Ae=this._tiles[ye].coords;(Ae.z!==this._tileZoom||!ae.contains(new D(Ae.x,Ae.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(d,S);return}for(var qe=O.min.y;qe<=O.max.y;qe++)for(var ut=O.min.x;ut<=O.max.x;ut++){var Hr=new D(ut,qe);if(Hr.z=this._tileZoom,!!this._isValidTile(Hr)){var nr=this._tiles[this._tileCoordsToKey(Hr)];nr?nr.current=!0:K.push(Hr)}}if(K.sort(function(hi,dh){return hi.distanceTo(R)-dh.distanceTo(R)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var os=document.createDocumentFragment();for(ut=0;ut<K.length;ut++)this._addTile(K[ut],os);this._level.el.appendChild(os)}}}},_isValidTile:function(d){var y=this._map.options.crs;if(!y.infinite){var S=this._globalTileRange;if(!y.wrapLng&&(d.x<S.min.x||d.x>S.max.x)||!y.wrapLat&&(d.y<S.min.y||d.y>S.max.y))return!1}if(!this.options.bounds)return!0;var I=this._tileCoordsToBounds(d);return fe(this.options.bounds).overlaps(I)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var y=this._map,S=this.getTileSize(),I=d.scaleBy(S),O=I.add(S),R=y.unproject(I,d.z),K=y.unproject(O,d.z);return[R,K]},_tileCoordsToBounds:function(d){var y=this._tileCoordsToNwSe(d),S=new se(y[0],y[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var y=d.split(":"),S=new D(+y[0],+y[1]);return S.z=+y[2],S},_removeTile:function(d){var y=this._tiles[d];y&&(fn(y.el),delete this._tiles[d],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){tt(d,"leaflet-tile");var y=this.getTileSize();d.style.width=y.x+"px",d.style.height=y.y+"px",d.onselectstart=h,d.onmousemove=h,Fe.ielt9&&this.options.opacity<1&&is(d,this.options.opacity)},_addTile:function(d,y){var S=this._getTilePos(d),I=this._tileCoordsToKey(d),O=this.createTile(this._wrapCoords(d),o(this._tileReady,this,d));this._initTile(O),this.createTile.length<2&&N(o(this._tileReady,this,d,null,O)),Pn(O,S),this._tiles[I]={el:O,coords:d,current:!0},y.appendChild(O),this.fire("tileloadstart",{tile:O,coords:d})},_tileReady:function(d,y,S){y&&this.fire("tileerror",{error:y,tile:S,coords:d});var I=this._tileCoordsToKey(d);S=this._tiles[I],S&&(S.loaded=+new Date,this._map._fadeAnimated?(is(S.el,0),P(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),y||(tt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var y=new D(this._wrapX?c(d.x,this._wrapX):d.x,this._wrapY?c(d.y,this._wrapY):d.y);return y.z=d.z,y},_pxBoundsToTileRange:function(d){var y=this.getTileSize();return new Y(d.min.unscaleBy(y).floor(),d.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function fne(d){return new np(d)}var fh=np.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,y){this._url=d,y=_(this,y),y.detectRetina&&Fe.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,y){return this._url===d&&y===void 0&&(y=!0),this._url=d,y||this.redraw(),this},createTile:function(d,y){var S=document.createElement("img");return Ye(S,"load",o(this._tileOnLoad,this,y,S)),Ye(S,"error",o(this._tileOnError,this,y,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(d),S},getTileUrl:function(d){var y={r:Fe.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-d.y;this.options.tms&&(y.y=S),y["-y"]=S}return x(this._url,i(y,this.options))},_tileOnLoad:function(d,y){Fe.ielt9?setTimeout(o(d,this,null,y),0):d(null,y)},_tileOnError:function(d,y,S){var I=this.options.errorTileUrl;I&&y.getAttribute("src")!==I&&(y.src=I),d(S,y)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,y=this.options.maxZoom,S=this.options.zoomReverse,I=this.options.zoomOffset;return S&&(d=y-d),d+I},_getSubdomain:function(d){var y=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var d,y;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(y=this._tiles[d].el,y.onload=h,y.onerror=h,!y.complete)){y.src=k;var S=this._tiles[d].coords;fn(y),delete this._tiles[d],this.fire("tileabort",{tile:y,coords:S})}},_removeTile:function(d){var y=this._tiles[d];if(y)return y.el.setAttribute("src",k),np.prototype._removeTile.call(this,d)},_tileReady:function(d,y,S){if(!(!this._map||S&&S.getAttribute("src")===k))return np.prototype._tileReady.call(this,d,y,S)}});function lM(d,y){return new fh(d,y)}var uM=fh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,y){this._url=d;var S=i({},this.defaultWmsParams);for(var I in y)I in this.options||(S[I]=y[I]);y=_(this,y);var O=y.detectRetina&&Fe.retina?2:1,R=this.getTileSize();S.width=R.x*O,S.height=R.y*O,this.wmsParams=S},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,fh.prototype.onAdd.call(this,d)},getTileUrl:function(d){var y=this._tileCoordsToNwSe(d),S=this._crs,I=ee(S.project(y[0]),S.project(y[1])),O=I.min,R=I.max,K=(this._wmsVersion>=1.3&&this._crs===tM?[O.y,O.x,R.y,R.x]:[O.x,O.y,R.x,R.y]).join(","),re=fh.prototype.getTileUrl.call(this,d);return re+v(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(d,y){return i(this.wmsParams,d),y||this.redraw(),this}});function dne(d,y){return new uM(d,y)}fh.WMS=uM,lM.wms=dne;var oa=Vs.extend({options:{padding:.1},initialize:function(d){_(this,d),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,y){var S=this._map.getZoomScale(y,this._zoom),I=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,y),R=I.multiplyBy(-S).add(O).subtract(this._map._getNewPixelOrigin(d,y));Fe.any3d?yu(this._container,R,S):Pn(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,y=this._map.getSize(),S=this._map.containerPointToLayerPoint(y.multiplyBy(-d)).round();this._bounds=new Y(S,S.add(y.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cM=oa.extend({options:{tolerance:0},getEvents:function(){var d=oa.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){oa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");Ye(d,"mousemove",this._onMouseMove,this),Ye(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ye(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,fn(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var y in this._layers)d=this._layers[y],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oa.prototype._update.call(this);var d=this._bounds,y=this._container,S=d.getSize(),I=Fe.retina?2:1;Pn(y,d.min),y.width=I*S.x,y.height=I*S.y,y.style.width=S.x+"px",y.style.height=S.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){oa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[l(d)]=d;var y=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var y=d._order,S=y.next,I=y.prev;S?S.prev=I:this._drawLast=I,I?I.next=S:this._drawFirst=S,delete d._order,delete this._layers[l(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var y=d.options.dashArray.split(/[, ]+/),S=[],I,O;for(O=0;O<y.length;O++){if(I=Number(y[O]),isNaN(I))return;S.push(I)}d.options._dashArray=S}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var y=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(d._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(d._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var y=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,y=this._redrawBounds;if(this._ctx.save(),y){var S=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var I=this._drawFirst;I;I=I.next)d=I.layer,(!y||d._pxBounds&&d._pxBounds.intersects(y))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,y){if(this._drawing){var S,I,O,R,K=d._parts,re=K.length,ae=this._ctx;if(re){for(ae.beginPath(),S=0;S<re;S++){for(I=0,O=K[S].length;I<O;I++)R=K[S][I],ae[I?"lineTo":"moveTo"](R.x,R.y);y&&ae.closePath()}this._fillStroke(ae,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var y=d._point,S=this._ctx,I=Math.max(Math.round(d._radius),1),O=(Math.max(Math.round(d._radiusY),1)||I)/I;O!==1&&(S.save(),S.scale(1,O)),S.beginPath(),S.arc(y.x,y.y/O,I,0,Math.PI*2,!1),O!==1&&S.restore(),this._fillStroke(S,d)}},_fillStroke:function(d,y){var S=y.options;S.fill&&(d.globalAlpha=S.fillOpacity,d.fillStyle=S.fillColor||S.color,d.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(d.setLineDash&&d.setLineDash(y.options&&y.options._dashArray||[]),d.globalAlpha=S.opacity,d.lineWidth=S.weight,d.strokeStyle=S.color,d.lineCap=S.lineCap,d.lineJoin=S.lineJoin,d.stroke())},_onClick:function(d){for(var y=this._map.mouseEventToLayerPoint(d),S,I,O=this._drawFirst;O;O=O.next)S=O.layer,S.options.interactive&&S._containsPoint(y)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(S))&&(I=S);this._fireEvent(I?[I]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,y)}},_handleMouseOut:function(d){var y=this._hoveredLayer;y&&($n(this._container,"leaflet-interactive"),this._fireEvent([y],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,y){if(!this._mouseHoverThrottled){for(var S,I,O=this._drawFirst;O;O=O.next)S=O.layer,S.options.interactive&&S._containsPoint(y)&&(I=S);I!==this._hoveredLayer&&(this._handleMouseOut(d),I&&(tt(this._container,"leaflet-interactive"),this._fireEvent([I],d,"mouseover"),this._hoveredLayer=I)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,y,S){this._map._fireDOMEvent(y,S||y.type,d)},_bringToFront:function(d){var y=d._order;if(y){var S=y.next,I=y.prev;if(S)S.prev=I;else return;I?I.next=S:S&&(this._drawFirst=S),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(d)}},_bringToBack:function(d){var y=d._order;if(y){var S=y.next,I=y.prev;if(I)I.next=S;else return;S?S.prev=I:I&&(this._drawLast=I),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(d)}}});function hM(d){return Fe.canvas?new cM(d):null}var rp=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),pne={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(oa.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var y=d._container=rp("shape");tt(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",d._path=rp("path"),y.appendChild(d._path),this._updateStyle(d),this._layers[l(d)]=d},_addPath:function(d){var y=d._container;this._container.appendChild(y),d.options.interactive&&d.addInteractiveTarget(y)},_removePath:function(d){var y=d._container;fn(y),d.removeInteractiveTarget(y),delete this._layers[l(d)]},_updateStyle:function(d){var y=d._stroke,S=d._fill,I=d.options,O=d._container;O.stroked=!!I.stroke,O.filled=!!I.fill,I.stroke?(y||(y=d._stroke=rp("stroke")),O.appendChild(y),y.weight=I.weight+"px",y.color=I.color,y.opacity=I.opacity,I.dashArray?y.dashStyle=b(I.dashArray)?I.dashArray.join(" "):I.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=I.lineCap.replace("butt","flat"),y.joinstyle=I.lineJoin):y&&(O.removeChild(y),d._stroke=null),I.fill?(S||(S=d._fill=rp("fill")),O.appendChild(S),S.color=I.fillColor||I.color,S.opacity=I.fillOpacity):S&&(O.removeChild(S),d._fill=null)},_updateCircle:function(d){var y=d._point.round(),S=Math.round(d._radius),I=Math.round(d._radiusY||S);this._setPath(d,d._empty()?"M0 0":"AL "+y.x+","+y.y+" "+S+","+I+" 0,"+65535*360)},_setPath:function(d,y){d._path.v=y},_bringToFront:function(d){oh(d._container)},_bringToBack:function(d){ah(d._container)}},Yv=Fe.vml?rp:We,ip=oa.extend({_initContainer:function(){this._container=Yv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fn(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oa.prototype._update.call(this);var d=this._bounds,y=d.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,S.setAttribute("width",y.x),S.setAttribute("height",y.y)),Pn(S,d.min),S.setAttribute("viewBox",[d.min.x,d.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(d){var y=d._path=Yv("path");d.options.className&&tt(y,d.options.className),d.options.interactive&&tt(y,"leaflet-interactive"),this._updateStyle(d),this._layers[l(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){fn(d._path),d.removeInteractiveTarget(d._path),delete this._layers[l(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var y=d._path,S=d.options;y&&(S.stroke?(y.setAttribute("stroke",S.color),y.setAttribute("stroke-opacity",S.opacity),y.setAttribute("stroke-width",S.weight),y.setAttribute("stroke-linecap",S.lineCap),y.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?y.setAttribute("stroke-dasharray",S.dashArray):y.removeAttribute("stroke-dasharray"),S.dashOffset?y.setAttribute("stroke-dashoffset",S.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),S.fill?(y.setAttribute("fill",S.fillColor||S.color),y.setAttribute("fill-opacity",S.fillOpacity),y.setAttribute("fill-rule",S.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(d,y){this._setPath(d,Ve(d._parts,y))},_updateCircle:function(d){var y=d._point,S=Math.max(Math.round(d._radius),1),I=Math.max(Math.round(d._radiusY),1)||S,O="a"+S+","+I+" 0 1,0 ",R=d._empty()?"M0 0":"M"+(y.x-S)+","+y.y+O+S*2+",0 "+O+-S*2+",0 ";this._setPath(d,R)},_setPath:function(d,y){d._path.setAttribute("d",y)},_bringToFront:function(d){oh(d._path)},_bringToBack:function(d){ah(d._path)}});Fe.vml&&ip.include(pne);function fM(d){return Fe.svg||Fe.vml?new ip(d):null}vt.include({getRenderer:function(d){var y=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var y=this._paneRenderers[d];return y===void 0&&(y=this._createRenderer({pane:d}),this._paneRenderers[d]=y),y},_createRenderer:function(d){return this.options.preferCanvas&&hM(d)||fM(d)}});var dM=ch.extend({initialize:function(d,y){ch.prototype.initialize.call(this,this._boundsToLatLngs(d),y)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=fe(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function mne(d,y){return new dM(d,y)}ip.create=Yv,ip.pointsToPath=Ve,sa.geometryToLayer=Wv,sa.coordsToLatLng=$k,sa.coordsToLatLngs=Gv,sa.latLngToCoords=Ek,sa.latLngsToCoords=Hv,sa.getFeature=hh,sa.asFeature=Kv,vt.mergeOptions({boxZoom:!0});var pM=xo.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){Ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xd(),ck(),this._startPoint=this._map.mouseEventToContainerPoint(d),Ye(document,{contextmenu:xu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var y=new Y(this._point,this._startPoint),S=y.getSize();Pn(this._box,y.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(fn(this._box),$n(this._container,"leaflet-crosshair")),Zd(),hk(),Vt(document,{contextmenu:xu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",pM),vt.mergeOptions({doubleClickZoom:!0});var mM=xo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var y=this._map,S=y.getZoom(),I=y.options.zoomDelta,O=d.originalEvent.shiftKey?S-I:S+I;y.options.doubleClickZoom==="center"?y.setZoom(O):y.setZoomAround(d.containerPoint,O)}});vt.addInitHook("addHandler","doubleClickZoom",mM),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gM=xo.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new Ja(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$n(this._map._container,"leaflet-grab"),$n(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=fe(this._map.options.maxBounds);this._offsetLimit=ee(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var y=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(y),this._prunePositions(y)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,y){return d-(d-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;d.x<y.min.x&&(d.x=this._viscousLimit(d.x,y.min.x)),d.y<y.min.y&&(d.y=this._viscousLimit(d.y,y.min.y)),d.x>y.max.x&&(d.x=this._viscousLimit(d.x,y.max.x)),d.y>y.max.y&&(d.y=this._viscousLimit(d.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,y=Math.round(d/2),S=this._initialWorldOffset,I=this._draggable._newPos.x,O=(I-y+S)%d+y-S,R=(I+y+S)%d-y-S,K=Math.abs(O+S)<Math.abs(R+S)?O:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(d){var y=this._map,S=y.options,I=!S.inertia||d.noInertia||this._times.length<2;if(y.fire("dragend",d),I)y.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,K=S.easeLinearity,re=O.multiplyBy(K/R),ae=re.distanceTo([0,0]),ye=Math.min(S.inertiaMaxSpeed,ae),Ae=re.multiplyBy(ye/ae),qe=ye/(S.inertiaDeceleration*K),ut=Ae.multiplyBy(-qe/2).round();!ut.x&&!ut.y?y.fire("moveend"):(ut=y._limitOffset(ut,y.options.maxBounds),N(function(){y.panBy(ut,{duration:qe,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",gM),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yM=xo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),Ye(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,y=document.documentElement,S=d.scrollTop||y.scrollTop,I=d.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(I,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var y=this._panKeys={},S=this.keyCodes,I,O;for(I=0,O=S.left.length;I<O;I++)y[S.left[I]]=[-1*d,0];for(I=0,O=S.right.length;I<O;I++)y[S.right[I]]=[d,0];for(I=0,O=S.down.length;I<O;I++)y[S.down[I]]=[0,d];for(I=0,O=S.up.length;I<O;I++)y[S.up[I]]=[0,-1*d]},_setZoomDelta:function(d){var y=this._zoomKeys={},S=this.keyCodes,I,O;for(I=0,O=S.zoomIn.length;I<O;I++)y[S.zoomIn[I]]=d;for(I=0,O=S.zoomOut.length;I<O;I++)y[S.zoomOut[I]]=-d},_addHooks:function(){Ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var y=d.keyCode,S=this._map,I;if(y in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(I=this._panKeys[y],d.shiftKey&&(I=G(I).multiplyBy(3)),S.options.maxBounds&&(I=S._limitOffset(G(I),S.options.maxBounds)),S.options.worldCopyJump){var O=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(I)));S.panTo(O)}else S.panBy(I)}else if(y in this._zoomKeys)S.setZoom(S.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;xu(d)}}});vt.addInitHook("addHandler","keyboard",yM),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vM=xo.extend({addHooks:function(){Ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var y=VD(d),S=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var I=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),I),xu(d)},_performZoom:function(){var d=this._map,y=d.getZoom(),S=this._map.options.zoomSnap||0;d._stop();var I=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(I))))/Math.LN2,R=S?Math.ceil(O/S)*S:O,K=d._limitZoom(y+(this._delta>0?R:-R))-y;this._delta=0,this._startTime=null,K&&(d.options.scrollWheelZoom==="center"?d.setZoom(y+K):d.setZoomAround(this._lastMousePos,y+K))}});vt.addInitHook("addHandler","scrollWheelZoom",vM);var gne=600;vt.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var _M=xo.extend({addHooks:function(){Ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var y=d.touches[0];this._startPos=this._newPos=new D(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ye(document,"touchend",dr),Ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),gne),Ye(document,"touchend touchcancel contextmenu",this._cancel,this),Ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){Vt(document,"touchend",dr),Vt(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(d){var y=d.touches[0];this._newPos=new D(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,y){var S=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});S._simulated=!0,y.target.dispatchEvent(S)}});vt.addInitHook("addHandler","tapHold",_M),vt.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var xM=xo.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$n(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var y=this._map;if(!(!d.touches||d.touches.length!==2||y._animatingZoom||this._zooming)){var S=y.mouseEventToContainerPoint(d.touches[0]),I=y.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(S.add(I)._divideBy(2))),this._startDist=S.distanceTo(I),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Ye(document,"touchmove",this._onTouchMove,this),Ye(document,"touchend touchcancel",this._onTouchEnd,this),dr(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var y=this._map,S=y.mouseEventToContainerPoint(d.touches[0]),I=y.mouseEventToContainerPoint(d.touches[1]),O=S.distanceTo(I)/this._startDist;if(this._zoom=y.getScaleZoom(O,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&O<1||this._zoom>y.getMaxZoom()&&O>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var R=S._add(I)._divideBy(2)._subtract(this._centerPoint);if(O===1&&R.x===0&&R.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var K=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(K,this,!0),dr(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",xM),vt.BoxZoom=pM,vt.DoubleClickZoom=mM,vt.Drag=gM,vt.Keyboard=yM,vt.ScrollWheelZoom=vM,vt.TapHold=_M,vt.TouchZoom=xM,n.Bounds=Y,n.Browser=Fe,n.CRS=Se,n.Canvas=cM,n.Circle=Tk,n.CircleMarker=Uv,n.Class=B,n.Control=js,n.DivIcon=aM,n.DivOverlay=bo,n.DomEvent=Rte,n.DomUtil=Nte,n.Draggable=Ja,n.Evented=U,n.FeatureGroup=ra,n.GeoJSON=sa,n.GridLayer=np,n.Handler=xo,n.Icon=uh,n.ImageOverlay=qv,n.LatLng=le,n.LatLngBounds=se,n.Layer=Vs,n.LayerGroup=lh,n.LineUtil=Kte,n.Map=vt,n.Marker=Vv,n.Mixin=jte,n.Path=Qa,n.Point=D,n.PolyUtil=Vte,n.Polygon=ch,n.Polyline=ia,n.Popup=Xv,n.PosAnimation=UD,n.Projection=qte,n.Rectangle=dM,n.Renderer=oa,n.SVG=ip,n.SVGOverlay=oM,n.TileLayer=fh,n.Tooltip=Zv,n.Transformation=be,n.Util=M,n.VideoOverlay=sM,n.bind=o,n.bounds=ee,n.canvas=hM,n.circle=nne,n.circleMarker=tne,n.control=Qd,n.divIcon=hne,n.extend=i,n.featureGroup=Jte,n.geoJSON=iM,n.geoJson=sne,n.gridLayer=fne,n.icon=Qte,n.imageOverlay=one,n.latLng=de,n.latLngBounds=fe,n.layerGroup=Yte,n.map=Dte,n.marker=ene,n.point=G,n.polygon=ine,n.polyline=rne,n.popup=une,n.rectangle=mne,n.setOptions=_,n.stamp=l,n.svg=fM,n.svgOverlay=lne,n.tileLayer=lM,n.tooltip=cne,n.transformation=he,n.version=r,n.videoOverlay=ane;var yne=window.L;n.noConflict=function(){return window.L=yne,this},window.L=n})})(RE,RE.exports);var eS=RE.exports;function UP(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function WP(t,e){return e==null?function(r,i){const s=J.useRef();return s.current||(s.current=t(r,i)),s}:function(r,i){const s=J.useRef();s.current||(s.current=t(r,i));const o=J.useRef(r),{instance:a}=s.current;return J.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,i]),s}}function eZ(t,e){J.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function KDe(t){return function(n){const r=jP(),i=t(Q1(n,r),r);return YX(r.map,n.attribution),VP(i.current,n.eventHandlers),eZ(i.current,r),i}}function qDe(t,e){const n=J.useRef();J.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function XDe(t){return function(n){const r=jP(),i=t(Q1(n,r),r);return VP(i.current,n.eventHandlers),eZ(i.current,r),qDe(i.current,n),i}}function ZDe(t,e){const n=WP(t),r=HDe(n,e);return WDe(r)}function YDe(t,e){const n=WP(t,e),r=XDe(n);return UDe(r)}function JDe(t,e){const n=WP(t,e),r=KDe(n);return GDe(r)}function QDe(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}const eMe=YDe(function({center:e,children:n,...r},i){const s=new eS.Circle(e,r);return UP(s,VDe(i,{overlayContainer:s}))},BDe);function DE(){return DE=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}function tMe({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:s,placeholder:o,style:a,whenReady:l,zoom:u,...c},h){const[f]=J.useState({className:i,id:s,style:a}),[p,m]=J.useState(null);J.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const _=J.useCallback(g=>{if(g!==null&&p===null){const x=new eS.Map(g,c);n!=null&&u!=null?x.setView(n,u):t!=null&&x.fitBounds(t,e),l!=null&&x.whenReady(l),m(jDe(x))}},[]);J.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const v=p?X.createElement(QX,{value:p},r):o??null;return X.createElement("div",DE({},f,{ref:_}),v)}const nMe=J.forwardRef(tMe),rMe=ZDe(function(e,n){const r=new eS.Popup(e,n.overlayContainer);return UP(r,n)},function(e,n,{position:r},i){J.useEffect(function(){const{instance:o}=e;function a(u){u.popup===o&&(o.update(),i(!0))}function l(u){u.popup===o&&i(!1)}return n.map.on({popupopen:a,popupclose:l}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var c;n.map.off({popupopen:a,popupclose:l}),(c=n.overlayContainer)==null||c.unbindPopup(),n.map.removeLayer(o)}},[e,n,i,r])}),iMe=JDe(function({url:e,...n},r){const i=new eS.TileLayer(e,Q1(n,r));return UP(i,r)},function(e,n,r){QDe(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});function sMe({zones:t}){const e={"Zone A":{lat:40.7128,lng:-74.006},"Zone B":{lat:40.7328,lng:-73.986},"Zone C":{lat:40.7528,lng:-74.026},"Zone D":{lat:40.7028,lng:-73.966},"Zone E":{lat:40.7228,lng:-74.046},"Zone F":{lat:40.7428,lng:-73.946}},n=r=>{switch(r){case"critical":return"#EF4444";case"warning":return"#F59E0B";default:return"#10B981"}};return V.jsx("div",{className:"h-[400px] rounded-lg overflow-hidden",children:V.jsxs(nMe,{center:[40.7128,-74.006],zoom:12,style:{height:"100%",width:"100%"},children:[V.jsx(iMe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.map(r=>{const i=e[r.name];return i?V.jsx(eMe,{center:[i.lat,i.lng],radius:500,pathOptions:{color:n(r.status),fillColor:n(r.status),fillOpacity:.5},children:V.jsx(rMe,{children:V.jsxs("div",{className:"p-2",children:[V.jsx("h3",{className:"font-semibold",children:r.name}),V.jsxs("p",{children:["Load: ",r.load,"%"]}),V.jsxs("p",{children:["Efficiency: ",r.efficiency,"%"]}),V.jsxs("p",{children:["Status: ",r.status]})]})})},r.id):null})]})})}function oMe({zones:t}){const e=r=>{switch(r){case"critical":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-green-500"}},n=r=>{switch(r){case"increasing":return V.jsx(N$,{className:"w-4 h-4 text-red-500"});case"decreasing":return V.jsx(O$,{className:"w-4 h-4 text-green-500"});default:return V.jsx(ise,{className:"w-4 h-4 text-gray-500"})}};return V.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map((r,i)=>V.jsxs(As.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i*.1},className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900",children:[V.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[V.jsx("div",{className:`w-3 h-3 rounded-full ${e(r.status)}`}),V.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:r.name})]}),V.jsxs("div",{className:"space-y-2",children:[V.jsxs("div",{className:"flex justify-between text-sm",children:[V.jsx("span",{className:"text-gray-500",children:"Load:"}),V.jsxs("div",{className:"flex items-center gap-1",children:[V.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:[r.load,"%"]}),r.prediction&&n(r.prediction.loadTrend)]})]}),V.jsxs("div",{className:"flex justify-between text-sm",children:[V.jsx("span",{className:"text-gray-500",children:"Efficiency:"}),V.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:[r.efficiency,"%"]})]}),r.prediction&&V.jsxs("div",{className:"flex justify-between text-sm",children:[V.jsx("span",{className:"text-gray-500",children:"Next Hour:"}),V.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:[r.prediction.nextHourLoad,"%"]})]})]})]},r.id))})}function tZ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=tZ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function kt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=tZ(t))&&(r&&(r+=" "),r+=e);return r}var aMe=Array.isArray,Ai=aMe,lMe=typeof ln=="object"&&ln&&ln.Object===Object&&ln,nZ=lMe,uMe=nZ,cMe=typeof self=="object"&&self&&self.Object===Object&&self,hMe=uMe||cMe||Function("return this")(),na=hMe,fMe=na,dMe=fMe.Symbol,bv=dMe,PB=bv,rZ=Object.prototype,pMe=rZ.hasOwnProperty,mMe=rZ.toString,vp=PB?PB.toStringTag:void 0;function gMe(t){var e=pMe.call(t,vp),n=t[vp];try{t[vp]=void 0;var r=!0}catch{}var i=mMe.call(t);return r&&(e?t[vp]=n:delete t[vp]),i}var yMe=gMe,vMe=Object.prototype,_Me=vMe.toString;function xMe(t){return _Me.call(t)}var bMe=xMe,RB=bv,wMe=yMe,SMe=bMe,kMe="[object Null]",CMe="[object Undefined]",DB=RB?RB.toStringTag:void 0;function TMe(t){return t==null?t===void 0?CMe:kMe:DB&&DB in Object(t)?wMe(t):SMe(t)}var Xa=TMe;function $Me(t){return t!=null&&typeof t=="object"}var Za=$Me,EMe=Xa,IMe=Za,AMe="[object Symbol]";function OMe(t){return typeof t=="symbol"||IMe(t)&&EMe(t)==AMe}var Ed=OMe,NMe=Ai,PMe=Ed,RMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DMe=/^\w*$/;function MMe(t,e){if(NMe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||PMe(t)?!0:DMe.test(t)||!RMe.test(t)||e!=null&&t in Object(e)}var GP=MMe;function LMe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cu=LMe;const Id=Mt(cu);var FMe=Xa,BMe=cu,zMe="[object AsyncFunction]",jMe="[object Function]",VMe="[object GeneratorFunction]",UMe="[object Proxy]";function WMe(t){if(!BMe(t))return!1;var e=FMe(t);return e==jMe||e==VMe||e==zMe||e==UMe}var HP=WMe;const et=Mt(HP);var GMe=na,HMe=GMe["__core-js_shared__"],KMe=HMe,MC=KMe,MB=function(){var t=/[^.]+$/.exec(MC&&MC.keys&&MC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qMe(t){return!!MB&&MB in t}var XMe=qMe,ZMe=Function.prototype,YMe=ZMe.toString;function JMe(t){if(t!=null){try{return YMe.call(t)}catch{}try{return t+""}catch{}}return""}var iZ=JMe,QMe=HP,eLe=XMe,tLe=cu,nLe=iZ,rLe=/[\\^$.*+?()[\]{}|]/g,iLe=/^\[object .+?Constructor\]$/,sLe=Function.prototype,oLe=Object.prototype,aLe=sLe.toString,lLe=oLe.hasOwnProperty,uLe=RegExp("^"+aLe.call(lLe).replace(rLe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cLe(t){if(!tLe(t)||eLe(t))return!1;var e=QMe(t)?uLe:iLe;return e.test(nLe(t))}var hLe=cLe;function fLe(t,e){return t==null?void 0:t[e]}var dLe=fLe,pLe=hLe,mLe=dLe;function gLe(t,e){var n=mLe(t,e);return pLe(n)?n:void 0}var Yc=gLe,yLe=Yc,vLe=yLe(Object,"create"),tS=vLe,LB=tS;function _Le(){this.__data__=LB?LB(null):{},this.size=0}var xLe=_Le;function bLe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var wLe=bLe,SLe=tS,kLe="__lodash_hash_undefined__",CLe=Object.prototype,TLe=CLe.hasOwnProperty;function $Le(t){var e=this.__data__;if(SLe){var n=e[t];return n===kLe?void 0:n}return TLe.call(e,t)?e[t]:void 0}var ELe=$Le,ILe=tS,ALe=Object.prototype,OLe=ALe.hasOwnProperty;function NLe(t){var e=this.__data__;return ILe?e[t]!==void 0:OLe.call(e,t)}var PLe=NLe,RLe=tS,DLe="__lodash_hash_undefined__";function MLe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=RLe&&e===void 0?DLe:e,this}var LLe=MLe,FLe=xLe,BLe=wLe,zLe=ELe,jLe=PLe,VLe=LLe;function Ad(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ad.prototype.clear=FLe;Ad.prototype.delete=BLe;Ad.prototype.get=zLe;Ad.prototype.has=jLe;Ad.prototype.set=VLe;var ULe=Ad;function WLe(){this.__data__=[],this.size=0}var GLe=WLe;function HLe(t,e){return t===e||t!==t&&e!==e}var KP=HLe,KLe=KP;function qLe(t,e){for(var n=t.length;n--;)if(KLe(t[n][0],e))return n;return-1}var nS=qLe,XLe=nS,ZLe=Array.prototype,YLe=ZLe.splice;function JLe(t){var e=this.__data__,n=XLe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():YLe.call(e,n,1),--this.size,!0}var QLe=JLe,eFe=nS;function tFe(t){var e=this.__data__,n=eFe(e,t);return n<0?void 0:e[n][1]}var nFe=tFe,rFe=nS;function iFe(t){return rFe(this.__data__,t)>-1}var sFe=iFe,oFe=nS;function aFe(t,e){var n=this.__data__,r=oFe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var lFe=aFe,uFe=GLe,cFe=QLe,hFe=nFe,fFe=sFe,dFe=lFe;function Od(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Od.prototype.clear=uFe;Od.prototype.delete=cFe;Od.prototype.get=hFe;Od.prototype.has=fFe;Od.prototype.set=dFe;var rS=Od,pFe=Yc,mFe=na,gFe=pFe(mFe,"Map"),qP=gFe,FB=ULe,yFe=rS,vFe=qP;function _Fe(){this.size=0,this.__data__={hash:new FB,map:new(vFe||yFe),string:new FB}}var xFe=_Fe;function bFe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var wFe=bFe,SFe=wFe;function kFe(t,e){var n=t.__data__;return SFe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var iS=kFe,CFe=iS;function TFe(t){var e=CFe(this,t).delete(t);return this.size-=e?1:0,e}var $Fe=TFe,EFe=iS;function IFe(t){return EFe(this,t).get(t)}var AFe=IFe,OFe=iS;function NFe(t){return OFe(this,t).has(t)}var PFe=NFe,RFe=iS;function DFe(t,e){var n=RFe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var MFe=DFe,LFe=xFe,FFe=$Fe,BFe=AFe,zFe=PFe,jFe=MFe;function Nd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Nd.prototype.clear=LFe;Nd.prototype.delete=FFe;Nd.prototype.get=BFe;Nd.prototype.has=zFe;Nd.prototype.set=jFe;var XP=Nd,sZ=XP,VFe="Expected a function";function ZP(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(VFe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(ZP.Cache||sZ),n}ZP.Cache=sZ;var oZ=ZP;const UFe=Mt(oZ);var WFe=oZ,GFe=500;function HFe(t){var e=WFe(t,function(r){return n.size===GFe&&n.clear(),r}),n=e.cache;return e}var KFe=HFe,qFe=KFe,XFe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZFe=/\\(\\)?/g,YFe=qFe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(XFe,function(n,r,i,s){e.push(i?s.replace(ZFe,"$1"):r||n)}),e}),JFe=YFe;function QFe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var YP=QFe,BB=bv,e3e=YP,t3e=Ai,n3e=Ed,r3e=1/0,zB=BB?BB.prototype:void 0,jB=zB?zB.toString:void 0;function aZ(t){if(typeof t=="string")return t;if(t3e(t))return e3e(t,aZ)+"";if(n3e(t))return jB?jB.call(t):"";var e=t+"";return e=="0"&&1/t==-r3e?"-0":e}var i3e=aZ,s3e=i3e;function o3e(t){return t==null?"":s3e(t)}var lZ=o3e,a3e=Ai,l3e=GP,u3e=JFe,c3e=lZ;function h3e(t,e){return a3e(t)?t:l3e(t,e)?[t]:u3e(c3e(t))}var uZ=h3e,f3e=Ed,d3e=1/0;function p3e(t){if(typeof t=="string"||f3e(t))return t;var e=t+"";return e=="0"&&1/t==-d3e?"-0":e}var sS=p3e,m3e=uZ,g3e=sS;function y3e(t,e){e=m3e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[g3e(e[n++])];return n&&n==r?t:void 0}var JP=y3e,v3e=JP;function _3e(t,e,n){var r=t==null?void 0:v3e(t,e);return r===void 0?n:r}var cZ=_3e;const $s=Mt(cZ);function x3e(t){return t==null}var b3e=x3e;const mt=Mt(b3e);var w3e=Xa,S3e=Ai,k3e=Za,C3e="[object String]";function T3e(t){return typeof t=="string"||!S3e(t)&&k3e(t)&&w3e(t)==C3e}var $3e=T3e;const wv=Mt($3e);var hZ={exports:{}},Pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=Symbol.for("react.element"),eR=Symbol.for("react.portal"),oS=Symbol.for("react.fragment"),aS=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),cS=Symbol.for("react.context"),E3e=Symbol.for("react.server_context"),hS=Symbol.for("react.forward_ref"),fS=Symbol.for("react.suspense"),dS=Symbol.for("react.suspense_list"),pS=Symbol.for("react.memo"),mS=Symbol.for("react.lazy"),I3e=Symbol.for("react.offscreen"),fZ;fZ=Symbol.for("react.module.reference");function Ls(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case QP:switch(t=t.type,t){case oS:case lS:case aS:case fS:case dS:return t;default:switch(t=t&&t.$$typeof,t){case E3e:case cS:case hS:case mS:case pS:case uS:return t;default:return e}}case eR:return e}}}Pt.ContextConsumer=cS;Pt.ContextProvider=uS;Pt.Element=QP;Pt.ForwardRef=hS;Pt.Fragment=oS;Pt.Lazy=mS;Pt.Memo=pS;Pt.Portal=eR;Pt.Profiler=lS;Pt.StrictMode=aS;Pt.Suspense=fS;Pt.SuspenseList=dS;Pt.isAsyncMode=function(){return!1};Pt.isConcurrentMode=function(){return!1};Pt.isContextConsumer=function(t){return Ls(t)===cS};Pt.isContextProvider=function(t){return Ls(t)===uS};Pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===QP};Pt.isForwardRef=function(t){return Ls(t)===hS};Pt.isFragment=function(t){return Ls(t)===oS};Pt.isLazy=function(t){return Ls(t)===mS};Pt.isMemo=function(t){return Ls(t)===pS};Pt.isPortal=function(t){return Ls(t)===eR};Pt.isProfiler=function(t){return Ls(t)===lS};Pt.isStrictMode=function(t){return Ls(t)===aS};Pt.isSuspense=function(t){return Ls(t)===fS};Pt.isSuspenseList=function(t){return Ls(t)===dS};Pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===oS||t===lS||t===aS||t===fS||t===dS||t===I3e||typeof t=="object"&&t!==null&&(t.$$typeof===mS||t.$$typeof===pS||t.$$typeof===uS||t.$$typeof===cS||t.$$typeof===hS||t.$$typeof===fZ||t.getModuleId!==void 0)};Pt.typeOf=Ls;hZ.exports=Pt;var A3e=hZ.exports,O3e=Xa,N3e=Za,P3e="[object Number]";function R3e(t){return typeof t=="number"||N3e(t)&&O3e(t)==P3e}var dZ=R3e;const D3e=Mt(dZ);var M3e=dZ;function L3e(t){return M3e(t)&&t!=+t}var F3e=L3e;const Pd=Mt(F3e);var ro=function(e){return e===0?0:e>0?1:-1},Zu=function(e){return wv(e)&&e.indexOf("%")===e.length-1},we=function(e){return D3e(e)&&!Pd(e)},Yn=function(e){return we(e)||wv(e)},B3e=0,Sv=function(e){var n=++B3e;return"".concat(e||"").concat(n)},Ac=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(e)&&!wv(e))return r;var s;if(Zu(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Pd(s)&&(s=r),i&&s>n&&(s=n),s},pl=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},z3e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ys=function(e,n){return we(e)&&we(n)?function(r){return e+r*(n-e)}:function(){return n}};function Vx(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):$s(r,e))===n})}function lf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function ME(t){"@babel/helpers - typeof";return ME=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ME(t)}var j3e=["viewBox","children"],V3e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],VB=["points","pathLength"],LC={svg:j3e,polygon:VB,polyline:VB},tR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ux=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(J.isValidElement(e)&&(r=e.props),!Id(r))return null;var i={};return Object.keys(r).forEach(function(s){tR.includes(s)&&(i[s]=n||function(o){return r[s](r,o)})}),i},U3e=function(e,n,r){return function(i){return e(n,r,i),null}},Wx=function(e,n,r){if(!Id(e)||ME(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];tR.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=U3e(o,n,r))}),i},W3e=["children"],G3e=["children"];function UB(t,e){if(t==null)return{};var n=H3e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function H3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LE(t){"@babel/helpers - typeof";return LE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LE(t)}var WB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ka=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},GB=null,FC=null,nR=function t(e){if(e===GB&&Array.isArray(FC))return FC;var n=[];return J.Children.forEach(e,function(r){mt(r)||(A3e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),FC=n,GB=e,n};function uo(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ka(i)}):r=[ka(e)],nR(t).forEach(function(i){var s=$s(i,"type.displayName")||$s(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Li(t,e){var n=uo(t,e);return n&&n[0]}var HB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!we(r)||r<=0||!we(i)||i<=0)},K3e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],q3e=function(e){return e&&e.type&&wv(e.type)&&K3e.indexOf(e.type)>=0},X3e=function(e){return e&&LE(e)==="object"&&"clipDot"in e},Z3e=function(e,n,r,i){var s,o=(s=LC==null?void 0:LC[i])!==null&&s!==void 0?s:[];return!et(e)&&(i&&o.includes(n)||V3e.includes(n))||r&&tR.includes(n)},ht=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(J.isValidElement(e)&&(i=e.props),!Id(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;Z3e((a=i)===null||a===void 0?void 0:a[o],o,n,r)&&(s[o]=i[o])}),s},FE=function t(e,n){if(e===n)return!0;var r=J.Children.count(e);if(r!==J.Children.count(n))return!1;if(r===0)return!0;if(r===1)return KB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!KB(s,o))return!1}return!0},KB=function(e,n){if(mt(e)&&mt(n))return!0;if(!mt(e)&&!mt(n)){var r=e.props||{},i=r.children,s=UB(r,W3e),o=n.props||{},a=o.children,l=UB(o,G3e);return i&&a?lf(s,l)&&FE(i,a):!i&&!a?lf(s,l):!1}return!1},qB=function(e,n){var r=[],i={};return nR(e).forEach(function(s,o){if(q3e(s))r.push(s);else if(s){var a=ka(s.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!i[a])){var h=u(s,a,o);r.push(h),i[a]=!0}}}),r},Y3e=function(e){var n=e&&e.type;return n&&WB[n]?WB[n]:null},J3e=function(e,n){return nR(n).indexOf(e)},Q3e=["children","width","height","viewBox","className","style","title","desc"];function BE(){return BE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BE.apply(this,arguments)}function eBe(t,e){if(t==null)return{};var n=tBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,o=t.style,a=t.title,l=t.desc,u=eBe(t,Q3e),c=i||{width:n,height:r,x:0,y:0},h=kt("recharts-surface",s);return X.createElement("svg",BE({},ht(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),X.createElement("title",null,a),X.createElement("desc",null,l),e)}var nBe=["children","className"];function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(this,arguments)}function rBe(t,e){if(t==null)return{};var n=iBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var mn=X.forwardRef(function(t,e){var n=t.children,r=t.className,i=rBe(t,nBe),s=kt("recharts-layer",r);return X.createElement("g",jE({className:s},ht(i,!0),{ref:e}),n)}),Ca=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function sBe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var oBe=sBe,aBe=oBe;function lBe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:aBe(t,e,n)}var uBe=lBe,cBe="\\ud800-\\udfff",hBe="\\u0300-\\u036f",fBe="\\ufe20-\\ufe2f",dBe="\\u20d0-\\u20ff",pBe=hBe+fBe+dBe,mBe="\\ufe0e\\ufe0f",gBe="\\u200d",yBe=RegExp("["+gBe+cBe+pBe+mBe+"]");function vBe(t){return yBe.test(t)}var pZ=vBe;function _Be(t){return t.split("")}var xBe=_Be,mZ="\\ud800-\\udfff",bBe="\\u0300-\\u036f",wBe="\\ufe20-\\ufe2f",SBe="\\u20d0-\\u20ff",kBe=bBe+wBe+SBe,CBe="\\ufe0e\\ufe0f",TBe="["+mZ+"]",VE="["+kBe+"]",UE="\\ud83c[\\udffb-\\udfff]",$Be="(?:"+VE+"|"+UE+")",gZ="[^"+mZ+"]",yZ="(?:\\ud83c[\\udde6-\\uddff]){2}",vZ="[\\ud800-\\udbff][\\udc00-\\udfff]",EBe="\\u200d",_Z=$Be+"?",xZ="["+CBe+"]?",IBe="(?:"+EBe+"(?:"+[gZ,yZ,vZ].join("|")+")"+xZ+_Z+")*",ABe=xZ+_Z+IBe,OBe="(?:"+[gZ+VE+"?",VE,yZ,vZ,TBe].join("|")+")",NBe=RegExp(UE+"(?="+UE+")|"+OBe+ABe,"g");function PBe(t){return t.match(NBe)||[]}var RBe=PBe,DBe=xBe,MBe=pZ,LBe=RBe;function FBe(t){return MBe(t)?LBe(t):DBe(t)}var BBe=FBe,zBe=uBe,jBe=pZ,VBe=BBe,UBe=lZ;function WBe(t){return function(e){e=UBe(e);var n=jBe(e)?VBe(e):void 0,r=n?n[0]:e.charAt(0),i=n?zBe(n,1).join(""):e.slice(1);return r[t]()+i}}var GBe=WBe,HBe=GBe,KBe=HBe("toUpperCase"),qBe=KBe;const gS=Mt(qBe);function Wt(t){return function(){return t}}const bZ=Math.cos,Gx=Math.sin,yo=Math.sqrt,Hx=Math.PI,yS=2*Hx,WE=Math.PI,GE=2*WE,Nu=1e-6,XBe=GE-Nu;function wZ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ZBe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return wZ;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class YBe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?wZ:ZBe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,c=o-e,h=a-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Nu)if(!(Math.abs(h*l-u*c)>Nu)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=i-a,_=l*l+u*u,v=p*p+m*m,g=Math.sqrt(_),x=Math.sqrt(f),b=s*Math.tan((WE-Math.acos((_+f-v)/(2*g*x)))/2),w=b/x,k=b/g;Math.abs(w-1)>Nu&&this._append`L${e+w*c},${n+w*h}`,this._append`A${s},${s},0,0,${+(h*p>c*m)},${this._x1=e+k*l},${this._y1=n+k*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,h=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Nu||Math.abs(this._y1-c)>Nu)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%GE+GE),f>XBe?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>Nu&&this._append`A${r},${r},0,${+(f>=WE)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function rR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new YBe(e)}function iR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function SZ(t){this._context=t}SZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function vS(t){return new SZ(t)}function kZ(t){return t[0]}function CZ(t){return t[1]}function TZ(t,e){var n=Wt(!0),r=null,i=vS,s=null,o=rR(a);t=typeof t=="function"?t:t===void 0?kZ:Wt(t),e=typeof e=="function"?e:e===void 0?CZ:Wt(e);function a(l){var u,c=(l=iR(l)).length,h,f=!1,p;for(r==null&&(s=i(p=o())),u=0;u<=c;++u)!(u<c&&n(h=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,u,l),+e(h,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Wt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Wt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Wt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function R0(t,e,n){var r=null,i=Wt(!0),s=null,o=vS,a=null,l=rR(u);t=typeof t=="function"?t:t===void 0?kZ:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?CZ:Wt(+n);function u(h){var f,p,m,_=(h=iR(h)).length,v,g=!1,x,b=new Array(_),w=new Array(_);for(s==null&&(a=o(x=l())),f=0;f<=_;++f){if(!(f<_&&i(v=h[f],f,h))===g)if(g=!g)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=f-1;m>=p;--m)a.point(b[m],w[m]);a.lineEnd(),a.areaEnd()}g&&(b[f]=+t(v,f,h),w[f]=+e(v,f,h),a.point(r?+r(v,f,h):b[f],n?+n(v,f,h):w[f]))}if(x)return a=null,x+""||null}function c(){return TZ().defined(i).curve(o).context(s)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Wt(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Wt(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Wt(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Wt(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Wt(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Wt(+h),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Wt(!!h),u):i},u.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),u):s},u}class $Z{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function JBe(t){return new $Z(t,!0)}function QBe(t){return new $Z(t,!1)}const sR={draw(t,e){const n=yo(e/Hx);t.moveTo(n,0),t.arc(0,0,n,0,yS)}},eze={draw(t,e){const n=yo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},EZ=yo(1/3),tze=EZ*2,nze={draw(t,e){const n=yo(e/tze),r=n*EZ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},rze={draw(t,e){const n=yo(e),r=-n/2;t.rect(r,r,n,n)}},ize=.8908130915292852,IZ=Gx(Hx/10)/Gx(7*Hx/10),sze=Gx(yS/10)*IZ,oze=-bZ(yS/10)*IZ,aze={draw(t,e){const n=yo(e*ize),r=sze*n,i=oze*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=yS*s/5,a=bZ(o),l=Gx(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},BC=yo(3),lze={draw(t,e){const n=-yo(e/(BC*3));t.moveTo(0,n*2),t.lineTo(-BC*n,-n),t.lineTo(BC*n,-n),t.closePath()}},cs=-.5,hs=yo(3)/2,HE=1/yo(12),uze=(HE/2+1)*3,cze={draw(t,e){const n=yo(e/uze),r=n/2,i=n*HE,s=r,o=n*HE+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(cs*r-hs*i,hs*r+cs*i),t.lineTo(cs*s-hs*o,hs*s+cs*o),t.lineTo(cs*a-hs*l,hs*a+cs*l),t.lineTo(cs*r+hs*i,cs*i-hs*r),t.lineTo(cs*s+hs*o,cs*o-hs*s),t.lineTo(cs*a+hs*l,cs*l-hs*a),t.closePath()}};function hze(t,e){let n=null,r=rR(i);t=typeof t=="function"?t:Wt(t||sR),e=typeof e=="function"?e:Wt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Wt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Wt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Kx(){}function qx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function AZ(t){this._context=t}AZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fze(t){return new AZ(t)}function OZ(t){this._context=t}OZ.prototype={areaStart:Kx,areaEnd:Kx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dze(t){return new OZ(t)}function NZ(t){this._context=t}NZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pze(t){return new NZ(t)}function PZ(t){this._context=t}PZ.prototype={areaStart:Kx,areaEnd:Kx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function mze(t){return new PZ(t)}function XB(t){return t<0?-1:1}function ZB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(XB(s)+XB(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function YB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function zC(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Xx(t){this._context=t}Xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zC(this,this._t0,YB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,zC(this,YB(this,n=ZB(this,t,e)),n);break;default:zC(this,this._t0,n=ZB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function RZ(t){this._context=new DZ(t)}(RZ.prototype=Object.create(Xx.prototype)).point=function(t,e){Xx.prototype.point.call(this,e,t)};function DZ(t){this._context=t}DZ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function gze(t){return new Xx(t)}function yze(t){return new RZ(t)}function MZ(t){this._context=t}MZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=JB(t),i=JB(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function JB(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function vze(t){return new MZ(t)}function _S(t,e){this._context=t,this._t=e}_S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _ze(t){return new _S(t,.5)}function xze(t){return new _S(t,0)}function bze(t){return new _S(t,1)}function Mf(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function KE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function wze(t,e){return t[e]}function Sze(t){const e=[];return e.key=t,e}function kze(){var t=Wt([]),e=KE,n=Mf,r=wze;function i(s){var o=Array.from(t.apply(this,arguments),Sze),a,l=o.length,u=-1,c;for(const h of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(h,o[a].key,u,s)]).data=h;for(a=0,c=iR(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Wt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Wt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?KE:typeof s=="function"?s:Wt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Mf,i):n},i}function Cze(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Mf(t,e)}}function Tze(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Mf(t,e)}}function $ze(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],h=c[r][1]||0,f=c[r-1][1]||0,p=(h-f)/2,m=0;m<a;++m){var _=t[e[m]],v=_[r][1]||0,g=_[r-1][1]||0;p+=v-g}l+=h,u+=p*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Mf(t,e)}}function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}var Eze=["type","size","sizeType"];function qE(){return qE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qE.apply(this,arguments)}function QB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ez(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(n),!0).forEach(function(r){Ize(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ize(t,e,n){return e=Aze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aze(t){var e=Oze(t,"string");return rg(e)=="symbol"?e:e+""}function Oze(t,e){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nze(t,e){if(t==null)return{};var n=Pze(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var LZ={symbolCircle:sR,symbolCross:eze,symbolDiamond:nze,symbolSquare:rze,symbolStar:aze,symbolTriangle:lze,symbolWye:cze},Rze=Math.PI/180,Dze=function(e){var n="symbol".concat(gS(e));return LZ[n]||sR},Mze=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Rze;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Lze=function(e,n){LZ["symbol".concat(gS(e))]=n},oR=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,a=o===void 0?"area":o,l=Nze(e,Eze),u=ez(ez({},l),{},{type:r,size:s,sizeType:a}),c=function(){var v=Dze(r),g=hze().type(v).size(Mze(s,a,r));return g()},h=u.className,f=u.cx,p=u.cy,m=ht(u,!0);return f===+f&&p===+p&&s===+s?X.createElement("path",qE({},m,{className:kt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:c()})):null};oR.registerSymbol=Lze;function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function XE(){return XE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XE.apply(this,arguments)}function tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(n),!0).forEach(function(r){ig(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BZ(r.key),r)}}function jze(t,e,n){return e&&zze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vze(t,e,n){return e=Zx(e),Uze(t,FZ()?Reflect.construct(e,n||[],Zx(t).constructor):e.apply(t,n))}function Uze(t,e){if(e&&(Lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wze(t)}function Wze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FZ=function(){return!!t})()}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(t)}function Gze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZE(t,e)}function ZE(t,e){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZE(t,e)}function ig(t,e,n){return e=BZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BZ(t){var e=Hze(t,"string");return Lf(e)=="symbol"?e:e+""}function Hze(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fs=32,aR=function(t){function e(){return Bze(this,e),Vze(this,e,arguments)}return Gze(e,t),jze(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=fs/2,o=fs/6,a=fs/3,l=r.inactive?i:r.color;if(r.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:fs,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(fs,"M").concat(2*a,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return X.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(fs/8,"h").concat(fs,"v").concat(fs*3/4,"h").concat(-fs,"z"),className:"recharts-legend-icon"});if(X.isValidElement(r.legendIcon)){var u=Fze({},r);return delete u.legendIcon,X.cloneElement(r.legendIcon,u)}return X.createElement(oR,{fill:l,cx:s,cy:s,size:fs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:fs,height:fs},h={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,m){var _=p.formatter||l,v=kt(ig(ig({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var g=et(p.value)?null:p.value;Ca(!et(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?u:p.color;return X.createElement("li",XE({className:v,style:h,key:"legend-item-".concat(m)},Wx(r.props,p,m)),X.createElement(zE,{width:o,height:o,viewBox:c,style:f},r.renderIcon(p)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},_?_(g,p,m):g))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(J.PureComponent);ig(aR,"displayName","Legend");ig(aR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Kze=rS;function qze(){this.__data__=new Kze,this.size=0}var Xze=qze;function Zze(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Yze=Zze;function Jze(t){return this.__data__.get(t)}var Qze=Jze;function eje(t){return this.__data__.has(t)}var tje=eje,nje=rS,rje=qP,ije=XP,sje=200;function oje(t,e){var n=this.__data__;if(n instanceof nje){var r=n.__data__;if(!rje||r.length<sje-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ije(r)}return n.set(t,e),this.size=n.size,this}var aje=oje,lje=rS,uje=Xze,cje=Yze,hje=Qze,fje=tje,dje=aje;function Rd(t){var e=this.__data__=new lje(t);this.size=e.size}Rd.prototype.clear=uje;Rd.prototype.delete=cje;Rd.prototype.get=hje;Rd.prototype.has=fje;Rd.prototype.set=dje;var zZ=Rd,pje="__lodash_hash_undefined__";function mje(t){return this.__data__.set(t,pje),this}var gje=mje;function yje(t){return this.__data__.has(t)}var vje=yje,_je=XP,xje=gje,bje=vje;function Yx(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new _je;++e<n;)this.add(t[e])}Yx.prototype.add=Yx.prototype.push=xje;Yx.prototype.has=bje;var jZ=Yx;function wje(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var VZ=wje;function Sje(t,e){return t.has(e)}var UZ=Sje,kje=jZ,Cje=VZ,Tje=UZ,$je=1,Eje=2;function Ije(t,e,n,r,i,s){var o=n&$je,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var h=-1,f=!0,p=n&Eje?new kje:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var m=t[h],_=e[h];if(r)var v=o?r(_,m,h,e,t,s):r(m,_,h,t,e,s);if(v!==void 0){if(v)continue;f=!1;break}if(p){if(!Cje(e,function(g,x){if(!Tje(p,x)&&(m===g||i(m,g,n,r,s)))return p.push(x)})){f=!1;break}}else if(!(m===_||i(m,_,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var WZ=Ije,Aje=na,Oje=Aje.Uint8Array,Nje=Oje;function Pje(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Rje=Pje;function Dje(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var lR=Dje,nz=bv,rz=Nje,Mje=KP,Lje=WZ,Fje=Rje,Bje=lR,zje=1,jje=2,Vje="[object Boolean]",Uje="[object Date]",Wje="[object Error]",Gje="[object Map]",Hje="[object Number]",Kje="[object RegExp]",qje="[object Set]",Xje="[object String]",Zje="[object Symbol]",Yje="[object ArrayBuffer]",Jje="[object DataView]",iz=nz?nz.prototype:void 0,jC=iz?iz.valueOf:void 0;function Qje(t,e,n,r,i,s,o){switch(n){case Jje:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Yje:return!(t.byteLength!=e.byteLength||!s(new rz(t),new rz(e)));case Vje:case Uje:case Hje:return Mje(+t,+e);case Wje:return t.name==e.name&&t.message==e.message;case Kje:case Xje:return t==e+"";case Gje:var a=Fje;case qje:var l=r&zje;if(a||(a=Bje),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=jje,o.set(t,e);var c=Lje(a(t),a(e),r,i,s,o);return o.delete(t),c;case Zje:if(jC)return jC.call(t)==jC.call(e)}return!1}var e4e=Qje;function t4e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var GZ=t4e,n4e=GZ,r4e=Ai;function i4e(t,e,n){var r=e(t);return r4e(t)?r:n4e(r,n(t))}var s4e=i4e;function o4e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var a4e=o4e;function l4e(){return[]}var u4e=l4e,c4e=a4e,h4e=u4e,f4e=Object.prototype,d4e=f4e.propertyIsEnumerable,sz=Object.getOwnPropertySymbols,p4e=sz?function(t){return t==null?[]:(t=Object(t),c4e(sz(t),function(e){return d4e.call(t,e)}))}:h4e,m4e=p4e;function g4e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var y4e=g4e,v4e=Xa,_4e=Za,x4e="[object Arguments]";function b4e(t){return _4e(t)&&v4e(t)==x4e}var w4e=b4e,oz=w4e,S4e=Za,HZ=Object.prototype,k4e=HZ.hasOwnProperty,C4e=HZ.propertyIsEnumerable,T4e=oz(function(){return arguments}())?oz:function(t){return S4e(t)&&k4e.call(t,"callee")&&!C4e.call(t,"callee")},uR=T4e,Jx={exports:{}};function $4e(){return!1}var E4e=$4e;Jx.exports;(function(t,e){var n=na,r=E4e,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Jx,Jx.exports);var KZ=Jx.exports,I4e=9007199254740991,A4e=/^(?:0|[1-9]\d*)$/;function O4e(t,e){var n=typeof t;return e=e??I4e,!!e&&(n=="number"||n!="symbol"&&A4e.test(t))&&t>-1&&t%1==0&&t<e}var cR=O4e,N4e=9007199254740991;function P4e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=N4e}var hR=P4e,R4e=Xa,D4e=hR,M4e=Za,L4e="[object Arguments]",F4e="[object Array]",B4e="[object Boolean]",z4e="[object Date]",j4e="[object Error]",V4e="[object Function]",U4e="[object Map]",W4e="[object Number]",G4e="[object Object]",H4e="[object RegExp]",K4e="[object Set]",q4e="[object String]",X4e="[object WeakMap]",Z4e="[object ArrayBuffer]",Y4e="[object DataView]",J4e="[object Float32Array]",Q4e="[object Float64Array]",eVe="[object Int8Array]",tVe="[object Int16Array]",nVe="[object Int32Array]",rVe="[object Uint8Array]",iVe="[object Uint8ClampedArray]",sVe="[object Uint16Array]",oVe="[object Uint32Array]",Jt={};Jt[J4e]=Jt[Q4e]=Jt[eVe]=Jt[tVe]=Jt[nVe]=Jt[rVe]=Jt[iVe]=Jt[sVe]=Jt[oVe]=!0;Jt[L4e]=Jt[F4e]=Jt[Z4e]=Jt[B4e]=Jt[Y4e]=Jt[z4e]=Jt[j4e]=Jt[V4e]=Jt[U4e]=Jt[W4e]=Jt[G4e]=Jt[H4e]=Jt[K4e]=Jt[q4e]=Jt[X4e]=!1;function aVe(t){return M4e(t)&&D4e(t.length)&&!!Jt[R4e(t)]}var lVe=aVe;function uVe(t){return function(e){return t(e)}}var qZ=uVe,Qx={exports:{}};Qx.exports;(function(t,e){var n=nZ,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Qx,Qx.exports);var cVe=Qx.exports,hVe=lVe,fVe=qZ,az=cVe,lz=az&&az.isTypedArray,dVe=lz?fVe(lz):hVe,XZ=dVe,pVe=y4e,mVe=uR,gVe=Ai,yVe=KZ,vVe=cR,_Ve=XZ,xVe=Object.prototype,bVe=xVe.hasOwnProperty;function wVe(t,e){var n=gVe(t),r=!n&&mVe(t),i=!n&&!r&&yVe(t),s=!n&&!r&&!i&&_Ve(t),o=n||r||i||s,a=o?pVe(t.length,String):[],l=a.length;for(var u in t)(e||bVe.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||vVe(u,l)))&&a.push(u);return a}var SVe=wVe,kVe=Object.prototype;function CVe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kVe;return t===n}var TVe=CVe;function $Ve(t,e){return function(n){return t(e(n))}}var ZZ=$Ve,EVe=ZZ,IVe=EVe(Object.keys,Object),AVe=IVe,OVe=TVe,NVe=AVe,PVe=Object.prototype,RVe=PVe.hasOwnProperty;function DVe(t){if(!OVe(t))return NVe(t);var e=[];for(var n in Object(t))RVe.call(t,n)&&n!="constructor"&&e.push(n);return e}var MVe=DVe,LVe=HP,FVe=hR;function BVe(t){return t!=null&&FVe(t.length)&&!LVe(t)}var kv=BVe,zVe=SVe,jVe=MVe,VVe=kv;function UVe(t){return VVe(t)?zVe(t):jVe(t)}var xS=UVe,WVe=s4e,GVe=m4e,HVe=xS;function KVe(t){return WVe(t,HVe,GVe)}var qVe=KVe,uz=qVe,XVe=1,ZVe=Object.prototype,YVe=ZVe.hasOwnProperty;function JVe(t,e,n,r,i,s){var o=n&XVe,a=uz(t),l=a.length,u=uz(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:YVe.call(e,f)))return!1}var p=s.get(t),m=s.get(e);if(p&&m)return p==e&&m==t;var _=!0;s.set(t,e),s.set(e,t);for(var v=o;++h<l;){f=a[h];var g=t[f],x=e[f];if(r)var b=o?r(x,g,f,e,t,s):r(g,x,f,t,e,s);if(!(b===void 0?g===x||i(g,x,n,r,s):b)){_=!1;break}v||(v=f=="constructor")}if(_&&!v){var w=t.constructor,k=e.constructor;w!=k&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(_=!1)}return s.delete(t),s.delete(e),_}var QVe=JVe,eUe=Yc,tUe=na,nUe=eUe(tUe,"DataView"),rUe=nUe,iUe=Yc,sUe=na,oUe=iUe(sUe,"Promise"),aUe=oUe,lUe=Yc,uUe=na,cUe=lUe(uUe,"Set"),YZ=cUe,hUe=Yc,fUe=na,dUe=hUe(fUe,"WeakMap"),pUe=dUe,YE=rUe,JE=qP,QE=aUe,eI=YZ,tI=pUe,JZ=Xa,Dd=iZ,cz="[object Map]",mUe="[object Object]",hz="[object Promise]",fz="[object Set]",dz="[object WeakMap]",pz="[object DataView]",gUe=Dd(YE),yUe=Dd(JE),vUe=Dd(QE),_Ue=Dd(eI),xUe=Dd(tI),Pu=JZ;(YE&&Pu(new YE(new ArrayBuffer(1)))!=pz||JE&&Pu(new JE)!=cz||QE&&Pu(QE.resolve())!=hz||eI&&Pu(new eI)!=fz||tI&&Pu(new tI)!=dz)&&(Pu=function(t){var e=JZ(t),n=e==mUe?t.constructor:void 0,r=n?Dd(n):"";if(r)switch(r){case gUe:return pz;case yUe:return cz;case vUe:return hz;case _Ue:return fz;case xUe:return dz}return e});var bUe=Pu,VC=zZ,wUe=WZ,SUe=e4e,kUe=QVe,mz=bUe,gz=Ai,yz=KZ,CUe=XZ,TUe=1,vz="[object Arguments]",_z="[object Array]",D0="[object Object]",$Ue=Object.prototype,xz=$Ue.hasOwnProperty;function EUe(t,e,n,r,i,s){var o=gz(t),a=gz(e),l=o?_z:mz(t),u=a?_z:mz(e);l=l==vz?D0:l,u=u==vz?D0:u;var c=l==D0,h=u==D0,f=l==u;if(f&&yz(t)){if(!yz(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new VC),o||CUe(t)?wUe(t,e,n,r,i,s):SUe(t,e,l,n,r,i,s);if(!(n&TUe)){var p=c&&xz.call(t,"__wrapped__"),m=h&&xz.call(e,"__wrapped__");if(p||m){var _=p?t.value():t,v=m?e.value():e;return s||(s=new VC),i(_,v,n,r,s)}}return f?(s||(s=new VC),kUe(t,e,n,r,i,s)):!1}var IUe=EUe,AUe=IUe,bz=Za;function QZ(t,e,n,r,i){return t===e?!0:t==null||e==null||!bz(t)&&!bz(e)?t!==t&&e!==e:AUe(t,e,n,r,QZ,i)}var fR=QZ,OUe=zZ,NUe=fR,PUe=1,RUe=2;function DUe(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var h=new OUe;if(r)var f=r(u,c,l,t,e,h);if(!(f===void 0?NUe(c,u,PUe|RUe,r,h):f))return!1}}return!0}var MUe=DUe,LUe=cu;function FUe(t){return t===t&&!LUe(t)}var eY=FUe,BUe=eY,zUe=xS;function jUe(t){for(var e=zUe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,BUe(i)]}return e}var VUe=jUe;function UUe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var tY=UUe,WUe=MUe,GUe=VUe,HUe=tY;function KUe(t){var e=GUe(t);return e.length==1&&e[0][2]?HUe(e[0][0],e[0][1]):function(n){return n===t||WUe(n,t,e)}}var qUe=KUe;function XUe(t,e){return t!=null&&e in Object(t)}var ZUe=XUe,YUe=uZ,JUe=uR,QUe=Ai,eWe=cR,tWe=hR,nWe=sS;function rWe(t,e,n){e=YUe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=nWe(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&tWe(i)&&eWe(o,i)&&(QUe(t)||JUe(t)))}var iWe=rWe,sWe=ZUe,oWe=iWe;function aWe(t,e){return t!=null&&oWe(t,e,sWe)}var lWe=aWe,uWe=fR,cWe=cZ,hWe=lWe,fWe=GP,dWe=eY,pWe=tY,mWe=sS,gWe=1,yWe=2;function vWe(t,e){return fWe(t)&&dWe(e)?pWe(mWe(t),e):function(n){var r=cWe(n,t);return r===void 0&&r===e?hWe(n,t):uWe(e,r,gWe|yWe)}}var _We=vWe;function xWe(t){return t}var Md=xWe;function bWe(t){return function(e){return e==null?void 0:e[t]}}var wWe=bWe,SWe=JP;function kWe(t){return function(e){return SWe(e,t)}}var CWe=kWe,TWe=wWe,$We=CWe,EWe=GP,IWe=sS;function AWe(t){return EWe(t)?TWe(IWe(t)):$We(t)}var OWe=AWe,NWe=qUe,PWe=_We,RWe=Md,DWe=Ai,MWe=OWe;function LWe(t){return typeof t=="function"?t:t==null?RWe:typeof t=="object"?DWe(t)?PWe(t[0],t[1]):NWe(t):MWe(t)}var hu=LWe;function FWe(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var nY=FWe;function BWe(t){return t!==t}var zWe=BWe;function jWe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var VWe=jWe,UWe=nY,WWe=zWe,GWe=VWe;function HWe(t,e,n){return e===e?GWe(t,e,n):UWe(t,WWe,n)}var KWe=HWe,qWe=KWe;function XWe(t,e){var n=t==null?0:t.length;return!!n&&qWe(t,e,0)>-1}var ZWe=XWe;function YWe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var JWe=YWe;function QWe(){}var eGe=QWe,UC=YZ,tGe=eGe,nGe=lR,rGe=1/0,iGe=UC&&1/nGe(new UC([,-0]))[1]==rGe?function(t){return new UC(t)}:tGe,sGe=iGe,oGe=jZ,aGe=ZWe,lGe=JWe,uGe=UZ,cGe=sGe,hGe=lR,fGe=200;function dGe(t,e,n){var r=-1,i=aGe,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=lGe;else if(s>=fGe){var u=e?null:cGe(t);if(u)return hGe(u);o=!1,i=uGe,l=new oGe}else l=e?[]:a;e:for(;++r<s;){var c=t[r],h=e?e(c):c;if(c=n||c!==0?c:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;e&&l.push(h),a.push(c)}else i(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}var pGe=dGe,mGe=hu,gGe=pGe;function yGe(t,e){return t&&t.length?gGe(t,mGe(e)):[]}var vGe=yGe;const wz=Mt(vGe);function rY(t,e,n){return e===!0?wz(t,n):et(e)?wz(t,e):t}function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}var _Ge=["ref"];function Sz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sz(Object(n),!0).forEach(function(r){bS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sY(r.key),r)}}function bGe(t,e,n){return e&&kz(t.prototype,e),n&&kz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wGe(t,e,n){return e=eb(e),SGe(t,iY()?Reflect.construct(e,n||[],eb(t).constructor):e.apply(t,n))}function SGe(t,e){if(e&&(Ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kGe(t)}function kGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iY=function(){return!!t})()}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eb(t)}function CGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nI(t,e)}function nI(t,e){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nI(t,e)}function bS(t,e,n){return e=sY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sY(t){var e=TGe(t,"string");return Ff(e)=="symbol"?e:e+""}function TGe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ge(t,e){if(t==null)return{};var n=EGe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function IGe(t){return t.value}function AGe(t,e){if(X.isValidElement(t))return X.cloneElement(t,e);if(typeof t=="function")return X.createElement(t,e);e.ref;var n=$Ge(e,_Ge);return X.createElement(aR,n)}var Cz=1,uf=function(t){function e(){var n;xGe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=wGe(this,e,[].concat(i)),bS(n,"lastBoundingBox",{width:-1,height:-1}),n}return CGe(e,t),bGe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Cz||Math.abs(i.height-this.lastBoundingBox.height)>Cz)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?aa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var m=this.getBBoxSnapshot();f={top:((c||0)-m.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return aa(aa({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,h=aa(aa({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return X.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},AGe(s,aa(aa({},this.props),{},{payload:rY(c,u,IGe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=aa(aa({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&we(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(J.PureComponent);bS(uf,"displayName","Legend");bS(uf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Tz=bv,OGe=uR,NGe=Ai,$z=Tz?Tz.isConcatSpreadable:void 0;function PGe(t){return NGe(t)||OGe(t)||!!($z&&t&&t[$z])}var RGe=PGe,DGe=GZ,MGe=RGe;function oY(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=MGe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?oY(a,e-1,n,r,i):DGe(i,a):r||(i[i.length]=a)}return i}var aY=oY;function LGe(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var FGe=LGe,BGe=FGe,zGe=BGe(),jGe=zGe,VGe=jGe,UGe=xS;function WGe(t,e){return t&&VGe(t,e,UGe)}var lY=WGe,GGe=kv;function HGe(t,e){return function(n,r){if(n==null)return n;if(!GGe(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var KGe=HGe,qGe=lY,XGe=KGe,ZGe=XGe(qGe),dR=ZGe,YGe=dR,JGe=kv;function QGe(t,e){var n=-1,r=JGe(t)?Array(t.length):[];return YGe(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var uY=QGe;function e5e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var t5e=e5e,Ez=Ed;function n5e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=Ez(t),o=e!==void 0,a=e===null,l=e===e,u=Ez(e);if(!a&&!u&&!s&&t>e||s&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var r5e=n5e,i5e=r5e;function s5e(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=i5e(i[r],s[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var o5e=s5e,WC=YP,a5e=JP,l5e=hu,u5e=uY,c5e=t5e,h5e=qZ,f5e=o5e,d5e=Md,p5e=Ai;function m5e(t,e,n){e.length?e=WC(e,function(s){return p5e(s)?function(o){return a5e(o,s.length===1?s[0]:s)}:s}):e=[d5e];var r=-1;e=WC(e,h5e(l5e));var i=u5e(t,function(s,o,a){var l=WC(e,function(u){return u(s)});return{criteria:l,index:++r,value:s}});return c5e(i,function(s,o){return f5e(s,o,n)})}var g5e=m5e;function y5e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var v5e=y5e,_5e=v5e,Iz=Math.max;function x5e(t,e,n){return e=Iz(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Iz(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),_5e(t,this,a)}}var b5e=x5e;function w5e(t){return function(){return t}}var S5e=w5e,k5e=Yc,C5e=function(){try{var t=k5e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),cY=C5e,T5e=S5e,Az=cY,$5e=Md,E5e=Az?function(t,e){return Az(t,"toString",{configurable:!0,enumerable:!1,value:T5e(e),writable:!0})}:$5e,I5e=E5e,A5e=800,O5e=16,N5e=Date.now;function P5e(t){var e=0,n=0;return function(){var r=N5e(),i=O5e-(r-n);if(n=r,i>0){if(++e>=A5e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var R5e=P5e,D5e=I5e,M5e=R5e,L5e=M5e(D5e),F5e=L5e,B5e=Md,z5e=b5e,j5e=F5e;function V5e(t,e){return j5e(z5e(t,e,B5e),t+"")}var U5e=V5e,W5e=KP,G5e=kv,H5e=cR,K5e=cu;function q5e(t,e,n){if(!K5e(n))return!1;var r=typeof e;return(r=="number"?G5e(n)&&H5e(e,n.length):r=="string"&&e in n)?W5e(n[e],t):!1}var wS=q5e,X5e=aY,Z5e=g5e,Y5e=U5e,Oz=wS,J5e=Y5e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Oz(t,e[0],e[1])?e=[]:n>2&&Oz(e[0],e[1],e[2])&&(e=[e[0]]),Z5e(t,X5e(e,1),[])}),Q5e=J5e;const pR=Mt(Q5e);function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rI.apply(this,arguments)}function eHe(t,e){return iHe(t)||rHe(t,e)||nHe(t,e)||tHe()}function tHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nHe(t,e){if(t){if(typeof t=="string")return Nz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nz(t,e)}}function Nz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function iHe(t){if(Array.isArray(t))return t}function Pz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pz(Object(n),!0).forEach(function(r){sHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sHe(t,e,n){return e=oHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oHe(t){var e=aHe(t,"string");return sg(e)=="symbol"?e:e+""}function aHe(t,e){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lHe(t){return Array.isArray(t)&&Yn(t[0])&&Yn(t[1])?t.join(" ~ "):t}var uHe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,h=e.formatter,f=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,_=e.label,v=e.labelFormatter,g=e.accessibilityLayer,x=g===void 0?!1:g,b=function(){if(c&&c.length){var P={padding:0,margin:0},M=(f?pR(c,f):c).map(function(B,z){if(B.type==="none")return null;var j=GC({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},a),U=B.formatter||h||lHe,D=B.value,W=B.name,G=D,Y=W;if(U&&G!=null&&Y!=null){var ee=U(D,W,B,z,c);if(Array.isArray(ee)){var se=eHe(ee,2);G=se[0],Y=se[1]}else G=ee}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:j},Yn(Y)?X.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Yn(Y)?X.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,X.createElement("span",{className:"recharts-tooltip-item-value"},G),X.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:P},M)}return null},w=GC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=GC({margin:0},u),C=!mt(_),T=C?_:"",E=kt("recharts-default-tooltip",p),A=kt("recharts-tooltip-label",m);C&&v&&c!==void 0&&c!==null&&(T=v(_,c));var $=x?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",rI({className:E,style:w},$),X.createElement("p",{className:A,style:k},X.isValidElement(T)?T:"".concat(T)),b())};function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function M0(t,e,n){return e=cHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cHe(t){var e=hHe(t,"string");return og(e)=="symbol"?e:e+""}function hHe(t,e){if(og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _p="recharts-tooltip-wrapper",fHe={visibility:"hidden"};function dHe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return kt(_p,M0(M0(M0(M0({},"".concat(_p,"-right"),we(n)&&e&&we(e.x)&&n>=e.x),"".concat(_p,"-left"),we(n)&&e&&we(e.x)&&n<e.x),"".concat(_p,"-bottom"),we(r)&&e&&we(e.y)&&r>=e.y),"".concat(_p,"-top"),we(r)&&e&&we(e.y)&&r<e.y))}function Rz(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&we(s[r]))return s[r];var c=n[r]-a-i,h=n[r]+i;if(e[r])return o[r]?c:h;if(o[r]){var f=c,p=l[r];return f<p?Math.max(h,l[r]):Math.max(c,l[r])}var m=h+a,_=l[r]+u;return m>_?Math.max(c,l[r]):Math.max(h,l[r])}function pHe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function mHe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,h;return o.height>0&&o.width>0&&n?(c=Rz({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=Rz({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=pHe({translateX:c,translateY:h,useTranslate3d:a})):u=fHe,{cssProperties:u,cssClasses:dHe({translateX:c,translateY:h,coordinate:n})}}function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function Dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(n),!0).forEach(function(r){sI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yHe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fY(r.key),r)}}function vHe(t,e,n){return e&&yHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _He(t,e,n){return e=tb(e),xHe(t,hY()?Reflect.construct(e,n||[],tb(t).constructor):e.apply(t,n))}function xHe(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bHe(t)}function bHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hY=function(){return!!t})()}function tb(t){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tb(t)}function wHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iI(t,e)}function iI(t,e){return iI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iI(t,e)}function sI(t,e,n){return e=fY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fY(t){var e=SHe(t,"string");return Bf(e)=="symbol"?e:e+""}function SHe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lz=1,kHe=function(t){function e(){var n;gHe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=_He(this,e,[].concat(i)),sI(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),sI(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return wHe(e,t),vHe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Lz||Math.abs(r.height-this.state.lastBoundingBox.height)>Lz)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,m=i.position,_=i.reverseDirection,v=i.useTranslate3d,g=i.viewBox,x=i.wrapperStyle,b=mHe({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:p,position:m,reverseDirection:_,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:g}),w=b.cssClasses,k=b.cssProperties,C=Mz(Mz({transition:f&&s?"transform ".concat(a,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return X.createElement("div",{tabIndex:-1,className:w,style:C,ref:function(E){r.wrapperNode=E}},u)}}])}(J.PureComponent),CHe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ta={isSsr:CHe(),get:function(e){return Ta[e]},set:function(e,n){if(typeof e=="string")Ta[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){Ta[i]=e[i]})}}};function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(r){mR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function THe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pY(r.key),r)}}function EHe(t,e,n){return e&&$He(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IHe(t,e,n){return e=nb(e),AHe(t,dY()?Reflect.construct(e,n||[],nb(t).constructor):e.apply(t,n))}function AHe(t,e){if(e&&(zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OHe(t)}function OHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dY=function(){return!!t})()}function nb(t){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nb(t)}function NHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oI(t,e)}function mR(t,e,n){return e=pY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pY(t){var e=PHe(t,"string");return zf(e)=="symbol"?e:e+""}function PHe(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RHe(t){return t.dataKey}function DHe(t,e){return X.isValidElement(t)?X.cloneElement(t,e):typeof t=="function"?X.createElement(t,e):X.createElement(uHe,e)}var Ao=function(t){function e(){return THe(this,e),IHe(this,e,arguments)}return NHe(e,t),EHe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,m=i.payload,_=i.payloadUniqBy,v=i.position,g=i.reverseDirection,x=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,k=m??[];h&&k.length&&(k=rY(m.filter(function(T){return T.value!=null&&(T.hide!==!0||r.props.includeHidden)}),_,RHe));var C=k.length>0;return X.createElement(kHe,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:f,active:s,coordinate:c,hasPayload:C,offset:p,position:v,reverseDirection:g,useTranslate3d:x,viewBox:b,wrapperStyle:w},DHe(u,Bz(Bz({},this.props),{},{payload:k})))}}])}(J.PureComponent);mR(Ao,"displayName","Tooltip");mR(Ao,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var MHe=na,LHe=function(){return MHe.Date.now()},FHe=LHe,BHe=/\s/;function zHe(t){for(var e=t.length;e--&&BHe.test(t.charAt(e)););return e}var jHe=zHe,VHe=jHe,UHe=/^\s+/;function WHe(t){return t&&t.slice(0,VHe(t)+1).replace(UHe,"")}var GHe=WHe,HHe=GHe,zz=cu,KHe=Ed,jz=NaN,qHe=/^[-+]0x[0-9a-f]+$/i,XHe=/^0b[01]+$/i,ZHe=/^0o[0-7]+$/i,YHe=parseInt;function JHe(t){if(typeof t=="number")return t;if(KHe(t))return jz;if(zz(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=zz(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=HHe(t);var n=XHe.test(t);return n||ZHe.test(t)?YHe(t.slice(2),n?2:8):qHe.test(t)?jz:+t}var mY=JHe,QHe=cu,HC=FHe,Vz=mY,e6e="Expected a function",t6e=Math.max,n6e=Math.min;function r6e(t,e,n){var r,i,s,o,a,l,u=0,c=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(e6e);e=Vz(e)||0,QHe(n)&&(c=!!n.leading,h="maxWait"in n,s=h?t6e(Vz(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function p(C){var T=r,E=i;return r=i=void 0,u=C,o=t.apply(E,T),o}function m(C){return u=C,a=setTimeout(g,e),c?p(C):o}function _(C){var T=C-l,E=C-u,A=e-T;return h?n6e(A,s-E):A}function v(C){var T=C-l,E=C-u;return l===void 0||T>=e||T<0||h&&E>=s}function g(){var C=HC();if(v(C))return x(C);a=setTimeout(g,_(C))}function x(C){return a=void 0,f&&r?p(C):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function w(){return a===void 0?o:x(HC())}function k(){var C=HC(),T=v(C);if(r=arguments,i=this,l=C,T){if(a===void 0)return m(l);if(h)return clearTimeout(a),a=setTimeout(g,e),p(l)}return a===void 0&&(a=setTimeout(g,e)),o}return k.cancel=b,k.flush=w,k}var i6e=r6e,s6e=i6e,o6e=cu,a6e="Expected a function";function l6e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(a6e);return o6e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),s6e(t,e,{leading:r,maxWait:e,trailing:i})}var u6e=l6e;const gY=Mt(u6e);function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function Uz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(n),!0).forEach(function(r){c6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c6e(t,e,n){return e=h6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h6e(t){var e=f6e(t,"string");return ag(e)=="symbol"?e:e+""}function f6e(t,e){if(ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d6e(t,e){return y6e(t)||g6e(t,e)||m6e(t,e)||p6e()}function p6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m6e(t,e){if(t){if(typeof t=="string")return Wz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wz(t,e)}}function Wz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function y6e(t){if(Array.isArray(t))return t}var v6e=J.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,o=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,p=t.children,m=t.debounce,_=m===void 0?0:m,v=t.id,g=t.className,x=t.onResize,b=t.style,w=b===void 0?{}:b,k=J.useRef(null),C=J.useRef();C.current=x,J.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var T=J.useState({containerWidth:i.width,containerHeight:i.height}),E=d6e(T,2),A=E[0],$=E[1],N=J.useCallback(function(M,B){$(function(z){var j=Math.round(M),U=Math.round(B);return z.containerWidth===j&&z.containerHeight===U?z:{containerWidth:j,containerHeight:U}})},[]);J.useEffect(function(){var M=function(W){var G,Y=W[0].contentRect,ee=Y.width,se=Y.height;N(ee,se),(G=C.current)===null||G===void 0||G.call(C,ee,se)};_>0&&(M=gY(M,_,{trailing:!0,leading:!1}));var B=new ResizeObserver(M),z=k.current.getBoundingClientRect(),j=z.width,U=z.height;return N(j,U),B.observe(k.current),function(){B.disconnect()}},[N,_]);var P=J.useMemo(function(){var M=A.containerWidth,B=A.containerHeight;if(M<0||B<0)return null;Ca(Zu(o)||Zu(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Ca(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=Zu(o)?M:o,j=Zu(l)?B:l;n&&n>0&&(z?j=z/n:j&&(z=j*n),f&&j>f&&(j=f)),Ca(z>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,j,o,l,c,h,n);var U=!Array.isArray(p)&&ka(p.type).endsWith("Chart");return X.Children.map(p,function(D){return X.isValidElement(D)?J.cloneElement(D,L0({width:z,height:j},U?{style:L0({height:"100%",width:"100%",maxHeight:j,maxWidth:z},D.props.style)}:{})):D})},[n,p,l,f,h,c,A,o]);return X.createElement("div",{id:v?"".concat(v):void 0,className:kt("recharts-responsive-container",g),style:L0(L0({},w),{},{width:o,height:l,minWidth:c,minHeight:h,maxHeight:f}),ref:k},P)}),yY=function(e){return null};yY.displayName="Cell";function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function Gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(n),!0).forEach(function(r){_6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _6e(t,e,n){return e=x6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x6e(t){var e=b6e(t,"string");return lg(e)=="symbol"?e:e+""}function b6e(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vh={widthCache:{},cacheCount:0},w6e=2e3,S6e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Hz="recharts_measurement_span";function k6e(t){var e=aI({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var dm=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ta.isSsr)return{width:0,height:0};var r=k6e(n),i=JSON.stringify({text:e,copyStyle:r});if(vh.widthCache[i])return vh.widthCache[i];try{var s=document.getElementById(Hz);s||(s=document.createElement("span"),s.setAttribute("id",Hz),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=aI(aI({},S6e),r);Object.assign(s.style,o),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return vh.widthCache[i]=l,++vh.cacheCount>w6e&&(vh.cacheCount=0,vh.widthCache={}),l}catch{return{width:0,height:0}}},C6e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function rb(t,e){return I6e(t)||E6e(t,e)||$6e(t,e)||T6e()}function T6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $6e(t,e){if(t){if(typeof t=="string")return Kz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kz(t,e)}}function Kz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function I6e(t){if(Array.isArray(t))return t}function A6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N6e(r.key),r)}}function O6e(t,e,n){return e&&qz(t.prototype,e),n&&qz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N6e(t){var e=P6e(t,"string");return ug(e)=="symbol"?e:e+""}function P6e(t,e){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Zz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R6e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,D6e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},M6e=Object.keys(vY),Kh="NaN";function L6e(t,e){return t*vY[e]}var F0=function(){function t(e,n){A6e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!R6e.test(n)&&(this.num=NaN,this.unit=""),M6e.includes(n)&&(this.num=L6e(e,n),this.unit="px")}return O6e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=D6e.exec(n))!==null&&r!==void 0?r:[],s=rb(i,3),o=s[1],a=s[2];return new t(parseFloat(o),a??"")}}])}();function _Y(t){if(t.includes(Kh))return Kh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Xz.exec(e))!==null&&n!==void 0?n:[],i=rb(r,4),s=i[1],o=i[2],a=i[3],l=F0.parse(s??""),u=F0.parse(a??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Kh;e=e.replace(Xz,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=Zz.exec(e))!==null&&h!==void 0?h:[],p=rb(f,4),m=p[1],_=p[2],v=p[3],g=F0.parse(m??""),x=F0.parse(v??""),b=_==="+"?g.add(x):g.subtract(x);if(b.isNaN())return Kh;e=e.replace(Zz,b.toString())}return e}var Yz=/\(([^()]*)\)/;function F6e(t){for(var e=t;e.includes("(");){var n=Yz.exec(e),r=rb(n,2),i=r[1];e=e.replace(Yz,_Y(i))}return e}function B6e(t){var e=t.replace(/\s+/g,"");return e=F6e(e),e=_Y(e),e}function z6e(t){try{return B6e(t)}catch{return Kh}}function KC(t){var e=z6e(t.slice(5,-1));return e===Kh?"":e}var j6e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],V6e=["dx","dy","angle","className","breakAll"];function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lI.apply(this,arguments)}function Jz(t,e){if(t==null)return{};var n=U6e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function U6e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qz(t,e){return K6e(t)||H6e(t,e)||G6e(t,e)||W6e()}function W6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G6e(t,e){if(t){if(typeof t=="string")return ej(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ej(t,e)}}function ej(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function K6e(t){if(Array.isArray(t))return t}var xY=/[ \f\n\r\t\v\u2028\u2029]+/,bY=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];mt(n)||(r?s=n.toString().split(""):s=n.toString().split(xY));var o=s.map(function(l){return{word:l,width:dm(l,i).width}}),a=r?0:dm("",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},q6e=function(e,n,r,i,s){var o=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=we(o),h=a,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(j,U){var D=U.word,W=U.width,G=j[j.length-1];if(G&&(i==null||s||G.width+W+r<Number(i)))G.words.push(D),G.width+=W+r;else{var Y={words:[D],width:W};j.push(Y)}return j},[])},p=f(n),m=function(z){return z.reduce(function(j,U){return j.width>U.width?j:U})};if(!c)return p;for(var _="",v=function(z){var j=h.slice(0,z),U=bY({breakAll:u,style:l,children:j+_}).wordsWithComputedWidth,D=f(U),W=D.length>o||m(D).width>Number(i);return[W,D]},g=0,x=h.length-1,b=0,w;g<=x&&b<=h.length-1;){var k=Math.floor((g+x)/2),C=k-1,T=v(C),E=Qz(T,2),A=E[0],$=E[1],N=v(k),P=Qz(N,1),M=P[0];if(!A&&!M&&(g=k+1),A&&M&&(x=k-1),!A&&M){w=$;break}b++}return w||p},tj=function(e){var n=mt(e)?[]:e.toString().split(xY);return[{words:n}]},X6e=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Ta.isSsr){var l,u,c=bY({breakAll:o,children:i,style:s});if(c){var h=c.wordsWithComputedWidth,f=c.spaceWidth;l=h,u=f}else return tj(i);return q6e({breakAll:o,children:i,maxLines:a,style:s},l,u,n,r)}return tj(i)},nj="#808080",ib=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,h=c===void 0?!1:c,f=e.textAnchor,p=f===void 0?"start":f,m=e.verticalAnchor,_=m===void 0?"end":m,v=e.fill,g=v===void 0?nj:v,x=Jz(e,j6e),b=J.useMemo(function(){return X6e({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),w=x.dx,k=x.dy,C=x.angle,T=x.className,E=x.breakAll,A=Jz(x,V6e);if(!Yn(r)||!Yn(s))return null;var $=r+(we(w)?w:0),N=s+(we(k)?k:0),P;switch(_){case"start":P=KC("calc(".concat(u,")"));break;case"middle":P=KC("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:P=KC("calc(".concat(b.length-1," * -").concat(a,")"));break}var M=[];if(h){var B=b[0].width,z=x.width;M.push("scale(".concat((we(z)?z/B:1)/B,")"))}return C&&M.push("rotate(".concat(C,", ").concat($,", ").concat(N,")")),M.length&&(A.transform=M.join(" ")),X.createElement("text",lI({},ht(A,!0),{x:$,y:N,className:kt("recharts-text",T),textAnchor:p,fill:g.includes("url")?nj:g}),b.map(function(j,U){var D=j.words.join(E?"":" ");return X.createElement("tspan",{x:$,dy:U===0?P:a,key:"".concat(D,"-").concat(U)},D)}))};function Ll(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Z6e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gR(t){let e,n,r;t.length!==2?(e=Ll,n=(a,l)=>Ll(t(a),l),r=(a,l)=>t(a)-l):(e=t===Ll||t===Z6e?t:Y6e,n=t,r=t);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(a[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(a[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function o(a,l,u=0,c=a.length){const h=i(a,l,u,c-1);return h>u&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function Y6e(){return 0}function wY(t){return t===null?NaN:+t}function*J6e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Q6e=gR(Ll),Cv=Q6e.right;gR(wY).center;class rj extends Map{constructor(e,n=n8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ij(this,e))}has(e){return super.has(ij(this,e))}set(e,n){return super.set(e8e(this,e),n)}delete(e){return super.delete(t8e(this,e))}}function ij({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function e8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function t8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function n8e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function r8e(t=Ll){if(t===Ll)return SY;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function SY(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const i8e=Math.sqrt(50),s8e=Math.sqrt(10),o8e=Math.sqrt(2);function sb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=i8e?10:s>=s8e?5:s>=o8e?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?sb(t,e,n*2):[a,l,u]}function uI(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?sb(e,t,n):sb(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function cI(t,e,n){return e=+e,t=+t,n=+n,sb(t,e,n)[2]}function hI(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?cI(e,t,n):cI(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kY(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?SY:r8e(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*h/l+f)),m=Math.min(r,Math.floor(e+(l-u)*h/l+f));kY(t,e,p,m,i)}const s=t[e];let o=n,a=r;for(xp(t,n,e),i(t[r],s)>0&&xp(t,n,r);o<a;){for(xp(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?xp(t,n,a):(++a,xp(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function xp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function a8e(t,e,n){if(t=Float64Array.from(J6e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return oj(t);if(e>=1)return sj(t);var r,i=(r-1)*e,s=Math.floor(i),o=sj(kY(t,s).subarray(0,s+1)),a=oj(t.subarray(s+1));return o+(a-o)*(i-s)}}function l8e(t,e,n=wY){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function u8e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Fs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ya(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fI=Symbol("implicit");function yR(){var t=new rj,e=[],n=[],r=fI;function i(s){let o=t.get(s);if(o===void 0){if(r!==fI)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new rj;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return yR(e,n).unknown(r)},Fs.apply(i,arguments),i}function cg(){var t=yR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function h(){var f=e().length,p=i<r,m=p?i:r,_=p?r:i;s=(_-m)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),m+=(_-m-s*(f-l))*c,o=s*(1-l),a&&(m=Math.round(m),o=Math.round(o));var v=u8e(f).map(function(g){return m+s*g});return n(p?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,h()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return cg(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Fs.apply(h(),arguments)}function CY(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return CY(e())},t}function pm(){return CY(cg.apply(null,arguments).paddingInner(1))}function vR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function TY(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tv(){}var hg=.7,ob=1/hg,cf="\\s*([+-]?\\d+)\\s*",fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c8e=/^#([0-9a-f]{3,8})$/,h8e=new RegExp(`^rgb\\(${cf},${cf},${cf}\\)$`),f8e=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),d8e=new RegExp(`^rgba\\(${cf},${cf},${cf},${fg}\\)$`),p8e=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${fg}\\)$`),m8e=new RegExp(`^hsl\\(${fg},${Ko},${Ko}\\)$`),g8e=new RegExp(`^hsla\\(${fg},${Ko},${Ko},${fg}\\)$`),aj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vR(Tv,dg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:lj,formatHex:lj,formatHex8:y8e,formatHsl:v8e,formatRgb:uj,toString:uj});function lj(){return this.rgb().formatHex()}function y8e(){return this.rgb().formatHex8()}function v8e(){return $Y(this).formatHsl()}function uj(){return this.rgb().formatRgb()}function dg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=c8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cj(e):n===3?new wi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?B0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?B0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=h8e.exec(t))?new wi(e[1],e[2],e[3],1):(e=f8e.exec(t))?new wi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=d8e.exec(t))?B0(e[1],e[2],e[3],e[4]):(e=p8e.exec(t))?B0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=m8e.exec(t))?dj(e[1],e[2]/100,e[3]/100,1):(e=g8e.exec(t))?dj(e[1],e[2]/100,e[3]/100,e[4]):aj.hasOwnProperty(t)?cj(aj[t]):t==="transparent"?new wi(NaN,NaN,NaN,0):null}function cj(t){return new wi(t>>16&255,t>>8&255,t&255,1)}function B0(t,e,n,r){return r<=0&&(t=e=n=NaN),new wi(t,e,n,r)}function _8e(t){return t instanceof Tv||(t=dg(t)),t?(t=t.rgb(),new wi(t.r,t.g,t.b,t.opacity)):new wi}function dI(t,e,n,r){return arguments.length===1?_8e(t):new wi(t,e,n,r??1)}function wi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vR(wi,dI,TY(Tv,{brighter(t){return t=t==null?ob:Math.pow(ob,t),new wi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hg:Math.pow(hg,t),new wi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new wi(uc(this.r),uc(this.g),uc(this.b),ab(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hj,formatHex:hj,formatHex8:x8e,formatRgb:fj,toString:fj}));function hj(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}`}function x8e(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}${Yu((isNaN(this.opacity)?1:this.opacity)*255)}`}function fj(){const t=ab(this.opacity);return`${t===1?"rgb(":"rgba("}${uc(this.r)}, ${uc(this.g)}, ${uc(this.b)}${t===1?")":`, ${t})`}`}function ab(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function uc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yu(t){return t=uc(t),(t<16?"0":"")+t.toString(16)}function dj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new to(t,e,n,r)}function $Y(t){if(t instanceof to)return new to(t.h,t.s,t.l,t.opacity);if(t instanceof Tv||(t=dg(t)),!t)return new to;if(t instanceof to)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new to(o,a,l,t.opacity)}function b8e(t,e,n,r){return arguments.length===1?$Y(t):new to(t,e,n,r??1)}function to(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vR(to,b8e,TY(Tv,{brighter(t){return t=t==null?ob:Math.pow(ob,t),new to(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hg:Math.pow(hg,t),new to(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new wi(qC(t>=240?t-240:t+120,i,r),qC(t,i,r),qC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new to(pj(this.h),z0(this.s),z0(this.l),ab(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ab(this.opacity);return`${t===1?"hsl(":"hsla("}${pj(this.h)}, ${z0(this.s)*100}%, ${z0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pj(t){return t=(t||0)%360,t<0?t+360:t}function z0(t){return Math.max(0,Math.min(1,t||0))}function qC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _R=t=>()=>t;function w8e(t,e){return function(n){return t+n*e}}function S8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function k8e(t){return(t=+t)==1?EY:function(e,n){return n-e?S8e(e,n,t):_R(isNaN(e)?n:e)}}function EY(t,e){var n=e-t;return n?w8e(t,n):_R(isNaN(t)?e:t)}const mj=function t(e){var n=k8e(e);function r(i,s){var o=n((i=dI(i)).r,(s=dI(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=EY(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function C8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function T8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $8e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ld(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function E8e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function lb(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function I8e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ld(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var pI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XC=new RegExp(pI.source,"g");function A8e(t){return function(){return t}}function O8e(t){return function(e){return t(e)+""}}function N8e(t,e){var n=pI.lastIndex=XC.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=pI.exec(t))&&(i=XC.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:lb(r,i)})),n=XC.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?O8e(l[0].x):A8e(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}function Ld(t,e){var n=typeof e,r;return e==null||n==="boolean"?_R(e):(n==="number"?lb:n==="string"?(r=dg(e))?(e=r,mj):N8e:e instanceof dg?mj:e instanceof Date?E8e:T8e(e)?C8e:Array.isArray(e)?$8e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?I8e:lb)(t,e)}function xR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function P8e(t,e){e===void 0&&(e=t,t=Ld);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function R8e(t){return function(){return t}}function ub(t){return+t}var gj=[0,1];function Qr(t){return t}function mI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:R8e(isNaN(e)?NaN:.5)}function D8e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function M8e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=mI(i,r),s=n(o,s)):(r=mI(r,i),s=n(s,o)),function(a){return s(r(a))}}function L8e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=mI(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Cv(t,a,1,r)-1;return s[l](i[l](a))}}function $v(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function SS(){var t=gj,e=gj,n=Ld,r,i,s,o=Qr,a,l,u;function c(){var f=Math.min(t.length,e.length);return o!==Qr&&(o=D8e(t[0],t[f-1])),a=f>2?L8e:M8e,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((u||(u=a(e,t.map(r),lb)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,ub),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=xR,c()},h.clamp=function(f){return arguments.length?(o=f?!0:Qr,c()):o!==Qr},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,p){return r=f,i=p,c()}}function bR(){return SS()(Qr,Qr)}function F8e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function jf(t){return t=cb(Math.abs(t)),t?t[1]:NaN}function B8e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function z8e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var j8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pg(t){if(!(e=j8e.exec(t)))throw new Error("invalid format: "+t);var e;return new wR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pg.prototype=wR.prototype;function wR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function V8e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var IY;function U8e(t,e){var n=cb(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(IY=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+cb(t,Math.max(0,e+s-1))[0]}function yj(t,e){var n=cb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vj={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:F8e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yj(t*100,e),r:yj,s:U8e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _j(t){return t}var xj=Array.prototype.map,bj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function W8e(t){var e=t.grouping===void 0||t.thousands===void 0?_j:B8e(xj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?_j:z8e(xj.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=pg(h);var f=h.fill,p=h.align,m=h.sign,_=h.symbol,v=h.zero,g=h.width,x=h.comma,b=h.precision,w=h.trim,k=h.type;k==="n"?(x=!0,k="g"):vj[k]||(b===void 0&&(b=12),w=!0,k="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var C=_==="$"?n:_==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",T=_==="$"?r:/[%p]/.test(k)?o:"",E=vj[k],A=/[defgprs%]/.test(k);b=b===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(N){var P=C,M=T,B,z,j;if(k==="c")M=E(N)+M,N="";else{N=+N;var U=N<0||1/N<0;if(N=isNaN(N)?l:E(Math.abs(N),b),w&&(N=V8e(N)),U&&+N==0&&m!=="+"&&(U=!1),P=(U?m==="("?m:a:m==="-"||m==="("?"":m)+P,M=(k==="s"?bj[8+IY/3]:"")+M+(U&&m==="("?")":""),A){for(B=-1,z=N.length;++B<z;)if(j=N.charCodeAt(B),48>j||j>57){M=(j===46?i+N.slice(B+1):N.slice(B))+M,N=N.slice(0,B);break}}}x&&!v&&(N=e(N,1/0));var D=P.length+N.length+M.length,W=D<g?new Array(g-D+1).join(f):"";switch(x&&v&&(N=e(W+N,W.length?g-M.length:1/0),W=""),p){case"<":N=P+N+M+W;break;case"=":N=P+W+N+M;break;case"^":N=W.slice(0,D=W.length>>1)+P+N+M+W.slice(D);break;default:N=W+P+N+M;break}return s(N)}return $.toString=function(){return h+""},$}function c(h,f){var p=u((h=pg(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(jf(f)/3)))*3,_=Math.pow(10,-m),v=bj[8+m/3];return function(g){return p(_*g)+v}}return{format:u,formatPrefix:c}}var j0,SR,AY;G8e({thousands:",",grouping:[3],currency:["$",""]});function G8e(t){return j0=W8e(t),SR=j0.format,AY=j0.formatPrefix,j0}function H8e(t){return Math.max(0,-jf(Math.abs(t)))}function K8e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jf(e)/3)))*3-jf(Math.abs(t)))}function q8e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jf(e)-jf(t))+1}function OY(t,e,n,r){var i=hI(t,e,n),s;switch(r=pg(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=K8e(i,o))&&(r.precision=s),AY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=q8e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=H8e(i))&&(r.precision=s-(r.type==="%")*2);break}}return SR(r)}function fu(t){var e=t.domain;return t.ticks=function(n){var r=e();return uI(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return OY(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=cI(o,a,n),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function hb(){var t=bR();return t.copy=function(){return $v(t,hb())},Fs.apply(t,arguments),fu(t)}function NY(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ub),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return NY(t).unknown(e)},t=arguments.length?Array.from(t,ub):[0,1],fu(n)}function PY(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function wj(t){return Math.log(t)}function Sj(t){return Math.exp(t)}function X8e(t){return-Math.log(-t)}function Z8e(t){return-Math.exp(-t)}function Y8e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function J8e(t){return t===10?Y8e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Q8e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function kj(t){return(e,n)=>-t(-e,n)}function kR(t){const e=t(wj,Sj),n=e.domain;let r=10,i,s;function o(){return i=Q8e(r),s=J8e(r),n()[0]<0?(i=kj(i),s=kj(s),t(X8e,Z8e)):t(wj,Sj),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const h=c<u;h&&([u,c]=[c,u]);let f=i(u),p=i(c),m,_;const v=a==null?10:+a;let g=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(m=1;m<r;++m)if(_=f<0?m/s(-f):m*s(f),!(_<u)){if(_>c)break;g.push(_)}}else for(;f<=p;++f)for(m=r-1;m>=1;--m)if(_=f>0?m/s(-f):m*s(f),!(_<u)){if(_>c)break;g.push(_)}g.length*2<v&&(g=uI(u,c,v))}else g=uI(f,p,Math.min(p-f,v)).map(s);return h?g.reverse():g},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=pg(l)).precision==null&&(l.trim=!0),l=SR(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let h=c/s(Math.round(i(c)));return h*r<r-.5&&(h*=r),h<=u?l(c):""}},e.nice=()=>n(PY(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function RY(){const t=kR(SS()).domain([1,10]);return t.copy=()=>$v(t,RY()).base(t.base()),Fs.apply(t,arguments),t}function Cj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Tj(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function CR(t){var e=1,n=t(Cj(e),Tj(e));return n.constant=function(r){return arguments.length?t(Cj(e=+r),Tj(e)):e},fu(n)}function DY(){var t=CR(SS());return t.copy=function(){return $v(t,DY()).constant(t.constant())},Fs.apply(t,arguments)}function $j(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function eKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tKe(t){return t<0?-t*t:t*t}function TR(t){var e=t(Qr,Qr),n=1;function r(){return n===1?t(Qr,Qr):n===.5?t(eKe,tKe):t($j(n),$j(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},fu(e)}function $R(){var t=TR(SS());return t.copy=function(){return $v(t,$R()).exponent(t.exponent())},Fs.apply(t,arguments),t}function nKe(){return $R.apply(null,arguments).exponent(.5)}function Ej(t){return Math.sign(t)*t*t}function rKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function MY(){var t=bR(),e=[0,1],n=!1,r;function i(s){var o=rKe(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(Ej(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,ub)).map(Ej)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return MY(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Fs.apply(i,arguments),fu(i)}function LY(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=l8e(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Cv(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ll),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return LY().domain(t).range(e).unknown(r)},Fs.apply(s,arguments)}function FY(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Cv(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return FY().domain([t,e]).range(i).unknown(s)},Fs.apply(fu(o),arguments)}function BY(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Cv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return BY().domain(t).range(e).unknown(n)},Fs.apply(i,arguments)}const ZC=new Date,YC=new Date;function er(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>er(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(ZC.setTime(+s),YC.setTime(+o),t(ZC),t(YC),Math.floor(n(ZC,YC))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const fb=er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);fb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):fb);fb.range;const ya=1e3,Cs=ya*60,va=Cs*60,La=va*24,ER=La*7,Ij=La*30,JC=La*365,Ju=er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ya)},(t,e)=>(e-t)/ya,t=>t.getUTCSeconds());Ju.range;const IR=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ya)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getMinutes());IR.range;const AR=er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getUTCMinutes());AR.range;const OR=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ya-t.getMinutes()*Cs)},(t,e)=>{t.setTime(+t+e*va)},(t,e)=>(e-t)/va,t=>t.getHours());OR.range;const NR=er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*va)},(t,e)=>(e-t)/va,t=>t.getUTCHours());NR.range;const Ev=er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cs)/La,t=>t.getDate()-1);Ev.range;const kS=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/La,t=>t.getUTCDate()-1);kS.range;const zY=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/La,t=>Math.floor(t/La));zY.range;function Jc(t){return er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Cs)/ER)}const CS=Jc(0),db=Jc(1),iKe=Jc(2),sKe=Jc(3),Vf=Jc(4),oKe=Jc(5),aKe=Jc(6);CS.range;db.range;iKe.range;sKe.range;Vf.range;oKe.range;aKe.range;function Qc(t){return er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ER)}const TS=Qc(0),pb=Qc(1),lKe=Qc(2),uKe=Qc(3),Uf=Qc(4),cKe=Qc(5),hKe=Qc(6);TS.range;pb.range;lKe.range;uKe.range;Uf.range;cKe.range;hKe.range;const PR=er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());PR.range;const RR=er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());RR.range;const Fa=er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fa.range;const Ba=er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ba.range;function jY(t,e,n,r,i,s){const o=[[Ju,1,ya],[Ju,5,5*ya],[Ju,15,15*ya],[Ju,30,30*ya],[s,1,Cs],[s,5,5*Cs],[s,15,15*Cs],[s,30,30*Cs],[i,1,va],[i,3,3*va],[i,6,6*va],[i,12,12*va],[r,1,La],[r,2,2*La],[n,1,ER],[e,1,Ij],[e,3,3*Ij],[t,1,JC]];function a(u,c,h){const f=c<u;f&&([u,c]=[c,u]);const p=h&&typeof h.range=="function"?h:l(u,c,h),m=p?p.range(u,+c+1):[];return f?m.reverse():m}function l(u,c,h){const f=Math.abs(c-u)/h,p=gR(([,,v])=>v).right(o,f);if(p===o.length)return t.every(hI(u/JC,c/JC,h));if(p===0)return fb.every(Math.max(hI(u,c,h),1));const[m,_]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return m.every(_)}return[a,l]}const[fKe,dKe]=jY(Ba,RR,TS,zY,NR,AR),[pKe,mKe]=jY(Fa,PR,CS,Ev,OR,IR);function QC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function gKe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=wp(i),c=Sp(i),h=wp(s),f=Sp(s),p=wp(o),m=Sp(o),_=wp(a),v=Sp(a),g=wp(l),x=Sp(l),b={a:U,A:D,b:W,B:G,c:null,d:Dj,e:Dj,f:BKe,g:XKe,G:YKe,H:MKe,I:LKe,j:FKe,L:VY,m:zKe,M:jKe,p:Y,q:ee,Q:Fj,s:Bj,S:VKe,u:UKe,U:WKe,V:GKe,w:HKe,W:KKe,x:null,X:null,y:qKe,Y:ZKe,Z:JKe,"%":Lj},w={a:se,A:fe,b:le,B:de,c:null,d:Mj,e:Mj,f:nqe,g:fqe,G:pqe,H:QKe,I:eqe,j:tqe,L:WY,m:rqe,M:iqe,p:Se,q:Te,Q:Fj,s:Bj,S:sqe,u:oqe,U:aqe,V:lqe,w:uqe,W:cqe,x:null,X:null,y:hqe,Y:dqe,Z:mqe,"%":Lj},k={a:$,A:N,b:P,B:M,c:B,d:Pj,e:Pj,f:NKe,g:Nj,G:Oj,H:Rj,I:Rj,j:EKe,L:OKe,m:$Ke,M:IKe,p:A,q:TKe,Q:RKe,s:DKe,S:AKe,u:bKe,U:wKe,V:SKe,w:xKe,W:kKe,x:z,X:j,y:Nj,Y:Oj,Z:CKe,"%":PKe};b.x=C(n,b),b.X=C(r,b),b.c=C(e,b),w.x=C(n,w),w.X=C(r,w),w.c=C(e,w);function C(pe,xe){return function(be){var he=[],je=-1,Me=0,We=pe.length,Ve,Ze,ot;for(be instanceof Date||(be=new Date(+be));++je<We;)pe.charCodeAt(je)===37&&(he.push(pe.slice(Me,je)),(Ze=Aj[Ve=pe.charAt(++je)])!=null?Ve=pe.charAt(++je):Ze=Ve==="e"?" ":"0",(ot=xe[Ve])&&(Ve=ot(be,Ze)),he.push(Ve),Me=je+1);return he.push(pe.slice(Me,je)),he.join("")}}function T(pe,xe){return function(be){var he=bp(1900,void 0,1),je=E(he,pe,be+="",0),Me,We;if(je!=be.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(xe&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Me=eT(bp(he.y,0,1)),We=Me.getUTCDay(),Me=We>4||We===0?pb.ceil(Me):pb(Me),Me=kS.offset(Me,(he.V-1)*7),he.y=Me.getUTCFullYear(),he.m=Me.getUTCMonth(),he.d=Me.getUTCDate()+(he.w+6)%7):(Me=QC(bp(he.y,0,1)),We=Me.getDay(),Me=We>4||We===0?db.ceil(Me):db(Me),Me=Ev.offset(Me,(he.V-1)*7),he.y=Me.getFullYear(),he.m=Me.getMonth(),he.d=Me.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),We="Z"in he?eT(bp(he.y,0,1)).getUTCDay():QC(bp(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(We+5)%7:he.w+he.U*7-(We+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,eT(he)):QC(he)}}function E(pe,xe,be,he){for(var je=0,Me=xe.length,We=be.length,Ve,Ze;je<Me;){if(he>=We)return-1;if(Ve=xe.charCodeAt(je++),Ve===37){if(Ve=xe.charAt(je++),Ze=k[Ve in Aj?xe.charAt(je++):Ve],!Ze||(he=Ze(pe,be,he))<0)return-1}else if(Ve!=be.charCodeAt(he++))return-1}return he}function A(pe,xe,be){var he=u.exec(xe.slice(be));return he?(pe.p=c.get(he[0].toLowerCase()),be+he[0].length):-1}function $(pe,xe,be){var he=p.exec(xe.slice(be));return he?(pe.w=m.get(he[0].toLowerCase()),be+he[0].length):-1}function N(pe,xe,be){var he=h.exec(xe.slice(be));return he?(pe.w=f.get(he[0].toLowerCase()),be+he[0].length):-1}function P(pe,xe,be){var he=g.exec(xe.slice(be));return he?(pe.m=x.get(he[0].toLowerCase()),be+he[0].length):-1}function M(pe,xe,be){var he=_.exec(xe.slice(be));return he?(pe.m=v.get(he[0].toLowerCase()),be+he[0].length):-1}function B(pe,xe,be){return E(pe,e,xe,be)}function z(pe,xe,be){return E(pe,n,xe,be)}function j(pe,xe,be){return E(pe,r,xe,be)}function U(pe){return o[pe.getDay()]}function D(pe){return s[pe.getDay()]}function W(pe){return l[pe.getMonth()]}function G(pe){return a[pe.getMonth()]}function Y(pe){return i[+(pe.getHours()>=12)]}function ee(pe){return 1+~~(pe.getMonth()/3)}function se(pe){return o[pe.getUTCDay()]}function fe(pe){return s[pe.getUTCDay()]}function le(pe){return l[pe.getUTCMonth()]}function de(pe){return a[pe.getUTCMonth()]}function Se(pe){return i[+(pe.getUTCHours()>=12)]}function Te(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var xe=C(pe+="",b);return xe.toString=function(){return pe},xe},parse:function(pe){var xe=T(pe+="",!1);return xe.toString=function(){return pe},xe},utcFormat:function(pe){var xe=C(pe+="",w);return xe.toString=function(){return pe},xe},utcParse:function(pe){var xe=T(pe+="",!0);return xe.toString=function(){return pe},xe}}}var Aj={"-":"",_:" ",0:"0"},fr=/^\s*\d+/,yKe=/^%/,vKe=/[\\^$*+?|[\]().{}]/g;function Tt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function _Ke(t){return t.replace(vKe,"\\$&")}function wp(t){return new RegExp("^(?:"+t.map(_Ke).join("|")+")","i")}function Sp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function xKe(t,e,n){var r=fr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bKe(t,e,n){var r=fr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function wKe(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function SKe(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kKe(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Oj(t,e,n){var r=fr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Nj(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function CKe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function TKe(t,e,n){var r=fr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $Ke(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Pj(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function EKe(t,e,n){var r=fr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Rj(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function IKe(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function AKe(t,e,n){var r=fr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function OKe(t,e,n){var r=fr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function NKe(t,e,n){var r=fr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PKe(t,e,n){var r=yKe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function RKe(t,e,n){var r=fr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function DKe(t,e,n){var r=fr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Dj(t,e){return Tt(t.getDate(),e,2)}function MKe(t,e){return Tt(t.getHours(),e,2)}function LKe(t,e){return Tt(t.getHours()%12||12,e,2)}function FKe(t,e){return Tt(1+Ev.count(Fa(t),t),e,3)}function VY(t,e){return Tt(t.getMilliseconds(),e,3)}function BKe(t,e){return VY(t,e)+"000"}function zKe(t,e){return Tt(t.getMonth()+1,e,2)}function jKe(t,e){return Tt(t.getMinutes(),e,2)}function VKe(t,e){return Tt(t.getSeconds(),e,2)}function UKe(t){var e=t.getDay();return e===0?7:e}function WKe(t,e){return Tt(CS.count(Fa(t)-1,t),e,2)}function UY(t){var e=t.getDay();return e>=4||e===0?Vf(t):Vf.ceil(t)}function GKe(t,e){return t=UY(t),Tt(Vf.count(Fa(t),t)+(Fa(t).getDay()===4),e,2)}function HKe(t){return t.getDay()}function KKe(t,e){return Tt(db.count(Fa(t)-1,t),e,2)}function qKe(t,e){return Tt(t.getFullYear()%100,e,2)}function XKe(t,e){return t=UY(t),Tt(t.getFullYear()%100,e,2)}function ZKe(t,e){return Tt(t.getFullYear()%1e4,e,4)}function YKe(t,e){var n=t.getDay();return t=n>=4||n===0?Vf(t):Vf.ceil(t),Tt(t.getFullYear()%1e4,e,4)}function JKe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Tt(e/60|0,"0",2)+Tt(e%60,"0",2)}function Mj(t,e){return Tt(t.getUTCDate(),e,2)}function QKe(t,e){return Tt(t.getUTCHours(),e,2)}function eqe(t,e){return Tt(t.getUTCHours()%12||12,e,2)}function tqe(t,e){return Tt(1+kS.count(Ba(t),t),e,3)}function WY(t,e){return Tt(t.getUTCMilliseconds(),e,3)}function nqe(t,e){return WY(t,e)+"000"}function rqe(t,e){return Tt(t.getUTCMonth()+1,e,2)}function iqe(t,e){return Tt(t.getUTCMinutes(),e,2)}function sqe(t,e){return Tt(t.getUTCSeconds(),e,2)}function oqe(t){var e=t.getUTCDay();return e===0?7:e}function aqe(t,e){return Tt(TS.count(Ba(t)-1,t),e,2)}function GY(t){var e=t.getUTCDay();return e>=4||e===0?Uf(t):Uf.ceil(t)}function lqe(t,e){return t=GY(t),Tt(Uf.count(Ba(t),t)+(Ba(t).getUTCDay()===4),e,2)}function uqe(t){return t.getUTCDay()}function cqe(t,e){return Tt(pb.count(Ba(t)-1,t),e,2)}function hqe(t,e){return Tt(t.getUTCFullYear()%100,e,2)}function fqe(t,e){return t=GY(t),Tt(t.getUTCFullYear()%100,e,2)}function dqe(t,e){return Tt(t.getUTCFullYear()%1e4,e,4)}function pqe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Uf(t):Uf.ceil(t),Tt(t.getUTCFullYear()%1e4,e,4)}function mqe(){return"+0000"}function Lj(){return"%"}function Fj(t){return+t}function Bj(t){return Math.floor(+t/1e3)}var _h,HY,KY;gqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gqe(t){return _h=gKe(t),HY=_h.format,_h.parse,KY=_h.utcFormat,_h.utcParse,_h}function yqe(t){return new Date(t)}function vqe(t){return t instanceof Date?+t:+new Date(+t)}function DR(t,e,n,r,i,s,o,a,l,u){var c=bR(),h=c.invert,f=c.domain,p=u(".%L"),m=u(":%S"),_=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),x=u("%b %d"),b=u("%B"),w=u("%Y");function k(C){return(l(C)<C?p:a(C)<C?m:o(C)<C?_:s(C)<C?v:r(C)<C?i(C)<C?g:x:n(C)<C?b:w)(C)}return c.invert=function(C){return new Date(h(C))},c.domain=function(C){return arguments.length?f(Array.from(C,vqe)):f().map(yqe)},c.ticks=function(C){var T=f();return t(T[0],T[T.length-1],C??10)},c.tickFormat=function(C,T){return T==null?k:u(T)},c.nice=function(C){var T=f();return(!C||typeof C.range!="function")&&(C=e(T[0],T[T.length-1],C??10)),C?f(PY(T,C)):c},c.copy=function(){return $v(c,DR(t,e,n,r,i,s,o,a,l,u))},c}function _qe(){return Fs.apply(DR(pKe,mKe,Fa,PR,CS,Ev,OR,IR,Ju,HY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xqe(){return Fs.apply(DR(fKe,dKe,Ba,RR,TS,kS,NR,AR,Ju,KY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $S(){var t=0,e=1,n,r,i,s,o=Qr,a=!1,l;function u(h){return h==null||isNaN(h=+h)?l:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(a=!!h,u):a},u.interpolator=function(h){return arguments.length?(o=h,u):o};function c(h){return function(f){var p,m;return arguments.length?([p,m]=f,o=h(p,m),u):[o(0),o(1)]}}return u.range=c(Ld),u.rangeRound=c(xR),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function du(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function qY(){var t=fu($S()(Qr));return t.copy=function(){return du(t,qY())},Ya.apply(t,arguments)}function XY(){var t=kR($S()).domain([1,10]);return t.copy=function(){return du(t,XY()).base(t.base())},Ya.apply(t,arguments)}function ZY(){var t=CR($S());return t.copy=function(){return du(t,ZY()).constant(t.constant())},Ya.apply(t,arguments)}function MR(){var t=TR($S());return t.copy=function(){return du(t,MR()).exponent(t.exponent())},Ya.apply(t,arguments)}function bqe(){return MR.apply(null,arguments).exponent(.5)}function YY(){var t=[],e=Qr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Cv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ll),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>a8e(t,s/r))},n.copy=function(){return YY(e).domain(t)},Ya.apply(n,arguments)}function ES(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=Qr,c,h=!1,f;function p(_){return isNaN(_=+_)?f:(_=.5+((_=+c(_))-s)*(r*_<r*s?a:l),u(h?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e,n]=_,i=c(t=+t),s=c(e=+e),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,p):[t,e,n]},p.clamp=function(_){return arguments.length?(h=!!_,p):h},p.interpolator=function(_){return arguments.length?(u=_,p):u};function m(_){return function(v){var g,x,b;return arguments.length?([g,x,b]=v,u=P8e(_,[g,x,b]),p):[u(0),u(.5),u(1)]}}return p.range=m(Ld),p.rangeRound=m(xR),p.unknown=function(_){return arguments.length?(f=_,p):f},function(_){return c=_,i=_(t),s=_(e),o=_(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,p}}function JY(){var t=fu(ES()(Qr));return t.copy=function(){return du(t,JY())},Ya.apply(t,arguments)}function QY(){var t=kR(ES()).domain([.1,1,10]);return t.copy=function(){return du(t,QY()).base(t.base())},Ya.apply(t,arguments)}function eJ(){var t=CR(ES());return t.copy=function(){return du(t,eJ()).constant(t.constant())},Ya.apply(t,arguments)}function LR(){var t=TR(ES());return t.copy=function(){return du(t,LR()).exponent(t.exponent())},Ya.apply(t,arguments)}function wqe(){return LR.apply(null,arguments).exponent(.5)}const zj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cg,scaleDiverging:JY,scaleDivergingLog:QY,scaleDivergingPow:LR,scaleDivergingSqrt:wqe,scaleDivergingSymlog:eJ,scaleIdentity:NY,scaleImplicit:fI,scaleLinear:hb,scaleLog:RY,scaleOrdinal:yR,scalePoint:pm,scalePow:$R,scaleQuantile:LY,scaleQuantize:FY,scaleRadial:MY,scaleSequential:qY,scaleSequentialLog:XY,scaleSequentialPow:MR,scaleSequentialQuantile:YY,scaleSequentialSqrt:bqe,scaleSequentialSymlog:ZY,scaleSqrt:nKe,scaleSymlog:DY,scaleThreshold:BY,scaleTime:_qe,scaleUtc:xqe,tickFormat:OY},Symbol.toStringTag,{value:"Module"}));var Sqe=Ed;function kqe(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],o=e(s);if(o!=null&&(a===void 0?o===o&&!Sqe(o):n(o,a)))var a=o,l=s}return l}var tJ=kqe;function Cqe(t,e){return t>e}var Tqe=Cqe,$qe=tJ,Eqe=Tqe,Iqe=Md;function Aqe(t){return t&&t.length?$qe(t,Iqe,Eqe):void 0}var Oqe=Aqe;const bl=Mt(Oqe);function Nqe(t,e){return t<e}var Pqe=Nqe,Rqe=tJ,Dqe=Pqe,Mqe=Md;function Lqe(t){return t&&t.length?Rqe(t,Mqe,Dqe):void 0}var Fqe=Lqe;const IS=Mt(Fqe);var Bqe=YP,zqe=hu,jqe=uY,Vqe=Ai;function Uqe(t,e){var n=Vqe(t)?Bqe:jqe;return n(t,zqe(e))}var Wqe=Uqe,Gqe=aY,Hqe=Wqe;function Kqe(t,e){return Gqe(Hqe(t,e),1)}var qqe=Kqe;const Xqe=Mt(qqe);var Zqe=fR;function Yqe(t,e){return Zqe(t,e)}var Jqe=Yqe;const mg=Mt(Jqe);var Fd=1e9,Qqe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BR,cn=!0,Ps="[DecimalError] ",cc=Ps+"Invalid argument: ",FR=Ps+"Exponent out of range: ",Bd=Math.floor,Ru=Math.pow,e9e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui,ir=1e7,Qt=7,nJ=9007199254740991,mb=Bd(nJ/Qt),Ne={};Ne.absoluteValue=Ne.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ne.comparedTo=Ne.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Qt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ne.dividedBy=Ne.div=function(t){return $a(this,new this.constructor(t))};Ne.dividedToIntegerBy=Ne.idiv=function(t){var e=this,n=e.constructor;return Bt($a(e,new n(t),0,1),n.precision)};Ne.equals=Ne.eq=function(t){return!this.cmp(t)};Ne.exponent=function(){return Vn(this)};Ne.greaterThan=Ne.gt=function(t){return this.cmp(t)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(t){return this.cmp(t)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(t){return this.cmp(t)<0};Ne.lessThanOrEqualTo=Ne.lte=function(t){return this.cmp(t)<1};Ne.logarithm=Ne.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ui))throw Error(Ps+"NaN");if(n.s<1)throw Error(Ps+(n.s?"NaN":"-Infinity"));return n.eq(Ui)?new r(0):(cn=!1,e=$a(gg(n,s),gg(t,s),s),cn=!0,Bt(e,i))};Ne.minus=Ne.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sJ(e,t):rJ(e,(t.s=-t.s,t))};Ne.modulo=Ne.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ps+"NaN");return n.s?(cn=!1,e=$a(n,t,0,1).times(t),cn=!0,n.minus(e)):Bt(new r(n),i)};Ne.naturalExponential=Ne.exp=function(){return iJ(this)};Ne.naturalLogarithm=Ne.ln=function(){return gg(this)};Ne.negated=Ne.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ne.plus=Ne.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rJ(e,t):sJ(e,(t.s=-t.s,t))};Ne.precision=Ne.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(cc+t);if(e=Vn(i)+1,r=i.d.length-1,n=r*Qt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ne.squareRoot=Ne.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ps+"NaN")}for(t=Vn(a),cn=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Mo(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus($a(a,s,o+2)).times(.5),Mo(s.d).slice(0,o)===(e=Mo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Bt(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return cn=!0,Bt(r,n)};Ne.times=Ne.mul=function(t){var e,n,r,i,s,o,a,l,u,c=this,h=c.constructor,f=c.d,p=(t=new h(t)).d;if(!c.s||!t.s)return new h(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+p[r]*f[i-r-1]+e,s[i--]=a%ir|0,e=a/ir|0;s[i]=(s[i]+e)%ir|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,cn?Bt(t,h.precision):t};Ne.toDecimalPlaces=Ne.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ea(t,0,Fd),e===void 0?e=r.rounding:ea(e,0,8),Bt(n,t+Vn(n)+1,e))};Ne.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Oc(r,!0):(ea(t,0,Fd),e===void 0?e=i.rounding:ea(e,0,8),r=Bt(new i(r),t+1,e),n=Oc(r,!0,t+1)),n};Ne.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Oc(i):(ea(t,0,Fd),e===void 0?e=s.rounding:ea(e,0,8),r=Bt(new s(i),t+Vn(i)+1,e),n=Oc(r.abs(),!1,t+Vn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ne.toInteger=Ne.toint=function(){var t=this,e=t.constructor;return Bt(new e(t),Vn(t)+1,e.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Ui);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ps+"Infinity");return a}if(a.eq(Ui))return a;if(r=l.precision,t.eq(Ui))return Bt(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=c<0?-c:c)<=nJ){for(i=new l(Ui),e=Math.ceil(r/Qt+4),cn=!1;n%2&&(i=i.times(a),Vj(i.d,e)),n=Bd(n/2),n!==0;)a=a.times(a),Vj(a.d,e);return cn=!0,t.s<0?new l(Ui).div(i):Bt(i,r)}}else if(s<0)throw Error(Ps+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,cn=!1,i=t.times(gg(a,r+u)),cn=!0,i=iJ(i),i.s=s,i};Ne.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Vn(i),r=Oc(i,n<=s.toExpNeg||n>=s.toExpPos)):(ea(t,1,Fd),e===void 0?e=s.rounding:ea(e,0,8),i=Bt(new s(i),t,e),n=Vn(i),r=Oc(i,t<=n||n<=s.toExpNeg,t)),r};Ne.toSignificantDigits=Ne.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ea(t,1,Fd),e===void 0?e=r.rounding:ea(e,0,8)),Bt(new r(n),t,e)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Vn(t),n=t.constructor;return Oc(t,e<=n.toExpNeg||e>=n.toExpPos)};function rJ(t,e){var n,r,i,s,o,a,l,u,c=t.constructor,h=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),cn?Bt(e,h):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,i=o,a=l.length),o=Math.ceil(h/Qt),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/ir|0,l[s]%=ir;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,cn?Bt(e,h):e}function ea(t,e,n){if(t!==~~t||t<e||t>n)throw Error(cc+t)}function Mo(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Qt-r.length,n&&(s+=cl(n)),s+=r;o=t[e],r=o+"",n=Qt-r.length,n&&(s+=cl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var $a=function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%ir|0,o=s/ir|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ir+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,u,c,h,f,p,m,_,v,g,x,b,w,k,C,T,E,A=r.constructor,$=r.s==i.s?1:-1,N=r.d,P=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(Ps+"Division by zero");for(l=r.e-i.e,T=P.length,k=N.length,p=new A($),m=p.d=[],u=0;P[u]==(N[u]||0);)++u;if(P[u]>(N[u]||0)&&--l,s==null?x=s=A.precision:o?x=s+(Vn(r)-Vn(i))+1:x=s,x<0)return new A(0);if(x=x/Qt+2|0,u=0,T==1)for(c=0,P=P[0],x++;(u<k||c)&&x--;u++)b=c*ir+(N[u]||0),m[u]=b/P|0,c=b%P|0;else{for(c=ir/(P[0]+1)|0,c>1&&(P=t(P,c),N=t(N,c),T=P.length,k=N.length),w=T,_=N.slice(0,T),v=_.length;v<T;)_[v++]=0;E=P.slice(),E.unshift(0),C=P[0],P[1]>=ir/2&&++C;do c=0,a=e(P,_,T,v),a<0?(g=_[0],T!=v&&(g=g*ir+(_[1]||0)),c=g/C|0,c>1?(c>=ir&&(c=ir-1),h=t(P,c),f=h.length,v=_.length,a=e(h,_,f,v),a==1&&(c--,n(h,T<f?E:P,f))):(c==0&&(a=c=1),h=P.slice()),f=h.length,f<v&&h.unshift(0),n(_,h,v),a==-1&&(v=_.length,a=e(P,_,T,v),a<1&&(c++,n(_,T<v?E:P,v))),v=_.length):a===0&&(c++,_=[0]),m[u++]=c,a&&_[0]?_[v++]=N[w]||0:(_=[N[w]],v=1);while((w++<k||_[0]!==void 0)&&x--)}return m[0]||m.shift(),p.e=l,Bt(p,o?s+Vn(p)+1:s)}}();function iJ(t,e){var n,r,i,s,o,a,l=0,u=0,c=t.constructor,h=c.precision;if(Vn(t)>16)throw Error(FR+Vn(t));if(!t.s)return new c(Ui);for(e==null?(cn=!1,a=h):a=e,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Ru(2,u))/Math.LN10*2+5|0,a+=r,n=i=s=new c(Ui),c.precision=a;;){if(i=Bt(i.times(t),a),n=n.times(++l),o=s.plus($a(i,n,a)),Mo(o.d).slice(0,a)===Mo(s.d).slice(0,a)){for(;u--;)s=Bt(s.times(s),a);return c.precision=h,e==null?(cn=!0,Bt(s,h)):s}s=o}}function Vn(t){for(var e=t.e*Qt,n=t.d[0];n>=10;n/=10)e++;return e}function tT(t,e,n){if(e>t.LN10.sd())throw cn=!0,n&&(t.precision=n),Error(Ps+"LN10 precision limit exceeded");return Bt(new t(t.LN10),e)}function cl(t){for(var e="";t--;)e+="0";return e}function gg(t,e){var n,r,i,s,o,a,l,u,c,h=1,f=10,p=t,m=p.d,_=p.constructor,v=_.precision;if(p.s<1)throw Error(Ps+(p.s?"NaN":"-Infinity"));if(p.eq(Ui))return new _(0);if(e==null?(cn=!1,u=v):u=e,p.eq(10))return e==null&&(cn=!0),tT(_,u);if(u+=f,_.precision=u,n=Mo(m),r=n.charAt(0),s=Vn(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Mo(p.d),r=n.charAt(0),h++;s=Vn(p),r>1?(p=new _("0."+n),s++):p=new _(r+"."+n.slice(1))}else return l=tT(_,u+2,v).times(s+""),p=gg(new _(r+"."+n.slice(1)),u-f).plus(l),_.precision=v,e==null?(cn=!0,Bt(p,v)):p;for(a=o=p=$a(p.minus(Ui),p.plus(Ui),u),c=Bt(p.times(p),u),i=3;;){if(o=Bt(o.times(c),u),l=a.plus($a(o,new _(i),u)),Mo(l.d).slice(0,u)===Mo(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(tT(_,u+2,v).times(s+""))),a=$a(a,new _(h),u),_.precision=v,e==null?(cn=!0,Bt(a,v)):a;a=l,i+=2}}function jj(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bd(n/Qt),t.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qt;r<i;)t.d.push(+e.slice(r,r+=Qt));e=e.slice(r),r=Qt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),cn&&(t.e>mb||t.e<-mb))throw Error(FR+n)}else t.s=0,t.e=0,t.d=[0];return t}function Bt(t,e,n){var r,i,s,o,a,l,u,c,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Qt,i=e,u=h[c=0];else{if(c=Math.ceil((r+1)/Qt),s=h.length,c>=s)return t;for(u=s=h[c],o=1;s>=10;s/=10)o++;r%=Qt,i=r-Qt+o}if(n!==void 0&&(s=Ru(10,o-i-1),a=u/s%10|0,l=e<0||h[c+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/Ru(10,o-i):0:h[c-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=Vn(t),h.length=1,e=e-s-1,h[0]=Ru(10,(Qt-e%Qt)%Qt),t.e=Bd(-e/Qt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=c,s=1,c--):(h.length=c+1,s=Ru(10,Qt-r),h[c]=i>0?(u/Ru(10,o-i)%Ru(10,i)|0)*s:0),l)for(;;)if(c==0){(h[0]+=s)==ir&&(h[0]=1,++t.e);break}else{if(h[c]+=s,h[c]!=ir)break;h[c--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(cn&&(t.e>mb||t.e<-mb))throw Error(FR+Vn(t));return t}function sJ(t,e){var n,r,i,s,o,a,l,u,c,h,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),cn?Bt(e,p):e;if(l=t.d,h=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,a=h.length):(n=h,r=u,a=l.length),i=Math.max(Math.ceil(p/Qt),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=h.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(l[i]!=h[i]){c=l[i]<h[i];break}o=0}for(c&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,i=h.length-a;i>0;--i)l[a++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=ir-1;--l[s],l[i]+=ir}l[i]-=h[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,cn?Bt(e,p):e):new f(0)}function Oc(t,e,n){var r,i=Vn(t),s=Mo(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+cl(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+cl(-i-1)+s,n&&(r=n-o)>0&&(s+=cl(r))):i>=o?(s+=cl(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+cl(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=cl(r))),t.s<0?"-"+s:s}function Vj(t,e){if(t.length>e)return t.length=e,!0}function oJ(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(cc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return jj(o,s.toString())}else if(typeof s!="string")throw Error(cc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,e9e.test(s))jj(o,s);else throw Error(cc+s)}if(i.prototype=Ne,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=oJ,i.config=i.set=t9e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function t9e(t){if(!t||typeof t!="object")throw Error(Ps+"Object expected");var e,n,r,i=["precision",1,Fd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(cc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(cc+n+": "+r);return this}var BR=oJ(Qqe);Ui=new BR(1);const Rt=BR;function n9e(t){return o9e(t)||s9e(t)||i9e(t)||r9e()}function r9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i9e(t,e){if(t){if(typeof t=="string")return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}}function s9e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function o9e(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a9e=function(e){return e},aJ={"@@functional/placeholder":!0},lJ=function(e){return e===aJ},Uj=function(e){return function n(){return arguments.length===0||arguments.length===1&&lJ(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},l9e=function t(e,n){return e===1?n:Uj(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==aJ}).length;return o>=e?n.apply(void 0,i):t(e-o,Uj(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=i.map(function(h){return lJ(h)?l.shift():h});return n.apply(void 0,n9e(c).concat(l))}))})},AS=function(e){return l9e(e.length,e)},yI=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},u9e=AS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),c9e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return a9e;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},vI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},uJ=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function h9e(t){var e;return t===0?e=1:e=Math.floor(new Rt(t).abs().log(10).toNumber())+1,e}function f9e(t,e,n){for(var r=new Rt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var d9e=AS(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),p9e=AS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),m9e=AS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const OS={rangeStep:f9e,getDigitCount:h9e,interpolateNumber:d9e,uninterpolateNumber:p9e,uninterpolateTruncation:m9e};function _I(t){return v9e(t)||y9e(t)||cJ(t)||g9e()}function g9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y9e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function v9e(t){if(Array.isArray(t))return xI(t)}function yg(t,e){return b9e(t)||x9e(t,e)||cJ(t,e)||_9e()}function _9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cJ(t,e){if(t){if(typeof t=="string")return xI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(t,e)}}function xI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x9e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function b9e(t){if(Array.isArray(t))return t}function hJ(t){var e=yg(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function fJ(t,e,n){if(t.lte(0))return new Rt(0);var r=OS.getDigitCount(t.toNumber()),i=new Rt(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Rt(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?l:new Rt(Math.ceil(l))}function w9e(t,e,n){var r=1,i=new Rt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Rt(10).pow(OS.getDigitCount(t)-1),i=new Rt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Rt(Math.floor(t)))}else t===0?i=new Rt(Math.floor((e-1)/2)):n||(i=new Rt(Math.floor(t)));var o=Math.floor((e-1)/2),a=c9e(u9e(function(l){return i.add(new Rt(l-o).mul(r)).toNumber()}),yI);return a(0,e)}function dJ(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Rt(0),tickMin:new Rt(0),tickMax:new Rt(0)};var s=fJ(new Rt(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new Rt(0):(o=new Rt(t).add(e).div(2),o=o.sub(new Rt(o).mod(s)));var a=Math.ceil(o.sub(t).div(s).toNumber()),l=Math.ceil(new Rt(e).sub(o).div(s).toNumber()),u=a+l+1;return u>n?dJ(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:s,tickMin:o.sub(new Rt(a).mul(s)),tickMax:o.add(new Rt(l).mul(s))})}function S9e(t){var e=yg(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),a=hJ([n,r]),l=yg(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var h=c===1/0?[u].concat(_I(yI(0,i-1).map(function(){return 1/0}))):[].concat(_I(yI(0,i-1).map(function(){return-1/0})),[c]);return n>r?vI(h):h}if(u===c)return w9e(u,i,s);var f=dJ(u,c,o,s),p=f.step,m=f.tickMin,_=f.tickMax,v=OS.rangeStep(m,_.add(new Rt(.1).mul(p)),p);return n>r?vI(v):v}function k9e(t,e){var n=yg(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=hJ([r,i]),a=yg(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),h=fJ(new Rt(u).sub(l).div(c-1),s,0),f=[].concat(_I(OS.rangeStep(new Rt(l),new Rt(u).sub(new Rt(.99).mul(h)),h)),[u]);return r>i?vI(f):f}var C9e=uJ(S9e),T9e=uJ(k9e),$9e="Invariant failed";function Nc(t,e){throw new Error($9e)}var E9e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Wf(t){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wf(t)}function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gb.apply(this,arguments)}function I9e(t,e){return P9e(t)||N9e(t,e)||O9e(t,e)||A9e()}function A9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O9e(t,e){if(t){if(typeof t=="string")return Wj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wj(t,e)}}function Wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function P9e(t){if(Array.isArray(t))return t}function R9e(t,e){if(t==null)return{};var n=D9e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function D9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function M9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L9e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gJ(r.key),r)}}function F9e(t,e,n){return e&&L9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B9e(t,e,n){return e=yb(e),z9e(t,pJ()?Reflect.construct(e,n||[],yb(t).constructor):e.apply(t,n))}function z9e(t,e){if(e&&(Wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j9e(t)}function j9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pJ=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yb(t)}function V9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bI(t,e)}function mJ(t,e,n){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gJ(t){var e=U9e(t,"string");return Wf(e)=="symbol"?e:e+""}function U9e(t,e){if(Wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NS=function(t){function e(){return M9e(this,e),B9e(this,e,arguments)}return V9e(e,t),F9e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,h=r.yAxis,f=R9e(r,E9e),p=ht(f,!1);this.props.direction==="x"&&c.type!=="number"&&Nc();var m=l.map(function(_){var v=u(_,a),g=v.x,x=v.y,b=v.value,w=v.errorVal;if(!w)return null;var k=[],C,T;if(Array.isArray(w)){var E=I9e(w,2);C=E[0],T=E[1]}else C=T=w;if(s==="vertical"){var A=c.scale,$=x+i,N=$+o,P=$-o,M=A(b-C),B=A(b+T);k.push({x1:B,y1:N,x2:B,y2:P}),k.push({x1:M,y1:$,x2:B,y2:$}),k.push({x1:M,y1:N,x2:M,y2:P})}else if(s==="horizontal"){var z=h.scale,j=g+i,U=j-o,D=j+o,W=z(b-C),G=z(b+T);k.push({x1:U,y1:G,x2:D,y2:G}),k.push({x1:j,y1:W,x2:j,y2:G}),k.push({x1:U,y1:W,x2:D,y2:W})}return X.createElement(mn,gb({className:"recharts-errorBar",key:"bar-".concat(k.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},p),k.map(function(Y){return X.createElement("line",gb({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return X.createElement(mn,{className:"recharts-errorBars"},m)}}])}(X.Component);mJ(NS,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mJ(NS,"displayName","ErrorBar");function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function Gj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gj(Object(n),!0).forEach(function(r){W9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W9e(t,e,n){return e=G9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G9e(t){var e=H9e(t,"string");return vg(e)=="symbol"?e:e+""}function H9e(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yJ=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Li(n,uf);if(!o)return null;var a=uf.defaultProps,l=a!==void 0?Cu(Cu({},a),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(c,h){var f=h.item,p=h.props,m=p.sectors||p.data||[];return c.concat(m.map(function(_){return{type:o.props.iconType||f.props.legendType,value:_.name,color:_.fill,payload:_}}))},[]):u=(r||[]).map(function(c){var h=c.item,f=h.type.defaultProps,p=f!==void 0?Cu(Cu({},f),h.props):{},m=p.dataKey,_=p.name,v=p.legendType,g=p.hide;return{inactive:g,dataKey:m,type:l.iconType||v||"square",color:zR(h),value:_||m,payload:p}}),Cu(Cu(Cu({},l),uf.getWithHeight(o,i)),{},{payload:u,item:o})};function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function Hj(t){return Z9e(t)||X9e(t)||q9e(t)||K9e()}function K9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q9e(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function X9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z9e(t){if(Array.isArray(t))return wI(t)}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(n),!0).forEach(function(r){hf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hf(t,e,n){return e=Y9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y9e(t){var e=J9e(t,"string");return _g(e)=="symbol"?e:e+""}function J9e(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ji(t,e,n){return mt(t)||mt(e)?n:Yn(e)?$s(t,e,n):et(e)?e(t):n}function mm(t,e,n,r){var i=Xqe(t,function(a){return Ji(a,e)});if(n==="number"){var s=i.filter(function(a){return we(a)||parseFloat(a)});return s.length?[IS(s),bl(s)]:[1/0,-1/0]}var o=r?i.filter(function(a){return!mt(a)}):i;return o.map(function(a){return Yn(a)||a instanceof Date?a:""})}var Q9e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?i[u-1].coordinate:i[a-1].coordinate,h=i[u].coordinate,f=u>=a-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(ro(h-c)!==ro(f-h)){var m=[];if(ro(f-h)===ro(l[1]-l[0])){p=f;var _=h+l[1]-l[0];m[0]=Math.min(_,(_+c)/2),m[1]=Math.max(_,(_+c)/2)}else{p=c;var v=f+l[1]-l[0];m[0]=Math.min(h,(v+h)/2),m[1]=Math.max(h,(v+h)/2)}var g=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){o=i[u].index;break}}else{var x=Math.min(c,f),b=Math.max(c,f);if(e>(x+h)/2&&e<=(b+h)/2){o=i[u].index;break}}}else for(var w=0;w<a;w++)if(w===0&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<a-1&&e>(r[w].coordinate+r[w-1].coordinate)/2&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w===a-1&&e>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},zR=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?xn(xn({},e.type.defaultProps),e.props):e.props,o=s.stroke,a=s.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},e7e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,h=Object.keys(c),f=0,p=h.length;f<p;f++){var m=c[h[f]],_=m.items,v=m.cateAxisId,g=_.filter(function(T){return ka(T.type).indexOf("Bar")>=0});if(g&&g.length){var x=g[0].type.defaultProps,b=x!==void 0?xn(xn({},x),g[0].props):g[0].props,w=b.barSize,k=b[v];o[k]||(o[k]=[]);var C=mt(w)?n:w;o[k].push({item:g[0],stackList:g.slice(1),barSize:mt(C)?void 0:Ac(C,r,0)})}}return o},t7e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,a=e.maxBarSize,l=o.length;if(l<1)return null;var u=Ac(n,i,0,!0),c,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=i/l,m=o.reduce(function(w,k){return w+k.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&p>0&&(f=!0,p*=.9,m=l*p);var _=(i-m)/2>>0,v={offset:_-u,size:0};c=o.reduce(function(w,k){var C={item:k.item,position:{offset:v.offset+v.size+u,size:f?p:k.barSize}},T=[].concat(Hj(w),[C]);return v=T[T.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(E){T.push({item:E,position:v})}),T},h)}else{var g=Ac(r,i,0,!0);i-2*g-(l-1)*u<=0&&(u=0);var x=(i-2*g-(l-1)*u)/l;x>1&&(x>>=0);var b=a===+a?Math.min(x,a):x;c=o.reduce(function(w,k,C){var T=[].concat(Hj(w),[{item:k.item,position:{offset:g+(x+u)*C+(x-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(E){T.push({item:E,position:T[T.length-1].position})}),T},h)}return c},n7e=function(e,n,r,i){var s=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),u=yJ({children:s,legendWidth:l});if(u){var c=i||{},h=c.width,f=c.height,p=u.align,m=u.verticalAlign,_=u.layout;if((_==="vertical"||_==="horizontal"&&m==="middle")&&p!=="center"&&we(e[p]))return xn(xn({},e),{},hf({},p,e[p]+(h||0)));if((_==="horizontal"||_==="vertical"&&p==="center")&&m!=="middle"&&we(e[m]))return xn(xn({},e),{},hf({},m,e[m]+(f||0)))}return e},r7e=function(e,n,r){return mt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},vJ=function(e,n,r,i,s){var o=n.props.children,a=uo(o,NS).filter(function(u){return r7e(i,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var h=Ji(c,r);if(mt(h))return u;var f=Array.isArray(h)?[IS(h),bl(h)]:[h,h],p=l.reduce(function(m,_){var v=Ji(c,_,0),g=f[0]-Math.abs(Array.isArray(v)?v[0]:v),x=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(g,m[0]),Math.max(x,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},i7e=function(e,n,r,i,s){var o=n.map(function(a){return vJ(e,a,r,s,i)}).filter(function(a){return!mt(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},_J=function(e,n,r,i,s){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&vJ(e,l,u,i)||mm(e,u,r,s)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,u){for(var c=0,h=u.length;c<h;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},xJ=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},bJ=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,o,a=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(o=!0),l.coordinate});return s||a.push(n),o||a.push(r),a},_a=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ro(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(h){var f=s?s.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return c.filter(function(h){return!Pd(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:s?s[h]:h,index:f,offset:u}})},nT=new WeakMap,V0=function(e,n){if(typeof n!="function")return e;nT.has(e)||nT.set(e,new WeakMap);var r=nT.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},s7e=function(e,n,r){var i=e.scale,s=e.type,o=e.layout,a=e.axisType;if(i==="auto")return o==="radial"&&a==="radiusAxis"?{scale:cg(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:hb(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:pm(),realScaleType:"point"}:s==="category"?{scale:cg(),realScaleType:"band"}:{scale:hb(),realScaleType:"linear"};if(wv(i)){var l="scale".concat(gS(i));return{scale:(zj[l]||pm)(),realScaleType:zj[l]?l:"point"}}return et(i)?{scale:i}:{scale:pm(),realScaleType:"point"}},qj=1e-4,o7e=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-qj,o=Math.max(i[0],i[1])+qj,a=e(n[0]),l=e(n[r-1]);(a<s||a>o||l<s||l>o)&&e.domain([n[0],n[r-1]])}},a7e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},l7e=function(e,n){if(!n||n.length!==2||!we(n[0])||!we(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!we(e[0])||e[0]<r)&&(s[0]=r),(!we(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},u7e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,a=0;a<n;++a){var l=Pd(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},c7e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<n;++o){var a=Pd(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},h7e={sign:u7e,expand:Cze,none:Mf,silhouette:Tze,wiggle:$ze,positive:c7e},f7e=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),s=h7e[r],o=kze().keys(i).value(function(a,l){return+Ji(a,l,0)}).order(KE).offset(s);return o(e)},d7e=function(e,n,r,i,s,o){if(!e)return null;var a=o?n.reverse():n,l={},u=a.reduce(function(h,f){var p,m=(p=f.type)!==null&&p!==void 0&&p.defaultProps?xn(xn({},f.type.defaultProps),f.props):f.props,_=m.stackId,v=m.hide;if(v)return h;var g=m[r],x=h[g]||{hasStack:!1,stackGroups:{}};if(Yn(_)){var b=x.stackGroups[_]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(f),x.hasStack=!0,x.stackGroups[_]=b}else x.stackGroups[Sv("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return xn(xn({},h),{},hf({},g,x))},l),c={};return Object.keys(u).reduce(function(h,f){var p=u[f];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(_,v){var g=p.stackGroups[v];return xn(xn({},_),{},hf({},v,{numericAxisId:r,cateAxisId:i,items:g.items,stackedData:f7e(e,g.items,s)}))},m)}return xn(xn({},h),{},hf({},f,p))},c)},p7e=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=C9e(u,s,a);return e.domain([IS(c),bl(c)]),{niceTicks:c}}if(s&&i==="number"){var h=e.domain(),f=T9e(h,s,a);return{niceTicks:f}}return null};function Xj(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!mt(i[e.dataKey])){var a=Vx(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Ji(i,mt(o)?e.dataKey:o);return mt(l)?null:e.scale(l)}var Zj=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Ji(o,n.dataKey,n.domain[a]);return mt(l)?null:n.scale(l)-s/2+i},m7e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},g7e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?xn(xn({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Yn(s)){var o=n[s];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},y7e=function(e){return e.reduce(function(n,r){return[IS(r.concat([n[0]]).filter(we)),bl(r.concat([n[1]]).filter(we))]},[1/0,-1/0])},wJ=function(e,n,r){return Object.keys(e).reduce(function(i,s){var o=e[s],a=o.stackedData,l=a.reduce(function(u,c){var h=y7e(c.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Yj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Jj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SI=function(e,n,r){if(et(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(we(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Yj.test(e[0])){var s=+Yj.exec(e[0])[1];i[0]=n[0]-s}else et(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(we(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Jj.test(e[1])){var o=+Jj.exec(e[1])[1];i[1]=n[1]+o}else et(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},vb=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=pR(n,function(h){return h.coordinate}),o=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Qj=function(e,n,r){return!e||!e.length||mg(e,$s(r,"type.defaultProps.domain"))?n:e},SJ=function(e,n){var r=e.type.defaultProps?xn(xn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return xn(xn({},ht(e,!1)),{},{dataKey:i,unit:o,formatter:a,name:s||i,color:zR(e),value:Ji(n,i),type:l,payload:n,chartType:u,hide:c})};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function e4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(n),!0).forEach(function(r){v7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v7e(t,e,n){return e=_7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _7e(t){var e=x7e(t,"string");return xg(e)=="symbol"?e:e+""}function x7e(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _b=Math.PI/180,b7e=function(e){return e*180/Math.PI},vr=function(e,n,r,i){return{x:e+Math.cos(-_b*i)*r,y:n+Math.sin(-_b*i)*r}},w7e=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},S7e=function(e,n){var r=e.x,i=e.y,s=n.cx,o=n.cy,a=w7e({x:r,y:i},{x:s,y:o});if(a<=0)return{radius:a};var l=(r-s)/a,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:a,angle:b7e(u),angleInRadian:u}},k7e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:r-o*360}},C7e=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),a=Math.min(s,o);return e+a*360},n4=function(e,n){var r=e.x,i=e.y,s=S7e({x:r,y:i},n),o=s.radius,a=s.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=k7e(n),h=c.startAngle,f=c.endAngle,p=a,m;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}return m?t4(t4({},n),{},{radius:o,angle:C7e(p,n)}):null};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}var T7e=["offset"];function $7e(t){return O7e(t)||A7e(t)||I7e(t)||E7e()}function E7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I7e(t,e){if(t){if(typeof t=="string")return kI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kI(t,e)}}function A7e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function O7e(t){if(Array.isArray(t))return kI(t)}function kI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N7e(t,e){if(t==null)return{};var n=P7e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function P7e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(n),!0).forEach(function(r){R7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R7e(t,e,n){return e=D7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D7e(t){var e=M7e(t,"string");return bg(e)=="symbol"?e:e+""}function M7e(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wg(){return wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wg.apply(this,arguments)}var L7e=function(e){var n=e.value,r=e.formatter,i=mt(e.children)?n:e.children;return et(r)?r(i):i},F7e=function(e,n){var r=ro(n-e),i=Math.min(Math.abs(n-e),360);return r*i},B7e=function(e,n,r){var i=e.position,s=e.viewBox,o=e.offset,a=e.className,l=s,u=l.cx,c=l.cy,h=l.innerRadius,f=l.outerRadius,p=l.startAngle,m=l.endAngle,_=l.clockWise,v=(h+f)/2,g=F7e(p,m),x=g>=0?1:-1,b,w;i==="insideStart"?(b=p+x*o,w=_):i==="insideEnd"?(b=m-x*o,w=!_):i==="end"&&(b=m+x*o,w=_),w=g<=0?w:!w;var k=vr(u,c,v,b),C=vr(u,c,v,b+(w?1:-1)*359),T="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(C.x,",").concat(C.y),E=mt(e.id)?Sv("recharts-radial-line-"):e.id;return X.createElement("text",wg({},r,{dominantBaseline:"central",className:kt("recharts-radial-bar-label",a)}),X.createElement("defs",null,X.createElement("path",{id:E,d:T})),X.createElement("textPath",{xlinkHref:"#".concat(E)},n))},z7e=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,o=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,h=s.endAngle,f=(c+h)/2;if(i==="outside"){var p=vr(o,a,u+r,f),m=p.x,_=p.y;return{x:m,y:_,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,g=vr(o,a,v,f),x=g.x,b=g.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},j7e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=n,a=o.x,l=o.y,u=o.width,c=o.height,h=c>=0?1:-1,f=h*i,p=h>0?"end":"start",m=h>0?"start":"end",_=u>=0?1:-1,v=_*i,g=_>0?"end":"start",x=_>0?"start":"end";if(s==="top"){var b={x:a+u/2,y:l-h*i,textAnchor:"middle",verticalAnchor:p};return Gn(Gn({},b),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var w={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:m};return Gn(Gn({},w),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(s==="left"){var k={x:a-v,y:l+c/2,textAnchor:g,verticalAnchor:"middle"};return Gn(Gn({},k),r?{width:Math.max(k.x-r.x,0),height:c}:{})}if(s==="right"){var C={x:a+u+v,y:l+c/2,textAnchor:x,verticalAnchor:"middle"};return Gn(Gn({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:c}:{})}var T=r?{width:u,height:c}:{};return s==="insideLeft"?Gn({x:a+v,y:l+c/2,textAnchor:x,verticalAnchor:"middle"},T):s==="insideRight"?Gn({x:a+u-v,y:l+c/2,textAnchor:g,verticalAnchor:"middle"},T):s==="insideTop"?Gn({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:m},T):s==="insideBottom"?Gn({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:p},T):s==="insideTopLeft"?Gn({x:a+v,y:l+f,textAnchor:x,verticalAnchor:m},T):s==="insideTopRight"?Gn({x:a+u-v,y:l+f,textAnchor:g,verticalAnchor:m},T):s==="insideBottomLeft"?Gn({x:a+v,y:l+c-f,textAnchor:x,verticalAnchor:p},T):s==="insideBottomRight"?Gn({x:a+u-v,y:l+c-f,textAnchor:g,verticalAnchor:p},T):Id(s)&&(we(s.x)||Zu(s.x))&&(we(s.y)||Zu(s.y))?Gn({x:a+Ac(s.x,u),y:l+Ac(s.y,c),textAnchor:"end",verticalAnchor:"end"},T):Gn({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},T)},V7e=function(e){return"cx"in e&&we(e.cx)};function Fr(t){var e=t.offset,n=e===void 0?5:e,r=N7e(t,T7e),i=Gn({offset:n},r),s=i.viewBox,o=i.position,a=i.value,l=i.children,u=i.content,c=i.className,h=c===void 0?"":c,f=i.textBreakAll;if(!s||mt(a)&&mt(l)&&!J.isValidElement(u)&&!et(u))return null;if(J.isValidElement(u))return J.cloneElement(u,i);var p;if(et(u)){if(p=J.createElement(u,i),J.isValidElement(p))return p}else p=L7e(i);var m=V7e(s),_=ht(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return B7e(i,p,_);var v=m?z7e(i):j7e(i);return X.createElement(ib,wg({className:kt("recharts-label",h)},_,v,{breakAll:f}),p)}Fr.displayName="Label";var kJ=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,h=e.x,f=e.y,p=e.top,m=e.left,_=e.width,v=e.height,g=e.clockWise,x=e.labelViewBox;if(x)return x;if(we(_)&&we(v)){if(we(h)&&we(f))return{x:h,y:f,width:_,height:v};if(we(p)&&we(m))return{x:p,y:m,width:_,height:v}}return we(h)&&we(f)?{x:h,y:f,width:0,height:0}:we(n)&&we(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:g}:e.viewBox?e.viewBox:{}},U7e=function(e,n){return e?e===!0?X.createElement(Fr,{key:"label-implicit",viewBox:n}):Yn(e)?X.createElement(Fr,{key:"label-implicit",viewBox:n,value:e}):J.isValidElement(e)?e.type===Fr?J.cloneElement(e,{key:"label-implicit",viewBox:n}):X.createElement(Fr,{key:"label-implicit",content:e,viewBox:n}):et(e)?X.createElement(Fr,{key:"label-implicit",content:e,viewBox:n}):Id(e)?X.createElement(Fr,wg({viewBox:n},e,{key:"label-implicit"})):null:null},W7e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=kJ(e),o=uo(i,Fr).map(function(l,u){return J.cloneElement(l,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var a=U7e(e.label,n||s);return[a].concat($7e(o))};Fr.parseViewBox=kJ;Fr.renderCallByParent=W7e;function G7e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var H7e=G7e;const K7e=Mt(H7e);function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}var q7e=["valueAccessor"],X7e=["data","dataKey","clockWise","id","textBreakAll"];function Z7e(t){return eXe(t)||Q7e(t)||J7e(t)||Y7e()}function Y7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J7e(t,e){if(t){if(typeof t=="string")return CI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CI(t,e)}}function Q7e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eXe(t){if(Array.isArray(t))return CI(t)}function CI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xb(){return xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xb.apply(this,arguments)}function i4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(n),!0).forEach(function(r){tXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tXe(t,e,n){return e=nXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nXe(t){var e=rXe(t,"string");return Sg(e)=="symbol"?e:e+""}function rXe(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o4(t,e){if(t==null)return{};var n=iXe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sXe=function(e){return Array.isArray(e.value)?K7e(e.value):e.value};function Fl(t){var e=t.valueAccessor,n=e===void 0?sXe:e,r=o4(t,q7e),i=r.data,s=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,u=o4(r,X7e);return!i||!i.length?null:X.createElement(mn,{className:"recharts-label-list"},i.map(function(c,h){var f=mt(s)?n(c,h):Ji(c&&c.payload,s),p=mt(a)?{}:{id:"".concat(a,"-").concat(h)};return X.createElement(Fr,xb({},ht(c,!0),u,p,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:Fr.parseViewBox(mt(o)?c:s4(s4({},c),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Fl.displayName="LabelList";function oXe(t,e){return t?t===!0?X.createElement(Fl,{key:"labelList-implicit",data:e}):X.isValidElement(t)||et(t)?X.createElement(Fl,{key:"labelList-implicit",data:e,content:t}):Id(t)?X.createElement(Fl,xb({data:e},t,{key:"labelList-implicit"})):null:null}function aXe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=uo(r,Fl).map(function(o,a){return J.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var s=oXe(t.label,e);return[s].concat(Z7e(i))}Fl.renderCallByParent=aXe;function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(this,arguments)}function a4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(n),!0).forEach(function(r){lXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lXe(t,e,n){return e=uXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uXe(t){var e=cXe(t,"string");return kg(e)=="symbol"?e:e+""}function cXe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hXe=function(e,n){var r=ro(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},U0=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+i,h=Math.asin(l/c)/_b,f=u?s:s+o*h,p=vr(n,r,c,f),m=vr(n,r,i,f),_=u?s-o*h:s,v=vr(n,r,c*Math.cos(h*_b),_);return{center:p,circleTangency:m,lineTangency:v,theta:h}},CJ=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,a=e.endAngle,l=hXe(o,a),u=o+l,c=vr(n,r,s,o),h=vr(n,r,s,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=vr(n,r,i,o),m=vr(n,r,i,u);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},fXe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,h=ro(c-u),f=U0({cx:n,cy:r,radius:s,angle:u,sign:h,cornerRadius:o,cornerIsExternal:l}),p=f.circleTangency,m=f.lineTangency,_=f.theta,v=U0({cx:n,cy:r,radius:s,angle:c,sign:-h,cornerRadius:o,cornerIsExternal:l}),g=v.circleTangency,x=v.lineTangency,b=v.theta,w=l?Math.abs(u-c):Math.abs(u-c)-_-b;if(w<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):CJ({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:c});var k="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var C=U0({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=C.circleTangency,E=C.lineTangency,A=C.theta,$=U0({cx:n,cy:r,radius:i,angle:c,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),N=$.circleTangency,P=$.lineTangency,M=$.theta,B=l?Math.abs(u-c):Math.abs(u-c)-A-M;if(B<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},dXe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},TJ=function(e){var n=l4(l4({},dXe),e),r=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,h=n.endAngle,f=n.className;if(o<s||c===h)return null;var p=kt("recharts-sector",f),m=o-s,_=Ac(a,m,0,!0),v;return _>0&&Math.abs(c-h)<360?v=fXe({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(_,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:h}):v=CJ({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:h}),X.createElement("path",TI({},ht(n,!0),{className:p,d:v,role:"img"}))};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function u4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u4(Object(n),!0).forEach(function(r){pXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pXe(t,e,n){return e=mXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mXe(t){var e=gXe(t,"string");return Cg(e)=="symbol"?e:e+""}function gXe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h4={curveBasisClosed:dze,curveBasisOpen:pze,curveBasis:fze,curveBumpX:JBe,curveBumpY:QBe,curveLinearClosed:mze,curveLinear:vS,curveMonotoneX:gze,curveMonotoneY:yze,curveNatural:vze,curveStep:_ze,curveStepAfter:bze,curveStepBefore:xze},W0=function(e){return e.x===+e.x&&e.y===+e.y},kp=function(e){return e.x},Cp=function(e){return e.y},yXe=function(e,n){if(et(e))return e;var r="curve".concat(gS(e));return(r==="curveMonotone"||r==="curveBump")&&n?h4["".concat(r).concat(n==="vertical"?"Y":"X")]:h4[r]||vS},vXe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=yXe(r,a),h=u?s.filter(function(_){return W0(_)}):s,f;if(Array.isArray(o)){var p=u?o.filter(function(_){return W0(_)}):o,m=h.map(function(_,v){return c4(c4({},_),{},{base:p[v]})});return a==="vertical"?f=R0().y(Cp).x1(kp).x0(function(_){return _.base.x}):f=R0().x(kp).y1(Cp).y0(function(_){return _.base.y}),f.defined(W0).curve(c),f(m)}return a==="vertical"&&we(o)?f=R0().y(Cp).x1(kp).x0(o):we(o)?f=R0().x(kp).y1(Cp).y0(o):f=TZ().x(kp).y(Cp),f.defined(W0).curve(c),f(h)},gm=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?vXe(e):i;return X.createElement("path",$I({},ht(e,!1),Ux(e),{className:kt("recharts-curve",n),d:o,ref:s}))},$J={exports:{}},_Xe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xXe=_Xe,bXe=xXe;function EJ(){}function IJ(){}IJ.resetWarningCache=EJ;var wXe=function(){function t(r,i,s,o,a,l){if(l!==bXe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:IJ,resetWarningCache:EJ};return n.PropTypes=n,n};$J.exports=wXe();var SXe=$J.exports;const $t=Mt(SXe);var kXe=Object.getOwnPropertyNames,CXe=Object.getOwnPropertySymbols,TXe=Object.prototype.hasOwnProperty;function f4(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function G0(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function d4(t){return kXe(t).concat(CXe(t))}var $Xe=Object.hasOwn||function(t,e){return TXe.call(t,e)};function eh(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var EXe="__v",IXe="__o",AXe="_owner",p4=Object.getOwnPropertyDescriptor,m4=Object.keys;function OXe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function NXe(t,e){return eh(t.getTime(),e.getTime())}function PXe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function RXe(t,e){return t===e}function g4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),o,a,l=0;(o=s.next())&&!o.done;){for(var u=e.entries(),c=!1,h=0;(a=u.next())&&!a.done;){if(i[h]){h++;continue}var f=o.value,p=a.value;if(n.equals(f[0],p[0],l,h,t,e,n)&&n.equals(f[1],p[1],f[0],p[0],t,e,n)){c=i[h]=!0;break}h++}if(!c)return!1;l++}return!0}var DXe=eh;function MXe(t,e,n){var r=m4(t),i=r.length;if(m4(e).length!==i)return!1;for(;i-- >0;)if(!AJ(t,e,n,r[i]))return!1;return!0}function Tp(t,e,n){var r=d4(t),i=r.length;if(d4(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=r[i],!AJ(t,e,n,s)||(o=p4(t,s),a=p4(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function LXe(t,e){return eh(t.valueOf(),e.valueOf())}function FXe(t,e){return t.source===e.source&&t.flags===e.flags}function y4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),o,a;(o=s.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function BXe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function zXe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function AJ(t,e,n,r){return(r===AXe||r===IXe||r===EXe)&&(t.$$typeof||e.$$typeof)?!0:$Xe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var jXe="[object Arguments]",VXe="[object Boolean]",UXe="[object Date]",WXe="[object Error]",GXe="[object Map]",HXe="[object Number]",KXe="[object Object]",qXe="[object RegExp]",XXe="[object Set]",ZXe="[object String]",YXe="[object URL]",JXe=Array.isArray,v4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,_4=Object.assign,QXe=Object.prototype.toString.call.bind(Object.prototype.toString);function eZe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(m,_,v){if(m===_)return!0;if(m==null||_==null)return!1;var g=typeof m;if(g!==typeof _)return!1;if(g!=="object")return g==="number"?o(m,_,v):g==="function"?i(m,_,v):!1;var x=m.constructor;if(x!==_.constructor)return!1;if(x===Object)return a(m,_,v);if(JXe(m))return e(m,_,v);if(v4!=null&&v4(m))return h(m,_,v);if(x===Date)return n(m,_,v);if(x===RegExp)return u(m,_,v);if(x===Map)return s(m,_,v);if(x===Set)return c(m,_,v);var b=QXe(m);return b===UXe?n(m,_,v):b===qXe?u(m,_,v):b===GXe?s(m,_,v):b===XXe?c(m,_,v):b===KXe?typeof m.then!="function"&&typeof _.then!="function"&&a(m,_,v):b===YXe?f(m,_,v):b===WXe?r(m,_,v):b===jXe?a(m,_,v):b===VXe||b===HXe||b===ZXe?l(m,_,v):!1}}function tZe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Tp:OXe,areDatesEqual:NXe,areErrorsEqual:PXe,areFunctionsEqual:RXe,areMapsEqual:r?f4(g4,Tp):g4,areNumbersEqual:DXe,areObjectsEqual:r?Tp:MXe,arePrimitiveWrappersEqual:LXe,areRegExpsEqual:FXe,areSetsEqual:r?f4(y4,Tp):y4,areTypedArraysEqual:r?Tp:BXe,areUrlsEqual:zXe};if(n&&(i=_4({},i,n(i))),e){var s=G0(i.areArraysEqual),o=G0(i.areMapsEqual),a=G0(i.areObjectsEqual),l=G0(i.areSetsEqual);i=_4({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function nZe(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function rZe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,u){var c=r(),h=c.cache,f=h===void 0?e?new WeakMap:void 0:h,p=c.meta;return n(l,u,{cache:f,equals:i,meta:p,strict:s})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return n(l,u,o)}}var iZe=pu();pu({strict:!0});pu({circular:!0});pu({circular:!0,strict:!0});pu({createInternalComparator:function(){return eh}});pu({strict:!0,createInternalComparator:function(){return eh}});pu({circular:!0,createInternalComparator:function(){return eh}});pu({circular:!0,createInternalComparator:function(){return eh},strict:!0});function pu(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,a=tZe(t),l=eZe(a),u=r?r(l):nZe(l);return rZe({circular:n,comparator:l,createState:i,equals:u,strict:o})}function sZe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function x4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):sZe(i)};requestAnimationFrame(r)}function EI(t){"@babel/helpers - typeof";return EI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EI(t)}function oZe(t){return cZe(t)||uZe(t)||lZe(t)||aZe()}function aZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lZe(t,e){if(t){if(typeof t=="string")return b4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b4(t,e)}}function b4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cZe(t){if(Array.isArray(t))return t}function hZe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,a=oZe(o),l=a[0],u=a.slice(1);if(typeof l=="number"){x4(i.bind(null,u),l);return}i(l),x4(i.bind(null,u));return}EI(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function w4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w4(Object(n),!0).forEach(function(r){OJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OJ(t,e,n){return e=fZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fZe(t){var e=dZe(t,"string");return Tg(e)==="symbol"?e:String(e)}function dZe(t,e){if(Tg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pZe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},mZe=function(e){return e},gZe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ym=function(e,n){return Object.keys(n).reduce(function(r,i){return S4(S4({},r),{},OJ({},i,e(i,n[i])))},{})},k4=function(e,n,r){return e.map(function(i){return"".concat(gZe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function yZe(t,e){return xZe(t)||_Ze(t,e)||NJ(t,e)||vZe()}function vZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function xZe(t){if(Array.isArray(t))return t}function bZe(t){return kZe(t)||SZe(t)||NJ(t)||wZe()}function wZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NJ(t,e){if(t){if(typeof t=="string")return II(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return II(t,e)}}function SZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kZe(t){if(Array.isArray(t))return II(t)}function II(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bb=1e-4,PJ=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},RJ=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},C4=function(e,n){return function(r){var i=PJ(e,n);return RJ(i,r)}},CZe=function(e,n){return function(r){var i=PJ(e,n),s=[].concat(bZe(i.map(function(o,a){return o*a}).slice(1)),[0]);return RJ(s,r)}},T4=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=yZe(u,4);i=c[0],s=c[1],o=c[2],a=c[3]}}}var h=C4(i,o),f=C4(s,a),p=CZe(i,o),m=function(g){return g>1?1:g<0?0:g},_=function(g){for(var x=g>1?1:g,b=x,w=0;w<8;++w){var k=h(b)-x,C=p(b);if(Math.abs(k-x)<bb||C<bb)return f(b);b=m(b-k/C)}return f(b)};return _.isStepper=!1,_},TZe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,a=o===void 0?17:o,l=function(c,h,f){var p=-(c-h)*r,m=f*s,_=f+(p-m)*a/1e3,v=f*a/1e3+c;return Math.abs(v-h)<bb&&Math.abs(_)<bb?[h,0]:[v,_]};return l.isStepper=!0,l.dt=a,l},$Ze=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return T4(i);case"spring":return TZe();default:if(i.split("(")[0]==="cubic-bezier")return T4(i)}return typeof i=="function"?i:null};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function $4(t){return AZe(t)||IZe(t)||DJ(t)||EZe()}function EZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AZe(t){if(Array.isArray(t))return OI(t)}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(r){AI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AI(t,e,n){return e=OZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OZe(t){var e=NZe(t,"string");return $g(e)==="symbol"?e:String(e)}function NZe(t,e){if($g(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($g(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PZe(t,e){return MZe(t)||DZe(t,e)||DJ(t,e)||RZe()}function RZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DJ(t,e){if(t){if(typeof t=="string")return OI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OI(t,e)}}function OI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function MZe(t){if(Array.isArray(t))return t}var wb=function(e,n,r){return e+(n-e)*r},NI=function(e){var n=e.from,r=e.to;return n!==r},LZe=function t(e,n,r){var i=ym(function(s,o){if(NI(o)){var a=e(o.from,o.to,o.velocity),l=PZe(a,2),u=l[0],c=l[1];return pr(pr({},o),{},{from:u,velocity:c})}return o},n);return r<1?ym(function(s,o){return NI(o)?pr(pr({},o),{},{velocity:wb(o.velocity,i[s].velocity,r),from:wb(o.from,i[s].from,r)}):o},n):t(e,i,r-1)};const FZe=function(t,e,n,r,i){var s=pZe(t,e),o=s.reduce(function(v,g){return pr(pr({},v),{},AI({},g,[t[g],e[g]]))},{}),a=s.reduce(function(v,g){return pr(pr({},v),{},AI({},g,{from:t[g],velocity:0,to:e[g]}))},{}),l=-1,u,c,h=function(){return null},f=function(){return ym(function(g,x){return x.from},a)},p=function(){return!Object.values(a).filter(NI).length},m=function(g){u||(u=g);var x=g-u,b=x/n.dt;a=LZe(n,a,b),i(pr(pr(pr({},t),e),f())),u=g,p()||(l=requestAnimationFrame(h))},_=function(g){c||(c=g);var x=(g-c)/r,b=ym(function(k,C){return wb.apply(void 0,$4(C).concat([n(x)]))},o);if(i(pr(pr(pr({},t),e),b)),x<1)l=requestAnimationFrame(h);else{var w=ym(function(k,C){return wb.apply(void 0,$4(C).concat([n(1)]))},o);i(pr(pr(pr({},t),e),w))}};return h=n.isStepper?m:_,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}};function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}var BZe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zZe(t,e){if(t==null)return{};var n=jZe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jZe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rT(t){return GZe(t)||WZe(t)||UZe(t)||VZe()}function VZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UZe(t,e){if(t){if(typeof t=="string")return PI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PI(t,e)}}function WZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GZe(t){if(Array.isArray(t))return PI(t)}function PI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){Hp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hp(t,e,n){return e=MJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KZe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MJ(r.key),r)}}function qZe(t,e,n){return e&&KZe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MJ(t){var e=XZe(t,"string");return Gf(e)==="symbol"?e:String(e)}function XZe(t,e){if(Gf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RI(t,e)}function YZe(t){var e=JZe();return function(){var r=Sb(t),i;if(e){var s=Sb(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return DI(this,i)}}function DI(t,e){if(e&&(Gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MI(t)}function MI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sb(t)}var za=function(t){ZZe(n,t);var e=YZe(n);function n(r,i){var s;HZe(this,n),s=e.call(this,r,i);var o=s.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,h=o.steps,f=o.children,p=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(MI(s)),s.changeStyle=s.changeStyle.bind(MI(s)),!a||p<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:c}),DI(s);if(h&&h.length)s.state={style:h[0].style};else if(u){if(typeof f=="function")return s.state={style:u},DI(s);s.state={style:l?Hp({},l,u):u}}else s.state={style:{}};return s}return qZe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,h=s.from,f=this.state.style;if(a){if(!o){var p={style:l?Hp({},l,c):c};this.state&&f&&(l&&f[l]!==c||!l&&f!==c)&&this.setState(p);return}if(!(iZe(i.to,c)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var _=m||u?h:i.to;if(this.state&&f){var v={style:l?Hp({},l,_):_};(l&&f[l]!==_||!l&&f!==_)&&this.setState(v)}this.runAnimation(Gs(Gs({},this.props),{},{from:_,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,l=i.duration,u=i.easing,c=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=FZe(o,a,$Ze(u),l,this.changeStyle),m=function(){s.stopJSAnimation=p()};this.manager.start([f,c,m,l,h])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,h=u.duration,f=h===void 0?0:h,p=function(_,v,g){if(g===0)return _;var x=v.duration,b=v.easing,w=b===void 0?"ease":b,k=v.style,C=v.properties,T=v.onAnimationEnd,E=g>0?o[g-1]:v,A=C||Object.keys(k);if(typeof w=="function"||w==="spring")return[].concat(rT(_),[s.runJSAnimation.bind(s,{from:E.style,to:k,duration:x,easing:w}),x]);var $=k4(A,x,w),N=Gs(Gs(Gs({},E.style),k),{},{transition:$});return[].concat(rT(_),[N,x,T]).filter(mZe)};return this.manager.start([l].concat(rT(o.reduce(p,[c,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=hZe());var s=i.begin,o=i.duration,a=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var _=a?Hp({},a,l):l,v=k4(Object.keys(_),o,u);m.start([c,s,Gs(Gs({},_),{},{transition:v}),o,h])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=zZe(i,BZe),u=J.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||o<=0)return s;var h=function(p){var m=p.props,_=m.style,v=_===void 0?{}:_,g=m.className,x=J.cloneElement(p,Gs(Gs({},l),{},{style:Gs(Gs({},v),c),className:g}));return x};return u===1?h(J.Children.only(s)):X.createElement("div",null,J.Children.map(s,function(f){return h(f)}))}}]),n}(J.PureComponent);za.displayName="Animate";za.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};za.propTypes={from:$t.oneOfType([$t.object,$t.string]),to:$t.oneOfType([$t.object,$t.string]),attributeName:$t.string,duration:$t.number,begin:$t.number,easing:$t.oneOfType([$t.string,$t.func]),steps:$t.arrayOf($t.shape({duration:$t.number.isRequired,style:$t.object.isRequired,easing:$t.oneOfType([$t.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$t.func]),properties:$t.arrayOf("string"),onAnimationEnd:$t.func})),children:$t.oneOfType([$t.node,$t.func]),isActive:$t.bool,canBegin:$t.bool,onAnimationEnd:$t.func,shouldReAnimate:$t.bool,onAnimationStart:$t.func,onAnimationReStart:$t.func};function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kb.apply(this,arguments)}function QZe(t,e){return rYe(t)||nYe(t,e)||tYe(t,e)||eYe()}function eYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tYe(t,e){if(t){if(typeof t=="string")return A4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A4(t,e)}}function A4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function rYe(t){if(Array.isArray(t))return t}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(r){iYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iYe(t,e,n){return e=sYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sYe(t){var e=oYe(t,"string");return Eg(e)=="symbol"?e:e+""}function oYe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P4=function(e,n,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(o>0&&s instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=s[f]>o?o:s[f];c="M".concat(e,",").concat(n+a*h[0]),h[0]>0&&(c+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(n)),c+="L ".concat(e+r-l*h[1],",").concat(n),h[1]>0&&(c+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*h[1])),c+="L ".concat(e+r,",").concat(n+i-a*h[2]),h[2]>0&&(c+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-l*h[2],",").concat(n+i)),c+="L ".concat(e+l*h[3],",").concat(n+i),h[3]>0&&(c+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-a*h[3])),c+="Z"}else if(o>0&&s===+s&&s>0){var m=Math.min(o,s);c="M ".concat(e,",").concat(n+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*m,`
            L `).concat(e+r,",").concat(n+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-l*m,",").concat(n+i,`
            L `).concat(e+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-a*m," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},aYe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),h=Math.min(o,o+l),f=Math.max(o,o+l);return r>=u&&r<=c&&i>=h&&i<=f}return!1},lYe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jR=function(e){var n=N4(N4({},lYe),e),r=J.useRef(),i=J.useState(-1),s=QZe(i,2),o=s[0],a=s[1];J.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&a(w)}catch{}},[]);var l=n.x,u=n.y,c=n.width,h=n.height,f=n.radius,p=n.className,m=n.animationEasing,_=n.animationDuration,v=n.animationBegin,g=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||h!==+h||c===0||h===0)return null;var b=kt("recharts-rectangle",p);return x?X.createElement(za,{canBegin:o>0,from:{width:c,height:h,x:l,y:u},to:{width:c,height:h,x:l,y:u},duration:_,animationEasing:m,isActive:x},function(w){var k=w.width,C=w.height,T=w.x,E=w.y;return X.createElement(za,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:_,isActive:g,easing:m},X.createElement("path",kb({},ht(n,!0),{className:b,d:P4(T,E,k,C,f),ref:r})))}):X.createElement("path",kb({},ht(n,!0),{className:b,d:P4(l,u,c,h,f)}))};function LI(){return LI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LI.apply(this,arguments)}var VR=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,o=kt("recharts-dot",s);return n===+n&&r===+r&&i===+i?X.createElement("circle",LI({},ht(e,!1),Ux(e),{className:o,cx:n,cy:r,r:i})):null};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}var uYe=["x","y","top","left","width","height","className"];function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cYe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(r){hYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hYe(t,e,n){return e=fYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fYe(t){var e=dYe(t,"string");return Ig(e)=="symbol"?e:e+""}function dYe(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pYe(t,e){if(t==null)return{};var n=mYe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gYe=function(e,n,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},yYe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,a=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,h=c===void 0?0:c,f=e.height,p=f===void 0?0:f,m=e.className,_=pYe(e,uYe),v=cYe({x:r,y:s,top:a,left:u,width:h,height:p},_);return!we(r)||!we(s)||!we(h)||!we(p)||!we(a)||!we(u)?null:X.createElement("path",FI({},ht(v,!0),{className:kt("recharts-cross",m),d:gYe(r,s,h,p,a,u)}))},vYe=ZZ,_Ye=vYe(Object.getPrototypeOf,Object),xYe=_Ye,bYe=Xa,wYe=xYe,SYe=Za,kYe="[object Object]",CYe=Function.prototype,TYe=Object.prototype,LJ=CYe.toString,$Ye=TYe.hasOwnProperty,EYe=LJ.call(Object);function IYe(t){if(!SYe(t)||bYe(t)!=kYe)return!1;var e=wYe(t);if(e===null)return!0;var n=$Ye.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&LJ.call(n)==EYe}var AYe=IYe;const OYe=Mt(AYe);var NYe=Xa,PYe=Za,RYe="[object Boolean]";function DYe(t){return t===!0||t===!1||PYe(t)&&NYe(t)==RYe}var MYe=DYe;const LYe=Mt(MYe);function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cb.apply(this,arguments)}function FYe(t,e){return VYe(t)||jYe(t,e)||zYe(t,e)||BYe()}function BYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zYe(t,e){if(t){if(typeof t=="string")return D4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D4(t,e)}}function D4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function VYe(t){if(Array.isArray(t))return t}function M4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M4(Object(n),!0).forEach(function(r){UYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UYe(t,e,n){return e=WYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WYe(t){var e=GYe(t,"string");return Ag(e)=="symbol"?e:e+""}function GYe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F4=function(e,n,r,i,s){var o=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+s),a+="L ".concat(e+r-o/2-i,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},HYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KYe=function(e){var n=L4(L4({},HYe),e),r=J.useRef(),i=J.useState(-1),s=FYe(i,2),o=s[0],a=s[1];J.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,h=n.lowerWidth,f=n.height,p=n.className,m=n.animationEasing,_=n.animationDuration,v=n.animationBegin,g=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||h!==+h||f!==+f||c===0&&h===0||f===0)return null;var x=kt("recharts-trapezoid",p);return g?X.createElement(za,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:c,lowerWidth:h,height:f,x:l,y:u},duration:_,animationEasing:m,isActive:g},function(b){var w=b.upperWidth,k=b.lowerWidth,C=b.height,T=b.x,E=b.y;return X.createElement(za,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:_,easing:m},X.createElement("path",Cb({},ht(n,!0),{className:x,d:F4(T,E,w,k,C),ref:r})))}):X.createElement("g",null,X.createElement("path",Cb({},ht(n,!0),{className:x,d:F4(l,u,c,h,f)})))},qYe=["option","shapeType","propTransformer","activeClassName","isActive"];function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function XYe(t,e){if(t==null)return{};var n=ZYe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function B4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B4(Object(n),!0).forEach(function(r){YYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YYe(t,e,n){return e=JYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JYe(t){var e=QYe(t,"string");return Og(e)=="symbol"?e:e+""}function QYe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eJe(t,e){return Tb(Tb({},e),t)}function tJe(t,e){return t==="symbols"}function z4(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return X.createElement(jR,n);case"trapezoid":return X.createElement(KYe,n);case"sector":return X.createElement(TJ,n);case"symbols":if(tJe(e))return X.createElement(oR,n);break;default:return null}}function nJe(t){return J.isValidElement(t)?t.props:t}function rJe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?eJe:r,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,a=t.isActive,l=XYe(t,qYe),u;if(J.isValidElement(e))u=J.cloneElement(e,Tb(Tb({},l),nJe(e)));else if(et(e))u=e(l);else if(OYe(e)&&!LYe(e)){var c=i(e,l);u=X.createElement(z4,{shapeType:n,elementProps:c})}else{var h=l;u=X.createElement(z4,{shapeType:n,elementProps:h})}return a?X.createElement(mn,{className:o},u):u}function PS(t,e){return e!=null&&"trapezoids"in t.props}function RS(t,e){return e!=null&&"sectors"in t.props}function Ng(t,e){return e!=null&&"points"in t.props}function iJe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function sJe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function oJe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function aJe(t,e){var n;return PS(t,e)?n=iJe:RS(t,e)?n=sJe:Ng(t,e)&&(n=oJe),n}function lJe(t,e){var n;return PS(t,e)?n="trapezoids":RS(t,e)?n="sectors":Ng(t,e)&&(n="points"),n}function uJe(t,e){if(PS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(RS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ng(t,e)?e.payload:{}}function cJe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=lJe(n,e),s=uJe(n,e),o=r.filter(function(l,u){var c=mg(s,l),h=n.props[i].filter(function(m){var _=aJe(n,e);return _(m,e)}),f=n.props[i].indexOf(h[h.length-1]),p=u===f;return c&&p}),a=r.indexOf(o[o.length-1]);return a}var hJe=Math.ceil,fJe=Math.max;function dJe(t,e,n,r){for(var i=-1,s=fJe(hJe((e-t)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=t,t+=n;return o}var pJe=dJe,mJe=mY,j4=1/0,gJe=17976931348623157e292;function yJe(t){if(!t)return t===0?t:0;if(t=mJe(t),t===j4||t===-j4){var e=t<0?-1:1;return e*gJe}return t===t?t:0}var FJ=yJe,vJe=pJe,_Je=wS,iT=FJ;function xJe(t){return function(e,n,r){return r&&typeof r!="number"&&_Je(e,n,r)&&(n=r=void 0),e=iT(e),n===void 0?(n=e,e=0):n=iT(n),r=r===void 0?e<n?1:-1:iT(r),vJe(e,n,r,t)}}var bJe=xJe,wJe=bJe,SJe=wJe(),kJe=SJe;const $b=Mt(kJe);function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){BJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BJ(t,e,n){return e=CJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CJe(t){var e=TJe(t,"string");return Pg(e)=="symbol"?e:e+""}function TJe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Je=["Webkit","Moz","O","ms"],EJe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=$Je.reduce(function(s,o){return U4(U4({},s),{},BJ({},o+r,n))},{});return i[e]=n,i};function Hf(t){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(t)}function Eb(){return Eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eb.apply(this,arguments)}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(r){Di(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jJ(r.key),r)}}function AJe(t,e,n){return e&&G4(t.prototype,e),n&&G4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function OJe(t,e,n){return e=Ib(e),NJe(t,zJ()?Reflect.construct(e,n||[],Ib(t).constructor):e.apply(t,n))}function NJe(t,e){if(e&&(Hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PJe(t)}function PJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zJ=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ib(t)}function RJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BI(t,e)}function Di(t,e,n){return e=jJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jJ(t){var e=DJe(t,"string");return Hf(e)=="symbol"?e:e+""}function DJe(t,e){if(Hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MJe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=pm().domain($b(0,l)).range([s,s+o-a]),c=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},H4=function(e){return e.changedTouches&&!!e.changedTouches.length},Kf=function(t){function e(n){var r;return IJe(this,e),r=OJe(this,e,[n]),Di(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Di(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Di(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,a=i.startIndex;o==null||o({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),Di(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Di(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Di(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Di(r,"handleSlideDragStart",function(i){var s=H4(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return RJe(e,t),AJe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,h=Math.min(i,s),f=Math.max(i,s),p=e.getIndexInRange(o,h),m=e.getIndexInRange(o,f);return{startIndex:p-p%l,endIndex:m===c?c:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,a=i.dataKey,l=Ji(s[r],a,r);return et(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,a=i.endX,l=this.props,u=l.x,c=l.width,h=l.travellerWidth,f=l.startIndex,p=l.endIndex,m=l.onChange,_=r.pageX-s;_>0?_=Math.min(_,u+c-h-a,u+c-h-o):_<0&&(_=Math.max(_,u-o,u-a));var v=this.getIndex({startX:o+_,endX:a+_});(v.startIndex!==f||v.endIndex!==p)&&m&&m(v),this.setState({startX:o+_,endX:a+_,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=H4(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[o],c=this.props,h=c.x,f=c.width,p=c.travellerWidth,m=c.onChange,_=c.gap,v=c.data,g={startX:this.state.startX,endX:this.state.endX},x=r.pageX-s;x>0?x=Math.min(x,h+f-p-u):x<0&&(x=Math.max(x,h-u)),g[o]=u+x;var b=this.getIndex(g),w=b.startIndex,k=b.endIndex,C=function(){var E=v.length-1;return o==="startX"&&(a>l?w%_===0:k%_===0)||a<l&&k===E||o==="endX"&&(a>l?k%_===0:w%_===0)||a>l&&k===E};this.setState(Di(Di({},o,u+x),"brushMoveStartX",r.pageX),function(){m&&C()&&m(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,a=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],h=a.indexOf(c);if(h!==-1){var f=h+r;if(!(f===-1||f>=a.length)){var p=a[f];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(Di({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.fill,u=r.stroke;return X.createElement("rect",{stroke:u,fill:l,x:i,y:s,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,h=J.Children.only(u);return h?X.cloneElement(h,{x:i,y:s,width:o,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,a=this,l=this.props,u=l.y,c=l.travellerWidth,h=l.height,f=l.traveller,p=l.ariaLabel,m=l.data,_=l.startIndex,v=l.endIndex,g=Math.max(r,this.props.x),x=sT(sT({},ht(this.props,!1)),{},{x:g,y:u,width:c,height:h}),b=p||"Min value: ".concat((s=m[_])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=m[v])===null||o===void 0?void 0:o.name);return X.createElement(mn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),a.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:h,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,h=c.startX,f=c.endX,p=5,m={pointerEvents:"none",fill:u};return X.createElement(mn,{className:"recharts-brush-texts"},X.createElement(ib,Eb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:o+a/2},m),this.getTextOfTick(i)),X.createElement(ib,Eb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+l+p,y:o+a/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,a=r.x,l=r.y,u=r.width,c=r.height,h=r.alwaysShowText,f=this.state,p=f.startX,m=f.endX,_=f.isTextActive,v=f.isSlideMoving,g=f.isTravellerMoving,x=f.isTravellerFocused;if(!i||!i.length||!we(a)||!we(l)||!we(u)||!we(c)||u<=0||c<=0)return null;var b=kt("recharts-brush",s),w=X.Children.count(o)===1,k=EJe("userSelect","none");return X.createElement(mn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(_||v||g||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,a=r.height,l=r.stroke,u=Math.floor(s+a/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:i,y:s,width:o,height:a,fill:l,stroke:"none"}),X.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return X.isValidElement(r)?s=X.cloneElement(r,i):et(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,h=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return sT({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o},s&&s.length?MJe({data:s,width:o,x:a,travellerWidth:l,startIndex:c,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+o-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,a=s-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>i?a=l:o=l}return i>=r[a]?a:o}}])}(J.PureComponent);Di(Kf,"displayName","Brush");Di(Kf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var LJe=dR;function FJe(t,e){var n;return LJe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var BJe=FJe,zJe=VZ,jJe=hu,VJe=BJe,UJe=Ai,WJe=wS;function GJe(t,e,n){var r=UJe(t)?zJe:VJe;return n&&WJe(t,e,n)&&(e=void 0),r(t,jJe(e))}var HJe=GJe;const KJe=Mt(HJe);var qo=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},K4=cY;function qJe(t,e,n){e=="__proto__"&&K4?K4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var XJe=qJe,ZJe=XJe,YJe=lY,JJe=hu;function QJe(t,e){var n={};return e=JJe(e),YJe(t,function(r,i,s){ZJe(n,i,e(r,i,s))}),n}var eQe=QJe;const tQe=Mt(eQe);function nQe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var rQe=nQe,iQe=dR;function sQe(t,e){var n=!0;return iQe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var oQe=sQe,aQe=rQe,lQe=oQe,uQe=hu,cQe=Ai,hQe=wS;function fQe(t,e,n){var r=cQe(t)?aQe:lQe;return n&&hQe(t,e,n)&&(e=void 0),r(t,uQe(e))}var dQe=fQe;const VJ=Mt(dQe);var pQe=["x","y"];function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(r){mQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mQe(t,e,n){return e=gQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQe(t){var e=yQe(t,"string");return Rg(e)=="symbol"?e:e+""}function yQe(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vQe(t,e){if(t==null)return{};var n=_Qe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Qe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xQe(t,e){var n=t.x,r=t.y,i=vQe(t,pQe),s="".concat(n),o=parseInt(s,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),c=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return $p($p($p($p($p({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:f,name:e.name,radius:e.radius})}function X4(t){return X.createElement(rJe,zI({shapeType:"rectangle",propTransformer:xQe,activeClassName:"recharts-active-bar"},t))}var bQe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,i):(s||Nc(),n)}},wQe=["value","background"],UJ;function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function SQe(t,e){if(t==null)return{};var n=kQe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ab(){return Ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ab.apply(this,arguments)}function Z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(n),!0).forEach(function(r){wl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GJ(r.key),r)}}function TQe(t,e,n){return e&&Y4(t.prototype,e),n&&Y4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Qe(t,e,n){return e=Ob(e),EQe(t,WJ()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n))}function EQe(t,e){if(e&&(qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IQe(t)}function IQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WJ=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ob(t)}function AQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jI(t,e)}function jI(t,e){return jI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jI(t,e)}function wl(t,e,n){return e=GJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GJ(t){var e=OQe(t,"string");return qf(e)=="symbol"?e:e+""}function OQe(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iv=function(t){function e(){var n;CQe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=$Qe(this,e,[].concat(i)),wl(n,"state",{isAnimationFinished:!1}),wl(n,"id",Sv("recharts-bar-")),wl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),wl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return AQe(e,t),TQe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,a=s.dataKey,l=s.activeIndex,u=s.activeBar,c=ht(this.props,!1);return r&&r.map(function(h,f){var p=f===l,m=p?u:o,_=Dn(Dn(Dn({},c),h),{},{isActive:p,option:m,index:f,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return X.createElement(mn,Ab({className:"recharts-bar-rectangle"},Wx(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value)}),X.createElement(X4,_))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,a=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,h=i.animationId,f=this.state.prevData;return X.createElement(za,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,_=s.map(function(v,g){var x=f&&f[g];if(x){var b=ys(x.x,v.x),w=ys(x.y,v.y),k=ys(x.width,v.width),C=ys(x.height,v.height);return Dn(Dn({},v),{},{x:b(m),y:w(m),width:k(m),height:C(m)})}if(o==="horizontal"){var T=ys(0,v.height),E=T(m);return Dn(Dn({},v),{},{y:v.y+v.height-E,height:E})}var A=ys(0,v.width),$=A(m);return Dn(Dn({},v),{},{width:$})});return X.createElement(mn,null,r.renderRectanglesStatically(_))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!mg(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,a=i.activeIndex,l=ht(this.props.background,!1);return s.map(function(u,c){u.value;var h=u.background,f=SQe(u,wQe);if(!h)return null;var p=Dn(Dn(Dn(Dn(Dn({},f),{},{fill:"#eee"},h),l),Wx(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:c,className:"recharts-bar-background-rectangle"});return X.createElement(X4,Ab({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,h=uo(c,NS);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,p=function(v,g){var x=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:x,errorVal:Ji(v,g)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return X.createElement(mn,m,h.map(function(_){return X.cloneElement(_,{key:"error-bar-".concat(i,"-").concat(_.props.dataKey),data:o,xAxis:a,yAxis:l,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,h=r.width,f=r.height,p=r.isAnimationActive,m=r.background,_=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=kt("recharts-bar",o),x=a&&a.allowDataOverflow,b=l&&l.allowDataOverflow,w=x||b,k=mt(_)?this.id:_;return X.createElement(mn,{className:g},x||b?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(k)},X.createElement("rect",{x:x?u:u-h/2,y:b?c:c-f/2,width:x?h:h*2,height:b?f:f*2}))):null,X.createElement(mn,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(k,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,k),(!p||v)&&Fl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(J.PureComponent);UJ=Iv;wl(Iv,"displayName","Bar");wl(Iv,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});wl(Iv,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,h=t.displayedData,f=t.offset,p=a7e(r,n);if(!p)return null;var m=e.layout,_=n.type.defaultProps,v=_!==void 0?Dn(Dn({},_),n.props):n.props,g=v.dataKey,x=v.children,b=v.minPointSize,w=m==="horizontal"?o:s,k=u?w.scale.domain():null,C=m7e({numericAxis:w}),T=uo(x,yY),E=h.map(function(A,$){var N,P,M,B,z,j;u?N=l7e(u[c+$],k):(N=Ji(A,g),Array.isArray(N)||(N=[C,N]));var U=bQe(b,UJ.defaultProps.minPointSize)(N[1],$);if(m==="horizontal"){var D,W=[o.scale(N[0]),o.scale(N[1])],G=W[0],Y=W[1];P=Zj({axis:s,ticks:a,bandSize:i,offset:p.offset,entry:A,index:$}),M=(D=Y??G)!==null&&D!==void 0?D:void 0,B=p.size;var ee=G-Y;if(z=Number.isNaN(ee)?0:ee,j={x:P,y:o.y,width:B,height:o.height},Math.abs(U)>0&&Math.abs(z)<Math.abs(U)){var se=ro(z||U)*(Math.abs(U)-Math.abs(z));M-=se,z+=se}}else{var fe=[s.scale(N[0]),s.scale(N[1])],le=fe[0],de=fe[1];if(P=le,M=Zj({axis:o,ticks:l,bandSize:i,offset:p.offset,entry:A,index:$}),B=de-le,z=p.size,j={x:s.x,y:M,width:s.width,height:z},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var Se=ro(B||U)*(Math.abs(U)-Math.abs(B));B+=Se}}return Dn(Dn(Dn({},A),{},{x:P,y:M,width:B,height:z,value:u?N:N[1],payload:A,background:j},T&&T[$]&&T[$].props),{},{tooltipPayload:[SJ(n,A)],tooltipPosition:{x:P+B/2,y:M+z/2}})});return Dn({data:E,layout:m},f)});function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function NQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HJ(r.key),r)}}function PQe(t,e,n){return e&&J4(t.prototype,e),n&&J4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q4(Object(n),!0).forEach(function(r){DS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DS(t,e,n){return e=HJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HJ(t){var e=RQe(t,"string");return Dg(e)=="symbol"?e:e+""}function RQe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DQe=function(e,n,r,i,s){var o=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!Li(u,Iv);return c.reduce(function(p,m){var _=n[m],v=_.orientation,g=_.domain,x=_.padding,b=x===void 0?{}:x,w=_.mirror,k=_.reversed,C="".concat(v).concat(w?"Mirror":""),T,E,A,$,N;if(_.type==="number"&&(_.padding==="gap"||_.padding==="no-gap")){var P=g[1]-g[0],M=1/0,B=_.categoricalDomain.sort();if(B.forEach(function(fe,le){le>0&&(M=Math.min((fe||0)-(B[le-1]||0),M))}),Number.isFinite(M)){var z=M/P,j=_.layout==="vertical"?r.height:r.width;if(_.padding==="gap"&&(T=z*j/2),_.padding==="no-gap"){var U=Ac(e.barCategoryGap,z*j),D=z*j/2;T=D-U-(D-U)/j*U}}}i==="xAxis"?E=[r.left+(b.left||0)+(T||0),r.left+r.width-(b.right||0)-(T||0)]:i==="yAxis"?E=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(T||0),r.top+r.height-(b.bottom||0)-(T||0)]:E=_.range,k&&(E=[E[1],E[0]]);var W=s7e(_,s,f),G=W.scale,Y=W.realScaleType;G.domain(g).range(E),o7e(G);var ee=p7e(G,Zs(Zs({},_),{},{realScaleType:Y}));i==="xAxis"?(N=v==="top"&&!w||v==="bottom"&&w,A=r.left,$=h[C]-N*_.height):i==="yAxis"&&(N=v==="left"&&!w||v==="right"&&w,A=h[C]-N*_.width,$=r.top);var se=Zs(Zs(Zs({},_),ee),{},{realScaleType:Y,x:A,y:$,scale:G,width:i==="xAxis"?r.width:_.width,height:i==="yAxis"?r.height:_.height});return se.bandSize=vb(se,ee),!_.hide&&i==="xAxis"?h[C]+=(N?-1:1)*se.height:_.hide||(h[C]+=(N?-1:1)*se.width),Zs(Zs({},p),{},DS({},m,se))},{})},KJ=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},MQe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return KJ({x:n,y:r},{x:i,y:s})},qJ=function(){function t(e){NQe(this,t),this.scale=e}return PQe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();DS(qJ,"EPS",1e-4);var UR=function(e){var n=Object.keys(e).reduce(function(r,i){return Zs(Zs({},r),{},DS({},i,qJ.create(e[i])))},{});return Zs(Zs({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,a=s.position;return tQe(i,function(l,u){return n[u].apply(l,{bandAware:o,position:a})})},isInRange:function(i){return VJ(i,function(s,o){return n[o].isInRange(s)})}})};function LQe(t){return(t%180+180)%180}var FQe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=LQe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},BQe=hu,zQe=kv,jQe=xS;function VQe(t){return function(e,n,r){var i=Object(e);if(!zQe(e)){var s=BQe(n);e=jQe(e),n=function(a){return s(i[a],a,i)}}var o=t(e,n,r);return o>-1?i[s?e[o]:o]:void 0}}var UQe=VQe,WQe=FJ;function GQe(t){var e=WQe(t),n=e%1;return e===e?n?e-n:e:0}var HQe=GQe,KQe=nY,qQe=hu,XQe=HQe,ZQe=Math.max;function YQe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:XQe(n);return i<0&&(i=ZQe(r+i,0)),KQe(t,qQe(e),i)}var JQe=YQe,QQe=UQe,eet=JQe,tet=QQe(eet),net=tet;const ret=Mt(net);var iet=UFe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),WR=J.createContext(void 0),GR=J.createContext(void 0),XJ=J.createContext(void 0),ZJ=J.createContext({}),YJ=J.createContext(void 0),JJ=J.createContext(0),QJ=J.createContext(0),eV=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,a=e.children,l=e.width,u=e.height,c=iet(s);return X.createElement(WR.Provider,{value:r},X.createElement(GR.Provider,{value:i},X.createElement(ZJ.Provider,{value:s},X.createElement(XJ.Provider,{value:c},X.createElement(YJ.Provider,{value:o},X.createElement(JJ.Provider,{value:u},X.createElement(QJ.Provider,{value:l},a)))))))},set=function(){return J.useContext(YJ)},eQ=function(e){var n=J.useContext(WR);n==null&&Nc();var r=n[e];return r==null&&Nc(),r},oet=function(){var e=J.useContext(WR);return pl(e)},aet=function(){var e=J.useContext(GR),n=ret(e,function(r){return VJ(r.domain,Number.isFinite)});return n||pl(e)},tQ=function(e){var n=J.useContext(GR);n==null&&Nc();var r=n[e];return r==null&&Nc(),r},uet=function(){var e=J.useContext(XJ);return e},cet=function(){return J.useContext(ZJ)},HR=function(){return J.useContext(QJ)},KR=function(){return J.useContext(JJ)};function Xf(t){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(t)}function het(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fet(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rQ(r.key),r)}}function det(t,e,n){return e&&fet(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pet(t,e,n){return e=Nb(e),met(t,nQ()?Reflect.construct(e,n||[],Nb(t).constructor):e.apply(t,n))}function met(t,e){if(e&&(Xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return get(t)}function get(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nb(t)}function yet(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}function VI(t,e){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VI(t,e)}function tV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(n),!0).forEach(function(r){qR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qR(t,e,n){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rQ(t){var e=vet(t,"string");return Xf(e)=="symbol"?e:e+""}function vet(t,e){if(Xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _et(t,e){return ket(t)||wet(t,e)||bet(t,e)||xet()}function xet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bet(t,e){if(t){if(typeof t=="string")return rV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rV(t,e)}}function rV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wet(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function ket(t){if(Array.isArray(t))return t}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}var Cet=function(e,n){var r;return X.isValidElement(e)?r=X.cloneElement(e,n):et(e)?r=e(n):r=X.createElement("line",UI({},n,{className:"recharts-reference-line-line"})),r},Tet=function(e,n,r,i,s,o,a,l,u){var c=s.x,h=s.y,f=s.width,p=s.height;if(r){var m=u.y,_=e.y.apply(m,{position:o});if(qo(u,"discard")&&!e.y.isInRange(_))return null;var v=[{x:c+f,y:_},{x:c,y:_}];return l==="left"?v.reverse():v}if(n){var g=u.x,x=e.x.apply(g,{position:o});if(qo(u,"discard")&&!e.x.isInRange(x))return null;var b=[{x,y:h+p},{x,y:h}];return a==="top"?b.reverse():b}if(i){var w=u.segment,k=w.map(function(C){return e.apply(C,{position:o})});return qo(u,"discard")&&KJe(k,function(C){return!e.isInRange(C)})?null:k}return null};function $et(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,u=set(),c=eQ(i),h=tQ(s),f=uet();if(!u||!f)return null;Ca(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=UR({x:c.scale,y:h.scale}),m=Yn(e),_=Yn(n),v=r&&r.length===2,g=Tet(p,m,_,v,f,t.position,c.orientation,h.orientation,t);if(!g)return null;var x=_et(g,2),b=x[0],w=b.x,k=b.y,C=x[1],T=C.x,E=C.y,A=qo(t,"hidden")?"url(#".concat(u,")"):void 0,$=nV(nV({clipPath:A},ht(t,!0)),{},{x1:w,y1:k,x2:T,y2:E});return X.createElement(mn,{className:kt("recharts-reference-line",a)},Cet(o,$),Fr.renderCallByParent(t,MQe({x1:w,y1:k,x2:T,y2:E})))}var XR=function(t){function e(){return het(this,e),pet(this,e,arguments)}return yet(e,t),det(e,[{key:"render",value:function(){return X.createElement($et,this.props)}}])}(X.Component);qR(XR,"displayName","ReferenceLine");qR(XR,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}function Zf(t){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zf(t)}function iV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(n),!0).forEach(function(r){MS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eet(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iet(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sQ(r.key),r)}}function Aet(t,e,n){return e&&Iet(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oet(t,e,n){return e=Pb(e),Net(t,iQ()?Reflect.construct(e,n||[],Pb(t).constructor):e.apply(t,n))}function Net(t,e){if(e&&(Zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pet(t)}function Pet(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iQ=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pb(t)}function Ret(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GI(t,e)}function MS(t,e,n){return e=sQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sQ(t){var e=Det(t,"string");return Zf(e)=="symbol"?e:e+""}function Det(t,e){if(Zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Met=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=UR({x:i.scale,y:s.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return qo(e,"discard")&&!o.isInRange(a)?null:a},LS=function(t){function e(){return Eet(this,e),Oet(this,e,arguments)}return Ret(e,t),Aet(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,u=Yn(i),c=Yn(s);if(Ca(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var h=Met(this.props);if(!h)return null;var f=h.x,p=h.y,m=this.props,_=m.shape,v=m.className,g=qo(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=sV(sV({clipPath:g},ht(this.props,!0)),{},{cx:f,cy:p});return X.createElement(mn,{className:kt("recharts-reference-dot",v)},e.renderDot(_,x),Fr.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(X.Component);MS(LS,"displayName","ReferenceDot");MS(LS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});MS(LS,"renderDot",function(t,e){var n;return X.isValidElement(t)?n=X.cloneElement(t,e):et(t)?n=t(e):n=X.createElement(VR,WI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HI.apply(this,arguments)}function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){FS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Let(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fet(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aQ(r.key),r)}}function Bet(t,e,n){return e&&Fet(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zet(t,e,n){return e=Rb(e),jet(t,oQ()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function jet(t,e){if(e&&(Yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vet(t)}function Vet(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rb(t)}function Uet(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}function KI(t,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KI(t,e)}function FS(t,e,n){return e=aQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aQ(t){var e=Wet(t,"string");return Yf(e)=="symbol"?e:e+""}function Wet(t,e){if(Yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Get=function(e,n,r,i,s){var o=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,h=s.yAxis;if(!c||!h)return null;var f=UR({x:c.scale,y:h.scale}),p={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return qo(s,"discard")&&(!f.isInRange(p)||!f.isInRange(m))?null:KJ(p,m)},BS=function(t){function e(){return Let(this,e),zet(this,e,arguments)}return Uet(e,t),Bet(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;Ca(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Yn(i),f=Yn(s),p=Yn(o),m=Yn(a),_=this.props.shape;if(!h&&!f&&!p&&!m&&!_)return null;var v=Get(h,f,p,m,this.props);if(!v&&!_)return null;var g=qo(this.props,"hidden")?"url(#".concat(c,")"):void 0;return X.createElement(mn,{className:kt("recharts-reference-area",l)},e.renderRect(_,aV(aV({clipPath:g},ht(this.props,!0)),v)),Fr.renderCallByParent(this.props,v))}}])}(X.Component);FS(BS,"displayName","ReferenceArea");FS(BS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});FS(BS,"renderRect",function(t,e){var n;return X.isValidElement(t)?n=X.cloneElement(t,e):et(t)?n=t(e):n=X.createElement(jR,HI({},e,{className:"recharts-reference-area-rect"})),n});function lQ(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Het(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return FQe(r,n)}function Ket(t,e,n){var r=n==="width",i=t.x,s=t.y,o=t.width,a=t.height;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function Db(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function qet(t,e){return lQ(t,e+1)}function Xet(t,e,n,r,i){for(var s=(r||[]).slice(),o=e.start,a=e.end,l=0,u=1,c=o,h=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:lQ(r,u)};var _=l,v,g=function(){return v===void 0&&(v=n(m,_)),v},x=m.coordinate,b=l===0||Db(t,x,g,c,a);b||(l=0,c=o,u+=1),b&&(c=x+t*(g()/2+i),l+=u)},f;u<=s.length;)if(f=h(),f)return f.v;return[]}function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){Zet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zet(t,e,n){return e=Yet(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yet(t){var e=Jet(t,"string");return Mg(e)=="symbol"?e:e+""}function Jet(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qet(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,a=e.start,l=e.end,u=function(f){var p=s[f],m,_=function(){return m===void 0&&(m=n(p,f)),m};if(f===o-1){var v=t*(p.coordinate+t*_()/2-l);s[f]=p=Rr(Rr({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate})}else s[f]=p=Rr(Rr({},p),{},{tickCoord:p.coordinate});var g=Db(t,p.tickCoord,_,a,l);g&&(l=p.tickCoord-t*(_()/2+i),s[f]=Rr(Rr({},p),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return s}function ett(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,l=e.start,u=e.end;if(s){var c=r[a-1],h=n(c,a-1),f=t*(c.coordinate+t*h/2-u);o[a-1]=c=Rr(Rr({},c),{},{tickCoord:f>0?c.coordinate-f*t:c.coordinate});var p=Db(t,c.tickCoord,function(){return h},l,u);p&&(u=c.tickCoord-t*(h/2+i),o[a-1]=Rr(Rr({},c),{},{isShow:!0}))}for(var m=s?a-1:a,_=function(x){var b=o[x],w,k=function(){return w===void 0&&(w=n(b,x)),w};if(x===0){var C=t*(b.coordinate-t*k()/2-l);o[x]=b=Rr(Rr({},b),{},{tickCoord:C<0?b.coordinate-C*t:b.coordinate})}else o[x]=b=Rr(Rr({},b),{},{tickCoord:b.coordinate});var T=Db(t,b.tickCoord,k,l,u);T&&(l=b.tickCoord+t*(k()/2+i),o[x]=Rr(Rr({},b),{},{isShow:!0}))},v=0;v<m;v++)_(v);return o}function ZR(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(we(l)||Ta.isSsr)return qet(i,typeof l=="number"&&we(l)?l:0);var f=[],p=a==="top"||a==="bottom"?"width":"height",m=c&&p==="width"?dm(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},_=function(b,w){var k=et(u)?u(b.value,w):b.value;return p==="width"?Het(dm(k,{fontSize:e,letterSpacing:n}),m,h):dm(k,{fontSize:e,letterSpacing:n})[p]},v=i.length>=2?ro(i[1].coordinate-i[0].coordinate):1,g=Ket(s,v,p);return l==="equidistantPreserveStart"?Xet(v,g,_,i,o):(l==="preserveStart"||l==="preserveStartEnd"?f=ett(v,g,_,i,o,l==="preserveStartEnd"):f=Qet(v,g,_,i,o),f.filter(function(x){return x.isShow}))}var ttt=["viewBox"],ntt=["viewBox"],rtt=["ticks"];function Jf(t){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(this,arguments)}function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(r){YR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oT(t,e){if(t==null)return{};var n=itt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function itt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function stt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cQ(r.key),r)}}function ott(t,e,n){return e&&cV(t.prototype,e),n&&cV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function att(t,e,n){return e=Mb(e),ltt(t,uQ()?Reflect.construct(e,n||[],Mb(t).constructor):e.apply(t,n))}function ltt(t,e){if(e&&(Jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return utt(t)}function utt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uQ=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mb(t)}function ctt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qI(t,e)}function YR(t,e,n){return e=cQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cQ(t){var e=htt(t,"string");return Jf(e)=="symbol"?e:e+""}function htt(t,e){if(Jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zd=function(t){function e(n){var r;return stt(this,e),r=att(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return ctt(e,t),ott(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=oT(r,ttt),a=this.props,l=a.viewBox,u=oT(a,ntt);return!lf(s,l)||!lf(o,u)||!lf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,a=i.width,l=i.height,u=i.orientation,c=i.tickSize,h=i.mirror,f=i.tickMargin,p,m,_,v,g,x,b=h?-1:1,w=r.tickSize||c,k=we(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=m=r.coordinate,v=o+ +!h*l,_=v-b*w,x=_-b*f,g=k;break;case"left":_=v=r.coordinate,m=s+ +!h*a,p=m-b*w,g=p-b*f,x=k;break;case"right":_=v=r.coordinate,m=s+ +h*a,p=m+b*w,g=p+b*f,x=k;break;default:p=m=r.coordinate,v=o+ +h*l,_=v+b*w,x=_+b*f,g=k;break}return{line:{x1:p,y1:_,x2:m,y2:v},tick:{x:g,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,h=Kr(Kr(Kr({},ht(this.props,!1)),ht(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);h=Kr(Kr({},h),{},{x1:i,y1:s+f*a,x2:i+o,y2:s+f*a})}else{var p=+(l==="left"&&!u||l==="right"&&u);h=Kr(Kr({},h),{},{x1:i+p*o,y1:s,x2:i+p*o,y2:s+a})}return X.createElement("line",qh({},h,{className:kt("recharts-cartesian-axis-line",$s(c,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,h=a.tickFormatter,f=a.unit,p=ZR(Kr(Kr({},this.props),{},{ticks:r}),i,s),m=this.getTickTextAnchor(),_=this.getTickVerticalAnchor(),v=ht(this.props,!1),g=ht(c,!1),x=Kr(Kr({},v),{},{fill:"none"},ht(l,!1)),b=p.map(function(w,k){var C=o.getTickLineCoord(w),T=C.line,E=C.tick,A=Kr(Kr(Kr(Kr({textAnchor:m,verticalAnchor:_},v),{},{stroke:"none",fill:u},g),E),{},{index:k,payload:w,visibleTicksCount:p.length,tickFormatter:h});return X.createElement(mn,qh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Wx(o.props,w,k)),l&&X.createElement("line",qh({},x,T,{className:kt("recharts-cartesian-axis-tick-line",$s(l,"className"))})),c&&e.renderTickItem(c,A,"".concat(et(h)?h(w.value,k):w.value).concat(f||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,a=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var h=this.props,f=h.ticks,p=oT(h,rtt),m=f;return et(l)&&(m=f&&f.length>0?l(this.props):l(p)),o<=0||a<=0||!m||!m.length?null:X.createElement(mn,{className:kt("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Fr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return X.isValidElement(r)?o=X.cloneElement(r,i):et(r)?o=r(i):o=X.createElement(ib,qh({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(J.Component);YR(zd,"displayName","CartesianAxis");YR(zd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ftt=["x1","y1","x2","y2","key"],dtt=["offset"];function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){ptt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ptt(t,e,n){return e=mtt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mtt(t){var e=gtt(t,"string");return Pc(e)=="symbol"?e:e+""}function gtt(t,e){if(Pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qu.apply(this,arguments)}function fV(t,e){if(t==null)return{};var n=ytt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ytt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vtt=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,a=e.height,l=e.ry;return X.createElement("rect",{x:i,y:s,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function hQ(t,e){var n;if(X.isValidElement(t))n=X.cloneElement(t,e);else if(et(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,a=e.key,l=fV(e,ftt),u=ht(l,!1);u.offset;var c=fV(u,dtt);n=X.createElement("line",Qu({},c,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return n}function _tt(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=Br(Br({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return hQ(i,u)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function xtt(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=Br(Br({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return hQ(i,u)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function btt(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==c[0]&&c.unshift(0);var h=c.map(function(f,p){var m=!c[p+1],_=m?i+o-f:c[p+1]-f;if(_<=0)return null;var v=p%e.length;return X.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:_,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function wtt(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==c[0]&&c.unshift(0);var h=c.map(function(f,p){var m=!c[p+1],_=m?s+a-f:c[p+1]-f;if(_<=0)return null;var v=p%r.length;return X.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:_,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Stt=function(e,n){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return bJ(ZR(Br(Br(Br({},zd.defaultProps),r),{},{ticks:_a(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},ktt=function(e,n){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return bJ(ZR(Br(Br(Br({},zd.defaultProps),r),{},{ticks:_a(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},xh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fQ(t){var e,n,r,i,s,o,a=HR(),l=KR(),u=cet(),c=Br(Br({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:xh.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:xh.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:xh.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:xh.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:xh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:xh.verticalFill,x:we(t.x)?t.x:u.left,y:we(t.y)?t.y:u.top,width:we(t.width)?t.width:u.width,height:we(t.height)?t.height:u.height}),h=c.x,f=c.y,p=c.width,m=c.height,_=c.syncWithTicks,v=c.horizontalValues,g=c.verticalValues,x=oet(),b=aet();if(!we(p)||p<=0||!we(m)||m<=0||!we(h)||h!==+h||!we(f)||f!==+f)return null;var w=c.verticalCoordinatesGenerator||Stt,k=c.horizontalCoordinatesGenerator||ktt,C=c.horizontalPoints,T=c.verticalPoints;if((!C||!C.length)&&et(k)){var E=v&&v.length,A=k({yAxis:b?Br(Br({},b),{},{ticks:E?v:b.ticks}):void 0,width:a,height:l,offset:u},E?!0:_);Ca(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Pc(A),"]")),Array.isArray(A)&&(C=A)}if((!T||!T.length)&&et(w)){var $=g&&g.length,N=w({xAxis:x?Br(Br({},x),{},{ticks:$?g:x.ticks}):void 0,width:a,height:l,offset:u},$?!0:_);Ca(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Pc(N),"]")),Array.isArray(N)&&(T=N)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(vtt,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),X.createElement(_tt,Qu({},c,{offset:u,horizontalPoints:C,xAxis:x,yAxis:b})),X.createElement(xtt,Qu({},c,{offset:u,verticalPoints:T,xAxis:x,yAxis:b})),X.createElement(btt,Qu({},c,{horizontalPoints:C})),X.createElement(wtt,Qu({},c,{verticalPoints:T})))}fQ.displayName="CartesianGrid";var Ctt=["layout","type","stroke","connectNulls","isRange","ref"],Ttt=["key"],dQ;function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}function pQ(t,e){if(t==null)return{};var n=$tt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $tt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(this,arguments)}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){Lo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ett(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gQ(r.key),r)}}function Itt(t,e,n){return e&&pV(t.prototype,e),n&&pV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Att(t,e,n){return e=Lb(e),Ott(t,mQ()?Reflect.construct(e,n||[],Lb(t).constructor):e.apply(t,n))}function Ott(t,e){if(e&&(Qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ntt(t)}function Ntt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mQ=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lb(t)}function Ptt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XI(t,e)}function XI(t,e){return XI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XI(t,e)}function Lo(t,e,n){return e=gQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQ(t){var e=Rtt(t,"string");return Qf(e)=="symbol"?e:e+""}function Rtt(t,e){if(Qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ja=function(t){function e(){var n;Ett(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Att(this,e,[].concat(i)),Lo(n,"state",{isAnimationFinished:!0}),Lo(n,"id",Sv("recharts-area-")),Lo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),et(o)&&o()}),Lo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),et(o)&&o()}),n}return Ptt(e,t),Itt(e,[{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(o&&!a)return null;var l=this.props,u=l.dot,c=l.points,h=l.dataKey,f=ht(this.props,!1),p=ht(u,!0),m=c.map(function(v,g){var x=nl(nl(nl({key:"dot-".concat(g),r:3},f),p),{},{index:g,cx:v.x,cy:v.y,dataKey:h,value:v.value,payload:v.payload,points:c});return e.renderDotItem(u,x)}),_={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return X.createElement(mn,ec({className:"recharts-area-dots"},_),m)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,a=i.strokeWidth,l=o[0].x,u=o[o.length-1].x,c=r*Math.abs(l-u),h=bl(o.map(function(f){return f.y||0}));return we(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(bl(s.map(function(f){return f.y||0})),h)),we(h)?X.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(h+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,a=i.strokeWidth,l=o[0].y,u=o[o.length-1].y,c=r*Math.abs(l-u),h=bl(o.map(function(f){return f.x||0}));return we(s)&&typeof s=="number"?h=Math.max(s,h):s&&Array.isArray(s)&&s.length&&(h=Math.max(bl(s.map(function(f){return f.x||0})),h)),we(h)?X.createElement("rect",{x:0,y:l<u?l:l-c,width:h+(a?parseInt("".concat(a),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,o){var a=this.props,l=a.layout,u=a.type,c=a.stroke,h=a.connectNulls,f=a.isRange;a.ref;var p=pQ(a,Ctt);return X.createElement(mn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},X.createElement(gm,ec({},ht(p,!0),{points:r,connectNulls:h,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&X.createElement(gm,ec({},ht(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:h,fill:"none",points:r})),c!=="none"&&f&&X.createElement(gm,ec({},ht(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,o=this.props,a=o.points,l=o.baseLine,u=o.isAnimationActive,c=o.animationBegin,h=o.animationDuration,f=o.animationEasing,p=o.animationId,m=this.state,_=m.prevPoints,v=m.prevBaseLine;return X.createElement(za,{begin:c,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t;if(_){var b=_.length/a.length,w=a.map(function(E,A){var $=Math.floor(A*b);if(_[$]){var N=_[$],P=ys(N.x,E.x),M=ys(N.y,E.y);return nl(nl({},E),{},{x:P(x),y:M(x)})}return E}),k;if(we(l)&&typeof l=="number"){var C=ys(v,l);k=C(x)}else if(mt(l)||Pd(l)){var T=ys(v,0);k=T(x)}else k=l.map(function(E,A){var $=Math.floor(A*b);if(v[$]){var N=v[$],P=ys(N.x,E.x),M=ys(N.y,E.y);return nl(nl({},E),{},{x:P(x),y:M(x)})}return E});return s.renderAreaStatically(w,k,r,i)}return X.createElement(mn,null,X.createElement("defs",null,X.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(x))),X.createElement(mn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(a,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,o=s.points,a=s.baseLine,l=s.isAnimationActive,u=this.state,c=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return l&&o&&o.length&&(!c&&f>0||!mg(c,o)||!mg(h,a))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,a=i.points,l=i.className,u=i.top,c=i.left,h=i.xAxis,f=i.yAxis,p=i.width,m=i.height,_=i.isAnimationActive,v=i.id;if(s||!a||!a.length)return null;var g=this.state.isAnimationFinished,x=a.length===1,b=kt("recharts-area",l),w=h&&h.allowDataOverflow,k=f&&f.allowDataOverflow,C=w||k,T=mt(v)?this.id:v,E=(r=ht(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=E.r,$=A===void 0?3:A,N=E.strokeWidth,P=N===void 0?2:N,M=X3e(o)?o:{},B=M.clipDot,z=B===void 0?!0:B,j=$*2+P;return X.createElement(mn,{className:b},w||k?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(T)},X.createElement("rect",{x:w?c:c-p/2,y:k?u:u-m/2,width:w?p:p*2,height:k?m:m*2})),!z&&X.createElement("clipPath",{id:"clipPath-dots-".concat(T)},X.createElement("rect",{x:c-j/2,y:u-j/2,width:p+j,height:m+j}))):null,x?null:this.renderArea(C,T),(o||x)&&this.renderDots(C,z,T),(!_||g)&&Fl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(J.PureComponent);dQ=ja;Lo(ja,"displayName","Area");Lo(ja,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Lo(ja,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,o=e.props.baseValue,a=o??s;if(we(a)&&typeof a=="number")return a;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return a==="dataMin"?h:a==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return a==="dataMin"?u[0]:a==="dataMax"?u[1]:u[0]});Lo(ja,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,a=t.bandSize,l=t.dataKey,u=t.stackedData,c=t.dataStartIndex,h=t.displayedData,f=t.offset,p=e.layout,m=u&&u.length,_=dQ.getBaseValue(e,n,r,i),v=p==="horizontal",g=!1,x=h.map(function(w,k){var C;m?C=u[c+k]:(C=Ji(w,l),Array.isArray(C)?g=!0:C=[_,C]);var T=C[1]==null||m&&Ji(w,l)==null;return v?{x:Xj({axis:r,ticks:s,bandSize:a,entry:w,index:k}),y:T?null:i.scale(C[1]),value:C,payload:w}:{x:T?null:r.scale(C[1]),y:Xj({axis:i,ticks:o,bandSize:a,entry:w,index:k}),value:C,payload:w}}),b;return m||g?b=x.map(function(w){var k=Array.isArray(w.value)?w.value[0]:null;return v?{x:w.x,y:k!=null&&w.y!=null?i.scale(k):null}:{x:k!=null?r.scale(k):null,y:w.y}}):b=v?i.scale(_):r.scale(_),nl({points:x,baseLine:b,layout:p,isRange:g},f)});Lo(ja,"renderDotItem",function(t,e){var n;if(X.isValidElement(t))n=X.cloneElement(t,e);else if(et(t))n=t(e);else{var r=kt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=pQ(e,Ttt);n=X.createElement(VR,ec({},s,{key:i,className:r}))}return n});function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(t)}function Dtt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mtt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_Q(r.key),r)}}function Ltt(t,e,n){return e&&Mtt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ftt(t,e,n){return e=Fb(e),Btt(t,yQ()?Reflect.construct(e,n||[],Fb(t).constructor):e.apply(t,n))}function Btt(t,e){if(e&&(ed(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ztt(t)}function ztt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yQ=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fb(t)}function jtt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZI(t,e)}function ZI(t,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZI(t,e)}function vQ(t,e,n){return e=_Q(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Q(t){var e=Vtt(t,"string");return ed(e)=="symbol"?e:e+""}function Vtt(t,e){if(ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}function Utt(t){var e=t.xAxisId,n=HR(),r=KR(),i=eQ(e);return i==null?null:X.createElement(zd,YI({},i,{className:kt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return _a(o,!0)}}))}var zS=function(t){function e(){return Dtt(this,e),Ftt(this,e,arguments)}return jtt(e,t),Ltt(e,[{key:"render",value:function(){return X.createElement(Utt,this.props)}}])}(X.Component);vQ(zS,"displayName","XAxis");vQ(zS,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function td(t){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(t)}function Wtt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gtt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wQ(r.key),r)}}function Htt(t,e,n){return e&&Gtt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ktt(t,e,n){return e=Bb(e),qtt(t,xQ()?Reflect.construct(e,n||[],Bb(t).constructor):e.apply(t,n))}function qtt(t,e){if(e&&(td(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xtt(t)}function Xtt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bb(t)}function Ztt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JI(t,e)}function JI(t,e){return JI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JI(t,e)}function bQ(t,e,n){return e=wQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wQ(t){var e=Ytt(t,"string");return td(e)=="symbol"?e:e+""}function Ytt(t,e){if(td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QI.apply(this,arguments)}var Jtt=function(e){var n=e.yAxisId,r=HR(),i=KR(),s=tQ(n);return s==null?null:X.createElement(zd,QI({},s,{className:kt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return _a(a,!0)}}))},jS=function(t){function e(){return Wtt(this,e),Ktt(this,e,arguments)}return Ztt(e,t),Htt(e,[{key:"render",value:function(){return X.createElement(Jtt,this.props)}}])}(X.Component);bQ(jS,"displayName","YAxis");bQ(jS,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function mV(t){return nnt(t)||tnt(t)||ent(t)||Qtt()}function Qtt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ent(t,e){if(t){if(typeof t=="string")return e2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e2(t,e)}}function tnt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nnt(t){if(Array.isArray(t))return e2(t)}function e2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var t2=function(e,n,r,i,s){var o=uo(e,XR),a=uo(e,LS),l=[].concat(mV(o),mV(a)),u=uo(e,BS),c="".concat(i,"Id"),h=i[0],f=n;if(l.length&&(f=l.reduce(function(_,v){if(v.props[c]===r&&qo(v.props,"extendDomain")&&we(v.props[h])){var g=v.props[h];return[Math.min(_[0],g),Math.max(_[1],g)]}return _},f)),u.length){var p="".concat(h,"1"),m="".concat(h,"2");f=u.reduce(function(_,v){if(v.props[c]===r&&qo(v.props,"extendDomain")&&we(v.props[p])&&we(v.props[m])){var g=v.props[p],x=v.props[m];return[Math.min(_[0],g,x),Math.max(_[1],g,x)]}return _},f)}return s&&s.length&&(f=s.reduce(function(_,v){return we(v)?[Math.min(_[0],v),Math.max(_[1],v)]:_},f)),f},SQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new i(c,h||l,f),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)e.call(c,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,m=new Array(p);f<p;f++)m[f]=h[f].fn;return m},a.prototype.listenerCount=function(u){var c=n?n+u:u,h=this._events[c];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,c,h,f,p,m){var _=n?n+u:u;if(!this._events[_])return!1;var v=this._events[_],g=arguments.length,x,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,h),!0;case 4:return v.fn.call(v.context,c,h,f),!0;case 5:return v.fn.call(v.context,c,h,f,p),!0;case 6:return v.fn.call(v.context,c,h,f,p,m),!0}for(b=1,x=new Array(g-1);b<g;b++)x[b-1]=arguments[b];v.fn.apply(v.context,x)}else{var w=v.length,k;for(b=0;b<w;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),g){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,h);break;case 4:v[b].fn.call(v[b].context,c,h,f);break;default:if(!x)for(k=1,x=new Array(g-1);k<g;k++)x[k-1]=arguments[k];v[b].fn.apply(v[b].context,x)}}return!0},a.prototype.on=function(u,c,h){return s(this,u,c,h,!1)},a.prototype.once=function(u,c,h){return s(this,u,c,h,!0)},a.prototype.removeListener=function(u,c,h,f){var p=n?n+u:u;if(!this._events[p])return this;if(!c)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===c&&(!f||m.once)&&(!h||m.context===h)&&o(this,p);else{for(var _=0,v=[],g=m.length;_<g;_++)(m[_].fn!==c||f&&!m[_].once||h&&m[_].context!==h)&&v.push(m[_]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(SQ);var rnt=SQ.exports;const int=Mt(rnt);var aT=new int,lT="recharts.syncMouseEvents";function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function snt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ont(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kQ(r.key),r)}}function ant(t,e,n){return e&&ont(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uT(t,e,n){return e=kQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kQ(t){var e=lnt(t,"string");return Lg(e)=="symbol"?e:e+""}function lnt(t,e){if(Lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var unt=function(){function t(){snt(this,t),uT(this,"activeIndex",0),uT(this,"coordinateList",[]),uT(this,"layout","horizontal")}return ant(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,o=n.container,a=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,h=c===void 0?null:c,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=s+l+u,f=o+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function cnt(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&we(r)&&we(i))return!0}return!1}function hnt(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function CQ(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,o=vr(e,n,r,i),a=vr(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function fnt(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,h=e.angle,f=vr(a,l,u,h),p=vr(a,l,c,h);r=f.x,i=f.y,s=p.x,o=p.y}else return CQ(e);return[{x:r,y:i},{x:s,y:o}]}function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function gV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(n),!0).forEach(function(r){dnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dnt(t,e,n){return e=pnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pnt(t){var e=mnt(t,"string");return Fg(e)=="symbol"?e:e+""}function mnt(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gnt(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!o||f!=="ScatterChart"&&i!=="axis")return null;var m,_=gm;if(f==="ScatterChart")m=o,_=yYe;else if(f==="BarChart")m=hnt(h,o,l,c),_=jR;else if(h==="radial"){var v=CQ(o),g=v.cx,x=v.cy,b=v.radius,w=v.startAngle,k=v.endAngle;m={cx:g,cy:x,startAngle:w,endAngle:k,innerRadius:b,outerRadius:b},_=TJ}else m={points:fnt(h,o,l)},_=gm;var C=H0(H0(H0(H0({stroke:"#ccc",pointerEvents:"none"},l),m),ht(p,!1)),{},{payload:a,payloadIndex:u,className:kt("recharts-tooltip-cursor",p.className)});return J.isValidElement(p)?J.cloneElement(p,C):J.createElement(_,C)}var ynt=["item"],vnt=["children","className","width","height","style","compact","title","desc"];function nd(t){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nd(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xh.apply(this,arguments)}function yV(t,e){return bnt(t)||xnt(t,e)||$Q(t,e)||_nt()}function _nt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xnt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function bnt(t){if(Array.isArray(t))return t}function vV(t,e){if(t==null)return{};var n=wnt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wnt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Snt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function knt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EQ(r.key),r)}}function Cnt(t,e,n){return e&&knt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tnt(t,e,n){return e=zb(e),$nt(t,TQ()?Reflect.construct(e,n||[],zb(t).constructor):e.apply(t,n))}function $nt(t,e){if(e&&(nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ent(t)}function Ent(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TQ=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zb(t)}function Int(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n2(t,e)}function n2(t,e){return n2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},n2(t,e)}function rd(t){return Nnt(t)||Ont(t)||$Q(t)||Ant()}function Ant(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Q(t,e){if(t){if(typeof t=="string")return r2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r2(t,e)}}function Ont(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nnt(t){if(Array.isArray(t))return r2(t)}function r2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(n),!0).forEach(function(r){Ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ge(t,e,n){return e=EQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EQ(t){var e=Pnt(t,"string");return nd(e)=="symbol"?e:e+""}function Pnt(t,e){if(nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rnt={xAxis:["bottom","top"],yAxis:["left","right"]},Dnt={width:"100%",height:"100%"},IQ={x:0,y:0};function K0(t){return t}var Mnt=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Lnt=function(e,n,r,i){var s=n.find(function(c){return c&&c.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,a=i.radius;return me(me(me({},i),vr(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var l=s.coordinate,u=i.angle;return me(me(me({},i),vr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return IQ},VS=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(rd(a),rd(u)):a},[]);return o.length>0?o:e&&e.length&&we(i)&&we(s)?e.slice(i,s+1):[]};function AQ(t){return t==="number"?[0,"auto"]:void 0}var i2=function(e,n,r,i){var s=e.graphicalItems,o=e.tooltipAxis,a=VS(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,u){var c,h=(c=u.props.data)!==null&&c!==void 0?c:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=h===void 0?a:h;f=Vx(p,o.dataKey,i)}else f=h&&h[r]||a[r];return f?[].concat(rd(l),[SJ(u,f)]):l},[])},xV=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},o=Mnt(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Q9e(o,a,u,l);if(c>=0&&u){var h=u[c]&&u[c].value,f=i2(e,n,c,h),p=Lnt(r,a,c,s);return{activeTooltipIndex:c,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},Fnt=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,h=e.children,f=e.stackOffset,p=xJ(c,s);return r.reduce(function(m,_){var v,g=_.type.defaultProps!==void 0?me(me({},_.type.defaultProps),_.props):_.props,x=g.type,b=g.dataKey,w=g.allowDataOverflow,k=g.allowDuplicatedCategory,C=g.scale,T=g.ticks,E=g.includeHidden,A=g[o];if(m[A])return m;var $=VS(e.data,{graphicalItems:i.filter(function(ee){var se,fe=o in ee.props?ee.props[o]:(se=ee.type.defaultProps)===null||se===void 0?void 0:se[o];return fe===A}),dataStartIndex:l,dataEndIndex:u}),N=$.length,P,M,B;cnt(g.domain,w,x)&&(P=SI(g.domain,null,w),p&&(x==="number"||C!=="auto")&&(B=mm($,b,"category")));var z=AQ(x);if(!P||P.length===0){var j,U=(j=g.domain)!==null&&j!==void 0?j:z;if(b){if(P=mm($,b,x),x==="category"&&p){var D=z3e(P);k&&D?(M=P,P=$b(0,N)):k||(P=Qj(U,P,_).reduce(function(ee,se){return ee.indexOf(se)>=0?ee:[].concat(rd(ee),[se])},[]))}else if(x==="category")k?P=P.filter(function(ee){return ee!==""&&!mt(ee)}):P=Qj(U,P,_).reduce(function(ee,se){return ee.indexOf(se)>=0||se===""||mt(se)?ee:[].concat(rd(ee),[se])},[]);else if(x==="number"){var W=i7e($,i.filter(function(ee){var se,fe,le=o in ee.props?ee.props[o]:(se=ee.type.defaultProps)===null||se===void 0?void 0:se[o],de="hide"in ee.props?ee.props.hide:(fe=ee.type.defaultProps)===null||fe===void 0?void 0:fe.hide;return le===A&&(E||!de)}),b,s,c);W&&(P=W)}p&&(x==="number"||C!=="auto")&&(B=mm($,b,"category"))}else p?P=$b(0,N):a&&a[A]&&a[A].hasStack&&x==="number"?P=f==="expand"?[0,1]:wJ(a[A].stackGroups,l,u):P=_J($,i.filter(function(ee){var se=o in ee.props?ee.props[o]:ee.type.defaultProps[o],fe="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return se===A&&(E||!fe)}),x,c,!0);if(x==="number")P=t2(h,P,A,s,T),U&&(P=SI(U,P,w));else if(x==="category"&&U){var G=U,Y=P.every(function(ee){return G.indexOf(ee)>=0});Y&&(P=G)}}return me(me({},m),{},Ge({},A,me(me({},g),{},{axisType:s,domain:P,categoricalDomain:B,duplicateDomain:M,originalDomain:(v=g.domain)!==null&&v!==void 0?v:z,isCategorical:p,layout:c})))},{})},Bnt=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,h=e.children,f=VS(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=f.length,m=xJ(c,s),_=-1;return r.reduce(function(v,g){var x=g.type.defaultProps!==void 0?me(me({},g.type.defaultProps),g.props):g.props,b=x[o],w=AQ("number");if(!v[b]){_++;var k;return m?k=$b(0,p):a&&a[b]&&a[b].hasStack?(k=wJ(a[b].stackGroups,l,u),k=t2(h,k,b,s)):(k=SI(w,_J(f,r.filter(function(C){var T,E,A=o in C.props?C.props[o]:(T=C.type.defaultProps)===null||T===void 0?void 0:T[o],$="hide"in C.props?C.props.hide:(E=C.type.defaultProps)===null||E===void 0?void 0:E.hide;return A===b&&!$}),"number",c),i.defaultProps.allowDataOverflow),k=t2(h,k,b,s)),me(me({},v),{},Ge({},b,me(me({axisType:s},i.defaultProps),{},{hide:!0,orientation:$s(Rnt,"".concat(s,".").concat(_%2),null),domain:k,originalDomain:w,isCategorical:m,layout:c})))}return v},{})},znt=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,h="".concat(i,"Id"),f=uo(c,s),p={};return f&&f.length?p=Fnt(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=Bnt(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),p},jnt=function(e){var n=pl(e),r=_a(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:pR(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:vb(n,r)}},bV=function(e){var n=e.children,r=e.defaultShowTooltip,i=Li(n,Kf),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Vnt=function(e){return!e||!e.length?!1:e.some(function(n){var r=ka(n&&n.type);return r&&r.indexOf("Bar")>=0})},wV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Unt=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,h=r.children,f=r.margin||{},p=Li(h,Kf),m=Li(h,uf),_=Object.keys(l).reduce(function(k,C){var T=l[C],E=T.orientation;return!T.mirror&&!T.hide?me(me({},k),{},Ge({},E,k[E]+T.width)):k},{left:f.left||0,right:f.right||0}),v=Object.keys(o).reduce(function(k,C){var T=o[C],E=T.orientation;return!T.mirror&&!T.hide?me(me({},k),{},Ge({},E,$s(k,"".concat(E))+T.height)):k},{top:f.top||0,bottom:f.bottom||0}),g=me(me({},v),_),x=g.bottom;p&&(g.bottom+=p.props.height||Kf.defaultProps.height),m&&n&&(g=n7e(g,i,r,n));var b=u-g.left-g.right,w=c-g.top-g.bottom;return me(me({brushBottom:x},g),{},{width:Math.max(b,0),height:Math.max(w,0)})},Wnt=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Gnt=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,h=e.defaultProps,f=function(g,x){var b=x.graphicalItems,w=x.stackGroups,k=x.offset,C=x.updateId,T=x.dataStartIndex,E=x.dataEndIndex,A=g.barSize,$=g.layout,N=g.barGap,P=g.barCategoryGap,M=g.maxBarSize,B=wV($),z=B.numericAxisName,j=B.cateAxisName,U=Vnt(b),D=[];return b.forEach(function(W,G){var Y=VS(g.data,{graphicalItems:[W],dataStartIndex:T,dataEndIndex:E}),ee=W.type.defaultProps!==void 0?me(me({},W.type.defaultProps),W.props):W.props,se=ee.dataKey,fe=ee.maxBarSize,le=ee["".concat(z,"Id")],de=ee["".concat(j,"Id")],Se={},Te=l.reduce(function(Nn,on){var ui=x["".concat(on.axisType,"Map")],Ir=ee["".concat(on.axisType,"Id")];ui&&ui[Ir]||on.axisType==="zAxis"||Nc();var ci=ui[Ir];return me(me({},Nn),{},Ge(Ge({},on.axisType,ci),"".concat(on.axisType,"Ticks"),_a(ci)))},Se),pe=Te[j],xe=Te["".concat(j,"Ticks")],be=w&&w[le]&&w[le].hasStack&&g7e(W,w[le].stackGroups),he=ka(W.type).indexOf("Bar")>=0,je=vb(pe,xe),Me=[],We=U&&e7e({barSize:A,stackGroups:w,totalSize:Wnt(Te,j)});if(he){var Ve,Ze,ot=mt(fe)?M:fe,tr=(Ve=(Ze=vb(pe,xe,!0))!==null&&Ze!==void 0?Ze:ot)!==null&&Ve!==void 0?Ve:0;Me=t7e({barGap:N,barCategoryGap:P,bandSize:tr!==je?tr:je,sizeList:We[de],maxBarSize:ot}),tr!==je&&(Me=Me.map(function(Nn){return me(me({},Nn),{},{position:me(me({},Nn.position),{},{offset:Nn.position.offset-tr/2})})}))}var jt=W&&W.type&&W.type.getComposedData;jt&&D.push({props:me(me({},jt(me(me({},Te),{},{displayedData:Y,props:g,dataKey:se,item:W,bandSize:je,barPosition:Me,offset:k,stackedData:be,layout:$,dataStartIndex:T,dataEndIndex:E}))),{},Ge(Ge(Ge({key:W.key||"item-".concat(G)},z,Te[z]),j,Te[j]),"animationId",C)),childIndex:J3e(W,g.children),item:W})}),D},p=function(g,x){var b=g.props,w=g.dataStartIndex,k=g.dataEndIndex,C=g.updateId;if(!HB({props:b}))return null;var T=b.children,E=b.layout,A=b.stackOffset,$=b.data,N=b.reverseStackOrder,P=wV(E),M=P.numericAxisName,B=P.cateAxisName,z=uo(T,r),j=d7e($,z,"".concat(M,"Id"),"".concat(B,"Id"),A,N),U=l.reduce(function(ee,se){var fe="".concat(se.axisType,"Map");return me(me({},ee),{},Ge({},fe,znt(b,me(me({},se),{},{graphicalItems:z,stackGroups:se.axisType===M&&j,dataStartIndex:w,dataEndIndex:k}))))},{}),D=Unt(me(me({},U),{},{props:b,graphicalItems:z}),x==null?void 0:x.legendBBox);Object.keys(U).forEach(function(ee){U[ee]=c(b,U[ee],D,ee.replace("Map",""),n)});var W=U["".concat(B,"Map")],G=jnt(W),Y=f(b,me(me({},U),{},{dataStartIndex:w,dataEndIndex:k,updateId:C,graphicalItems:z,stackGroups:j,offset:D}));return me(me({formattedGraphicalItems:Y,graphicalItems:z,offset:D,stackGroups:j},G),U)},m=function(v){function g(x){var b,w,k;return Snt(this,g),k=Tnt(this,g,[x]),Ge(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ge(k,"accessibilityManager",new unt),Ge(k,"handleLegendBBoxUpdate",function(C){if(C){var T=k.state,E=T.dataStartIndex,A=T.dataEndIndex,$=T.updateId;k.setState(me({legendBBox:C},p({props:k.props,dataStartIndex:E,dataEndIndex:A,updateId:$},me(me({},k.state),{},{legendBBox:C}))))}}),Ge(k,"handleReceiveSyncEvent",function(C,T,E){if(k.props.syncId===C){if(E===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(T)}}),Ge(k,"handleBrushChange",function(C){var T=C.startIndex,E=C.endIndex;if(T!==k.state.dataStartIndex||E!==k.state.dataEndIndex){var A=k.state.updateId;k.setState(function(){return me({dataStartIndex:T,dataEndIndex:E},p({props:k.props,dataStartIndex:T,dataEndIndex:E,updateId:A},k.state))}),k.triggerSyncEvent({dataStartIndex:T,dataEndIndex:E})}}),Ge(k,"handleMouseEnter",function(C){var T=k.getMouseInfo(C);if(T){var E=me(me({},T),{},{isTooltipActive:!0});k.setState(E),k.triggerSyncEvent(E);var A=k.props.onMouseEnter;et(A)&&A(E,C)}}),Ge(k,"triggeredAfterMouseMove",function(C){var T=k.getMouseInfo(C),E=T?me(me({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(E),k.triggerSyncEvent(E);var A=k.props.onMouseMove;et(A)&&A(E,C)}),Ge(k,"handleItemMouseEnter",function(C){k.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),Ge(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ge(k,"handleMouseMove",function(C){C.persist(),k.throttleTriggeredAfterMouseMove(C)}),Ge(k,"handleMouseLeave",function(C){k.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};k.setState(T),k.triggerSyncEvent(T);var E=k.props.onMouseLeave;et(E)&&E(T,C)}),Ge(k,"handleOuterEvent",function(C){var T=Y3e(C),E=$s(k.props,"".concat(T));if(T&&et(E)){var A,$;/.*touch.*/i.test(T)?$=k.getMouseInfo(C.changedTouches[0]):$=k.getMouseInfo(C),E((A=$)!==null&&A!==void 0?A:{},C)}}),Ge(k,"handleClick",function(C){var T=k.getMouseInfo(C);if(T){var E=me(me({},T),{},{isTooltipActive:!0});k.setState(E),k.triggerSyncEvent(E);var A=k.props.onClick;et(A)&&A(E,C)}}),Ge(k,"handleMouseDown",function(C){var T=k.props.onMouseDown;if(et(T)){var E=k.getMouseInfo(C);T(E,C)}}),Ge(k,"handleMouseUp",function(C){var T=k.props.onMouseUp;if(et(T)){var E=k.getMouseInfo(C);T(E,C)}}),Ge(k,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),Ge(k,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.handleMouseDown(C.changedTouches[0])}),Ge(k,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.handleMouseUp(C.changedTouches[0])}),Ge(k,"handleDoubleClick",function(C){var T=k.props.onDoubleClick;if(et(T)){var E=k.getMouseInfo(C);T(E,C)}}),Ge(k,"handleContextMenu",function(C){var T=k.props.onContextMenu;if(et(T)){var E=k.getMouseInfo(C);T(E,C)}}),Ge(k,"triggerSyncEvent",function(C){k.props.syncId!==void 0&&aT.emit(lT,k.props.syncId,C,k.eventEmitterSymbol)}),Ge(k,"applySyncEvent",function(C){var T=k.props,E=T.layout,A=T.syncMethod,$=k.state.updateId,N=C.dataStartIndex,P=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)k.setState(me({dataStartIndex:N,dataEndIndex:P},p({props:k.props,dataStartIndex:N,dataEndIndex:P,updateId:$},k.state)));else if(C.activeTooltipIndex!==void 0){var M=C.chartX,B=C.chartY,z=C.activeTooltipIndex,j=k.state,U=j.offset,D=j.tooltipTicks;if(!U)return;if(typeof A=="function")z=A(D,C);else if(A==="value"){z=-1;for(var W=0;W<D.length;W++)if(D[W].value===C.activeLabel){z=W;break}}var G=me(me({},U),{},{x:U.left,y:U.top}),Y=Math.min(M,G.x+G.width),ee=Math.min(B,G.y+G.height),se=D[z]&&D[z].value,fe=i2(k.state,k.props.data,z),le=D[z]?{x:E==="horizontal"?D[z].coordinate:Y,y:E==="horizontal"?ee:D[z].coordinate}:IQ;k.setState(me(me({},C),{},{activeLabel:se,activeCoordinate:le,activePayload:fe,activeTooltipIndex:z}))}else k.setState(C)}),Ge(k,"renderCursor",function(C){var T,E=k.state,A=E.isTooltipActive,$=E.activeCoordinate,N=E.activePayload,P=E.offset,M=E.activeTooltipIndex,B=E.tooltipAxisBandSize,z=k.getTooltipEventType(),j=(T=C.props.active)!==null&&T!==void 0?T:A,U=k.props.layout,D=C.key||"_recharts-cursor";return X.createElement(gnt,{key:D,activeCoordinate:$,activePayload:N,activeTooltipIndex:M,chartName:n,element:C,isActive:j,layout:U,offset:P,tooltipAxisBandSize:B,tooltipEventType:z})}),Ge(k,"renderPolarAxis",function(C,T,E){var A=$s(C,"type.axisType"),$=$s(k.state,"".concat(A,"Map")),N=C.type.defaultProps,P=N!==void 0?me(me({},N),C.props):C.props,M=$&&$[P["".concat(A,"Id")]];return J.cloneElement(C,me(me({},M),{},{className:kt(A,M.className),key:C.key||"".concat(T,"-").concat(E),ticks:_a(M,!0)}))}),Ge(k,"renderPolarGrid",function(C){var T=C.props,E=T.radialLines,A=T.polarAngles,$=T.polarRadius,N=k.state,P=N.radiusAxisMap,M=N.angleAxisMap,B=pl(P),z=pl(M),j=z.cx,U=z.cy,D=z.innerRadius,W=z.outerRadius;return J.cloneElement(C,{polarAngles:Array.isArray(A)?A:_a(z,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray($)?$:_a(B,!0).map(function(G){return G.coordinate}),cx:j,cy:U,innerRadius:D,outerRadius:W,key:C.key||"polar-grid",radialLines:E})}),Ge(k,"renderLegend",function(){var C=k.state.formattedGraphicalItems,T=k.props,E=T.children,A=T.width,$=T.height,N=k.props.margin||{},P=A-(N.left||0)-(N.right||0),M=yJ({children:E,formattedGraphicalItems:C,legendWidth:P,legendContent:u});if(!M)return null;var B=M.item,z=vV(M,ynt);return J.cloneElement(B,me(me({},z),{},{chartWidth:A,chartHeight:$,margin:N,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ge(k,"renderTooltip",function(){var C,T=k.props,E=T.children,A=T.accessibilityLayer,$=Li(E,Ao);if(!$)return null;var N=k.state,P=N.isTooltipActive,M=N.activeCoordinate,B=N.activePayload,z=N.activeLabel,j=N.offset,U=(C=$.props.active)!==null&&C!==void 0?C:P;return J.cloneElement($,{viewBox:me(me({},j),{},{x:j.left,y:j.top}),active:U,label:z,payload:U?B:[],coordinate:M,accessibilityLayer:A})}),Ge(k,"renderBrush",function(C){var T=k.props,E=T.margin,A=T.data,$=k.state,N=$.offset,P=$.dataStartIndex,M=$.dataEndIndex,B=$.updateId;return J.cloneElement(C,{key:C.key||"_recharts-brush",onChange:V0(k.handleBrushChange,C.props.onChange),data:A,x:we(C.props.x)?C.props.x:N.left,y:we(C.props.y)?C.props.y:N.top+N.height+N.brushBottom-(E.bottom||0),width:we(C.props.width)?C.props.width:N.width,startIndex:P,endIndex:M,updateId:"brush-".concat(B)})}),Ge(k,"renderReferenceElement",function(C,T,E){if(!C)return null;var A=k,$=A.clipPathId,N=k.state,P=N.xAxisMap,M=N.yAxisMap,B=N.offset,z=C.type.defaultProps||{},j=C.props,U=j.xAxisId,D=U===void 0?z.xAxisId:U,W=j.yAxisId,G=W===void 0?z.yAxisId:W;return J.cloneElement(C,{key:C.key||"".concat(T,"-").concat(E),xAxis:P[D],yAxis:M[G],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:$})}),Ge(k,"renderActivePoints",function(C){var T=C.item,E=C.activePoint,A=C.basePoint,$=C.childIndex,N=C.isRange,P=[],M=T.props.key,B=T.item.type.defaultProps!==void 0?me(me({},T.item.type.defaultProps),T.item.props):T.item.props,z=B.activeDot,j=B.dataKey,U=me(me({index:$,dataKey:j,cx:E.x,cy:E.y,r:4,fill:zR(T.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},ht(z,!1)),Ux(z));return P.push(g.renderActiveDot(z,U,"".concat(M,"-activePoint-").concat($))),A?P.push(g.renderActiveDot(z,me(me({},U),{},{cx:A.x,cy:A.y}),"".concat(M,"-basePoint-").concat($))):N&&P.push(null),P}),Ge(k,"renderGraphicChild",function(C,T,E){var A=k.filterFormatItem(C,T,E);if(!A)return null;var $=k.getTooltipEventType(),N=k.state,P=N.isTooltipActive,M=N.tooltipAxis,B=N.activeTooltipIndex,z=N.activeLabel,j=k.props.children,U=Li(j,Ao),D=A.props,W=D.points,G=D.isRange,Y=D.baseLine,ee=A.item.type.defaultProps!==void 0?me(me({},A.item.type.defaultProps),A.item.props):A.item.props,se=ee.activeDot,fe=ee.hide,le=ee.activeBar,de=ee.activeShape,Se=!!(!fe&&P&&U&&(se||le||de)),Te={};$!=="axis"&&U&&U.props.trigger==="click"?Te={onClick:V0(k.handleItemMouseEnter,C.props.onClick)}:$!=="axis"&&(Te={onMouseLeave:V0(k.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:V0(k.handleItemMouseEnter,C.props.onMouseEnter)});var pe=J.cloneElement(C,me(me({},A.props),Te));function xe(on){return typeof M.dataKey=="function"?M.dataKey(on.payload):null}if(Se)if(B>=0){var be,he;if(M.dataKey&&!M.allowDuplicatedCategory){var je=typeof M.dataKey=="function"?xe:"payload.".concat(M.dataKey.toString());be=Vx(W,je,z),he=G&&Y&&Vx(Y,je,z)}else be=W==null?void 0:W[B],he=G&&Y&&Y[B];if(de||le){var Me=C.props.activeIndex!==void 0?C.props.activeIndex:B;return[J.cloneElement(C,me(me(me({},A.props),Te),{},{activeIndex:Me})),null,null]}if(!mt(be))return[pe].concat(rd(k.renderActivePoints({item:A,activePoint:be,basePoint:he,childIndex:B,isRange:G})))}else{var We,Ve=(We=k.getItemByXY(k.state.activeCoordinate))!==null&&We!==void 0?We:{graphicalItem:pe},Ze=Ve.graphicalItem,ot=Ze.item,tr=ot===void 0?C:ot,jt=Ze.childIndex,Nn=me(me(me({},A.props),Te),{},{activeIndex:jt});return[J.cloneElement(tr,Nn),null,null]}return G?[pe,null,null]:[pe,null]}),Ge(k,"renderCustomized",function(C,T,E){return J.cloneElement(C,me(me({key:"recharts-customized-".concat(E)},k.props),k.state))}),Ge(k,"renderMap",{CartesianGrid:{handler:K0,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:K0},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:K0},YAxis:{handler:K0},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Sv("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=gY(k.triggeredAfterMouseMove,(w=x.throttleDelay)!==null&&w!==void 0?w:1e3/60),k.state={},k}return Int(g,v),Cnt(g,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,k=b.data,C=b.height,T=b.layout,E=Li(w,Ao);if(E){var A=E.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,N=i2(this.state,k,A,$),P=this.state.tooltipTicks[A].coordinate,M=(this.state.offset.top+C)/2,B=T==="horizontal",z=B?{x:P,y:M}:{y:P,x:M},j=this.state.formattedGraphicalItems.find(function(D){var W=D.item;return W.type.name==="Scatter"});j&&(z=me(me({},z),j.props.points[A].tooltipPosition),N=j.props.points[A].tooltipPayload);var U={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:$,activePayload:N,activeCoordinate:z};this.setState(U),this.renderCursor(E),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,C;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(b){FE([Li(b.children,Ao)],[Li(this.props.children,Ao)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Li(this.props.children,Ao);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return a.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,k=w.getBoundingClientRect(),C=C6e(k),T={chartX:Math.round(b.pageX-C.left),chartY:Math.round(b.pageY-C.top)},E=k.width/w.offsetWidth||1,A=this.inRange(T.chartX,T.chartY,E);if(!A)return null;var $=this.state,N=$.xAxisMap,P=$.yAxisMap,M=this.getTooltipEventType();if(M!=="axis"&&N&&P){var B=pl(N).scale,z=pl(P).scale,j=B&&B.invert?B.invert(T.chartX):null,U=z&&z.invert?z.invert(T.chartY):null;return me(me({},T),{},{xValue:j,yValue:U})}var D=xV(this.state,this.props.data,this.props.layout,A);return D?me(me({},T),D):null}},{key:"inRange",value:function(b,w){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,T=b/k,E=w/k;if(C==="horizontal"||C==="vertical"){var A=this.state.offset,$=T>=A.left&&T<=A.left+A.width&&E>=A.top&&E<=A.top+A.height;return $?{x:T,y:E}:null}var N=this.state,P=N.angleAxisMap,M=N.radiusAxisMap;if(P&&M){var B=pl(P);return n4({x:T,y:E},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),k=Li(b,Ao),C={};k&&w==="axis"&&(k.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=Ux(this.props,this.handleOuterEvent);return me(me({},T),C)}},{key:"addListener",value:function(){aT.on(lT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aT.removeListener(lT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,k){for(var C=this.state.formattedGraphicalItems,T=0,E=C.length;T<E;T++){var A=C[T];if(A.item===b||A.props.key===b.key||w===ka(A.item.type)&&k===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,k=w.left,C=w.top,T=w.height,E=w.width;return X.createElement("defs",null,X.createElement("clipPath",{id:b},X.createElement("rect",{x:k,y:C,height:T,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,k){var C=yV(k,2),T=C[0],E=C[1];return me(me({},w),{},Ge({},T,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,k){var C=yV(k,2),T=C[0],E=C[1];return me(me({},w),{},Ge({},T,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,k=w.formattedGraphicalItems,C=w.activeItem;if(k&&k.length)for(var T=0,E=k.length;T<E;T++){var A=k[T],$=A.props,N=A.item,P=N.type.defaultProps!==void 0?me(me({},N.type.defaultProps),N.props):N.props,M=ka(N.type);if(M==="Bar"){var B=($.data||[]).find(function(D){return aYe(b,D)});if(B)return{graphicalItem:A,payload:B}}else if(M==="RadialBar"){var z=($.data||[]).find(function(D){return n4(b,D)});if(z)return{graphicalItem:A,payload:z}}else if(PS(A,C)||RS(A,C)||Ng(A,C)){var j=cJe({graphicalItem:A,activeTooltipItem:C,itemData:P.data}),U=P.activeIndex===void 0?j:P.activeIndex;return{graphicalItem:me(me({},A),{},{childIndex:U}),payload:Ng(A,C)?P.data[j]:A.props.data[j]}}}return null}},{key:"render",value:function(){var b=this;if(!HB(this))return null;var w=this.props,k=w.children,C=w.className,T=w.width,E=w.height,A=w.style,$=w.compact,N=w.title,P=w.desc,M=vV(w,vnt),B=ht(M,!1);if($)return X.createElement(eV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(zE,Xh({},B,{width:T,height:E,title:N,desc:P}),this.renderClipPath(),qB(k,this.renderMap)));if(this.props.accessibilityLayer){var z,j;B.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,B.role=(j=this.props.role)!==null&&j!==void 0?j:"application",B.onKeyDown=function(D){b.accessibilityManager.keyboardEvent(D)},B.onFocus=function(){b.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return X.createElement(eV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",Xh({className:kt("recharts-wrapper",C),style:me({position:"relative",cursor:"default",width:T,height:E},A)},U,{ref:function(W){b.container=W}}),X.createElement(zE,Xh({},B,{width:T,height:E,title:N,desc:P,style:Dnt}),this.renderClipPath(),qB(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(J.Component);Ge(m,"displayName",n),Ge(m,"defaultProps",me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ge(m,"getDerivedStateFromProps",function(v,g){var x=v.dataKey,b=v.data,w=v.children,k=v.width,C=v.height,T=v.layout,E=v.stackOffset,A=v.margin,$=g.dataStartIndex,N=g.dataEndIndex;if(g.updateId===void 0){var P=bV(v);return me(me(me({},P),{},{updateId:0},p(me(me({props:v},P),{},{updateId:0}),g)),{},{prevDataKey:x,prevData:b,prevWidth:k,prevHeight:C,prevLayout:T,prevStackOffset:E,prevMargin:A,prevChildren:w})}if(x!==g.prevDataKey||b!==g.prevData||k!==g.prevWidth||C!==g.prevHeight||T!==g.prevLayout||E!==g.prevStackOffset||!lf(A,g.prevMargin)){var M=bV(v),B={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},z=me(me({},xV(g,b,T)),{},{updateId:g.updateId+1}),j=me(me(me({},M),B),z);return me(me(me({},j),p(me({props:v},j),g)),{},{prevDataKey:x,prevData:b,prevWidth:k,prevHeight:C,prevLayout:T,prevStackOffset:E,prevMargin:A,prevChildren:w})}if(!FE(w,g.prevChildren)){var U,D,W,G,Y=Li(w,Kf),ee=Y&&(U=(D=Y.props)===null||D===void 0?void 0:D.startIndex)!==null&&U!==void 0?U:$,se=Y&&(W=(G=Y.props)===null||G===void 0?void 0:G.endIndex)!==null&&W!==void 0?W:N,fe=ee!==$||se!==N,le=!mt(b),de=le&&!fe?g.updateId:g.updateId+1;return me(me({updateId:de},p(me(me({props:v},g),{},{updateId:de,dataStartIndex:ee,dataEndIndex:se}),g)),{},{prevChildren:w,dataStartIndex:ee,dataEndIndex:se})}return null}),Ge(m,"renderActiveDot",function(v,g,x){var b;return J.isValidElement(v)?b=J.cloneElement(v,g):et(v)?b=v(g):b=X.createElement(VR,g),X.createElement(mn,{className:"recharts-active-dot",key:x},b)});var _=J.forwardRef(function(g,x){return X.createElement(m,Xh({},g,{ref:x}))});return _.displayName=m.displayName,_},Hnt=Gnt({chartName:"AreaChart",GraphicalChild:ja,axisComponents:[{axisType:"xAxis",AxisComp:zS},{axisType:"yAxis",AxisComp:jS}],formatAxisMap:DQe});function Knt({data:t}){const[e,n]=J.useState(t),r=J.useRef();return J.useEffect(()=>{let i;const o=a=>{i||(i=a);const l=(a-i)/500;if(l<1){const u=t.map((c,h)=>{const f=e[h];return f?{...c,consumption:f.consumption+(c.consumption-f.consumption)*l,production:f.production+(c.production-f.production)*l}:c});n(u),r.current=requestAnimationFrame(o)}else n(t)};return r.current=requestAnimationFrame(o),()=>{r.current&&cancelAnimationFrame(r.current)}},[t]),V.jsx(fse,{children:V.jsx(As.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full",children:V.jsx(v6e,{width:"100%",height:300,children:V.jsxs(Hnt,{data:e,children:[V.jsxs("defs",{children:[V.jsxs("linearGradient",{id:"consumption",x1:"0",y1:"0",x2:"0",y2:"1",children:[V.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),V.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),V.jsxs("linearGradient",{id:"production",x1:"0",y1:"0",x2:"0",y2:"1",children:[V.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),V.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),V.jsx(fQ,{strokeDasharray:"3 3",stroke:"#374151"}),V.jsx(zS,{dataKey:"timestamp",stroke:"#9CA3AF",tickFormatter:i=>new Date(i).toLocaleTimeString()}),V.jsx(jS,{stroke:"#9CA3AF"}),V.jsx(Ao,{contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"},formatter:i=>i.toFixed(2)}),V.jsx(ja,{type:"monotone",dataKey:"consumption",stroke:"#3B82F6",fillOpacity:1,fill:"url(#consumption)",isAnimationActive:!1}),V.jsx(ja,{type:"monotone",dataKey:"production",stroke:"#10B981",fillOpacity:1,fill:"url(#production)",isAnimationActive:!1})]})})})})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SV;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(SV||(SV={}));var kV;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(kV||(kV={}));var CV;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(CV||(CV={}));var TV;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(TV||(TV={}));var jb;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER"})(jb||(jb={}));var $V;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})($V||($V={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class EV extends Bg{constructor(e,n){super(e),this.response=n}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qnt="https://generativelanguage.googleapis.com",Xnt="v1",Znt="0.2.1",Ynt="genai-js";var Rc;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rc||(Rc={}));class Av{constructor(e,n,r,i){this.model=e,this.task=n,this.apiKey=r,this.stream=i}toString(){let e=`${qnt}/${Xnt}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function Jnt(){return`${Ynt}/${Znt}`}async function Ov(t,e,n){let r;try{if(r=await fetch(t.toString(),Object.assign(Object.assign({},Qnt(n)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":Jnt(),"x-goog-api-key":t.apiKey},body:e})),!r.ok){let i="";try{const s=await r.json();i=s.error.message,s.error.details&&(i+=` ${JSON.stringify(s.error.details)}`)}catch{}throw new Error(`[${r.status} ${r.statusText}] ${i}`)}}catch(i){const s=new Bg(`Error fetching from ${t.toString()}: ${i.message}`);throw s.stack=i.stack,s}return r}function Qnt(t){const e={};if((t==null?void 0:t.timeout)>=0){const n=new AbortController,r=n.signal;setTimeout(()=>n.abort(),t.timeout),e.signal=r}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),OQ(t.candidates[0]))throw new EV(`${Vb(t)}`,t);return ert(t)}else if(t.promptFeedback)throw new EV(`Text not available. ${Vb(t)}`,t);return""},t}function ert(t){var e,n,r,i;return!((i=(r=(n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r[0])===null||i===void 0)&&i.text?t.candidates[0].content.parts[0].text:""}const trt=[jb.RECITATION,jb.SAFETY];function OQ(t){return!!t.finishReason&&trt.includes(t.finishReason)}function Vb(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const s=t.candidates[0];OQ(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function zg(t){return this instanceof zg?(this.v=t,this):new zg(t)}function nrt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(p){return new Promise(function(m,_){s.push([f,p,m,_])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(m){h(s[0][3],m)}}function l(f){f.value instanceof zg?Promise.resolve(f.value.v).then(u,c):h(s[0][2],f)}function u(f){a("next",f)}function c(f){a("throw",f)}function h(f,p){f(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function rrt(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=ort(e),[r,i]=n.tee();return{stream:srt(r),response:irt(i)}}async function irt(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return JR(art(e));e.push(i)}}function srt(t){return nrt(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield zg(n.read());if(i)break;yield yield zg(JR(r))}})}function ort(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new Bg("Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(IV),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new Bg(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),i=i.substring(l[0].length),l=i.match(IV)}return s()})}}})}function art(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const s=i.index;if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:i.index}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[{text:""}]});for(const o of i.content.parts)o.text&&(n.candidates[s].content.parts[0].text+=o.text)}}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NQ(t,e,n,r){const i=new Av(e,Rc.STREAM_GENERATE_CONTENT,t,!0),s=await Ov(i,JSON.stringify(n),r);return rrt(s)}async function PQ(t,e,n,r){const i=new Av(e,Rc.GENERATE_CONTENT,t,!1),o=await(await Ov(i,JSON.stringify(n),r)).json();return{response:JR(o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){let n=[];if(typeof t=="string")n=[{text:t}];else for(const r of t)typeof r=="string"?n.push({text:r}):n.push(r);return{role:e,parts:n}}function cT(t){return t.contents?t:{contents:[vm(t,"user")]}}function lrt(t){return typeof t=="string"||Array.isArray(t)?{content:vm(t,"user")}:t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="SILENT_ERROR";class urt{constructor(e,n,r,i){this.model=n,this.params=r,this.requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(this._history=r.history.map(s=>{if(!s.role)throw new Error("Missing role for history item: "+JSON.stringify(s));return vm(s.parts,s.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var n,r;await this._sendPromise;const i=vm(e,"user"),s={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]};let o;return this._sendPromise=this._sendPromise.then(()=>PQ(this._apiKey,this.model,s,this.requestOptions)).then(a=>{var l;if(a.response.candidates&&a.response.candidates.length>0){this._history.push(i);const u=Object.assign({parts:[],role:"model"},(l=a.response.candidates)===null||l===void 0?void 0:l[0].content);this._history.push(u)}else{const u=Vb(a.response);u&&console.warn(`sendMessage() was unsuccessful. ${u}. Inspect response object for details.`)}o=a}),await this._sendPromise,o}async sendMessageStream(e){var n,r;await this._sendPromise;const i=vm(e,"user"),s={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]},o=NQ(this._apiKey,this.model,s,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>o).catch(a=>{throw new Error(AV)}).then(a=>a.response).then(a=>{if(a.candidates&&a.candidates.length>0){this._history.push(i);const l=Object.assign({},a.candidates[0].content);l.role||(l.role="model"),this._history.push(l)}else{const l=Vb(a);l&&console.warn(`sendMessageStream() was unsuccessful. ${l}. Inspect response object for details.`)}}).catch(a=>{a.message!==AV&&console.error(a)}),o}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function crt(t,e,n,r){const i=new Av(e,Rc.COUNT_TOKENS,t,!1);return(await Ov(i,JSON.stringify(Object.assign(Object.assign({},n),{model:e})),r)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hrt(t,e,n,r){const i=new Av(e,Rc.EMBED_CONTENT,t,!1);return(await Ov(i,JSON.stringify(n),r)).json()}async function frt(t,e,n,r){const i=new Av(e,Rc.BATCH_EMBED_CONTENTS,t,!1),s=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Ov(i,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class drt{constructor(e,n,r){this.apiKey=e,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.requestOptions=r||{}}async generateContent(e){const n=cT(e);return PQ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n),this.requestOptions)}async generateContentStream(e){const n=cT(e);return NQ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n),this.requestOptions)}startChat(e){return new urt(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const n=cT(e);return crt(this.apiKey,this.model,n)}async embedContent(e){const n=lrt(e);return hrt(this.apiKey,this.model,n)}async batchEmbedContents(e){return frt(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class prt{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Bg("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new drt(this.apiKey,e,n)}}const mrt=new prt("AIzaSyBi2qRZJAAmvzBKg2AfkUTuTs6IMkU0uEc");async function grt(t){try{const e=`Analyze the following power grid metrics and provide insights:
      Current Load: ${t.load}%
      Efficiency: ${t.efficiency}%
      Renewable Energy: ${t.renewable}%
      Weather Impact: Temperature ${t.weather.temperature}C, Wind ${t.weather.windSpeed}m/s

      Provide 3 specific recommendations for optimizing the power grid based on these metrics.
      Format the response as a JSON array of strings.`,s=(await(await mrt.getGenerativeModel({model:"gemini-1.5-flash"}).generateContent(e)).response).text();try{return JSON.parse(s)}catch{return[s]}}catch(e){return console.error("Error getting AI insights:",e),["Unable to generate insights at this time"]}}function yrt({prediction:t}){const[e,n]=J.useState([]);J.useEffect(()=>{async function i(){const s=await grt(t);n(s)}i()},[t]);const r=i=>i>=.9?"text-green-500":i>=.7?"text-yellow-500":"text-red-500";return V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[V.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:V.jsx(ese,{className:"w-5 h-5 text-purple-500"})}),V.jsxs("div",{className:"flex-1",children:[V.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"AI Predictions"}),V.jsxs("p",{className:`text-xs ${r(t.confidenceScore)}`,children:[(t.confidenceScore*100).toFixed(1),"% confidence"]})]})]}),V.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[V.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[V.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.expectedLoad>75?V.jsx(N$,{className:"w-4 h-4 text-red-500"}):V.jsx(O$,{className:"w-4 h-4 text-green-500"}),V.jsx("span",{className:"text-xs text-gray-500",children:"Expected Load"})]}),V.jsxs("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:[t.expectedLoad.toFixed(1),"%"]})]}),V.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[V.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.expectedEfficiency>85?V.jsx(N$,{className:"w-4 h-4 text-green-500"}):V.jsx(O$,{className:"w-4 h-4 text-red-500"}),V.jsx("span",{className:"text-xs text-gray-500",children:"Expected Efficiency"})]}),V.jsxs("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:[t.expectedEfficiency.toFixed(1),"%"]})]})]}),V.jsxs("div",{children:[V.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"AI-Generated Recommendations"}),V.jsx("div",{className:"space-y-2",children:e.map((i,s)=>V.jsx(As.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},className:"p-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:V.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i})},s))})]})]})}function vrt(){const[t,e]=J.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);return J.useEffect(()=>{const n=document.documentElement;t?(n.classList.add("dark"),localStorage.setItem("theme","dark")):(n.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]),J.useEffect(()=>{const n=localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches;e(n)},[]),V.jsx("button",{onClick:()=>e(n=>!n),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:t?V.jsx(R5,{className:"w-5 h-5"}):V.jsx(sse,{className:"w-5 h-5"})})}function _rt({weather:t}){const e=n=>n>=.7?"text-green-500":n>=.4?"text-yellow-500":"text-red-500";return V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs(As.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[V.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[V.jsx(D5,{className:"w-4 h-4 text-orange-500"}),V.jsx("span",{className:"text-sm text-gray-500",children:"Temperature"})]}),V.jsxs("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:[t.temperature.toFixed(1),"C"]})]}),V.jsxs(As.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[V.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[V.jsx(PL,{className:"w-4 h-4 text-blue-500"}),V.jsx("span",{className:"text-sm text-gray-500",children:"Wind Speed"})]}),V.jsxs("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:[t.windSpeed.toFixed(1)," m/s"]})]})]}),V.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[V.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Resource Impact Analysis"}),V.jsxs("div",{className:"space-y-3",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(R5,{className:"w-4 h-4 text-yellow-500"}),V.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Solar Impact"})]}),V.jsxs("span",{className:`text-sm font-medium ${e(t.impact.solar)}`,children:[(t.impact.solar*100).toFixed(0),"%"]})]}),V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(PL,{className:"w-4 h-4 text-blue-500"}),V.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wind Impact"})]}),V.jsxs("span",{className:`text-sm font-medium ${e(t.impact.wind)}`,children:[(t.impact.wind*100).toFixed(0),"%"]})]}),V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(P5,{className:"w-4 h-4 text-gray-500"}),V.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Demand Impact"})]}),V.jsxs("span",{className:`text-sm font-medium ${e(t.impact.demand)}`,children:[(t.impact.demand*100).toFixed(0),"%"]})]})]})]})]})}const xrt="modulepreload",brt=function(t){return"/"+t},OV={},Dc=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=brt(l),l in OV)return;OV[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":xrt,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},wrt=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Dc(async()=>{const{default:r}=await Promise.resolve().then(()=>jd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class QR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Srt extends QR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class krt extends QR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Crt extends QR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var s2;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(s2||(s2={}));var Trt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class $rt{constructor(e,{headers:n={},customFetch:r,region:i=s2.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=wrt(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Trt(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(m=>{throw new Srt(m)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new krt(c);if(!c.ok)throw new Crt(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield c.json():f==="application/octet-stream"?p=yield c.blob():f==="text/event-stream"?p=c:f==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var yi={},eD={},US={},Nv={},WS={},GS={},Ert=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},id=Ert();const Irt=id.fetch,RQ=id.fetch.bind(id),DQ=id.Headers,Art=id.Request,Ort=id.Response,jd=Object.freeze(Object.defineProperty({__proto__:null,Headers:DQ,Request:Art,Response:Ort,default:RQ,fetch:Irt},Symbol.toStringTag,{value:"Module"})),Nrt=mW(jd);var HS={};Object.defineProperty(HS,"__esModule",{value:!0});let Prt=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};HS.default=Prt;var MQ=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(GS,"__esModule",{value:!0});const Rrt=MQ(Nrt),Drt=MQ(HS);let Mrt=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rrt.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let u=null,c=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=g:c=JSON.parse(g))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,f=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const _=await s.text();try{u=JSON.parse(_),Array.isArray(u)&&s.status===404&&(c=[],u=null,f=200,p="OK")}catch{s.status===404&&_===""?(f=204,p="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new Drt.default(u)}return{error:u,data:c,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}};GS.default=Mrt;var Lrt=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(WS,"__esModule",{value:!0});const Frt=Lrt(GS);let Brt=class extends Frt.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};WS.default=Brt;var zrt=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nv,"__esModule",{value:!0});const jrt=zrt(WS);let Vrt=class extends jrt.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Nv.default=Vrt;var Urt=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(US,"__esModule",{value:!0});const Ep=Urt(Nv);let Wrt=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ep.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ep.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ep.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Ep.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ep.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};US.default=Wrt;var KS={},qS={};Object.defineProperty(qS,"__esModule",{value:!0});qS.version=void 0;qS.version="0.0.0-automated";Object.defineProperty(KS,"__esModule",{value:!0});KS.DEFAULT_HEADERS=void 0;const Grt=qS;KS.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Grt.version}`};var LQ=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eD,"__esModule",{value:!0});const Hrt=LQ(US),Krt=LQ(Nv),qrt=KS;let Xrt=class FQ{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},qrt.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Hrt.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new FQ(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{a.searchParams.append(c,h)})):(o="POST",l=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Krt.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};eD.default=Xrt;var Vd=ln&&ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yi,"__esModule",{value:!0});yi.PostgrestError=yi.PostgrestBuilder=yi.PostgrestTransformBuilder=yi.PostgrestFilterBuilder=yi.PostgrestQueryBuilder=yi.PostgrestClient=void 0;const BQ=Vd(eD);yi.PostgrestClient=BQ.default;const zQ=Vd(US);yi.PostgrestQueryBuilder=zQ.default;const jQ=Vd(Nv);yi.PostgrestFilterBuilder=jQ.default;const VQ=Vd(WS);yi.PostgrestTransformBuilder=VQ.default;const UQ=Vd(GS);yi.PostgrestBuilder=UQ.default;const WQ=Vd(HS);yi.PostgrestError=WQ.default;var Zrt=yi.default={PostgrestClient:BQ.default,PostgrestQueryBuilder:zQ.default,PostgrestFilterBuilder:jQ.default,PostgrestTransformBuilder:VQ.default,PostgrestBuilder:UQ.default,PostgrestError:WQ.default};const{PostgrestClient:Yrt,PostgrestQueryBuilder:Xlt,PostgrestFilterBuilder:Zlt,PostgrestTransformBuilder:Ylt,PostgrestBuilder:Jlt,PostgrestError:Qlt}=Zrt,Jrt="2.11.2",Qrt={"X-Client-Info":`realtime-js/${Jrt}`},eit="1.0.0",GQ=1e4,tit=1e3;var ff;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ff||(ff={}));var Ri;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ri||(Ri={}));var Ys;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ys||(Ys={}));var o2;(function(t){t.websocket="websocket"})(o2||(o2={}));var Bu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Bu||(Bu={}));class nit{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class HQ{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const NV=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=rit(o,t,e,i),s),{})},rit=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?KQ(s,o):a2(o)},KQ=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ait(e,n)}switch(t){case Ut.bool:return iit(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return sit(e);case Ut.json:case Ut.jsonb:return oit(e);case Ut.timestamp:return lit(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return a2(e);default:return a2(e)}},a2=t=>t,iit=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},sit=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oit=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ait=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>KQ(e,a))}return t},lit=t=>typeof t=="string"?t.replace(" ","T"):t,qQ=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hT{constructor(e,n,r={},i=GQ){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var PV;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(PV||(PV={}));class _m{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_m.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=_m.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=_m.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const f=c.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),m=c.filter(v=>p.indexOf(v.presence_ref)<0),_=h.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(a[u]=m),_.length>0&&(l[u]=_)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(p=>p.presence_ref),f=c.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var RV;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(RV||(RV={}));var DV;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(DV||(DV={}));var ca;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ca||(ca={}));class tD{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ri.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hT(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new HQ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ri.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ri.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ri.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ri.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new _m(this),this.broadcastEndpointURL=qQ(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(ca.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ca.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(ca.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let _=0;_<p;_++){const v=f[_],{filter:{event:g,schema:x,table:b,filter:w}}=v,k=c&&c[_];if(k&&k.event===g&&k.schema===x&&k.table===b&&k.filter===w)m.push(Object.assign(Object.assign({},v),{id:k.id}));else{this.unsubscribe(),e==null||e(ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ca.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ri.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new hT(this,Ys.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hT(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ys;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,_,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(_=p.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var m,_,v,g,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((_=n.ids)===null||_===void 0?void 0:_.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const w=(x=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:_,table:v,commit_timestamp:g,type:x,errors:b}=m;f=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:g,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Ri.closed}_isJoined(){return this.state===Ri.joined}_isJoining(){return this.state===Ri.joining}_isLeaving(){return this.state===Ri.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&tD.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ys.close,{},e)}_onError(e){this._on(Ys.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ri.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=NV(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=NV(e.columns,e.old_record)),n}}const uit=()=>{},cit=typeof WebSocket<"u",hit=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fit{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Qrt,this.params={},this.timeout=GQ,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=uit,this.conn=null,this.sendBuffer=[],this.serializer=new nit,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Dc(async()=>{const{default:l}=await Promise.resolve().then(()=>jd);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${o2.websocket}`,this.httpEndpoint=qQ(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new HQ(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(cit){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new dit(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Dc(async()=>{const{default:e}=await import("./browser-D9lbkdq8.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eit}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ff.connecting:return Bu.Connecting;case ff.open:return Bu.Open;case ff.closing:return Bu.Closing;default:return Bu.Closed}}isConnected(){return this.connectionState()===Bu.Open}channel(e,n={config:{}}){const r=new tD(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(Ys.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(tit,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ys.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([hit],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class dit{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ff.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class nD extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class pit extends nD{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class l2 extends nD{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var mit=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const XQ=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Dc(async()=>{const{default:r}=await Promise.resolve().then(()=>jd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},git=()=>mit(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Dc(()=>Promise.resolve().then(()=>jd),void 0)).Response:Response}),u2=t=>{if(Array.isArray(t))return t.map(n=>u2(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=u2(r)}),e};var th=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const fT=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yit=(t,e,n)=>th(void 0,void 0,void 0,function*(){const r=yield git();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new pit(fT(i),t.status||500))}).catch(i=>{e(new l2(fT(i),i))}):e(new l2(fT(t),t))}),vit=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Pv(t,e,n,r,i,s){return th(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,vit(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>yit(l,a,r))})})}function Ub(t,e,n,r){return th(this,void 0,void 0,function*(){return Pv(t,"GET",e,n,r)})}function hl(t,e,n,r,i){return th(this,void 0,void 0,function*(){return Pv(t,"POST",e,r,i,n)})}function _it(t,e,n,r,i){return th(this,void 0,void 0,function*(){return Pv(t,"PUT",e,r,i,n)})}function xit(t,e,n,r){return th(this,void 0,void 0,function*(){return Pv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ZQ(t,e,n,r,i){return th(this,void 0,void 0,function*(){return Pv(t,"DELETE",e,r,i,n)})}var di=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const bit={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},MV={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wit{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=XQ(i)}uploadOrUpdate(e,n,r,i){return di(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},MV),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(rr(s))return{data:null,error:s};throw s}})}upload(e,n,r){return di(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return di(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:MV.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield h.json();return h.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(rr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return di(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield hl(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new nD("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}update(e,n,r){return di(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return di(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}copy(e,n,r){return di(this,void 0,void 0,function*(){try{return{data:{path:(yield hl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return di(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield hl(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return di(this,void 0,void 0,function*(){try{const i=yield hl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}download(e,n){return di(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ub(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(rr(a))return{data:null,error:a};throw a}})}info(e){return di(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ub(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:u2(r),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}exists(e){return di(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield xit(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rr(r)&&r instanceof l2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return di(this,void 0,void 0,function*(){try{return{data:yield ZQ(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(rr(n))return{data:null,error:n};throw n}})}list(e,n,r){return di(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},bit),n),{prefix:e||""});return{data:yield hl(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Sit="2.7.1",kit={"X-Client-Info":`storage-js/${Sit}`};var bh=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Cit{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},kit),n),this.fetch=XQ(r)}listBuckets(){return bh(this,void 0,void 0,function*(){try{return{data:yield Ub(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rr(e))return{data:null,error:e};throw e}})}getBucket(e){return bh(this,void 0,void 0,function*(){try{return{data:yield Ub(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(rr(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return bh(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return bh(this,void 0,void 0,function*(){try{return{data:yield _it(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return bh(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(rr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return bh(this,void 0,void 0,function*(){try{return{data:yield ZQ(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(rr(n))return{data:null,error:n};throw n}})}}class Tit extends Cit{constructor(e,n={},r){super(e,n,r)}from(e){return new wit(this.url,this.headers,e,this.fetch)}}const $it="2.48.1";let Kp="";typeof Deno<"u"?Kp="deno":typeof document<"u"?Kp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kp="react-native":Kp="node";const Eit={"X-Client-Info":`supabase-js-${Kp}/${$it}`},Iit={headers:Eit},Ait={schema:"public"},Oit={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nit={};var Pit=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Rit=t=>{let e;return t?e=t:typeof fetch>"u"?e=RQ:e=fetch,(...n)=>e(...n)},Dit=()=>typeof Headers>"u"?DQ:Headers,Mit=(t,e,n)=>{const r=Rit(n),i=Dit();return(s,o)=>Pit(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Lit=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function Fit(t){return t.replace(/\/$/,"")}function Bit(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>Lit(this,void 0,void 0,function*(){return""})};return t.accessToken?c.accessToken=t.accessToken:delete c.accessToken,c}const YQ="2.67.3",zit="http://localhost:9999",jit="supabase.auth.token",Vit={"X-Client-Info":`gotrue-js/${YQ}`},LV=10,c2="X-Supabase-Api-Version",JQ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Uit(t){return Math.round(Date.now()/1e3)+t}function Wit(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const So=()=>typeof window<"u"&&typeof document<"u",Tu={tested:!1,writable:!1},xm=()=>{if(!So())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tu.tested)return Tu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Tu.tested=!0,Tu.writable=!0}catch{Tu.tested=!0,Tu.writable=!1}return Tu.writable};function Git(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const QQ=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Dc(async()=>{const{default:r}=await Promise.resolve().then(()=>jd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Hit=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",eee=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},q0=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},X0=async(t,e)=>{await t.removeItem(e)};function Kit(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,a,l,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)o=e.indexOf(t.charAt(c++)),a=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|u,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),u!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class XS{constructor(){this.promise=new XS.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}XS.promiseConstructor=Promise;function FV(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Kit(r))}async function qit(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Xit(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Zit(t){return("0"+t.toString(16)).substr(-2)}function Yit(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Zit).join("")}async function Jit(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function Qit(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function est(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Jit(t);return Qit(n)}async function wh(t,e,n=!1){const r=Yit();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await eee(t,`${e}-code-verifier`,i);const s=await est(r);return[s,r===s?"plain":"s256"]}const tst=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nst(t){const e=t.headers.get(c2);if(!e||!e.match(tst))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class rD extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class rst extends rD{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ist(t){return nt(t)&&t.name==="AuthApiError"}class tee extends rD{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class nh extends rD{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class rl extends nh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sst(t){return nt(t)&&t.name==="AuthSessionMissingError"}class dT extends nh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Z0 extends nh{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Y0 extends nh{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ost(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class BV extends nh{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class h2 extends nh{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pT(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class zV extends nh{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var ast=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lst=[502,503,504];async function jV(t){var e;if(!Hit(t))throw new h2(Du(t),0);if(lst.includes(t.status))throw new h2(Du(t),t.status);let n;try{n=await t.json()}catch(s){throw new tee(Du(s),s)}let r;const i=nst(t);if(i&&i.getTime()>=JQ["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new zV(Du(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new zV(Du(n),t.status,n.weak_password.reasons);throw new rst(Du(n),t.status||500,r)}const ust=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function dt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[c2]||(s[c2]=JQ["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await cst(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function cst(t,e,n,r,i,s){const o=ust(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new h2(Du(l),0)}if(a.ok||await jV(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await jV(l)}}function il(t){var e;let n=null;pst(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Uit(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function VV(t){const e=il(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ml(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hst(t){return{data:t,error:null}}function fst(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=ast(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function dst(t){return t}function pst(t){return t.access_token&&t.refresh_token&&t.expires_in}var mst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class gst{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=QQ(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ml})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=mst(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:fst,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ml})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:dst});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const _=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(nt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ml})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ml})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ml})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}const yst={getItem:t=>xm()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{xm()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{xm()&&globalThis.localStorage.removeItem(t)}};function UV(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function vst(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sh={debug:!!(globalThis&&xm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nee extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _st extends nee{}async function xst(t,e,n){Sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Sh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _st(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sh.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}vst();const bst={url:zit,storageKey:jit,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vit,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ip=30*1e3,WV=3;async function GV(t,e,n){return await n()}class jg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jg.nextInstanceID,jg.nextInstanceID+=1,this.instanceID>0&&So()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},bst),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new gst({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=QQ(i.fetch),this.lock=i.lock||GV,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:So()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xst:this.lock=GV,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:xm()?this.storage=yst:(this.memoryStorage={},this.storage=UV(this.memoryStorage)):(this.memoryStorage={},this.storage=UV(this.memoryStorage)),So()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${YQ}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Git(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),So()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ost(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return nt(n)?{error:n}:{error:new tee("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:il}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:c,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await wh(this.storage,this.storageKey)),s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:il})}else if("phone"in e){const{phone:c,password:h,options:f}=e;s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:il})}else throw new Z0("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VV})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VV})}else throw new Z0("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new dT}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await q0(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:il});if(await X0(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new dT}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(nt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:il}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new dT}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await wh(this.storage,this.storageKey));const{error:h}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Z0("You must provide either an email or phone number.")}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:il});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await wh(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:hst})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new rl;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Z0("You must provide either an email or phone number and a type")}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await q0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ml}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rl}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ml})})}catch(n){if(nt(n))return sst(n)&&(await this._removeSession(),await X0(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new rl;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await wh(this.storage,this.storageKey));const{data:u,error:c}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ml});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return FV(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rl;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=FV(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new rl;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!So())throw new Y0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Y0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new BV("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Y0("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new BV("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Y0("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const p=f-c;p*1e3<=Ip&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,c);const{data:_,error:v}=await this._getUser(s);if(v)throw v;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await q0(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ist(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await X0(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Wit(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await wh(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return So()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Xit(async i=>(i>0&&await qit(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:il})),(i,s)=>{const o=200*Math.pow(2,i);return s&&pT(s)&&Date.now()+o-r<Ip})}catch(r){if(this._debug(n,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),So()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await q0(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+LV;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${LV}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),pT(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new rl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new XS;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new rl;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),nt(s)){const o={session:null,error:s};return pT(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await eee(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await X0(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&So()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ip);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ip);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ip}ms, refresh threshold is ${WV} ticks`),i<=WV&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nee)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!So()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await wh(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}jg.nextInstanceID=0;const wst=jg;class Sst extends wst{constructor(e){super(e)}}var kst=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Cst{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Fit(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ait,realtime:Nit,auth:Object.assign(Object.assign({},Oit),{storageKey:l}),global:Iit},c=Bit(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Mit(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Yrt(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new $rt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tit(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return kst(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sst({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fit(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ree=(t,e,n)=>new Cst(t,e,n),Tst="https://llkaqzcdzyhjjdglgjrq.supabase.co",$st="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxsa2FxemNkenloampkZ2xnanJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDAyMDI5MzQsImV4cCI6MjA1NTc3ODkzNH0.kez0p6gQFXEXu2d72emR9p-ED4Mxs3EzQxU8EURv6nc",Est=ree(Tst,$st);async function Ist(){const{data:t,error:e}=await Est.from("power_metrics").select("*").order("timestamp",{ascending:!1}).limit(30);return e?(console.error("Error fetching metrics:",e),[]):t||[]}var Xl={},Ud={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iee=J;function Je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pi=Object.prototype.hasOwnProperty,Ast=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HV={},KV={};function see(t){return pi.call(KV,t)?!0:pi.call(HV,t)?!1:Ast.test(t)?KV[t]=!0:(HV[t]=!0,!1)}function ai(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kr[t]=new ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kr[e]=new ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kr[t]=new ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kr[t]=new ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kr[t]=new ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kr[t]=new ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kr[t]=new ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kr[t]=new ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kr[t]=new ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var iD=/[\-:]([a-z])/g;function sD(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iD,sD);kr[e]=new ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iD,sD);kr[e]=new ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iD,sD);kr[e]=new ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kr[t]=new ai(t,1,!1,t.toLowerCase(),null,!1,!1)});kr.xlinkHref=new ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kr[t]=new ai(t,1,!1,t.toLowerCase(),null,!0,!0)});var T_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ost=["Webkit","ms","Moz","O"];Object.keys(T_).forEach(function(t){Ost.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),T_[e]=T_[t]})});var Nst=/["'&<>]/;function Jr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=Nst.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var Pst=/([A-Z])/g,Rst=/^ms-/,f2=Array.isArray;function la(t,e){return{insertionMode:t,selectedValue:e}}function Dst(t,e,n){switch(e){case"select":return la(1,n.value!=null?n.value:n.defaultValue);case"svg":return la(2,null);case"math":return la(3,null);case"foreignObject":return la(1,null);case"table":return la(4,null);case"thead":case"tbody":case"tfoot":return la(5,null);case"colgroup":return la(7,null);case"tr":return la(6,null)}return 4<=t.insertionMode||t.insertionMode===0?la(1,null):t}var qV=new Map;function oee(t,e,n){if(typeof n!="object")throw Error(Je(62));e=!0;for(var r in n)if(pi.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=Jr(r);i=Jr((""+i).trim())}else{s=r;var o=qV.get(s);o!==void 0||(o=Jr(s.replace(Pst,"-$1").toLowerCase().replace(Rst,"-ms-")),qV.set(s,o)),s=o,i=typeof i=="number"?i===0||pi.call(T_,r)?""+i:i+"px":Jr((""+i).trim())}e?(e=!1,t.push(' style="',s,":",i)):t.push(";",s,":",i)}}e||t.push('"')}function Ni(t,e,n,r){switch(n){case"style":oee(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=kr.hasOwnProperty(n)?kr[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',Jr(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',Jr(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',Jr(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',Jr(r),'"')}}else if(see(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',Jr(r),'"')}}}function $_(t,e,n){if(e!=null){if(n!=null)throw Error(Je(60));if(typeof e!="object"||!("__html"in e))throw Error(Je(61));e=e.__html,e!=null&&t.push(""+e)}}function Mst(t){var e="";return iee.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function mT(t,e,n,r){t.push(ko(n));var i=n=null,s;for(s in e)if(pi.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Ni(t,r,s,o)}}return t.push(">"),$_(t,i,n),typeof n=="string"?(t.push(Jr(n)),null):n}var Lst=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,XV=new Map;function ko(t){var e=XV.get(t);if(e===void 0){if(!Lst.test(t))throw Error(Je(65,t));e="<"+t,XV.set(t,e)}return e}function Fst(t,e,n,r,i){switch(e){case"select":t.push(ko("select"));var s=null,o=null;for(c in n)if(pi.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Ni(t,r,c,a)}}return t.push(">"),$_(t,o,s),s;case"option":o=i.selectedValue,t.push(ko("option"));var l=a=null,u=null,c=null;for(s in n)if(pi.call(n,s)){var h=n[s];if(h!=null)switch(s){case"children":a=h;break;case"selected":u=h;break;case"dangerouslySetInnerHTML":c=h;break;case"value":l=h;default:Ni(t,r,s,h)}}if(o!=null)if(n=l!==null?""+l:Mst(a),f2(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(' selected=""');break}}else""+o===n&&t.push(' selected=""');else u&&t.push(' selected=""');return t.push(">"),$_(t,c,a),a;case"textarea":t.push(ko("textarea")),c=o=s=null;for(a in n)if(pi.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(Je(91));default:Ni(t,r,a,l)}if(s===null&&o!==null&&(s=o),t.push(">"),c!=null){if(s!=null)throw Error(Je(92));if(f2(c)&&1<c.length)throw Error(Je(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s!==null&&t.push(Jr(""+s)),null;case"input":t.push(ko("input")),l=c=a=s=null;for(o in n)if(pi.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Je(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:Ni(t,r,o,u)}return c!==null?Ni(t,r,"checked",c):l!==null&&Ni(t,r,"checked",l),s!==null?Ni(t,r,"value",s):a!==null&&Ni(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(ko("menuitem"));for(var f in n)if(pi.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Je(400));default:Ni(t,r,f,s)}return t.push(">"),null;case"title":t.push(ko("title")),s=null;for(h in n)if(pi.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Je(434));default:Ni(t,r,h,o)}return t.push(">"),s;case"listing":case"pre":t.push(ko(e)),o=s=null;for(l in n)if(pi.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Ni(t,r,l,a)}if(t.push(">"),o!=null){if(s!=null)throw Error(Je(60));if(typeof o!="object"||!("__html"in o))throw Error(Je(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(ko(e));for(var p in n)if(pi.call(n,p)&&(s=n[p],s!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Je(399,e));default:Ni(t,r,p,s)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return mT(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),mT(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return mT(t,n,e,r);t.push(ko(e)),o=s=null;for(u in n)if(pi.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":oee(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:see(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",u,'="',Jr(a),'"')}return t.push(">"),$_(t,o,s),s}}function ZV(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Je(395));return t.push(n),t.push('"></template>')}function Bst(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Je(397))}}function zst(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Je(397))}}var jst=/[<\u2028\u2029]/g;function gT(t){return JSON.stringify(t).replace(jst,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Vst(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function YV(t,e,n,r){return n.generateStaticMarkup?(t.push(Jr(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(Jr(e)),t=!0),t)}var bm=Object.assign,Ust=Symbol.for("react.element"),aee=Symbol.for("react.portal"),lee=Symbol.for("react.fragment"),uee=Symbol.for("react.strict_mode"),cee=Symbol.for("react.profiler"),hee=Symbol.for("react.provider"),fee=Symbol.for("react.context"),dee=Symbol.for("react.forward_ref"),pee=Symbol.for("react.suspense"),mee=Symbol.for("react.suspense_list"),gee=Symbol.for("react.memo"),oD=Symbol.for("react.lazy"),Wst=Symbol.for("react.scope"),Gst=Symbol.for("react.debug_trace_mode"),Hst=Symbol.for("react.legacy_hidden"),Kst=Symbol.for("react.default_value"),JV=Symbol.iterator;function d2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lee:return"Fragment";case aee:return"Portal";case cee:return"Profiler";case uee:return"StrictMode";case pee:return"Suspense";case mee:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fee:return(t.displayName||"Context")+".Consumer";case hee:return(t._context.displayName||"Context")+".Provider";case dee:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gee:return e=t.displayName||null,e!==null?e:d2(t.type)||"Memo";case oD:e=t._payload,t=t._init;try{return d2(t(e))}catch{}}return null}var yee={};function QV(t,e){if(t=t.contextTypes,!t)return yee;var n={},r;for(r in t)n[r]=e[r];return n}var tc=null;function ZS(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Je(401))}else{if(n===null)throw Error(Je(401));ZS(t,n)}e.context._currentValue2=e.value}}function vee(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&vee(t)}function _ee(t){var e=t.parent;e!==null&&_ee(e),t.context._currentValue2=t.value}function xee(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Je(402));t.depth===e.depth?ZS(t,e):xee(t,e)}function bee(t,e){var n=e.parent;if(n===null)throw Error(Je(402));t.depth===n.depth?ZS(t,n):bee(t,n),e.context._currentValue2=e.value}function Wb(t){var e=tc;e!==t&&(e===null?_ee(t):t===null?vee(e):e.depth===t.depth?ZS(e,t):e.depth>t.depth?xee(e,t):bee(e,t),tc=t)}var eU={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function tU(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=eU,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue2:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:bm({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&eU.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=bm({},s,a)):bm(s,a))}t.state=s}else s.queue=null}var qst={id:1,overflow:""};function p2(t,e,n){var r=t.id;t=t.overflow;var i=32-E_(r)-1;r&=~(1<<i),n+=1;var s=32-E_(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-E_(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var E_=Math.clz32?Math.clz32:Yst,Xst=Math.log,Zst=Math.LN2;function Yst(t){return t>>>=0,t===0?32:31-(Xst(t)/Zst|0)|0}function Jst(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qst=typeof Object.is=="function"?Object.is:Jst,Va=null,aD=null,I_=null,Gt=null,qp=!1,Gb=!1,Vg=0,Sl=null,YS=0;function zu(){if(Va===null)throw Error(Je(321));return Va}function nU(){if(0<YS)throw Error(Je(312));return{memoizedState:null,queue:null,next:null}}function lD(){return Gt===null?I_===null?(qp=!1,I_=Gt=nU()):(qp=!0,Gt=I_):Gt.next===null?(qp=!1,Gt=Gt.next=nU()):(qp=!0,Gt=Gt.next),Gt}function uD(){aD=Va=null,Gb=!1,I_=null,YS=0,Gt=Sl=null}function wee(t,e){return typeof e=="function"?e(t):e}function rU(t,e,n){if(Va=zu(),Gt=lD(),qp){var r=Gt.queue;if(e=r.dispatch,Sl!==null&&(n=Sl.get(r),n!==void 0)){Sl.delete(r),r=Gt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Gt.memoizedState=r,[r,e]}return[Gt.memoizedState,e]}return t=t===wee?typeof e=="function"?e():e:n!==void 0?n(e):e,Gt.memoizedState=t,t=Gt.queue={last:null,dispatch:null},t=t.dispatch=eot.bind(null,Va,t),[Gt.memoizedState,t]}function iU(t,e){if(Va=zu(),Gt=lD(),e=e===void 0?null:e,Gt!==null){var n=Gt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!Qst(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Gt.memoizedState=[t,e],t}function eot(t,e,n){if(25<=YS)throw Error(Je(301));if(t===Va)if(Gb=!0,t={action:n,next:null},Sl===null&&(Sl=new Map),n=Sl.get(e),n===void 0)Sl.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function tot(){throw Error(Je(394))}function J0(){}var sU={readContext:function(t){return t._currentValue2},useContext:function(t){return zu(),t._currentValue2},useMemo:iU,useReducer:rU,useRef:function(t){Va=zu(),Gt=lD();var e=Gt.memoizedState;return e===null?(t={current:t},Gt.memoizedState=t):e},useState:function(t){return rU(wee,t)},useInsertionEffect:J0,useLayoutEffect:function(){},useCallback:function(t,e){return iU(function(){return t},e)},useImperativeHandle:J0,useEffect:J0,useDebugValue:J0,useDeferredValue:function(t){return zu(),t},useTransition:function(){return zu(),[!1,tot]},useId:function(){var t=aD.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-E_(t)-1)).toString(32)+e;var n=A_;if(n===null)throw Error(Je(404));return e=Vg++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return zu(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Je(407));return n()}},A_=null,yT=iee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function not(t){return console.error(t),null}function Xp(){}function rot(t,e,n,r,i,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?not:i,onAllReady:Xp,onShellReady:o===void 0?Xp:o,onShellError:Xp,onFatalError:Xp},n=Hb(e,0,null,n,!1,!1),n.parentFlushed=!0,t=cD(e,t,null,n,c,yee,null,qst),u.push(t),e}function cD(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&Cee(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Hb(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Ug(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Kb(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function oU(t,e,n,r,i){for(Va={},aD=e,Vg=0,t=n(r,i);Gb;)Gb=!1,Vg=0,YS+=1,Gt=null,t=n(r,i);return uD(),t}function aU(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Je(108,d2(r)||"Unknown",a));r=bm({},o,n)}e.legacyContext=r,Fi(t,e,i),e.legacyContext=o}else Fi(t,e,i)}function lU(t,e){if(t&&t.defaultProps){e=bm({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function m2(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=QV(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue2:i),tU(s,n,r,i),aU(t,e,s,n)}else{s=QV(n,e.legacyContext),i=oU(t,e,n,r,s);var o=Vg!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)tU(i,n,r,s),aU(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=p2(r,1,0);try{Fi(t,e,i)}finally{e.treeContext=r}}else Fi(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=Fst(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=Dst(o,n,r),g2(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case Hst:case Gst:case uee:case cee:case lee:Fi(t,e,r.children);return;case mee:Fi(t,e,r.children);return;case Wst:throw Error(Je(343));case pee:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Hb(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var u=Hb(t,0,null,i.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(g2(t,e,r),t.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("<!-- -->"),u.status=1,qb(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Ug(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=cD(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case dee:if(r=oU(t,e,n.render,r,i),Vg!==0){n=e.treeContext,e.treeContext=p2(n,1,0);try{Fi(t,e,r)}finally{e.treeContext=n}}else Fi(t,e,r);return;case gee:n=n.type,r=lU(n,r),m2(t,e,n,r,i);return;case hee:if(i=r.children,n=n._context,r=r.value,s=n._currentValue2,n._currentValue2=r,o=tc,tc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,Fi(t,e,i),t=tc,t===null)throw Error(Je(403));r=t.parentValue,t.context._currentValue2=r===Kst?t.context._defaultValue:r,t=tc=t.parent,e.context=t;return;case fee:r=r.children,r=r(n._currentValue2),Fi(t,e,r);return;case oD:i=n._init,n=i(n._payload),r=lU(n,r),m2(t,e,n,r,void 0);return}throw Error(Je(130,n==null?n:typeof n,""))}}function Fi(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Ust:m2(t,e,n.type,n.props,n.ref);return;case aee:throw Error(Je(257));case oD:var r=n._init;n=r(n._payload),Fi(t,e,n);return}if(f2(n)){uU(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=JV&&n[JV]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);uU(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Je(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=YV(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=YV(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function uU(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=p2(s,r,i);try{g2(t,e,n[i])}finally{e.treeContext=s}}}function g2(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return Fi(t,e,n)}catch(l){if(uD(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=Hb(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=cD(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Wb(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Wb(s),l}}function iot(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,kee(this,e,t)}function See(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Je(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return See(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function qb(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&qb(t,n)}else t.completedSegments.push(e)}function kee(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Je(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Xp,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&qb(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(iot,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(qb(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function Cee(t){if(t.status!==2){var e=tc,n=yT.current;yT.current=sU;var r=A_;A_=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,l=o.blockedSegment;if(l.status===0){Wb(o.context);try{Fi(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,kee(a,o.blockedBoundary,l)}catch(m){if(uD(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var u=o.ping;m.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,h=m,f=Ug(a,h);if(c===null?Kb(a,h):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=f,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var p=a.onAllReady;p()}}}finally{}}}i.splice(0,s),t.destination!==null&&hD(t,t.destination)}catch(m){Ug(t,m),Kb(t,m)}finally{A_=r,yT.current=n,n===sU&&Wb(e)}}}function Q0(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)e.push(r[s]);i=JS(t,e,i)}for(;s<r.length-1;s++)e.push(r[s]);return s<r.length&&(i=e.push(r[s])),i;default:throw Error(Je(390))}}function JS(t,e,n){var r=n.boundary;if(r===null)return Q0(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=Jr(r),e.push(r),e.push('"')),e.push("></template>")),Q0(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),r=r.id=i,ZV(e,t.responseState,r),Q0(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),ZV(e,t.responseState,r.id),Q0(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Je(391));return JS(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function cU(t,e,n){return Bst(e,t.responseState,n.formatContext,n.id),JS(t,e,n),zst(e,n.formatContext)}function hU(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)Tee(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Je(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function Tee(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Je(392));return cU(t,e,r)}return cU(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function hD(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){JS(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,h=o.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(Je(395));if(r.push(l),r.push('"'),u||c||h){r.push(",");var f=gT(u||"");r.push(f)}if(c||h){r.push(",");var p=gT(c||"");r.push(p)}if(h){r.push(",");var m=gT(h);r.push(m)}if(!r.push(")<\/script>")){t.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var _=t.completedBoundaries;for(s=0;s<_.length;s++)if(!hU(t,e,_[s])){t.destination=null,s++,_.splice(0,s);return}_.splice(0,s);var v=t.partialBoundaries;for(s=0;s<v.length;s++){var g=v[s];e:{i=t,o=e;var x=g.completedSegments;for(a=0;a<x.length;a++)if(!Tee(i,o,g,x[a])){a++,x.splice(0,a);var b=!1;break e}x.splice(0,a),b=!0}if(!b){t.destination=null,s++,v.splice(0,s);return}}v.splice(0,s);var w=t.completedBoundaries;for(s=0;s<w.length;s++)if(!hU(t,e,w[s])){t.destination=null,s++,w.splice(0,s);return}w.splice(0,s)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function sot(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return See(r,t,e)}),n.clear(),t.destination!==null&&hD(t,t.destination)}catch(r){Ug(t,r),Kb(t,r)}}function oot(){}function $ee(t,e,n,r){var i=!1,s=null,o="",a={push:function(u){return u!==null&&(o+=u),!0},destroy:function(u){i=!0,s=u}},l=!1;if(t=rot(t,Vst(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,oot,void 0,function(){l=!0}),Cee(t),sot(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{hD(t,a)}catch(u){Ug(t,u),Kb(t,u)}}if(i)throw s;if(!l)throw Error(Je(426));return o}Ud.renderToNodeStream=function(){throw Error(Je(207))};Ud.renderToStaticMarkup=function(t,e){return $ee(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ud.renderToStaticNodeStream=function(){throw Error(Je(208))};Ud.renderToString=function(t,e){return $ee(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ud.version="18.3.1";var fD={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eee=J;function at(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bi=null,zi=0;function De(t,e){if(e.length!==0)if(512<e.length)0<zi&&(t.enqueue(new Uint8Array(Bi.buffer,0,zi)),Bi=new Uint8Array(512),zi=0),t.enqueue(e);else{var n=Bi.length-zi;n<e.length&&(n===0?t.enqueue(Bi):(Bi.set(e.subarray(0,n),zi),t.enqueue(Bi),e=e.subarray(n)),Bi=new Uint8Array(512),zi=0),Bi.set(e,zi),zi+=e.length}}function en(t,e){return De(t,e),!0}function fU(t){Bi&&0<zi&&(t.enqueue(new Uint8Array(Bi.buffer,0,zi)),Bi=null,zi=0)}var Iee=new TextEncoder;function ct(t){return Iee.encode(t)}function Ie(t){return Iee.encode(t)}function Aee(t,e){typeof t.error=="function"?t.error(e):t.close()}var mi=Object.prototype.hasOwnProperty,aot=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dU={},pU={};function Oee(t){return mi.call(pU,t)?!0:mi.call(dU,t)?!1:aot.test(t)?pU[t]=!0:(dU[t]=!0,!1)}function li(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cr[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cr[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cr[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cr[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cr[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cr[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cr[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cr[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cr[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var dD=/[\-:]([a-z])/g;function pD(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dD,pD);Cr[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dD,pD);Cr[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dD,pD);Cr[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cr[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});Cr.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cr[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});var O_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lot=["Webkit","ms","Moz","O"];Object.keys(O_).forEach(function(t){lot.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),O_[e]=O_[t]})});var uot=/["'&<>]/;function yr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=uot.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var cot=/([A-Z])/g,hot=/^ms-/,y2=Array.isArray,fot=Ie("<script>"),dot=Ie("<\/script>"),pot=Ie('<script src="'),mot=Ie('<script type="module" src="'),mU=Ie('" async=""><\/script>'),got=/(<\/|<)(s)(cript)/gi;function yot(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function vot(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?fot:Ie('<script nonce="'+yr(e)+'">');var s=[];if(n!==void 0&&s.push(e,ct((""+n).replace(got,yot)),dot),r!==void 0)for(n=0;n<r.length;n++)s.push(pot,ct(yr(r[n])),mU);if(i!==void 0)for(r=0;r<i.length;r++)s.push(mot,ct(yr(i[r])),mU);return{bootstrapChunks:s,startInlineScript:e,placeholderPrefix:Ie(t+"P:"),segmentPrefix:Ie(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Co(t,e){return{insertionMode:t,selectedValue:e}}function _ot(t){return Co(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function xot(t,e,n){switch(e){case"select":return Co(1,n.value!=null?n.value:n.defaultValue);case"svg":return Co(2,null);case"math":return Co(3,null);case"foreignObject":return Co(1,null);case"table":return Co(4,null);case"thead":case"tbody":case"tfoot":return Co(5,null);case"colgroup":return Co(7,null);case"tr":return Co(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Co(1,null):t}var mD=Ie("<!-- -->");function gU(t,e,n,r){return e===""?r:(r&&t.push(mD),t.push(ct(yr(e))),!0)}var yU=new Map,bot=Ie(' style="'),vU=Ie(":"),wot=Ie(";");function Nee(t,e,n){if(typeof n!="object")throw Error(at(62));e=!0;for(var r in n)if(mi.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=ct(yr(r));i=ct(yr((""+i).trim()))}else{s=r;var o=yU.get(s);o!==void 0||(o=Ie(yr(s.replace(cot,"-$1").toLowerCase().replace(hot,"-ms-"))),yU.set(s,o)),s=o,i=typeof i=="number"?i===0||mi.call(O_,r)?ct(""+i):ct(i+"px"):ct(yr((""+i).trim()))}e?(e=!1,t.push(bot,s,vU,i)):t.push(wot,s,vU,i)}}e||t.push(ju)}var sl=Ie(" "),Eh=Ie('="'),ju=Ie('"'),_U=Ie('=""');function Pi(t,e,n,r){switch(n){case"style":Nee(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Cr.hasOwnProperty(n)?Cr[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=ct(e.attributeName),e.type){case 3:r&&t.push(sl,n,_U);break;case 4:r===!0?t.push(sl,n,_U):r!==!1&&t.push(sl,n,Eh,ct(yr(r)),ju);break;case 5:isNaN(r)||t.push(sl,n,Eh,ct(yr(r)),ju);break;case 6:!isNaN(r)&&1<=r&&t.push(sl,n,Eh,ct(yr(r)),ju);break;default:e.sanitizeURL&&(r=""+r),t.push(sl,n,Eh,ct(yr(r)),ju)}}else if(Oee(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(sl,ct(n),Eh,ct(yr(r)),ju)}}}var ol=Ie(">"),xU=Ie("/>");function N_(t,e,n){if(e!=null){if(n!=null)throw Error(at(60));if(typeof e!="object"||!("__html"in e))throw Error(at(61));e=e.__html,e!=null&&t.push(ct(""+e))}}function Sot(t){var e="";return Eee.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var vT=Ie(' selected=""');function _T(t,e,n,r){t.push(To(n));var i=n=null,s;for(s in e)if(mi.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Pi(t,r,s,o)}}return t.push(ol),N_(t,i,n),typeof n=="string"?(t.push(ct(yr(n))),null):n}var xT=Ie(`
`),kot=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,bU=new Map;function To(t){var e=bU.get(t);if(e===void 0){if(!kot.test(t))throw Error(at(65,t));e=Ie("<"+t),bU.set(t,e)}return e}var Cot=Ie("<!DOCTYPE html>");function Tot(t,e,n,r,i){switch(e){case"select":t.push(To("select"));var s=null,o=null;for(c in n)if(mi.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Pi(t,r,c,a)}}return t.push(ol),N_(t,o,s),s;case"option":o=i.selectedValue,t.push(To("option"));var l=a=null,u=null,c=null;for(s in n)if(mi.call(n,s)){var h=n[s];if(h!=null)switch(s){case"children":a=h;break;case"selected":u=h;break;case"dangerouslySetInnerHTML":c=h;break;case"value":l=h;default:Pi(t,r,s,h)}}if(o!=null)if(n=l!==null?""+l:Sot(a),y2(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(vT);break}}else""+o===n&&t.push(vT);else u&&t.push(vT);return t.push(ol),N_(t,c,a),a;case"textarea":t.push(To("textarea")),c=o=s=null;for(a in n)if(mi.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(at(91));default:Pi(t,r,a,l)}if(s===null&&o!==null&&(s=o),t.push(ol),c!=null){if(s!=null)throw Error(at(92));if(y2(c)&&1<c.length)throw Error(at(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(xT),s!==null&&t.push(ct(yr(""+s))),null;case"input":t.push(To("input")),l=c=a=s=null;for(o in n)if(mi.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(at(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:Pi(t,r,o,u)}return c!==null?Pi(t,r,"checked",c):l!==null&&Pi(t,r,"checked",l),s!==null?Pi(t,r,"value",s):a!==null&&Pi(t,r,"value",a),t.push(xU),null;case"menuitem":t.push(To("menuitem"));for(var f in n)if(mi.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(at(400));default:Pi(t,r,f,s)}return t.push(ol),null;case"title":t.push(To("title")),s=null;for(h in n)if(mi.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(at(434));default:Pi(t,r,h,o)}return t.push(ol),s;case"listing":case"pre":t.push(To(e)),o=s=null;for(l in n)if(mi.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Pi(t,r,l,a)}if(t.push(ol),o!=null){if(s!=null)throw Error(at(60));if(typeof o!="object"||!("__html"in o))throw Error(at(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(xT,ct(n)):t.push(ct(""+n)))}return typeof s=="string"&&s[0]===`
`&&t.push(xT),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(To(e));for(var p in n)if(mi.call(n,p)&&(s=n[p],s!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(at(399,e));default:Pi(t,r,p,s)}return t.push(xU),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return _T(t,n,e,r);case"html":return i.insertionMode===0&&t.push(Cot),_T(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return _T(t,n,e,r);t.push(To(e)),o=s=null;for(u in n)if(mi.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":Nee(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Oee(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(sl,ct(u),Eh,ct(yr(a)),ju)}return t.push(ol),N_(t,o,s),s}}var $ot=Ie("</"),Eot=Ie(">"),Iot=Ie('<template id="'),Aot=Ie('"></template>'),Oot=Ie("<!--$-->"),Not=Ie('<!--$?--><template id="'),Pot=Ie('"></template>'),Rot=Ie("<!--$!-->"),Dot=Ie("<!--/$-->"),Mot=Ie("<template"),Lot=Ie('"'),Fot=Ie(' data-dgst="');Ie(' data-msg="');Ie(' data-stck="');var Bot=Ie("></template>");function wU(t,e,n){if(De(t,Not),n===null)throw Error(at(395));return De(t,n),en(t,Pot)}var zot=Ie('<div hidden id="'),jot=Ie('">'),Vot=Ie("</div>"),Uot=Ie('<svg aria-hidden="true" style="display:none" id="'),Wot=Ie('">'),Got=Ie("</svg>"),Hot=Ie('<math aria-hidden="true" style="display:none" id="'),Kot=Ie('">'),qot=Ie("</math>"),Xot=Ie('<table hidden id="'),Zot=Ie('">'),Yot=Ie("</table>"),Jot=Ie('<table hidden><tbody id="'),Qot=Ie('">'),eat=Ie("</tbody></table>"),tat=Ie('<table hidden><tr id="'),nat=Ie('">'),rat=Ie("</tr></table>"),iat=Ie('<table hidden><colgroup id="'),sat=Ie('">'),oat=Ie("</colgroup></table>");function aat(t,e,n,r){switch(n.insertionMode){case 0:case 1:return De(t,zot),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,jot);case 2:return De(t,Uot),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,Wot);case 3:return De(t,Hot),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,Kot);case 4:return De(t,Xot),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,Zot);case 5:return De(t,Jot),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,Qot);case 6:return De(t,tat),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,nat);case 7:return De(t,iat),De(t,e.segmentPrefix),De(t,ct(r.toString(16))),en(t,sat);default:throw Error(at(397))}}function lat(t,e){switch(e.insertionMode){case 0:case 1:return en(t,Vot);case 2:return en(t,Got);case 3:return en(t,qot);case 4:return en(t,Yot);case 5:return en(t,eat);case 6:return en(t,rat);case 7:return en(t,oat);default:throw Error(at(397))}}var uat=Ie('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),cat=Ie('$RS("'),hat=Ie('","'),fat=Ie('")<\/script>'),dat=Ie('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),pat=Ie('$RC("'),mat=Ie('","'),gat=Ie('")<\/script>'),yat=Ie('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),vat=Ie('$RX("'),_at=Ie('"'),xat=Ie(")<\/script>"),bT=Ie(","),bat=/[<\u2028\u2029]/g;function wT(t){return JSON.stringify(t).replace(bat,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var wm=Object.assign,wat=Symbol.for("react.element"),Pee=Symbol.for("react.portal"),Ree=Symbol.for("react.fragment"),Dee=Symbol.for("react.strict_mode"),Mee=Symbol.for("react.profiler"),Lee=Symbol.for("react.provider"),Fee=Symbol.for("react.context"),Bee=Symbol.for("react.forward_ref"),zee=Symbol.for("react.suspense"),jee=Symbol.for("react.suspense_list"),Vee=Symbol.for("react.memo"),gD=Symbol.for("react.lazy"),Sat=Symbol.for("react.scope"),kat=Symbol.for("react.debug_trace_mode"),Cat=Symbol.for("react.legacy_hidden"),Tat=Symbol.for("react.default_value"),SU=Symbol.iterator;function v2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ree:return"Fragment";case Pee:return"Portal";case Mee:return"Profiler";case Dee:return"StrictMode";case zee:return"Suspense";case jee:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fee:return(t.displayName||"Context")+".Consumer";case Lee:return(t._context.displayName||"Context")+".Provider";case Bee:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vee:return e=t.displayName||null,e!==null?e:v2(t.type)||"Memo";case gD:e=t._payload,t=t._init;try{return v2(t(e))}catch{}}return null}var Uee={};function kU(t,e){if(t=t.contextTypes,!t)return Uee;var n={},r;for(r in t)n[r]=e[r];return n}var nc=null;function QS(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(at(401))}else{if(n===null)throw Error(at(401));QS(t,n)}e.context._currentValue=e.value}}function Wee(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&Wee(t)}function Gee(t){var e=t.parent;e!==null&&Gee(e),t.context._currentValue=t.value}function Hee(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(at(402));t.depth===e.depth?QS(t,e):Hee(t,e)}function Kee(t,e){var n=e.parent;if(n===null)throw Error(at(402));t.depth===n.depth?QS(t,n):Kee(t,n),e.context._currentValue=e.value}function Xb(t){var e=nc;e!==t&&(e===null?Gee(t):t===null?Wee(e):e.depth===t.depth?QS(e,t):e.depth>t.depth?Hee(e,t):Kee(e,t),nc=t)}var CU={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function TU(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=CU,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:wm({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&CU.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=wm({},s,a)):wm(s,a))}t.state=s}else s.queue=null}var $at={id:1,overflow:""};function _2(t,e,n){var r=t.id;t=t.overflow;var i=32-P_(r)-1;r&=~(1<<i),n+=1;var s=32-P_(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-P_(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var P_=Math.clz32?Math.clz32:Aat,Eat=Math.log,Iat=Math.LN2;function Aat(t){return t>>>=0,t===0?32:31-(Eat(t)/Iat|0)|0}function Oat(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nat=typeof Object.is=="function"?Object.is:Oat,Ua=null,yD=null,R_=null,Ht=null,Zp=!1,Zb=!1,Wg=0,kl=null,ek=0;function Vu(){if(Ua===null)throw Error(at(321));return Ua}function $U(){if(0<ek)throw Error(at(312));return{memoizedState:null,queue:null,next:null}}function vD(){return Ht===null?R_===null?(Zp=!1,R_=Ht=$U()):(Zp=!0,Ht=R_):Ht.next===null?(Zp=!1,Ht=Ht.next=$U()):(Zp=!0,Ht=Ht.next),Ht}function _D(){yD=Ua=null,Zb=!1,R_=null,ek=0,Ht=kl=null}function qee(t,e){return typeof e=="function"?e(t):e}function EU(t,e,n){if(Ua=Vu(),Ht=vD(),Zp){var r=Ht.queue;if(e=r.dispatch,kl!==null&&(n=kl.get(r),n!==void 0)){kl.delete(r),r=Ht.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Ht.memoizedState=r,[r,e]}return[Ht.memoizedState,e]}return t=t===qee?typeof e=="function"?e():e:n!==void 0?n(e):e,Ht.memoizedState=t,t=Ht.queue={last:null,dispatch:null},t=t.dispatch=Pat.bind(null,Ua,t),[Ht.memoizedState,t]}function IU(t,e){if(Ua=Vu(),Ht=vD(),e=e===void 0?null:e,Ht!==null){var n=Ht.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!Nat(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Ht.memoizedState=[t,e],t}function Pat(t,e,n){if(25<=ek)throw Error(at(301));if(t===Ua)if(Zb=!0,t={action:n,next:null},kl===null&&(kl=new Map),n=kl.get(e),n===void 0)kl.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function Rat(){throw Error(at(394))}function e_(){}var AU={readContext:function(t){return t._currentValue},useContext:function(t){return Vu(),t._currentValue},useMemo:IU,useReducer:EU,useRef:function(t){Ua=Vu(),Ht=vD();var e=Ht.memoizedState;return e===null?(t={current:t},Ht.memoizedState=t):e},useState:function(t){return EU(qee,t)},useInsertionEffect:e_,useLayoutEffect:function(){},useCallback:function(t,e){return IU(function(){return t},e)},useImperativeHandle:e_,useEffect:e_,useDebugValue:e_,useDeferredValue:function(t){return Vu(),t},useTransition:function(){return Vu(),[!1,Rat]},useId:function(){var t=yD.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-P_(t)-1)).toString(32)+e;var n=D_;if(n===null)throw Error(at(404));return e=Wg++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Vu(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(at(407));return n()}},D_=null,ST=Eee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Dat(t){return console.error(t),null}function Yp(){}function Mat(t,e,n,r,i,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?Dat:i,onAllReady:s===void 0?Yp:s,onShellReady:o===void 0?Yp:o,onShellError:a===void 0?Yp:a,onFatalError:l===void 0?Yp:l},n=Yb(e,0,null,n,!1,!1),n.parentFlushed=!0,t=xD(e,t,null,n,c,Uee,null,$at),u.push(t),e}function xD(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&Yee(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Yb(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Gg(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Jb(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,Aee(t.destination,e)):(t.status=1,t.fatalError=e)}function OU(t,e,n,r,i){for(Ua={},yD=e,Wg=0,t=n(r,i);Zb;)Zb=!1,Wg=0,ek+=1,Ht=null,t=n(r,i);return _D(),t}function NU(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(at(108,v2(r)||"Unknown",a));r=wm({},o,n)}e.legacyContext=r,ji(t,e,i),e.legacyContext=o}else ji(t,e,i)}function PU(t,e){if(t&&t.defaultProps){e=wm({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function x2(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=kU(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue:i),TU(s,n,r,i),NU(t,e,s,n)}else{s=kU(n,e.legacyContext),i=OU(t,e,n,r,s);var o=Wg!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)TU(i,n,r,s),NU(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=_2(r,1,0);try{ji(t,e,i)}finally{e.treeContext=r}}else ji(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=Tot(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=xot(o,n,r),b2(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push($ot,ct(n),Eot)}i.lastPushedText=!1}else{switch(n){case Cat:case kat:case Dee:case Mee:case Ree:ji(t,e,r.children);return;case jee:ji(t,e,r.children);return;case Sat:throw Error(at(343));case zee:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Yb(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var u=Yb(t,0,null,i.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(b2(t,e,r),u.lastPushedText&&u.textEmbedded&&u.chunks.push(mD),u.status=1,Qb(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Gg(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=xD(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Bee:if(r=OU(t,e,n.render,r,i),Wg!==0){n=e.treeContext,e.treeContext=_2(n,1,0);try{ji(t,e,r)}finally{e.treeContext=n}}else ji(t,e,r);return;case Vee:n=n.type,r=PU(n,r),x2(t,e,n,r,i);return;case Lee:if(i=r.children,n=n._context,r=r.value,s=n._currentValue,n._currentValue=r,o=nc,nc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,ji(t,e,i),t=nc,t===null)throw Error(at(403));r=t.parentValue,t.context._currentValue=r===Tat?t.context._defaultValue:r,t=nc=t.parent,e.context=t;return;case Fee:r=r.children,r=r(n._currentValue),ji(t,e,r);return;case gD:i=n._init,n=i(n._payload),r=PU(n,r),x2(t,e,n,r,void 0);return}throw Error(at(130,n==null?n:typeof n,""))}}function ji(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case wat:x2(t,e,n.type,n.props,n.ref);return;case Pee:throw Error(at(257));case gD:var r=n._init;n=r(n._payload),ji(t,e,n);return}if(y2(n)){RU(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=SU&&n[SU]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);RU(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(at(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=gU(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=gU(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function RU(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=_2(s,r,i);try{b2(t,e,n[i])}finally{e.treeContext=s}}}function b2(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return ji(t,e,n)}catch(l){if(_D(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=Yb(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=xD(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Xb(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Xb(s),l}}function Lat(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,Zee(this,e,t)}function Xee(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(at(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return Xee(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Qb(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Qb(t,n)}else t.completedSegments.push(e)}function Zee(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(at(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Yp,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Qb(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(Lat,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Qb(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function Yee(t){if(t.status!==2){var e=nc,n=ST.current;ST.current=AU;var r=D_;D_=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,l=o.blockedSegment;if(l.status===0){Xb(o.context);try{ji(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(mD),o.abortSet.delete(o),l.status=1,Zee(a,o.blockedBoundary,l)}catch(m){if(_D(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var u=o.ping;m.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,h=m,f=Gg(a,h);if(c===null?Jb(a,h):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=f,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var p=a.onAllReady;p()}}}finally{}}}i.splice(0,s),t.destination!==null&&bD(t,t.destination)}catch(m){Gg(t,m),Jb(t,m)}finally{D_=r,ST.current=n,n===AU&&Xb(e)}}}function t_(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,De(e,Iot),De(e,t.placeholderPrefix),t=ct(r.toString(16)),De(e,t),en(e,Aot);case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)De(e,r[s]);i=tk(t,e,i)}for(;s<r.length-1;s++)De(e,r[s]);return s<r.length&&(i=en(e,r[s])),i;default:throw Error(at(390))}}function tk(t,e,n){var r=n.boundary;if(r===null)return t_(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,en(e,Rot),De(e,Mot),r&&(De(e,Fot),De(e,ct(yr(r))),De(e,Lot)),en(e,Bot),t_(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;i=Ie(i.boundaryPrefix+s.toString(16)),r=r.id=i,wU(e,t.responseState,r),t_(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),wU(e,t.responseState,r.id),t_(t,e,n);else{if(en(e,Oot),n=r.completedSegments,n.length!==1)throw Error(at(391));tk(t,e,n[0])}return en(e,Dot)}function DU(t,e,n){return aat(e,t.responseState,n.formatContext,n.id),tk(t,e,n),lat(e,n.formatContext)}function MU(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)Jee(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,De(e,t.startInlineScript),t.sentCompleteBoundaryFunction?De(e,pat):(t.sentCompleteBoundaryFunction=!0,De(e,dat)),r===null)throw Error(at(395));return n=ct(n.toString(16)),De(e,r),De(e,mat),De(e,t.segmentPrefix),De(e,n),en(e,gat)}function Jee(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(at(392));return DU(t,e,r)}return DU(t,e,r),t=t.responseState,De(e,t.startInlineScript),t.sentCompleteSegmentFunction?De(e,cat):(t.sentCompleteSegmentFunction=!0,De(e,uat)),De(e,t.segmentPrefix),i=ct(i.toString(16)),De(e,i),De(e,hat),De(e,t.placeholderPrefix),De(e,i),en(e,fat)}function bD(t,e){Bi=new Uint8Array(512),zi=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){tk(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)De(e,r[n]);n<r.length&&en(e,r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,h=o.errorComponentStack;if(De(r,a.startInlineScript),a.sentClientRenderFunction?De(r,vat):(a.sentClientRenderFunction=!0,De(r,yat)),l===null)throw Error(at(395));De(r,l),De(r,_at),(u||c||h)&&(De(r,bT),De(r,ct(wT(u||"")))),(c||h)&&(De(r,bT),De(r,ct(wT(c||"")))),h&&(De(r,bT),De(r,ct(wT(h)))),en(r,xat)}i.splice(0,s);var f=t.completedBoundaries;for(s=0;s<f.length;s++)MU(t,e,f[s]);f.splice(0,s),fU(e),Bi=new Uint8Array(512),zi=0;var p=t.partialBoundaries;for(s=0;s<p.length;s++){var m=p[s];e:{i=t,o=e;var _=m.completedSegments;for(a=0;a<_.length;a++)if(!Jee(i,o,m,_[a])){a++,_.splice(0,a);var v=!1;break e}_.splice(0,a),v=!0}if(!v){t.destination=null,s++,p.splice(0,s);return}}p.splice(0,s);var g=t.completedBoundaries;for(s=0;s<g.length;s++)MU(t,e,g[s]);g.splice(0,s)}finally{fU(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function LU(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return Xee(r,t,e)}),n.clear(),t.destination!==null&&bD(t,t.destination)}catch(r){Gg(t,r),Jb(t,r)}}fD.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,s,o=new Promise(function(c,h){s=c,i=h}),a=Mat(t,vot(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),_ot(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,s,function(){var c=new ReadableStream({type:"bytes",pull:function(h){if(a.status===1)a.status=2,Aee(h,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=h;try{bD(a,h)}catch(f){Gg(a,f),Jb(a,f)}}},cancel:function(){LU(a)}},{highWaterMark:0});c.allReady=o,n(c)},function(c){o.catch(function(){}),r(c)},i);if(e&&e.signal){var l=e.signal,u=function(){LU(a,l.reason),l.removeEventListener("abort",u)};l.addEventListener("abort",u)}Yee(a)})};fD.version="18.3.1";var Wd,Qee;Wd=Ud,Qee=fD;var Fat=Xl.version=Wd.version,Bat=Xl.renderToString=Wd.renderToString,zat=Xl.renderToStaticMarkup=Wd.renderToStaticMarkup,jat=Xl.renderToNodeStream=Wd.renderToNodeStream,Vat=Xl.renderToStaticNodeStream=Wd.renderToStaticNodeStream,Uat=Xl.renderToReadableStream=Qee.renderToReadableStream;const Wat=pW({__proto__:null,default:Xl,renderToNodeStream:jat,renderToReadableStream:Uat,renderToStaticMarkup:zat,renderToStaticNodeStream:Vat,renderToString:Bat,version:Fat},[Xl]);var Gat=function(e){return Hat(e)&&!Kat(e)};function Hat(t){return!!t&&typeof t=="object"}function Kat(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Zat(t)}var qat=typeof Symbol=="function"&&Symbol.for,Xat=qat?Symbol.for("react.element"):60103;function Zat(t){return t.$$typeof===Xat}function Yat(t){return Array.isArray(t)?[]:{}}function Hg(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Kg(Yat(t),t,e):t}function Jat(t,e,n){return t.concat(e).map(function(r){return Hg(r,n)})}function Qat(t,e){if(!e.customMerge)return Kg;var n=e.customMerge(t);return typeof n=="function"?n:Kg}function elt(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function FU(t){return Object.keys(t).concat(elt(t))}function ete(t,e){try{return e in t}catch{return!1}}function tlt(t,e){return ete(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function nlt(t,e,n){var r={};return n.isMergeableObject(t)&&FU(t).forEach(function(i){r[i]=Hg(t[i],n)}),FU(e).forEach(function(i){tlt(t,i)||(ete(t,i)&&n.isMergeableObject(e[i])?r[i]=Qat(i,n)(t[i],e[i],n):r[i]=Hg(e[i],n))}),r}function Kg(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||Jat,n.isMergeableObject=n.isMergeableObject||Gat,n.cloneUnlessOtherwiseSpecified=Hg;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):nlt(t,e,n):Hg(e,n)}Kg.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Kg(r,i,n)},{})};var rlt={exports:{}},Ap={},n_={exports:{}},kT={},CT={},BU;function wD(){if(BU)return CT;BU=1;function t(r){this.__parent=r,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}t.prototype.clone_empty=function(){var r=new t(this.__parent);return r.set_indent(this.__indent_count,this.__alignment_count),r},t.prototype.item=function(r){return r<0?this.__items[this.__items.length+r]:this.__items[r]},t.prototype.has_match=function(r){for(var i=this.__items.length-1;i>=0;i--)if(this.__items[i].match(r))return!0;return!1},t.prototype.set_indent=function(r,i){this.is_empty()&&(this.__indent_count=r||0,this.__alignment_count=i||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},t.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},t.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},t.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var r=this.__parent.current_line;return r.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),r.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),r.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,r.__items[0]===" "&&(r.__items.splice(0,1),r.__character_count-=1),!0}return!1},t.prototype.is_empty=function(){return this.__items.length===0},t.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},t.prototype.push=function(r){this.__items.push(r);var i=r.lastIndexOf(`
`);i!==-1?this.__character_count=r.length-i:this.__character_count+=r.length},t.prototype.pop=function(){var r=null;return this.is_empty()||(r=this.__items.pop(),this.__character_count-=r.length),r},t.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},t.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},t.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},t.prototype.toString=function(){var r="";return this.is_empty()?this.__parent.indent_empty_lines&&(r=this.__parent.get_indent_string(this.__indent_count)):(r=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),r+=this.__items.join("")),r};function e(r,i){this.__cache=[""],this.__indent_size=r.indent_size,this.__indent_string=r.indent_char,r.indent_with_tabs||(this.__indent_string=new Array(r.indent_size+1).join(r.indent_char)),i=i||"",r.indent_level>0&&(i=new Array(r.indent_level+1).join(this.__indent_string)),this.__base_string=i,this.__base_string_length=i.length}e.prototype.get_indent_size=function(r,i){var s=this.__base_string_length;return i=i||0,r<0&&(s=0),s+=r*this.__indent_size,s+=i,s},e.prototype.get_indent_string=function(r,i){var s=this.__base_string;return i=i||0,r<0&&(r=0,s=""),i+=r*this.__indent_size,this.__ensure_cache(i),s+=this.__cache[i],s},e.prototype.__ensure_cache=function(r){for(;r>=this.__cache.length;)this.__add_column()},e.prototype.__add_column=function(){var r=this.__cache.length,i=0,s="";this.__indent_size&&r>=this.__indent_size&&(i=Math.floor(r/this.__indent_size),r-=i*this.__indent_size,s=new Array(i+1).join(this.__indent_string)),r&&(s+=new Array(r+1).join(" ")),this.__cache.push(s)};function n(r,i){this.__indent_cache=new e(r,i),this.raw=!1,this._end_with_newline=r.end_with_newline,this.indent_size=r.indent_size,this.wrap_line_length=r.wrap_line_length,this.indent_empty_lines=r.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new t(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return n.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},n.prototype.get_line_number=function(){return this.__lines.length},n.prototype.get_indent_string=function(r,i){return this.__indent_cache.get_indent_string(r,i)},n.prototype.get_indent_size=function(r,i){return this.__indent_cache.get_indent_size(r,i)},n.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},n.prototype.add_new_line=function(r){return this.is_empty()||!r&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},n.prototype.get_code=function(r){this.trim(!0);var i=this.current_line.pop();i&&(i[i.length-1]===`
`&&(i=i.replace(/\n+$/g,"")),this.current_line.push(i)),this._end_with_newline&&this.__add_outputline();var s=this.__lines.join(`
`);return r!==`
`&&(s=s.replace(/[\n]/g,r)),s},n.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},n.prototype.set_indent=function(r,i){return r=r||0,i=i||0,this.next_line.set_indent(r,i),this.__lines.length>1?(this.current_line.set_indent(r,i),!0):(this.current_line.set_indent(),!1)},n.prototype.add_raw_token=function(r){for(var i=0;i<r.newlines;i++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(r.whitespace_before),this.current_line.push(r.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},n.prototype.add_token=function(r){this.__add_space_before_token(),this.current_line.push(r),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},n.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},n.prototype.remove_indent=function(r){for(var i=this.__lines.length;r<i;)this.__lines[r]._remove_indent(),r++;this.current_line._remove_wrap_indent()},n.prototype.trim=function(r){for(r=r===void 0?!1:r,this.current_line.trim();r&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},n.prototype.just_added_newline=function(){return this.current_line.is_empty()},n.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},n.prototype.ensure_empty_line_above=function(r,i){for(var s=this.__lines.length-2;s>=0;){var o=this.__lines[s];if(o.is_empty())break;if(o.item(0).indexOf(r)!==0&&o.item(-1)!==i){this.__lines.splice(s+1,0,new t(this)),this.previous_line=this.__lines[this.__lines.length-2];break}s--}},CT.Output=n,CT}var TT={},zU;function tte(){if(zU)return TT;zU=1;function t(e,n,r,i){this.type=e,this.text=n,this.comments_before=null,this.newlines=r||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return TT.Token=t,TT}var $T={},jU;function nte(){return jU||(jU=1,function(t){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",n="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",r="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",i="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",s="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",o="(?:"+s+"|["+e+r+"])",a="(?:"+s+"|["+n+r+i+"])*";t.identifier=new RegExp(o+a,"g"),t.identifierStart=new RegExp(o),t.identifierMatch=new RegExp("(?:"+s+"|["+n+r+i+"])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp(`\r
|`+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")}($T)),$T}var ET={},Op={},VU;function SD(){if(VU)return Op;VU=1;function t(r,i){this.raw_options=e(r,i),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}t.prototype._get_array=function(r,i){var s=this.raw_options[r],o=i||[];return typeof s=="object"?s!==null&&typeof s.concat=="function"&&(o=s.concat()):typeof s=="string"&&(o=s.split(/[^a-zA-Z0-9_\/\-]+/)),o},t.prototype._get_boolean=function(r,i){var s=this.raw_options[r],o=s===void 0?!!i:!!s;return o},t.prototype._get_characters=function(r,i){var s=this.raw_options[r],o=i||"";return typeof s=="string"&&(o=s.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),o},t.prototype._get_number=function(r,i){var s=this.raw_options[r];i=parseInt(i,10),isNaN(i)&&(i=0);var o=parseInt(s,10);return isNaN(o)&&(o=i),o},t.prototype._get_selection=function(r,i,s){var o=this._get_selection_list(r,i,s);if(o.length!==1)throw new Error("Invalid Option Value: The option '"+r+`' can only be one of the following values:
`+i+`
You passed in: '`+this.raw_options[r]+"'");return o[0]},t.prototype._get_selection_list=function(r,i,s){if(!i||i.length===0)throw new Error("Selection list cannot be empty.");if(s=s||[i[0]],!this._is_valid_selection(s,i))throw new Error("Invalid Default Value!");var o=this._get_array(r,s);if(!this._is_valid_selection(o,i))throw new Error("Invalid Option Value: The option '"+r+`' can contain only the following values:
`+i+`
You passed in: '`+this.raw_options[r]+"'");return o},t.prototype._is_valid_selection=function(r,i){return r.length&&i.length&&!r.some(function(s){return i.indexOf(s)===-1})};function e(r,i){var s={};r=n(r);var o;for(o in r)o!==i&&(s[o]=r[o]);if(i&&r[i])for(o in r[i])s[o]=r[i][o];return s}function n(r){var i={},s;for(s in r){var o=s.replace(/-/g,"_");i[o]=r[s]}return i}return Op.Options=t,Op.normalizeOpts=n,Op.mergeOpts=e,Op}var UU;function rte(){if(UU)return ET;UU=1;var t=SD().Options,e=["before-newline","after-newline","preserve-newline"];function n(r){t.call(this,r,"js");var i=this.raw_options.brace_style||null;i==="expand-strict"?this.raw_options.brace_style="expand":i==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var s=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<s.length;o++)s[o]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=s[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",e),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return n.prototype=new t,ET.Options=n,ET}var kh={},IT={},WU;function kD(){if(WU)return IT;WU=1;var t=RegExp.prototype.hasOwnProperty("sticky");function e(n){this.__input=n||"",this.__input_length=this.__input.length,this.__position=0}return e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){this.__position>0&&(this.__position-=1)},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var n=null;return this.hasNext()&&(n=this.__input.charAt(this.__position),this.__position+=1),n},e.prototype.peek=function(n){var r=null;return n=n||0,n+=this.__position,n>=0&&n<this.__input_length&&(r=this.__input.charAt(n)),r},e.prototype.__match=function(n,r){n.lastIndex=r;var i=n.exec(this.__input);return i&&!(t&&n.sticky)&&i.index!==r&&(i=null),i},e.prototype.test=function(n,r){return r=r||0,r+=this.__position,r>=0&&r<this.__input_length?!!this.__match(n,r):!1},e.prototype.testChar=function(n,r){var i=this.peek(r);return n.lastIndex=0,i!==null&&n.test(i)},e.prototype.match=function(n){var r=this.__match(n,this.__position);return r?this.__position+=r[0].length:r=null,r},e.prototype.read=function(n,r,i){var s="",o;return n&&(o=this.match(n),o&&(s+=o[0])),r&&(o||!n)&&(s+=this.readUntil(r,i)),s},e.prototype.readUntil=function(n,r){var i="",s=this.__position;n.lastIndex=this.__position;var o=n.exec(this.__input);return o?(s=o.index,r&&(s+=o[0].length)):s=this.__input_length,i=this.__input.substring(this.__position,s),this.__position=s,i},e.prototype.readUntilAfter=function(n){return this.readUntil(n,!0)},e.prototype.get_regexp=function(n,r){var i=null,s="g";return r&&t&&(s="y"),typeof n=="string"&&n!==""?i=new RegExp(n,s):n&&(i=new RegExp(n.source,s)),i},e.prototype.get_literal_regexp=function(n){return RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(n){var r=this.__position,i=this.readUntilAfter(n);return this.__position=r,i},e.prototype.lookBack=function(n){var r=this.__position-1;return r>=n.length&&this.__input.substring(r-n.length,r).toLowerCase()===n},IT.InputScanner=e,IT}var r_={},AT={},GU;function ilt(){if(GU)return AT;GU=1;function t(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}return t.prototype.restart=function(){this.__position=0},t.prototype.isEmpty=function(){return this.__tokens_length===0},t.prototype.hasNext=function(){return this.__position<this.__tokens_length},t.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},t.prototype.peek=function(e){var n=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(n=this.__tokens[e]),n},t.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},AT.TokenStream=t,AT}var OT={},NT={},HU;function nk(){if(HU)return NT;HU=1;function t(e,n){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,n&&(this._starting_pattern=this._input.get_regexp(n._starting_pattern,!0),this._match_pattern=this._input.get_regexp(n._match_pattern,!0),this._until_pattern=this._input.get_regexp(n._until_pattern),this._until_after=n._until_after)}return t.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},t.prototype.read_match=function(){return this._input.match(this._match_pattern)},t.prototype.until_after=function(e){var n=this._create();return n._until_after=!0,n._until_pattern=this._input.get_regexp(e),n._update(),n},t.prototype.until=function(e){var n=this._create();return n._until_after=!1,n._until_pattern=this._input.get_regexp(e),n._update(),n},t.prototype.starting_with=function(e){var n=this._create();return n._starting_pattern=this._input.get_regexp(e,!0),n._update(),n},t.prototype.matching=function(e){var n=this._create();return n._match_pattern=this._input.get_regexp(e,!0),n._update(),n},t.prototype._create=function(){return new t(this._input,this)},t.prototype._update=function(){},NT.Pattern=t,NT}var KU;function slt(){if(KU)return OT;KU=1;var t=nk().Pattern;function e(n,r){t.call(this,n,r),r?this._line_regexp=this._input.get_regexp(r._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return e.prototype=new t,e.prototype.__set_whitespace_patterns=function(n,r){n+="\\t ",r+="\\n\\r",this._match_pattern=this._input.get_regexp("["+n+r+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+r+"]")},e.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var n=this._input.read(this._match_pattern);if(n===" ")this.whitespace_before_token=" ";else if(n){var r=this.__split(this._newline_regexp,n);this.newline_count=r.length-1,this.whitespace_before_token=r[this.newline_count]}return n},e.prototype.matching=function(n,r){var i=this._create();return i.__set_whitespace_patterns(n,r),i._update(),i},e.prototype._create=function(){return new e(this._input,this)},e.prototype.__split=function(n,r){n.lastIndex=0;for(var i=0,s=[],o=n.exec(r);o;)s.push(r.substring(i,o.index)),i=o.index+o[0].length,o=n.exec(r);return i<r.length?s.push(r.substring(i,r.length)):s.push(""),s},OT.WhitespacePattern=e,OT}var qU;function ew(){if(qU)return r_;qU=1;var t=kD().InputScanner,e=tte().Token,n=ilt().TokenStream,r=slt().WhitespacePattern,i={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(o,a){this._input=new t(o),this._options=a||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new r(this._input)};return s.prototype.tokenize=function(){this._input.restart(),this.__tokens=new n,this._reset();for(var o,a=new e(i.START,""),l=null,u=[],c=new n;a.type!==i.EOF;){for(o=this._get_next_token(a,l);this._is_comment(o);)c.add(o),o=this._get_next_token(a,l);c.isEmpty()||(o.comments_before=c,c=new n),o.parent=l,this._is_opening(o)?(u.push(l),l=o):l&&this._is_closing(o,l)&&(o.opened=l,l.closed=o,l=u.pop(),o.parent=l),o.previous=a,a.next=o,this.__tokens.add(o),a=o}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(o,a){this._readWhitespace();var l=this._input.read(/.+/g);return l?this._create_token(i.RAW,l):this._create_token(i.EOF,"")},s.prototype._is_comment=function(o){return!1},s.prototype._is_opening=function(o){return!1},s.prototype._is_closing=function(o,a){return!1},s.prototype._create_token=function(o,a){var l=new e(o,a,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return l},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},r_.Tokenizer=s,r_.TOKEN=i,r_}var PT={},XU;function CD(){if(XU)return PT;XU=1;function t(e,n){e=typeof e=="string"?e:e.source,n=typeof n=="string"?n:n.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+n,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+n,"g")}return t.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var n={};this.__directive_pattern.lastIndex=0;for(var r=this.__directive_pattern.exec(e);r;)n[r[1]]=r[2],r=this.__directive_pattern.exec(e);return n},t.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},PT.Directives=t,PT}var RT={},ZU;function ite(){if(ZU)return RT;ZU=1;var t=nk().Pattern,e={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function n(r,i){t.call(this,r,i),this.__template_pattern=null,this._disabled=Object.assign({},e),this._excluded=Object.assign({},e),i&&(this.__template_pattern=this._input.get_regexp(i.__template_pattern),this._excluded=Object.assign(this._excluded,i._excluded),this._disabled=Object.assign(this._disabled,i._disabled));var s=new t(r);this.__patterns={handlebars_comment:s.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:s.starting_with(/{{{/).until_after(/}}}/),handlebars:s.starting_with(/{{/).until_after(/}}/),php:s.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:s.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:s.starting_with(/{%/).until_after(/%}/),django_value:s.starting_with(/{{/).until_after(/}}/),django_comment:s.starting_with(/{#/).until_after(/#}/),smarty:s.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:s.starting_with(/{\*/).until_after(/\*}/),smarty_literal:s.starting_with(/{literal}/).until_after(/{\/literal}/)}}return n.prototype=new t,n.prototype._create=function(){return new n(this._input,this)},n.prototype._update=function(){this.__set_templated_pattern()},n.prototype.disable=function(r){var i=this._create();return i._disabled[r]=!0,i._update(),i},n.prototype.read_options=function(r){var i=this._create();for(var s in e)i._disabled[s]=r.templating.indexOf(s)===-1;return i._update(),i},n.prototype.exclude=function(r){var i=this._create();return i._excluded[r]=!0,i._update(),i},n.prototype.read=function(){var r="";this._match_pattern?r=this._input.read(this._starting_pattern):r=this._input.read(this._starting_pattern,this.__template_pattern);for(var i=this._read_template();i;)this._match_pattern?i+=this._input.read(this._match_pattern):i+=this._input.readUntil(this.__template_pattern),r+=i,i=this._read_template();return this._until_after&&(r+=this._input.readUntilAfter(this._until_pattern)),r},n.prototype.__set_templated_pattern=function(){var r=[];this._disabled.php||r.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||r.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||r.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||r.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(r.push(this.__patterns.django._starting_pattern.source),r.push(this.__patterns.django_value._starting_pattern.source),r.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||r.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&r.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+r.join("|")+")")},n.prototype._read_template=function(){var r="",i=this._input.peek();if(i==="<"){var s=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&s==="?"&&(r=r||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&s==="%"&&(r=r||this.__patterns.erb.read())}else i==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(r=r||this.__patterns.handlebars_comment.read(),r=r||this.__patterns.handlebars_unescaped.read(),r=r||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(r=r||this.__patterns.django_value.read()),this._excluded.django||(r=r||this.__patterns.django_comment.read(),r=r||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(r=r||this.__patterns.smarty_comment.read(),r=r||this.__patterns.smarty_literal.read(),r=r||this.__patterns.smarty.read()));return r},RT.TemplatablePattern=n,RT}var YU;function i_(){if(YU)return kh;YU=1;var t=kD().InputScanner,e=ew().Tokenizer,n=ew().TOKEN,r=CD().Directives,i=nte(),s=nk().Pattern,o=ite().TemplatablePattern;function a(C,T){return T.indexOf(C)!==-1}var l={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:n.START,RAW:n.RAW,EOF:n.EOF},u=new r(/\/\*/,/\*\//),c=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,h=/[0-9]/,f=/[^\d\.]/,p=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),m=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";m=m.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),m="\\?\\.(?!\\d) "+m,m=m.replace(/ /g,"|");var _=new RegExp(m),v="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),g=v.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),x=new RegExp("^(?:"+g.join("|")+")$"),b,w=function(C,T){e.call(this,C,T),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var E=new s(this._input),A=new o(this._input).read_options(this._options);this.__patterns={template:A,identifier:A.starting_with(i.identifier).matching(i.identifierMatch),number:E.matching(c),punct:E.matching(_),comment:E.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:E.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:E.matching(/<!--/),html_comment_end:E.matching(/-->/),include:E.starting_with(/#include/).until_after(i.lineBreak),shebang:E.starting_with(/#!/).until_after(i.lineBreak),xml:E.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:A.until(/['\\\n\r\u2028\u2029]/),double_quote:A.until(/["\\\n\r\u2028\u2029]/),template_text:A.until(/[`\\$]/),template_expression:A.until(/[`}\\]/)}};w.prototype=new e,w.prototype._is_comment=function(C){return C.type===l.COMMENT||C.type===l.BLOCK_COMMENT||C.type===l.UNKNOWN},w.prototype._is_opening=function(C){return C.type===l.START_BLOCK||C.type===l.START_EXPR},w.prototype._is_closing=function(C,T){return(C.type===l.END_BLOCK||C.type===l.END_EXPR)&&T&&(C.text==="]"&&T.text==="["||C.text===")"&&T.text==="("||C.text==="}"&&T.text==="{")},w.prototype._reset=function(){b=!1},w.prototype._get_next_token=function(C,T){var E=null;this._readWhitespace();var A=this._input.peek();return A===null?this._create_token(l.EOF,""):(E=E||this._read_non_javascript(A),E=E||this._read_string(A),E=E||this._read_pair(A,this._input.peek(1)),E=E||this._read_word(C),E=E||this._read_singles(A),E=E||this._read_comment(A),E=E||this._read_regexp(A,C),E=E||this._read_xml(A,C),E=E||this._read_punctuation(),E=E||this._create_token(l.UNKNOWN,this._input.next()),E)},w.prototype._read_word=function(C){var T;if(T=this.__patterns.identifier.read(),T!=="")return T=T.replace(i.allLineBreaks,`
`),!(C.type===l.DOT||C.type===l.RESERVED&&(C.text==="set"||C.text==="get"))&&x.test(T)?(T==="in"||T==="of")&&(C.type===l.WORD||C.type===l.STRING)?this._create_token(l.OPERATOR,T):this._create_token(l.RESERVED,T):this._create_token(l.WORD,T);if(T=this.__patterns.number.read(),T!=="")return this._create_token(l.WORD,T)},w.prototype._read_singles=function(C){var T=null;return C==="("||C==="["?T=this._create_token(l.START_EXPR,C):C===")"||C==="]"?T=this._create_token(l.END_EXPR,C):C==="{"?T=this._create_token(l.START_BLOCK,C):C==="}"?T=this._create_token(l.END_BLOCK,C):C===";"?T=this._create_token(l.SEMICOLON,C):C==="."&&f.test(this._input.peek(1))?T=this._create_token(l.DOT,C):C===","&&(T=this._create_token(l.COMMA,C)),T&&this._input.next(),T},w.prototype._read_pair=function(C,T){var E=null;return C==="#"&&T==="{"&&(E=this._create_token(l.START_BLOCK,C+T)),E&&(this._input.next(),this._input.next()),E},w.prototype._read_punctuation=function(){var C=this.__patterns.punct.read();if(C!=="")return C==="="?this._create_token(l.EQUALS,C):C==="?."?this._create_token(l.DOT,C):this._create_token(l.OPERATOR,C)},w.prototype._read_non_javascript=function(C){var T="";if(C==="#"){if(this._is_first_token()&&(T=this.__patterns.shebang.read(),T))return this._create_token(l.UNKNOWN,T.trim()+`
`);if(T=this.__patterns.include.read(),T)return this._create_token(l.UNKNOWN,T.trim()+`
`);C=this._input.next();var E="#";if(this._input.hasNext()&&this._input.testChar(h)){do C=this._input.next(),E+=C;while(this._input.hasNext()&&C!=="#"&&C!=="=");return C==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(E+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(E+="{}",this._input.next(),this._input.next())),this._create_token(l.WORD,E)}this._input.back()}else if(C==="<"&&this._is_first_token()){if(T=this.__patterns.html_comment_start.read(),T){for(;this._input.hasNext()&&!this._input.testChar(i.newline);)T+=this._input.next();return b=!0,this._create_token(l.COMMENT,T)}}else if(b&&C==="-"&&(T=this.__patterns.html_comment_end.read(),T))return b=!1,this._create_token(l.COMMENT,T);return null},w.prototype._read_comment=function(C){var T=null;if(C==="/"){var E="";if(this._input.peek(1)==="*"){E=this.__patterns.block_comment.read();var A=u.get_directives(E);A&&A.ignore==="start"&&(E+=u.readIgnored(this._input)),E=E.replace(i.allLineBreaks,`
`),T=this._create_token(l.BLOCK_COMMENT,E),T.directives=A}else this._input.peek(1)==="/"&&(E=this.__patterns.comment.read(),T=this._create_token(l.COMMENT,E))}return T},w.prototype._read_string=function(C){if(C==="`"||C==="'"||C==='"'){var T=this._input.next();return this.has_char_escapes=!1,C==="`"?T+=this._read_string_recursive("`",!0,"${"):T+=this._read_string_recursive(C),this.has_char_escapes&&this._options.unescape_strings&&(T=k(T)),this._input.peek()===C&&(T+=this._input.next()),T=T.replace(i.allLineBreaks,`
`),this._create_token(l.STRING,T)}return null},w.prototype._allow_regexp_or_xml=function(C){return C.type===l.RESERVED&&a(C.text,["return","case","throw","else","do","typeof","yield"])||C.type===l.END_EXPR&&C.text===")"&&C.opened.previous.type===l.RESERVED&&a(C.opened.previous.text,["if","while","for"])||a(C.type,[l.COMMENT,l.START_EXPR,l.START_BLOCK,l.START,l.END_BLOCK,l.OPERATOR,l.EQUALS,l.EOF,l.SEMICOLON,l.COMMA])},w.prototype._read_regexp=function(C,T){if(C==="/"&&this._allow_regexp_or_xml(T)){for(var E=this._input.next(),A=!1,$=!1;this._input.hasNext()&&(A||$||this._input.peek()!==C)&&!this._input.testChar(i.newline);)E+=this._input.peek(),A?A=!1:(A=this._input.peek()==="\\",this._input.peek()==="["?$=!0:this._input.peek()==="]"&&($=!1)),this._input.next();return this._input.peek()===C&&(E+=this._input.next(),E+=this._input.read(i.identifier)),this._create_token(l.STRING,E)}return null},w.prototype._read_xml=function(C,T){if(this._options.e4x&&C==="<"&&this._allow_regexp_or_xml(T)){var E="",A=this.__patterns.xml.read_match();if(A){for(var $=A[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),N=$.indexOf("{")===0,P=0;A;){var M=!!A[1],B=A[2],z=!!A[A.length-1]||B.slice(0,8)==="![CDATA[";if(!z&&(B===$||N&&B.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(M?--P:++P),E+=A[0],P<=0)break;A=this.__patterns.xml.read_match()}return A||(E+=this._input.match(/[\s\S]*/g)[0]),E=E.replace(i.allLineBreaks,`
`),this._create_token(l.STRING,E)}}return null};function k(C){for(var T="",E=0,A=new t(C),$=null;A.hasNext();)if($=A.match(/([\s]|[^\\]|\\\\)+/g),$&&(T+=$[0]),A.peek()==="\\"){if(A.next(),A.peek()==="x")$=A.match(/x([0-9A-Fa-f]{2})/g);else if(A.peek()==="u")$=A.match(/u([0-9A-Fa-f]{4})/g),$||($=A.match(/u\{([0-9A-Fa-f]+)\}/g));else{T+="\\",A.hasNext()&&(T+=A.next());continue}if(!$||(E=parseInt($[1],16),E>126&&E<=255&&$[0].indexOf("x")===0))return C;E>=0&&E<32||E>1114111?T+="\\"+$[0]:E===34||E===39||E===92?T+="\\"+String.fromCharCode(E):T+=String.fromCharCode(E)}return T}return w.prototype._read_string_recursive=function(C,T,E){var A,$;C==="'"?$=this.__patterns.single_quote:C==='"'?$=this.__patterns.double_quote:C==="`"?$=this.__patterns.template_text:C==="}"&&($=this.__patterns.template_expression);for(var N=$.read(),P="";this._input.hasNext();){if(P=this._input.next(),P===C||!T&&i.newline.test(P)){this._input.back();break}else P==="\\"&&this._input.hasNext()?(A=this._input.peek(),A==="x"||A==="u"?this.has_char_escapes=!0:A==="\r"&&this._input.peek(1)===`
`&&this._input.next(),P+=this._input.next()):E&&(E==="${"&&P==="$"&&this._input.peek()==="{"&&(P+=this._input.next()),E===P&&(C==="`"?P+=this._read_string_recursive("}",T,"`"):P+=this._read_string_recursive("`",T,"${"),this._input.hasNext()&&(P+=this._input.next())));P+=$.read(),N+=P}return N},kh.Tokenizer=w,kh.TOKEN=l,kh.positionable_operators=p.slice(),kh.line_starters=v.slice(),kh}var JU;function olt(){if(JU)return kT;JU=1;var t=wD().Output,e=tte().Token,n=nte(),r=rte().Options,i=i_().Tokenizer,s=i_().line_starters,o=i_().positionable_operators,a=i_().TOKEN;function l($,N){return N.indexOf($)!==-1}function u($){return $.replace(/^\s+/g,"")}function c($){for(var N={},P=0;P<$.length;P++)N[$[P].replace(/-/g,"_")]=$[P];return N}function h($,N){return $&&$.type===a.RESERVED&&$.text===N}function f($,N){return $&&$.type===a.RESERVED&&l($.text,N)}var p=["case","return","do","if","throw","else","await","break","continue","async"],m=["before-newline","after-newline","preserve-newline"],_=c(m),v=[_.before_newline,_.preserve_newline],g={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function x($,N){N.multiline_frame||N.mode===g.ForInitializer||N.mode===g.Conditional||$.remove_indent(N.start_line_index)}function b($){$=$.replace(n.allLineBreaks,`
`);for(var N=[],P=$.indexOf(`
`);P!==-1;)N.push($.substring(0,P)),$=$.substring(P+1),P=$.indexOf(`
`);return $.length&&N.push($),N}function w($){return $===g.ArrayLiteral}function k($){return l($,[g.Expression,g.ForInitializer,g.Conditional])}function C($,N){for(var P=0;P<$.length;P++){var M=$[P].trim();if(M.charAt(0)!==N)return!1}return!0}function T($,N){for(var P=0,M=$.length,B;P<M;P++)if(B=$[P],B&&B.indexOf(N)!==0)return!1;return!0}function E($,N){N=N||{},this._source_text=$||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new r(N)}E.prototype.create_flags=function($,N){var P=0;$&&(P=$.indentation_level,!this._output.just_added_newline()&&$.line_indent_level>P&&(P=$.line_indent_level));var M={mode:N,parent:$,last_token:$?$.last_token:new e(a.START_BLOCK,""),last_word:$?$.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:P,alignment:0,line_indent_level:$?$.line_indent_level:P,start_line_index:this._output.get_line_number(),ternary_depth:0};return M},E.prototype._reset=function($){var N=$.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new t(this._options,N),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(g.BlockStatement);var P=new i($,this._options);return this._tokens=P.tokenize(),$},E.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var $,N=this._reset(this._source_text),P=this._options.eol;this._options.eol==="auto"&&(P=`
`,N&&n.lineBreak.test(N||"")&&(P=N.match(n.lineBreak)[0]));for(var M=this._tokens.next();M;)this.handle_token(M),this._last_last_text=this._flags.last_token.text,this._flags.last_token=M,M=this._tokens.next();return $=this._output.get_code(P),$},E.prototype.handle_token=function($,N){$.type===a.START_EXPR?this.handle_start_expr($):$.type===a.END_EXPR?this.handle_end_expr($):$.type===a.START_BLOCK?this.handle_start_block($):$.type===a.END_BLOCK?this.handle_end_block($):$.type===a.WORD?this.handle_word($):$.type===a.RESERVED?this.handle_word($):$.type===a.SEMICOLON?this.handle_semicolon($):$.type===a.STRING?this.handle_string($):$.type===a.EQUALS?this.handle_equals($):$.type===a.OPERATOR?this.handle_operator($):$.type===a.COMMA?this.handle_comma($):$.type===a.BLOCK_COMMENT?this.handle_block_comment($,N):$.type===a.COMMENT?this.handle_comment($,N):$.type===a.DOT?this.handle_dot($):$.type===a.EOF?this.handle_eof($):$.type===a.UNKNOWN?this.handle_unknown($,N):this.handle_unknown($,N)},E.prototype.handle_whitespace_and_comments=function($,N){var P=$.newlines,M=this._options.keep_array_indentation&&w(this._flags.mode);if($.comments_before)for(var B=$.comments_before.next();B;)this.handle_whitespace_and_comments(B,N),this.handle_token(B,N),B=$.comments_before.next();if(M)for(var z=0;z<P;z+=1)this.print_newline(z>0,N);else if(this._options.max_preserve_newlines&&P>this._options.max_preserve_newlines&&(P=this._options.max_preserve_newlines),this._options.preserve_newlines&&P>1){this.print_newline(!1,N);for(var j=1;j<P;j+=1)this.print_newline(!0,N)}};var A=["async","break","continue","return","throw","yield"];return E.prototype.allow_wrap_or_preserved_newline=function($,N){if(N=N===void 0?!1:N,!this._output.just_added_newline()){var P=this._options.preserve_newlines&&$.newlines||N,M=l(this._flags.last_token.text,o)||l($.text,o);if(M){var B=l(this._flags.last_token.text,o)&&l(this._options.operator_position,v)||l($.text,o);P=P&&B}if(P)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(f(this._flags.last_token,A))return;this._output.set_wrap_point()}}},E.prototype.print_newline=function($,N){if(!N&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==a.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var P=this._tokens.peek();this._flags.mode===g.Statement&&!(this._flags.if_block&&h(P,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line($)&&(this._flags.multiline_frame=!0)},E.prototype.print_token_line_indentation=function($){this._output.just_added_newline()&&(this._options.keep_array_indentation&&$.newlines&&($.text==="["||w(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push($.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},E.prototype.print_token=function($){if(this._output.raw){this._output.add_raw_token($);return}if(this._options.comma_first&&$.previous&&$.previous.type===a.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var N=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(N),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation($),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation($),this._output.non_breaking_space=!0,this._output.add_token($.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},E.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},E.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},E.prototype.set_mode=function($){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,$),this._flags=this.create_flags(this._previous_flags,$),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},E.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===g.Statement&&x(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},E.prototype.start_of_object_property=function(){return this._flags.parent.mode===g.ObjectLiteral&&this._flags.mode===g.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||f(this._flags.last_token,["get","set"]))},E.prototype.start_of_statement=function($){var N=!1;return N=N||f(this._flags.last_token,["var","let","const"])&&$.type===a.WORD,N=N||h(this._flags.last_token,"do"),N=N||!(this._flags.parent.mode===g.ObjectLiteral&&this._flags.mode===g.Statement)&&f(this._flags.last_token,A)&&!$.newlines,N=N||h(this._flags.last_token,"else")&&!(h($,"if")&&!$.comments_before),N=N||this._flags.last_token.type===a.END_EXPR&&(this._previous_flags.mode===g.ForInitializer||this._previous_flags.mode===g.Conditional),N=N||this._flags.last_token.type===a.WORD&&this._flags.mode===g.BlockStatement&&!this._flags.in_case&&!($.text==="--"||$.text==="++")&&this._last_last_text!=="function"&&$.type!==a.WORD&&$.type!==a.RESERVED,N=N||this._flags.mode===g.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||f(this._flags.last_token,["get","set"])),N?(this.set_mode(g.Statement),this.indent(),this.handle_whitespace_and_comments($,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline($,f($,["do","for","if","while"])),!0):!1},E.prototype.handle_start_expr=function($){this.start_of_statement($)||this.handle_whitespace_and_comments($);var N=g.Expression;if($.text==="["){if(this._flags.last_token.type===a.WORD||this._flags.last_token.text===")"){f(this._flags.last_token,s)&&(this._output.space_before_token=!0),this.print_token($),this.set_mode(N),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}N=g.ArrayLiteral,w(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),l(this._flags.last_token.type,[a.START_EXPR,a.END_EXPR,a.WORD,a.OPERATOR,a.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===a.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,N=g.ForInitializer):l(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,N=g.Conditional):l(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&$.whitespace_before===""?this._output.space_before_token=!1:(l(this._flags.last_token.text,s)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline($);else if(this._flags.last_token.type===a.WORD){this._output.space_before_token=!1;var P=this._tokens.peek(-3);if(this._options.space_after_named_function&&P){var M=this._tokens.peek(-4);f(P,["async","function"])||P.text==="*"&&f(M,["async","function"])?this._output.space_before_token=!0:this._flags.mode===g.ObjectLiteral?(P.text==="{"||P.text===","||P.text==="*"&&(M.text==="{"||M.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline($);(this._flags.last_token.type===a.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(l(this._last_last_text,["function","yield"])||this._flags.mode===g.ObjectLiteral&&l(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===a.START_BLOCK?this.print_newline():(this._flags.last_token.type===a.END_EXPR||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===a.COMMA)&&this.allow_wrap_or_preserved_newline($,$.newlines),this.print_token($),this.set_mode(N),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},E.prototype.handle_end_expr=function($){for(;this._flags.mode===g.Statement;)this.restore_mode();this.handle_whitespace_and_comments($),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline($,$.text==="]"&&w(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===a.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token($),this.restore_mode(),x(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===g.Conditional&&(this._previous_flags.mode=g.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},E.prototype.handle_start_block=function($){this.handle_whitespace_and_comments($);var N=this._tokens.peek(),P=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===a.END_EXPR?(this.set_mode(g.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(g.BlockStatement):P&&(l(P.text,[":",","])&&l(N.type,[a.STRING,a.WORD,a.RESERVED])||l(N.text,["get","set","..."])&&l(P.type,[a.WORD,a.RESERVED]))?l(this._last_last_text,["class","interface"])&&!l(P.text,[":",","])?this.set_mode(g.BlockStatement):this.set_mode(g.ObjectLiteral):this._flags.last_token.type===a.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(g.BlockStatement):l(this._flags.last_token.type,[a.EQUALS,a.START_EXPR,a.COMMA,a.OPERATOR])||f(this._flags.last_token,["return","throw","import","default"])?this.set_mode(g.ObjectLiteral):this.set_mode(g.BlockStatement),this._flags.last_token&&f(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var M=!N.comments_before&&N.text==="}",B=M&&this._flags.last_word==="function"&&this._flags.last_token.type===a.END_EXPR;if(this._options.brace_preserve_inline){var z=0,j=null;this._flags.inline_frame=!0;do if(z+=1,j=this._tokens.peek(z-1),j.newlines){this._flags.inline_frame=!1;break}while(j.type!==a.EOF&&!(j.type===a.END_BLOCK&&j.opened===$))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&$.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==a.OPERATOR&&(B||this._flags.last_token.type===a.EQUALS||f(this._flags.last_token,p)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(w(this._previous_flags.mode)&&(this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.COMMA)&&((this._flags.last_token.type===a.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline($),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==a.OPERATOR&&this._flags.last_token.type!==a.START_EXPR&&(l(this._flags.last_token.type,[a.START_BLOCK,a.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token($),this.indent(),!M&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},E.prototype.handle_end_block=function($){for(this.handle_whitespace_and_comments($);this._flags.mode===g.Statement;)this.restore_mode();var N=this._flags.last_token.type===a.START_BLOCK;this._flags.inline_frame&&!N?this._output.space_before_token=!0:this._options.brace_style==="expand"?N||this.print_newline():N||(w(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token($)},E.prototype.handle_word=function($){if($.type===a.RESERVED){if(l($.text,["set","get"])&&this._flags.mode!==g.ObjectLiteral)$.type=a.WORD;else if($.text==="import"&&l(this._tokens.peek().text,["(","."]))$.type=a.WORD;else if(l($.text,["as","from"])&&!this._flags.import_block)$.type=a.WORD;else if(this._flags.mode===g.ObjectLiteral){var N=this._tokens.peek();N.text===":"&&($.type=a.WORD)}}if(this.start_of_statement($)?f(this._flags.last_token,["var","let","const"])&&$.type===a.WORD&&(this._flags.declaration_statement=!0):$.newlines&&!k(this._flags.mode)&&(this._flags.last_token.type!==a.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==a.EQUALS&&(this._options.preserve_newlines||!f(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments($),this.print_newline()):this.handle_whitespace_and_comments($),this._flags.do_block&&!this._flags.do_while)if(h($,"while")){this._output.space_before_token=!0,this.print_token($),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&h($,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===g.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&f($,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token($),this._flags.in_case=!0;return}if((this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR)&&!this.start_of_object_property()&&!(l(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===g.ObjectLiteral)&&this.allow_wrap_or_preserved_newline($),h($,"function")){(l(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(l(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===a.OPERATOR))&&!this._output.just_added_blankline()&&!$.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD?f(this._flags.last_token,["get","set","new","export"])||f(this._flags.last_token,A)?this._output.space_before_token=!0:h(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===a.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(k(this._flags.mode)||w(this._flags.mode))||this.print_newline(),this.print_token($),this._flags.last_word=$.text;return}var P="NONE";if(this._flags.last_token.type===a.END_BLOCK?this._previous_flags.inline_frame?P="SPACE":f($,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&$.newlines?P="NEWLINE":(P="SPACE",this._output.space_before_token=!0):P="NEWLINE":this._flags.last_token.type===a.SEMICOLON&&this._flags.mode===g.BlockStatement?P="NEWLINE":this._flags.last_token.type===a.SEMICOLON&&k(this._flags.mode)?P="SPACE":this._flags.last_token.type===a.STRING?P="NEWLINE":this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD||this._flags.last_token.text==="*"&&(l(this._last_last_text,["function","yield"])||this._flags.mode===g.ObjectLiteral&&l(this._last_last_text,["{",","]))?P="SPACE":this._flags.last_token.type===a.START_BLOCK?this._flags.inline_frame?P="SPACE":P="NEWLINE":this._flags.last_token.type===a.END_EXPR&&(this._output.space_before_token=!0,P="NEWLINE"),f($,s)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?P="SPACE":P="NEWLINE"),f($,["else","catch","finally"]))if((!(this._flags.last_token.type===a.END_BLOCK&&this._previous_flags.mode===g.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&$.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var M=this._output.current_line;M.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else P==="NEWLINE"?f(this._flags.last_token,p)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&f($,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==a.END_EXPR?(this._flags.last_token.type!==a.START_EXPR||!f($,["var","let","const"]))&&this._flags.last_token.text!==":"&&(h($,"if")&&h($.previous,"else")?this._output.space_before_token=!0:this.print_newline()):f($,s)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&w(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():P==="SPACE"&&(this._output.space_before_token=!0);$.previous&&($.previous.type===a.WORD||$.previous.type===a.RESERVED)&&(this._output.space_before_token=!0),this.print_token($),this._flags.last_word=$.text,$.type===a.RESERVED&&($.text==="do"?this._flags.do_block=!0:$.text==="if"?this._flags.if_block=!0:$.text==="import"?this._flags.import_block=!0:this._flags.import_block&&h($,"from")&&(this._flags.import_block=!1))},E.prototype.handle_semicolon=function($){this.start_of_statement($)?this._output.space_before_token=!1:this.handle_whitespace_and_comments($);for(var N=this._tokens.peek();this._flags.mode===g.Statement&&!(this._flags.if_block&&h(N,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token($)},E.prototype.handle_string=function($){$.text.startsWith("`")&&$.newlines===0&&$.whitespace_before===""&&($.previous.text===")"||this._flags.last_token.type===a.WORD)||(this.start_of_statement($)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments($),this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline($):$.text.startsWith("`")&&this._flags.last_token.type===a.END_EXPR&&($.previous.text==="]"||$.previous.text===")")&&$.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token($)},E.prototype.handle_equals=function($){this.start_of_statement($)||this.handle_whitespace_and_comments($),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token($),this._output.space_before_token=!0},E.prototype.handle_comma=function($){this.handle_whitespace_and_comments($,!0),this.print_token($),this._output.space_before_token=!0,this._flags.declaration_statement?(k(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline($)):this._flags.mode===g.ObjectLiteral||this._flags.mode===g.Statement&&this._flags.parent.mode===g.ObjectLiteral?(this._flags.mode===g.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline($)},E.prototype.handle_operator=function($){var N=$.text==="*"&&(f(this._flags.last_token,["function","yield"])||l(this._flags.last_token.type,[a.START_BLOCK,a.COMMA,a.END_BLOCK,a.SEMICOLON])),P=l($.text,["-","+"])&&(l(this._flags.last_token.type,[a.START_BLOCK,a.START_EXPR,a.EQUALS,a.OPERATOR])||l(this._flags.last_token.text,s)||this._flags.last_token.text===",");if(!this.start_of_statement($)){var M=!N;this.handle_whitespace_and_comments($,M)}if($.text==="*"&&this._flags.last_token.type===a.DOT){this.print_token($);return}if($.text==="::"){this.print_token($);return}if(l($.text,["-","+"])&&this.start_of_object_property()){this.print_token($);return}if(this._flags.last_token.type===a.OPERATOR&&l(this._options.operator_position,v)&&this.allow_wrap_or_preserved_newline($),$.text===":"&&this._flags.in_case){this.print_token($),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==a.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var B=!0,z=!0,j=!1;if($.text===":"?this._flags.ternary_depth===0?B=!1:(this._flags.ternary_depth-=1,j=!0):$.text==="?"&&(this._flags.ternary_depth+=1),!P&&!N&&this._options.preserve_newlines&&l($.text,o)){var U=$.text===":",D=U&&j,W=U&&!j;switch(this._options.operator_position){case _.before_newline:this._output.space_before_token=!W,this.print_token($),(!U||D)&&this.allow_wrap_or_preserved_newline($),this._output.space_before_token=!0;return;case _.after_newline:this._output.space_before_token=!0,!U||D?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline($):this._output.space_before_token=!1,this.print_token($),this._output.space_before_token=!0;return;case _.preserve_newline:W||this.allow_wrap_or_preserved_newline($),B=!(this._output.just_added_newline()||W),this._output.space_before_token=B,this.print_token($),this._output.space_before_token=!0;return}}if(N){this.allow_wrap_or_preserved_newline($),B=!1;var G=this._tokens.peek();z=G&&l(G.type,[a.WORD,a.RESERVED])}else if($.text==="...")this.allow_wrap_or_preserved_newline($),B=this._flags.last_token.type===a.START_BLOCK,z=!1;else if(l($.text,["--","++","!","~"])||P){if((this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR)&&this.allow_wrap_or_preserved_newline($),B=!1,z=!1,$.newlines&&($.text==="--"||$.text==="++"||$.text==="~")){var Y=f(this._flags.last_token,p)&&$.newlines;Y&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(Y,!0)}this._flags.last_token.text===";"&&k(this._flags.mode)&&(B=!0),this._flags.last_token.type===a.RESERVED?B=!0:this._flags.last_token.type===a.END_EXPR?B=!(this._flags.last_token.text==="]"&&($.text==="--"||$.text==="++")):this._flags.last_token.type===a.OPERATOR&&(B=l($.text,["--","-","++","+"])&&l(this._flags.last_token.text,["--","-","++","+"]),l($.text,["+","-"])&&l(this._flags.last_token.text,["--","++"])&&(z=!0)),(this._flags.mode===g.BlockStatement&&!this._flags.inline_frame||this._flags.mode===g.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||B,this.print_token($),this._output.space_before_token=z},E.prototype.handle_block_comment=function($,N){if(this._output.raw){this._output.add_raw_token($),$.directives&&$.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if($.directives){this.print_newline(!1,N),this.print_token($),$.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!n.newline.test($.text)&&!$.newlines){this._output.space_before_token=!0,this.print_token($),this._output.space_before_token=!0;return}else this.print_block_commment($,N)},E.prototype.print_block_commment=function($,N){var P=b($.text),M,B=!1,z=!1,j=$.whitespace_before,U=j.length;if(this.print_newline(!1,N),this.print_token_line_indentation($),this._output.add_token(P[0]),this.print_newline(!1,N),P.length>1){for(P=P.slice(1),B=C(P,"*"),z=T(P,j),B&&(this._flags.alignment=1),M=0;M<P.length;M++)B?(this.print_token_line_indentation($),this._output.add_token(u(P[M]))):z&&P[M]?(this.print_token_line_indentation($),this._output.add_token(P[M].substring(U))):(this._output.current_line.set_indent(-1),this._output.add_token(P[M])),this.print_newline(!1,N);this._flags.alignment=0}},E.prototype.handle_comment=function($,N){$.newlines?this.print_newline(!1,N):this._output.trim(!0),this._output.space_before_token=!0,this.print_token($),this.print_newline(!1,N)},E.prototype.handle_dot=function($){this.start_of_statement($)||this.handle_whitespace_and_comments($,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),f(this._flags.last_token,p)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline($,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token($)},E.prototype.handle_unknown=function($,N){this.print_token($),$.text[$.text.length-1]===`
`&&this.print_newline(!1,N)},E.prototype.handle_eof=function($){for(;this._flags.mode===g.Statement;)this.restore_mode();this.handle_whitespace_and_comments($)},kT.Beautifier=E,kT}var QU;function alt(){if(QU)return n_.exports;QU=1;var t=olt().Beautifier,e=rte().Options;function n(r,i){var s=new t(r,i);return s.beautify()}return n_.exports=n,n_.exports.defaultOptions=function(){return new e},n_.exports}var s_={exports:{}},DT={},MT={},eW;function ste(){if(eW)return MT;eW=1;var t=SD().Options;function e(n){t.call(this,n,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var r=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||r;var i=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var s=0;s<i.length;s++)i[s]!=="expand"?this.brace_style="collapse":this.brace_style=i[s]}return e.prototype=new t,MT.Options=e,MT}var tW;function llt(){if(tW)return DT;tW=1;var t=ste().Options,e=wD().Output,n=kD().InputScanner,r=CD().Directives,i=new r(/\/\*/,/\*\//),s=/\r\n|[\r\n]/,o=/\r\n|[\r\n]/g,a=/\s/,l=/(?:\s|\n)+/g,u=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,c=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function h(f,p){this._source_text=f||"",this._options=new t(p),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return h.prototype.eatString=function(f){var p="";for(this._ch=this._input.next();this._ch;){if(p+=this._ch,this._ch==="\\")p+=this._input.next();else if(f.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return p},h.prototype.eatWhitespace=function(f){for(var p=a.test(this._input.peek()),m=0;a.test(this._input.peek());)this._ch=this._input.next(),f&&this._ch===`
`&&(m===0||m<this._options.max_preserve_newlines)&&(m++,this._output.add_new_line(!0));return p},h.prototype.foundNestedPseudoClass=function(){for(var f=0,p=1,m=this._input.peek(p);m;){if(m==="{")return!0;if(m==="(")f+=1;else if(m===")"){if(f===0)return!1;f-=1}else if(m===";"||m==="}")return!1;p++,m=this._input.peek(p)}return!1},h.prototype.print_string=function(f){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(f)},h.prototype.preserveSingleSpace=function(f){f&&(this._output.space_before_token=!0)},h.prototype.indent=function(){this._indentLevel++},h.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},h.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var f=this._source_text,p=this._options.eol;p==="auto"&&(p=`
`,f&&s.test(f||"")&&(p=f.match(s)[0])),f=f.replace(o,`
`);var m=f.match(/^[\t ]*/)[0];this._output=new e(this._options,m),this._input=new n(f),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var _=0,v=!1,g=!1,x=!1,b=!1,w=!1,k=this._ch,C=!1,T,E,A;T=this._input.read(l),E=T!=="",A=k,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),k=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var $=this._input.read(u),N=i.get_directives($);N&&N.ignore==="start"&&($+=i.readIgnored(this._input)),this.print_string($),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(c)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(E),this.print_string(this._ch);var P=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);P.match(/[ :]$/)&&(P=this.eatString(": ").replace(/\s+$/,""),this.print_string(P),this._output.space_before_token=!0),_===0&&P.indexOf(":")!==-1&&(g=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(E),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var M=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);M.match(/[ :]$/)&&(M=this.eatString(": ").replace(/\s+$/,""),this.print_string(M),this._output.space_before_token=!0),_===0&&M.indexOf(":")!==-1?(g=!0,this.indent()):M in this.NESTED_AT_RULE?(this._nestedLevel+=1,M in this.CONDITIONAL_GROUP_RULE&&(x=!0)):_===0&&!g&&(b=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(E),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")g&&(g=!1,this.outdent()),b=!1,x?(x=!1,v=this._indentLevel>=this._nestedLevel):v=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&v&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(A==="("?this._output.space_before_token=!1:A!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),A==="{"&&this._output.trim(!0),g&&(this.outdent(),g=!1),this.print_string(this._ch),v=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var B=0;B<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;B++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[B])){C=!0;break}(v||x)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!b&&_===0?(this.print_string(":"),g||(g=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var z=A==='"'||A==="'";this.preserveSingleSpace(z||E),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")C=!1,_===0?(g&&(this.outdent(),g=!1),b=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),_++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),_&&(_--,this.outdent()));else{var j=!1;this._input.lookBack("with")&&(j=!0),this.preserveSingleSpace(E||j),this.print_string(this._ch),g&&A==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),w=!0):(this.eatWhitespace(),_++,this.indent())}else if(this._ch===")")_&&(_--,this.outdent()),w&&this._input.peek()===";"&&this._options.selector_separator_newline&&(w=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!g||w)&&_===0&&!b?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!g&&_===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&a.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(E),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),a.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var U=A==='"'||A==="'";this.preserveSingleSpace(U||E),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&C&&this._output.add_new_line()}var D=this._output.get_code(p);return D},DT.Beautifier=h,DT}var nW;function ult(){if(nW)return s_.exports;nW=1;var t=llt().Beautifier,e=ste().Options;function n(r,i){var s=new t(r,i);return s.beautify()}return s_.exports=n,s_.exports.defaultOptions=function(){return new e},s_.exports}var o_={exports:{}},LT={},FT={},rW;function ote(){if(rW)return FT;rW=1;var t=SD().Options;function e(n){t.call(this,n,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return e.prototype=new t,FT.Options=e,FT}var a_={},iW;function sW(){if(iW)return a_;iW=1;var t=ew().Tokenizer,e=ew().TOKEN,n=CD().Directives,r=ite().TemplatablePattern,i=nk().Pattern,s={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:e.START,RAW:e.RAW,EOF:e.EOF},o=new n(/<\!--/,/-->/),a=function(l,u){t.call(this,l,u),this._current_tag_name="";var c=new r(this._input).read_options(this._options),h=new i(this._input);if(this.__patterns={word:c.until(/[\n\r\t <]/),word_control_flow_close_excluded:c.until(/[\n\r\t <}]/),single_quote:c.until_after(/'/),double_quote:c.until_after(/"/),attribute:c.until(/[\n\r\t =>]|\/>/),element_name:c.until(/[\n\r\t >\/]/),angular_control_flow_start:h.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:h.starting_with(/{{!--/).until_after(/--}}/),handlebars:h.starting_with(/{{/).until_after(/}}/),handlebars_open:h.until(/[\n\r\t }]/),handlebars_raw_close:h.until(/}}/),comment:h.starting_with(/<!--/).until_after(/-->/),cdata:h.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:h.starting_with(/<!\[/).until_after(/]>/),processing:h.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var f=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=h.matching(f).until_after(f)}};return a.prototype=new t,a.prototype._is_comment=function(l){return!1},a.prototype._is_opening=function(l){return l.type===s.TAG_OPEN||l.type===s.CONTROL_FLOW_OPEN},a.prototype._is_closing=function(l,u){return l.type===s.TAG_CLOSE&&u&&((l.text===">"||l.text==="/>")&&u.text[0]==="<"||l.text==="}}"&&u.text[0]==="{"&&u.text[1]==="{")||l.type===s.CONTROL_FLOW_CLOSE&&l.text==="}"&&u.text.endsWith("{")},a.prototype._reset=function(){this._current_tag_name=""},a.prototype._get_next_token=function(l,u){var c=null;this._readWhitespace();var h=this._input.peek();return h===null?this._create_token(s.EOF,""):(c=c||this._read_open_handlebars(h,u),c=c||this._read_attribute(h,l,u),c=c||this._read_close(h,u),c=c||this._read_script_and_style(h,l),c=c||this._read_control_flows(h,u),c=c||this._read_raw_content(h,l,u),c=c||this._read_content_word(h,u),c=c||this._read_comment_or_cdata(h),c=c||this._read_processing(h),c=c||this._read_open(h,u),c=c||this._create_token(s.UNKNOWN,this._input.next()),c)},a.prototype._read_comment_or_cdata=function(l){var u=null,c=null,h=null;if(l==="<"){var f=this._input.peek(1);f==="!"&&(c=this.__patterns.comment.read(),c?(h=o.get_directives(c),h&&h.ignore==="start"&&(c+=o.readIgnored(this._input))):c=this.__patterns.cdata.read()),c&&(u=this._create_token(s.COMMENT,c),u.directives=h)}return u},a.prototype._read_processing=function(l){var u=null,c=null,h=null;if(l==="<"){var f=this._input.peek(1);(f==="!"||f==="?")&&(c=this.__patterns.conditional_comment.read(),c=c||this.__patterns.processing.read()),c&&(u=this._create_token(s.COMMENT,c),u.directives=h)}return u},a.prototype._read_open=function(l,u){var c=null,h=null;return(!u||u.type===s.CONTROL_FLOW_OPEN)&&l==="<"&&(c=this._input.next(),this._input.peek()==="/"&&(c+=this._input.next()),c+=this.__patterns.element_name.read(),h=this._create_token(s.TAG_OPEN,c)),h},a.prototype._read_open_handlebars=function(l,u){var c=null,h=null;return(!u||u.type===s.CONTROL_FLOW_OPEN)&&(this._options.templating.includes("angular")||this._options.indent_handlebars)&&l==="{"&&this._input.peek(1)==="{"&&(this._options.indent_handlebars&&this._input.peek(2)==="!"?(c=this.__patterns.handlebars_comment.read(),c=c||this.__patterns.handlebars.read(),h=this._create_token(s.COMMENT,c)):(c=this.__patterns.handlebars_open.read(),h=this._create_token(s.TAG_OPEN,c))),h},a.prototype._read_control_flows=function(l,u){var c="",h=null;if(!this._options.templating.includes("angular"))return h;if(l==="@"){if(c=this.__patterns.angular_control_flow_start.read(),c==="")return h;for(var f=c.endsWith("(")?1:0,p=0;!(c.endsWith("{")&&f===p);){var m=this._input.next();if(m===null)break;m==="("?f++:m===")"&&p++,c+=m}h=this._create_token(s.CONTROL_FLOW_OPEN,c)}else l==="}"&&u&&u.type===s.CONTROL_FLOW_OPEN&&(c=this._input.next(),h=this._create_token(s.CONTROL_FLOW_CLOSE,c));return h},a.prototype._read_close=function(l,u){var c=null,h=null;return u&&u.type===s.TAG_OPEN&&(u.text[0]==="<"&&(l===">"||l==="/"&&this._input.peek(1)===">")?(c=this._input.next(),l==="/"&&(c+=this._input.next()),h=this._create_token(s.TAG_CLOSE,c)):u.text[0]==="{"&&l==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),h=this._create_token(s.TAG_CLOSE,"}}"))),h},a.prototype._read_attribute=function(l,u,c){var h=null,f="";if(c&&c.text[0]==="<")if(l==="=")h=this._create_token(s.EQUALS,this._input.next());else if(l==='"'||l==="'"){var p=this._input.next();l==='"'?p+=this.__patterns.double_quote.read():p+=this.__patterns.single_quote.read(),h=this._create_token(s.VALUE,p)}else f=this.__patterns.attribute.read(),f&&(u.type===s.EQUALS?h=this._create_token(s.VALUE,f):h=this._create_token(s.ATTRIBUTE,f));return h},a.prototype._is_content_unformatted=function(l){return this._options.void_elements.indexOf(l)===-1&&(this._options.content_unformatted.indexOf(l)!==-1||this._options.unformatted.indexOf(l)!==-1)},a.prototype._read_raw_content=function(l,u,c){var h="";if(c&&c.text[0]==="{")h=this.__patterns.handlebars_raw_close.read();else if(u.type===s.TAG_CLOSE&&u.opened.text[0]==="<"&&u.text[0]!=="/"){var f=u.opened.text.substr(1).toLowerCase();this._is_content_unformatted(f)&&(h=this._input.readUntil(new RegExp("</"+f+"[\\n\\r\\t ]*?>","ig")))}return h?this._create_token(s.TEXT,h):null},a.prototype._read_script_and_style=function(l,u){if(u.type===s.TAG_CLOSE&&u.opened.text[0]==="<"&&u.text[0]!=="/"){var c=u.opened.text.substr(1).toLowerCase();if(c==="script"||c==="style"){var h=this._read_comment_or_cdata(l);if(h)return h.type=s.TEXT,h;var f=this._input.readUntil(new RegExp("</"+c+"[\\n\\r\\t ]*?>","ig"));if(f)return this._create_token(s.TEXT,f)}}return null},a.prototype._read_content_word=function(l,u){var c="";return this._options.unformatted_content_delimiter&&l===this._options.unformatted_content_delimiter[0]&&(c=this.__patterns.unformatted_content_delimiter.read()),c||(c=u&&u.type===s.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),c?this._create_token(s.TEXT,c):null},a_.Tokenizer=a,a_.TOKEN=s,a_}var oW;function clt(){if(oW)return LT;oW=1;var t=ote().Options,e=wD().Output,n=sW().Tokenizer,r=sW().TOKEN,i=/\r\n|[\r\n]/,s=/\r\n|[\r\n]/g,o=function(v,g){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=v.max_preserve_newlines,this.preserve_newlines=v.preserve_newlines,this._output=new e(v,g)};o.prototype.current_line_has_match=function(v){return this._output.current_line.has_match(v)},o.prototype.set_space_before_token=function(v,g){this._output.space_before_token=v,this._output.non_breaking_space=g},o.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},o.prototype.add_raw_token=function(v){this._output.add_raw_token(v)},o.prototype.print_preserved_newlines=function(v){var g=0;v.type!==r.TEXT&&v.previous.type!==r.TEXT&&(g=v.newlines?1:0),this.preserve_newlines&&(g=v.newlines<this.max_preserve_newlines+1?v.newlines:this.max_preserve_newlines+1);for(var x=0;x<g;x++)this.print_newline(x>0);return g!==0},o.prototype.traverse_whitespace=function(v){return v.whitespace_before||v.newlines?(this.print_preserved_newlines(v)||(this._output.space_before_token=!0),!0):!1},o.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},o.prototype.print_newline=function(v){this._output.add_new_line(v)},o.prototype.print_token=function(v){v.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(v.text))},o.prototype.indent=function(){this.indent_level++},o.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},o.prototype.get_full_indent=function(v){return v=this.indent_level+(v||0),v<1?"":this._output.get_indent_string(v)};var a=function(v){for(var g=null,x=v.next;x.type!==r.EOF&&v.closed!==x;){if(x.type===r.ATTRIBUTE&&x.text==="type"){x.next&&x.next.type===r.EQUALS&&x.next.next&&x.next.next.type===r.VALUE&&(g=x.next.next.text);break}x=x.next}return g},l=function(v,g){var x=null,b=null;return g.closed?(v==="script"?x="text/javascript":v==="style"&&(x="text/css"),x=a(g)||x,x.search("text/css")>-1?b="css":x.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?b="javascript":x.search(/(text|application|dojo)\/(x-)?(html)/)>-1?b="html":x.search(/test\/null/)>-1&&(b="null"),b):null};function u(v,g){return g.indexOf(v)!==-1}function c(v,g,x){this.parent=v||null,this.tag=g?g.tag_name:"",this.indent_level=x||0,this.parser_token=g||null}function h(v){this._printer=v,this._current_frame=null}h.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},h.prototype.record_tag=function(v){var g=new c(this._current_frame,v,this._printer.indent_level);this._current_frame=g},h.prototype._try_pop_frame=function(v){var g=null;return v&&(g=v.parser_token,this._printer.indent_level=v.indent_level,this._current_frame=v.parent),g},h.prototype._get_frame=function(v,g){for(var x=this._current_frame;x&&v.indexOf(x.tag)===-1;){if(g&&g.indexOf(x.tag)!==-1){x=null;break}x=x.parent}return x},h.prototype.try_pop=function(v,g){var x=this._get_frame([v],g);return this._try_pop_frame(x)},h.prototype.indent_to_tag=function(v){var g=this._get_frame(v);g&&(this._printer.indent_level=g.indent_level)};function f(v,g,x,b){this._source_text=v||"",g=g||{},this._js_beautify=x,this._css_beautify=b,this._tag_stack=null;var w=new t(g,"html");this._options=w,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var v=this._source_text,g=this._options.eol;this._options.eol==="auto"&&(g=`
`,v&&i.test(v)&&(g=v.match(i)[0])),v=v.replace(s,`
`);var x=v.match(/^[\t ]*/)[0],b={text:"",type:""},w=new p(this._options),k=new o(this._options,x),C=new n(v,this._options).tokenize();this._tag_stack=new h(k);for(var T=null,E=C.next();E.type!==r.EOF;)E.type===r.TAG_OPEN||E.type===r.COMMENT?(T=this._handle_tag_open(k,E,w,b,C),w=T):E.type===r.ATTRIBUTE||E.type===r.EQUALS||E.type===r.VALUE||E.type===r.TEXT&&!w.tag_complete?T=this._handle_inside_tag(k,E,w,b):E.type===r.TAG_CLOSE?T=this._handle_tag_close(k,E,w):E.type===r.TEXT?T=this._handle_text(k,E,w):E.type===r.CONTROL_FLOW_OPEN?T=this._handle_control_flow_open(k,E):E.type===r.CONTROL_FLOW_CLOSE?T=this._handle_control_flow_close(k,E):k.add_raw_token(E),b=T,E=C.next();var A=k._output.get_code(g);return A},f.prototype._handle_control_flow_open=function(v,g){var x={text:g.text,type:g.type};return v.set_space_before_token(g.newlines||g.whitespace_before!=="",!0),g.newlines?v.print_preserved_newlines(g):v.set_space_before_token(g.newlines||g.whitespace_before!=="",!0),v.print_token(g),v.indent(),x},f.prototype._handle_control_flow_close=function(v,g){var x={text:g.text,type:g.type};return v.deindent(),g.newlines?v.print_preserved_newlines(g):v.set_space_before_token(g.newlines||g.whitespace_before!=="",!0),v.print_token(g),x},f.prototype._handle_tag_close=function(v,g,x){var b={text:g.text,type:g.type};return v.alignment_size=0,x.tag_complete=!0,v.set_space_before_token(g.newlines||g.whitespace_before!=="",!0),x.is_unformatted?v.add_raw_token(g):(x.tag_start_char==="<"&&(v.set_space_before_token(g.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&x.has_wrapped_attrs&&v.print_newline(!1)),v.print_token(g)),x.indent_content&&!(x.is_unformatted||x.is_content_unformatted)&&(v.indent(),x.indent_content=!1),!x.is_inline_element&&!(x.is_unformatted||x.is_content_unformatted)&&v.set_wrap_point(),b},f.prototype._handle_inside_tag=function(v,g,x,b){var w=x.has_wrapped_attrs,k={text:g.text,type:g.type};return v.set_space_before_token(g.newlines||g.whitespace_before!=="",!0),x.is_unformatted?v.add_raw_token(g):x.tag_start_char==="{"&&g.type===r.TEXT?v.print_preserved_newlines(g)?(g.newlines=0,v.add_raw_token(g)):v.print_token(g):(g.type===r.ATTRIBUTE?v.set_space_before_token(!0):(g.type===r.EQUALS||g.type===r.VALUE&&g.previous.type===r.EQUALS)&&v.set_space_before_token(!1),g.type===r.ATTRIBUTE&&x.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(v.traverse_whitespace(g),w=w||g.newlines!==0),this._is_wrap_attributes_force&&x.attr_count>=this._options.wrap_attributes_min_attrs&&(b.type!==r.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(v.print_newline(!1),w=!0)),v.print_token(g),w=w||v.previous_token_wrapped(),x.has_wrapped_attrs=w),k},f.prototype._handle_text=function(v,g,x){var b={text:g.text,type:"TK_CONTENT"};return x.custom_beautifier_name?this._print_custom_beatifier_text(v,g,x):x.is_unformatted||x.is_content_unformatted?v.add_raw_token(g):(v.traverse_whitespace(g),v.print_token(g)),b},f.prototype._print_custom_beatifier_text=function(v,g,x){var b=this;if(g.text!==""){var w=g.text,k,C=1,T="",E="";x.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?k=this._js_beautify:x.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?k=this._css_beautify:x.custom_beautifier_name==="html"&&(k=function(B,z){var j=new f(B,z,b._js_beautify,b._css_beautify);return j.beautify()}),this._options.indent_scripts==="keep"?C=0:this._options.indent_scripts==="separate"&&(C=-v.indent_level);var A=v.get_full_indent(C);if(w=w.replace(/\n[ \t]*$/,""),x.custom_beautifier_name!=="html"&&w[0]==="<"&&w.match(/^(<!--|<!\[CDATA\[)/)){var $=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(w);if(!$){v.add_raw_token(g);return}T=A+$[1]+`
`,w=$[4],$[5]&&(E=A+$[5]),w=w.replace(/\n[ \t]*$/,""),($[2]||$[3].indexOf(`
`)!==-1)&&($=$[3].match(/[ \t]+$/),$&&(g.whitespace_before=$[0]))}if(w)if(k){var N=function(){this.eol=`
`};N.prototype=this._options.raw_options;var P=new N;w=k(A+w,P)}else{var M=g.whitespace_before;M&&(w=w.replace(new RegExp(`
(`+M+")?","g"),`
`)),w=A+w.replace(/\n/g,`
`+A)}T&&(w?w=T+w+`
`+E:w=T+E),v.print_newline(!1),w&&(g.text=w,g.whitespace_before="",g.newlines=0,v.add_raw_token(g),v.print_newline(!0))}},f.prototype._handle_tag_open=function(v,g,x,b,w){var k=this._get_tag_open_token(g);if((x.is_unformatted||x.is_content_unformatted)&&!x.is_empty_element&&g.type===r.TAG_OPEN&&!k.is_start_tag?(v.add_raw_token(g),k.start_tag_token=this._tag_stack.try_pop(k.tag_name)):(v.traverse_whitespace(g),this._set_tag_position(v,g,k,x,b),k.is_inline_element||v.set_wrap_point(),v.print_token(g)),k.is_start_tag&&this._is_wrap_attributes_force){var C=0,T;do T=w.peek(C),T.type===r.ATTRIBUTE&&(k.attr_count+=1),C+=1;while(T.type!==r.EOF&&T.type!==r.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(k.alignment_size=g.text.length+1),!k.tag_complete&&!k.is_unformatted&&(v.alignment_size=k.alignment_size),k};var p=function(v,g,x){if(this.parent=g||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!x)this.tag_complete=!0;else{var b;this.tag_start_char=x.text[0],this.text=x.text,this.tag_start_char==="<"?(b=x.text.match(/^<([^\s>]*)/),this.tag_check=b?b[1]:""):(b=x.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=b?b[1]:"",(x.text.startsWith("{{#>")||x.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&x.next!==null?this.tag_check=x.next.text.split(" ")[0]:this.tag_check=x.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),x.type===r.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||x.closed&&x.closed.text==="/>";var w=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(w=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(!v.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(w)))}};f.prototype._get_tag_open_token=function(v){var g=new p(this._options,this._tag_stack.get_parser_token(),v);return g.alignment_size=this._options.wrap_attributes_indent_size,g.is_end_tag=g.is_end_tag||u(g.tag_check,this._options.void_elements),g.is_empty_element=g.tag_complete||g.is_start_tag&&g.is_end_tag,g.is_unformatted=!g.tag_complete&&u(g.tag_check,this._options.unformatted),g.is_content_unformatted=!g.is_empty_element&&u(g.tag_check,this._options.content_unformatted),g.is_inline_element=u(g.tag_name,this._options.inline)||this._options.inline_custom_elements&&g.tag_name.includes("-")||g.tag_start_char==="{",g},f.prototype._set_tag_position=function(v,g,x,b,w){if(x.is_empty_element||(x.is_end_tag?x.start_tag_token=this._tag_stack.try_pop(x.tag_name):(this._do_optional_end_element(x)&&(x.is_inline_element||v.print_newline(!1)),this._tag_stack.record_tag(x),(x.tag_name==="script"||x.tag_name==="style")&&!(x.is_unformatted||x.is_content_unformatted)&&(x.custom_beautifier_name=l(x.tag_check,g)))),u(x.tag_check,this._options.extra_liners)&&(v.print_newline(!1),v._output.just_added_blankline()||v.print_newline(!0)),x.is_empty_element){if(x.tag_start_char==="{"&&x.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),x.indent_content=!0;var k=v.current_line_has_match(/{{#if/);k||v.print_newline(!1)}x.tag_name==="!--"&&w.type===r.TAG_CLOSE&&b.is_end_tag&&x.text.indexOf(`
`)===-1||(x.is_inline_element||x.is_unformatted||v.print_newline(!1),this._calcluate_parent_multiline(v,x))}else if(x.is_end_tag){var C=!1;C=x.start_tag_token&&x.start_tag_token.multiline_content,C=C||!x.is_inline_element&&!(b.is_inline_element||b.is_unformatted)&&!(w.type===r.TAG_CLOSE&&x.start_tag_token===b)&&w.type!=="TK_CONTENT",(x.is_content_unformatted||x.is_unformatted)&&(C=!1),C&&v.print_newline(!1)}else x.indent_content=!x.custom_beautifier_name,x.tag_start_char==="<"&&(x.tag_name==="html"?x.indent_content=this._options.indent_inner_html:x.tag_name==="head"?x.indent_content=this._options.indent_head_inner_html:x.tag_name==="body"&&(x.indent_content=this._options.indent_body_inner_html)),!(x.is_inline_element||x.is_unformatted)&&(w.type!=="TK_CONTENT"||x.is_content_unformatted)&&v.print_newline(!1),this._calcluate_parent_multiline(v,x)},f.prototype._calcluate_parent_multiline=function(v,g){g.parent&&v._output.just_added_newline()&&!((g.is_inline_element||g.is_unformatted)&&g.parent.is_inline_element)&&(g.parent.multiline_content=!0)};var m=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],_=["a","audio","del","ins","map","noscript","video"];return f.prototype._do_optional_end_element=function(v){var g=null;if(!(v.is_empty_element||!v.is_start_tag||!v.parent)){if(v.tag_name==="body")g=g||this._tag_stack.try_pop("head");else if(v.tag_name==="li")g=g||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(v.tag_name==="dd"||v.tag_name==="dt")g=g||this._tag_stack.try_pop("dt",["dl"]),g=g||this._tag_stack.try_pop("dd",["dl"]);else if(v.parent.tag_name==="p"&&m.indexOf(v.tag_name)!==-1){var x=v.parent.parent;(!x||_.indexOf(x.tag_name)===-1)&&(g=g||this._tag_stack.try_pop("p"))}else v.tag_name==="rp"||v.tag_name==="rt"?(g=g||this._tag_stack.try_pop("rt",["ruby","rtc"]),g=g||this._tag_stack.try_pop("rp",["ruby","rtc"])):v.tag_name==="optgroup"?g=g||this._tag_stack.try_pop("optgroup",["select"]):v.tag_name==="option"?g=g||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):v.tag_name==="colgroup"?g=g||this._tag_stack.try_pop("caption",["table"]):v.tag_name==="thead"?(g=g||this._tag_stack.try_pop("caption",["table"]),g=g||this._tag_stack.try_pop("colgroup",["table"])):v.tag_name==="tbody"||v.tag_name==="tfoot"?(g=g||this._tag_stack.try_pop("caption",["table"]),g=g||this._tag_stack.try_pop("colgroup",["table"]),g=g||this._tag_stack.try_pop("thead",["table"]),g=g||this._tag_stack.try_pop("tbody",["table"])):v.tag_name==="tr"?(g=g||this._tag_stack.try_pop("caption",["table"]),g=g||this._tag_stack.try_pop("colgroup",["table"]),g=g||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(v.tag_name==="th"||v.tag_name==="td")&&(g=g||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),g=g||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return v.parent=this._tag_stack.get_parser_token(),g}},LT.Beautifier=f,LT}var aW;function hlt(){if(aW)return o_.exports;aW=1;var t=clt().Beautifier,e=ote().Options;function n(r,i,s,o){var a=new t(r,i,s,o);return a.beautify()}return o_.exports=n,o_.exports.defaultOptions=function(){return new e},o_.exports}var lW;function flt(){if(lW)return Ap;lW=1;var t=alt(),e=ult(),n=hlt();function r(i,s,o,a){return o=o||t,a=a||e,n(i,s,o,a)}return r.defaultOptions=n.defaultOptions,Ap.js=t,Ap.css=e,Ap.html=r,Ap}(function(t){function e(n,r,i){var s=function(o,a){return n.js_beautify(o,a)};return s.js=n.js_beautify,s.css=r.css_beautify,s.html=i.html_beautify,s.js_beautify=n.js_beautify,s.css_beautify=r.css_beautify,s.html_beautify=i.html_beautify,s}(function(n){var r=flt();r.js_beautify=r.js,r.css_beautify=r.css,r.html_beautify=r.html,n.exports=e(r,r,r)})(t)})(rlt);var w2=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),dlt=new TextDecoder("utf-8"),uW=t=>w2(void 0,null,function*(){let e="";if("pipeTo"in t){const n=new WritableStream({write(r){e+=dlt.decode(r)}});yield t.pipeTo(n)}else throw new Error("For some reason, the Node version of `react-dom/server` has been imported instead of the browser one.",{cause:{stream:t}});return e}),ate=(t,e)=>w2(void 0,null,function*(){const{default:n}=yield Dc(()=>Promise.resolve().then(()=>Wat),void 0);let r;return Object.hasOwn(n,"renderToReadableStream")?r=yield uW(yield n.renderToReadableStream(t)):yield new Promise((o,a)=>{const l=n.renderToPipeableStream(t,{onAllReady(){return w2(this,null,function*(){r=yield uW(l),o()})},onError(u){a(u)}})}),`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">${r.replace(/<!DOCTYPE.*?>/,"")}`}),sd={},plt=Object.defineProperty,mlt=Object.defineProperties,glt=Object.getOwnPropertyDescriptors,cW=Object.getOwnPropertySymbols,ylt=Object.prototype.hasOwnProperty,vlt=Object.prototype.propertyIsEnumerable,hW=(t,e,n)=>e in t?plt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Np=(t,e)=>{for(var n in e||(e={}))ylt.call(e,n)&&hW(t,n,e[n]);if(cW)for(var n of cW(e))vlt.call(e,n)&&hW(t,n,e[n]);return t},_lt=(t,e)=>mlt(t,glt(e)),At=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),xlt="3.5.0",blt=class{constructor(t){this.resend=t}create(t){return At(this,arguments,function*(e,n={}){return yield this.resend.post("/api-keys",e,n)})}list(){return At(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(t){return At(this,null,function*(){return yield this.resend.delete(`/api-keys/${t}`)})}},wlt=class{constructor(t){this.resend=t}create(t){return At(this,arguments,function*(e,n={}){return yield this.resend.post("/audiences",e,n)})}list(){return At(this,null,function*(){return yield this.resend.get("/audiences")})}get(t){return At(this,null,function*(){return yield this.resend.get(`/audiences/${t}`)})}remove(t){return At(this,null,function*(){return yield this.resend.delete(`/audiences/${t}`)})}},Slt=class{constructor(t){this.resend=t}send(t){return At(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return At(this,arguments,function*(e,n={}){for(const i of e)i.react&&(i.html=yield ate(i.react),delete i.react);return yield this.resend.post("/emails/batch",e,n)})}},klt=class{constructor(t){this.resend=t}create(t){return At(this,arguments,function*(e,n={}){return yield this.resend.post(`/audiences/${e.audienceId}/contacts`,{unsubscribed:e.unsubscribed,email:e.email,first_name:e.firstName,last_name:e.lastName},n)})}list(t){return At(this,null,function*(){return yield this.resend.get(`/audiences/${t.audienceId}/contacts`)})}get(t){return At(this,null,function*(){return yield this.resend.get(`/audiences/${t.audienceId}/contacts/${t.id}`)})}update(t){return At(this,null,function*(){return yield this.resend.patch(`/audiences/${t.audienceId}/contacts/${t.id}`,{unsubscribed:t.unsubscribed,first_name:t.firstName,last_name:t.lastName})})}remove(t){return At(this,null,function*(){return yield this.resend.delete(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`)})}},Clt=class{constructor(t){this.resend=t}create(t){return At(this,arguments,function*(e,n={}){return yield this.resend.post("/domains",e,n)})}list(){return At(this,null,function*(){return yield this.resend.get("/domains")})}get(t){return At(this,null,function*(){return yield this.resend.get(`/domains/${t}`)})}update(t){return At(this,null,function*(){return yield this.resend.patch(`/domains/${t.id}`,{click_tracking:t.clickTracking,open_tracking:t.openTracking,tls:t.tls})})}remove(t){return At(this,null,function*(){return yield this.resend.delete(`/domains/${t}`)})}verify(t){return At(this,null,function*(){return yield this.resend.post(`/domains/${t}/verify`)})}},Tlt=class{constructor(t){this.resend=t}send(t){return At(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return At(this,arguments,function*(e,n={}){return e.react&&(e.html=yield ate(e.react),delete e.react),yield this.resend.post("/emails",e,n)})}get(t){return At(this,null,function*(){return yield this.resend.get(`/emails/${t}`)})}},fW="https://api.resend.com",dW=`resend-node:${xlt}`,$lt=typeof process<"u"&&sd&&sd.RESEND_BASE_URL||fW,Elt=typeof process<"u"&&sd&&sd.RESEND_USER_AGENT||dW,Ilt=class{constructor(t){if(this.key=t,this.apiKeys=new blt(this),this.audiences=new wlt(this),this.batch=new Slt(this),this.contacts=new klt(this),this.domains=new Clt(this),this.emails=new Tlt(this),!t&&(typeof process<"u"&&sd&&(this.key=sd.RESEND_API_KEY),!this.key))throw new Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":Elt,"Content-Type":"application/json"})}fetchRequest(t){return At(this,arguments,function*(e,n={}){try{const r=yield fetch(`${$lt}${e}`,n);if(!r.ok)try{const s=yield r.text();return{data:null,error:JSON.parse(s)}}catch(s){if(s instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};const o={message:r.statusText,name:"application_error"};return s instanceof Error?{data:null,error:_lt(Np({},o),{message:s.message})}:{data:null,error:o}}return{data:yield r.json(),error:null}}catch{return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(t,e){return At(this,arguments,function*(n,r,i={}){const s=Np({method:"POST",headers:this.headers,body:JSON.stringify(r)},i);return this.fetchRequest(n,s)})}get(t){return At(this,arguments,function*(e,n={}){const r=Np({method:"GET",headers:this.headers},n);return this.fetchRequest(e,r)})}put(t,e){return At(this,arguments,function*(n,r,i={}){const s=Np({method:"PUT",headers:this.headers,body:JSON.stringify(r)},i);return this.fetchRequest(n,s)})}patch(t,e){return At(this,arguments,function*(n,r,i={}){const s=Np({method:"PATCH",headers:this.headers,body:JSON.stringify(r)},i);return this.fetchRequest(n,s)})}delete(t,e){return At(this,null,function*(){const n={method:"DELETE",headers:this.headers,body:JSON.stringify(e)};return this.fetchRequest(t,n)})}};const Alt=new Ilt("re_123456789"),Olt=ree("https://llkaqzcdzyhjjdglgjrq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxsa2FxemNkenloampkZ2xnanJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDAyMDI5MzQsImV4cCI6MjA1NTc3ODkzNH0.kez0p6gQFXEXu2d72emR9p-ED4Mxs3EzQxU8EURv6nc");async function Nlt(t){try{const{data:e}=await Olt.from("alert_subscribers").select("email");if(!(e!=null&&e.length))return;const n=e.map(r=>Alt.emails.send({from:"alerts@powergrid.com",to:r.email,subject:`Power Grid Alert: ${t.type.toUpperCase()}`,html:`
          <div style="font-family: system-ui, sans-serif; padding: 20px;">
            <h2 style="color: ${t.type==="danger"?"#DC2626":t.type==="warning"?"#F59E0B":"#3B82F6"};">
              ${t.type.toUpperCase()} Alert
            </h2>
            <p style="color: #374151;">${t.message}</p>
            <p style="color: #6B7280; font-size: 14px;">
              Detected at ${new Date(t.timestamp).toLocaleString()}
            </p>
          </div>
        `}));await Promise.all(n)}catch(e){console.error("Error sending notifications:",e)}}function Plt(){const[t,e]=J.useState([]),[n,r]=J.useState(null);return J.useEffect(()=>{async function i(){const o=await Ist();o.length>0&&(e(o),r(o[0]))}i();const s=setInterval(i,3e5);return()=>clearInterval(s)},[]),J.useEffect(()=>{DC.filter(s=>s.type==="danger").forEach(s=>{Nlt(s)})},[DC]),n?V.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-6",children:[V.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[V.jsxs("div",{children:[V.jsx(As.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Power Grid Management System"}),V.jsx(As.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-gray-600 dark:text-gray-400",children:"AI-Powered Monitoring and Analytics"})]}),V.jsx(vrt,{})]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[V.jsx(Oi,{title:"Current Load",children:V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:V.jsx(M5,{className:"w-6 h-6 text-blue-500"})}),V.jsxs("div",{children:[V.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[n.load.toFixed(1),"%"]}),V.jsx("p",{className:"text-sm text-gray-500",children:"System Load"})]})]})}),V.jsx(Oi,{title:"Efficiency",children:V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:V.jsx(A5,{className:"w-6 h-6 text-green-500"})}),V.jsxs("div",{children:[V.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[n.efficiency.toFixed(1),"%"]}),V.jsx("p",{className:"text-sm text-gray-500",children:"System Efficiency"})]})]})}),V.jsx(Oi,{title:"Renewable Energy",children:V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:V.jsx(N5,{className:"w-6 h-6 text-yellow-500"})}),V.jsxs("div",{children:[V.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[n.renewable.toFixed(1),"%"]}),V.jsx("p",{className:"text-sm text-gray-500",children:"Of Total Production"})]})]})}),V.jsx(Oi,{title:"Weather Impact",children:V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx("div",{className:"p-3 bg-sky-100 dark:bg-sky-900 rounded-lg",children:V.jsx(P5,{className:"w-6 h-6 text-sky-500"})}),V.jsxs("div",{children:[V.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[(n.weather.impact.solar*100).toFixed(0),"%"]}),V.jsx("p",{className:"text-sm text-gray-500",children:"Solar Efficiency"})]})]})})]}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[V.jsx("div",{className:"lg:col-span-2",children:V.jsx(Oi,{title:"Power Consumption & Production",children:V.jsx(Knt,{data:t})})}),V.jsx(Oi,{title:"Consumption Heatmap",children:V.jsx(Due,{zones:P0})})]}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[V.jsx(Oi,{title:"Grid Map View",className:"lg:col-span-2",children:V.jsx(sMe,{zones:P0})}),V.jsxs("div",{className:"space-y-6",children:[V.jsx(Oi,{title:"Fault Detection",maxHeight:"max-h-[300px]",children:V.jsx(FDe,{zones:P0})}),V.jsx(Oi,{title:"Device Simulator",maxHeight:"max-h-[300px]",children:V.jsx(Mue,{})})]})]}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[V.jsx("div",{className:"lg:col-span-2",children:V.jsx(Oi,{title:"Grid Zones Status",children:V.jsx(oMe,{zones:P0})})}),V.jsxs("div",{className:"space-y-6",children:[V.jsx(Oi,{title:"Weather Impact Analysis",children:V.jsx(_rt,{weather:n.weather})}),V.jsx(Oi,{title:"AI Predictions & Insights",children:V.jsx(yrt,{prediction:n.predictions})}),V.jsx(Oi,{title:"Recent Alerts",maxHeight:"max-h-[300px]",children:V.jsx(Rue,{alerts:DC})})]})]})]}):V.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:V.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}I5(document.getElementById("root")).render(V.jsx(J.StrictMode,{children:V.jsx(Plt,{})}));export{Mt as g};
